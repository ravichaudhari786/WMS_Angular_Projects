!function(){"use strict";function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return t};var t={},i=Object.prototype,o=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(S){c=function(e,t,i){return e[t]=i}}function s(e,t,i,o){var r=t&&t.prototype instanceof m?t:m,n=Object.create(r.prototype),a=new A(o||[]);return n._invoke=function(e,t,i){var o="suspendedStart";return function(r,n){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw n;return R()}for(i.method=r,i.arg=n;;){var a=i.delegate;if(a){var l=C(a,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===o)throw o="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o="executing";var c=u(e,t,i);if("normal"===c.type){if(o=i.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(o="completed",i.method="throw",i.arg=c.arg)}}}(e,i,a),n}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(S){return{type:"throw",arg:S}}}t.wrap=s;var d={};function m(){}function h(){}function f(){}var g={};c(g,n,function(){return this});var p=Object.getPrototypeOf,v=p&&p(p(I([])));v&&v!==i&&o.call(v,n)&&(g=v);var D=f.prototype=m.prototype=Object.create(g);function Z(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){function i(r,n,a,l){var c=u(e[r],e,n);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==typeof d&&o.call(d,"__await")?t.resolve(d.__await).then(function(e){i("next",e,a,l)},function(e){i("throw",e,a,l)}):t.resolve(d).then(function(e){s.value=e,a(s)},function(e){return i("throw",e,a,l)})}l(c.arg)}var r;this._invoke=function(e,o){function n(){return new t(function(t,r){i(e,o,t,r)})}return r=r?r.then(n,n):n()}}function C(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=u(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(o.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:R}}function R(){return{value:void 0,done:!0}}return h.prototype=f,c(D,"constructor",f),c(f,"constructor",h),h.displayName=c(f,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,l,"GeneratorFunction")),e.prototype=Object.create(D),e},t.awrap=function(e){return{__await:e}},Z(y.prototype),c(y.prototype,a,function(){return this}),t.AsyncIterator=y,t.async=function(e,i,o,r,n){void 0===n&&(n=Promise);var a=new y(s(e,i,o,r),n);return t.isGeneratorFunction(i)?a:a.next().then(function(e){return e.done?e.value:a.next()})},Z(D),c(D,l,"Generator"),c(D,n,function(){return this}),c(D,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var o=t.pop();if(o in e)return i.value=o,i.done=!1,i}return i.done=!0,i}},t.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,o){return a.type="throw",a.arg=e,t.next=i,o&&(t.method="next",t.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],a=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var l=o.call(n,"catchLoc"),c=o.call(n,"finallyLoc");if(l&&c){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(l){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var a=n?n.completion:{};return a.type=e,a.arg=t,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),b(i),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var o=i.completion;if("throw"===o.type){var r=o.arg;b(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:I(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),d}},t}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkwms_app=self.webpackChunkwms_app||[]).push([[866],{32866:function(i,r,n){n.r(r),n.d(r,{AccountsModule:function(){return Y}});var a,l=n(38583),c=n(25239),s=n(66269),u=n(63423),d=n(64762),m=n(3679),h=n(1527),f=(n(52107),n(37716)),g=((a=function(){function e(){t(this,e),this.label=""}return o(e,[{key:"agInit",value:function(e){this.params=e,this.label=this.params.label||null}},{key:"refresh",value:function(e){return!0}},{key:"onClick",value:function(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=f.Xpm({type:a,selectors:[["app-additional-service-edit"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"button",0),f.NdJ("click",function(e){return t.onClick(e)}),f._uU(1,"Edit"),f.qZA())},styles:[""]}),a),p=n(99603),v=n(41299),D=n(35618),Z=n(93738),y=n(65939),C=n(88030),T=n(63887);function b(e,t){if(1&e&&(f.TgZ(0,"option",51),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.CustomerID),f.xp6(1),f.hij(" ",i.CustomerName,"")}}function A(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Customer Name is Required "),f.qZA())}function I(e,t){if(1&e&&(f.TgZ(0,"div",52),f.YNc(1,A,2,0,"div",53),f.qZA()),2&e){var i=f.oxw();f.xp6(1),f.Q6J("ngIf",i.form.controls.CustomerID.errors.required)}}function R(e,t){if(1&e&&(f.TgZ(0,"option",51),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.LabourContractorID),f.xp6(1),f.hij(" ",i.ContractorName,"")}}function S(e,t){if(1&e&&(f.TgZ(0,"option",51),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.ServiceID),f.xp6(1),f.hij(" ",i.ServiceName,"")}}function N(e,t){if(1&e&&(f.TgZ(0,"option",51),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.ServiceChargeID),f.xp6(1),f.hij(" ",i.ServiesCharges,"")}}function q(e,t){if(1&e&&(f.TgZ(0,"option",51),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.ProductID),f.xp6(1),f.hij(" ",i.ProductName,"")}}function k(e,t){if(1&e&&(f.TgZ(0,"option",51),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.ServiceID),f.xp6(1),f.hij(" ",i.ServiceName,"")}}var _=function(e){return{"is-invalid":e}},L=function(){return[10,20,50,100,500]},x=function(){var i=function(){function i(e,o,r){t(this,i),this.fb=e,this.api=o,this.dialog=r,this.submitted=!1,this.show=!1,this.tab=0,this.tab2=0,this.tab3=0,this.ServiceChargeID=0,this.labourChargeDetail=[],this.DetailList=[],this.COSTDid=0,this.CONSTDid=0,this.serviceDetailId=0,this.AdditionalServicesID=0,this.AdditionalServiceDID=0,this.getserviceCharge=[],this.getserviceDetail=[],this.UnitNameData=[],this.serviceListData=[],this.ServiceListDetail=[],this.flag=!1,this.modename="",this.ServiceDetailsColumn=[{header:"AdditionalServiceDID",field:"AdditionalServiceDID",minWidth:170,hide:!1},{header:"AdditionalServiceID",field:"AdditionalServiceID",hide:!0,minWidth:250},{header:"ServiceID",field:"ServiceID",hide:!0,minWidth:170},{header:"ServiceName",field:"ServiceName",minWidth:170},{header:"Quantity",field:"Quantity",minWidth:170},{header:"Description",field:"Description",minWidth:170},{header:"StartTime",field:"StartTime",minWidth:120},{header:"EndTime",field:"EndTime",minWidth:120},{header:"TruckNo",field:"TruckNo",minWidth:120},{header:"ContainerNo",field:"ContainerNo",minWidth:120},{header:"PerUnitCharges",field:"PerUnitCharges",minWidth:120},{header:"Charges",field:"Charges",minWidth:120},{header:"Remarks",field:"Remarks",minWidth:120},{header:"LabourContractorID",field:"LabourContractorID",minWidth:120,hide:!0},{header:"LabourContractor",field:"LabourContractor",minWidth:120}],this.LabourChargesColumn=[{headerName:"AdditionalServiceChargeID",field:"AdditionalServiceChargeID",minWidth:170,hide:!1},{headerName:"AdditionalServiceDID",field:"AdditionalServiceDID",hide:!0,minWidth:250},{headerName:"ServiceID",field:"ServiceID",hide:!0,minWidth:170},{headerName:"ServiceName",field:"ServiceName",minWidth:170},{headerName:"ProductID",field:"ProductID",minWidth:170,hide:!0},{headerName:"ProductName",field:"ProductName",minWidth:170},{headerName:"Quantity",field:"Quantity",minWidth:120},{headerName:"Rate",field:"Rate",minWidth:120},{headerName:"Rate_L",field:"Rate_L",minWidth:120},{headerName:"Remarks",field:"Remarks",minWidth:120}],this.AdditionalServicesDataColumn=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.editAdditionalServicesData.bind(this),label:"Click 1"}},{headerName:"AdditionalServiceID",field:"AdditionalServiceID",sortable:!0,minWidth:80,hide:!0},{headerName:"CustomerID",field:"CustomerID",sortable:!0,hide:!0},{headerName:"CustomerName",field:"CustomerName",filter:"agTextColumnFilter",floatingFilter:!0,sortable:!0,minWidth:150},{headerName:"BillDate",field:"BillDate",sortable:!0,filter:"agTextColumnFilter",floatingFilter:!0,minWidth:150},{headerName:"BillNumber",field:"BillNumber",sortable:!0,filter:"agTextColumnFilter",floatingFilter:!0,minWidth:80},{headerName:"Remarks",field:"Remarks",sortable:!0,filter:"agTextColumnFilter",floatingFilter:!0,minWidth:150}],this.currentUser=this.api.getCurrentUser();var n=new l.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=n,this.productdate=new Date,this.frameworkComponents={buttonRenderer:g}}return o(i,[{key:"ngOnInit",value:function(){this.form=this.fb.group({CustomerID:["",m.kI.required],BillNumber:["",m.kI.required],BillDate:["",m.kI.required],cbLabourContractorID:["",m.kI.required],Remarks:["",m.kI.required],AddonMonthlyBill:!0,cbServiceID:[""],CbUnitName:[""],Quantity:[""],Description:[""],StartTime:[""],EndTime:[""],TruckNo:[""],ContainerNo:[""],PerUnitCharges:[""],Charges:[""],Remarks1:[""],ProductID:[""],Serviceid:[""],Quantitys:[""],Rate:[""],Rate_L:[""],Remarkss:[""]}),this.BindDropdown()}},{key:"BindDropdown",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var i=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.get("/Customer").subscribe(function(e){i.customerList=e},function(e){console.error(e)}),this.api.get("/LabourContracter").subscribe(function(e){i.LabourContractorList=e},function(e){console.error(e)}),this.api.get("/AdditionalService/GetServiceID").subscribe(function(e){i.ServiceidData=e},function(e){console.error(e)}),this.api.get("/AdditionalService/AdditionalServicesList").subscribe(function(e){i.AdditionalServicesData=e},function(e){console.error(e)}),this.api.get("/ProductList").subscribe(function(e){i.productList=e},function(e){console.error(e)}),this.api.get("/AdditionalService/GetServiceIDfor_AddServiceCharges").subscribe(function(e){i.ServiceNameData=e},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"OnServiceSelect",value:function(e){var t=this,i={serviceID:Number(e.target.value),stateID:0,customerID:0,productID:0};this.api.post("/AdditionalService/ServiesCharges_List",i).subscribe(function(e){t.UnitNameData=e,console.log(t.UnitNameData)},function(e){console.error(e)})}},{key:"OnServiceSelectEdit",value:function(e){var t=this,i={serviceID:Number(e),stateID:0,customerID:0,productID:0};this.api.post("/AdditionalService/ServiesCharges_List",i).subscribe(function(e){t.UnitNameData=e,console.log(t.UnitNameData)},function(e){console.error(e)})}},{key:"OnServiceSelectCharges",value:function(e){var t=this;this.api.post("/AdditionalService/GetAdditionalServiceLabourCharges",{serviceID:this.form.value.Serviceid,stateID:0,customerID:this.form.value.CustomerID,productID:this.form.value.ProductID}).subscribe(function(e){t.servicerates=e[0].Rate,console.log(t.servicerates),t.servicerates2=e[0].Rate_L,console.log(t.servicerates2)},function(e){console.error(e)})}},{key:"f",get:function(){return this.form.controls}},{key:"tabchange",value:function(e){this.tab=e}},{key:"tabchange2",value:function(e){this.tab2=e}},{key:"tabchange3",value:function(e){this.tab3=e}},{key:"OnServiceSelectDate",value:function(e){this.show=24==Number(this.form.value.cbServiceID)}},{key:"OnAddDetails",value:function(){var e,t,i=this;if(null==this.form.value.cbServiceID||""==this.form.value.cbServiceID)return this.dialog.alert("Please .... Select Service Name"),void(null===(e=null==document?void 0:document.getElementById("cbServiceID"))||void 0===e||e.focus());if(null==this.form.value.cbLabourContractorID||""==this.form.value.cbLabourContractorID)return this.dialog.alert("Please .... select LabourContractor ...."),void(null===(t=null==document?void 0:document.getElementById("cbLabourContractorID"))||void 0===t||t.focus());if(1==this.flag){var o=this.serviceListData.filter(function(e){return e.AdditionalServiceDID!=i.serviceDetailId});this.serviceListData=o}0==this.flag&&(this.serviceDetailId=this.serviceDetailId+1);var r=this.ServiceidData.filter(function(e){return e.ServiceID==i.form.value.cbServiceID}),n=this.LabourContractorList.filter(function(e){return e.LabourContractorID==i.form.value.cbLabourContractorID});console.log("coServicenames",n),console.log("form",this.form),this.serviceDetailList=[],this.serviceDetailList={AdditionalServiceDID:this.serviceDetailId,AdditionalServiceID:this.AdditionalServicesID,ServiceID:this.form.value.cbServiceID,ServiceName:r[0].ServiceName,Quantity:this.form.value.Quantity,Description:this.form.value.Description,StartTime:this.form.value.StartTime,EndTime:this.form.value.EndTime,TruckNo:this.form.value.TruckNo,ContainerNo:this.form.value.ContainerNo,PerUnitCharges:this.form.value.PerUnitCharges,Charges:this.form.value.Charges,Remarks:this.form.value.Remarks1,LabourContractorID:this.form.value.cbLabourContractorID,LabourContractor:n[0].ContractorName},this.serviceListData.push(this.serviceDetailList),this.ServiceListDetail=this.serviceListData.slice(),console.log("this.serviceDetailList",this.ServiceListDetail),this.form.controls.cbServiceID.reset(),this.form.controls.CbUnitName.reset(),this.form.controls.Quantity.reset(),this.form.controls.Description.reset(),this.form.controls.StartTime.reset(),this.form.controls.EndTime.reset(),this.form.controls.TruckNo.reset(),this.form.controls.ContainerNo.reset(),this.form.controls.PerUnitCharges.reset(),this.form.controls.Charges.reset(),this.form.controls.Remarks1.reset(),this.flag=!1}},{key:"OnAddChargesClick",value:function(){var e,t,i=this;if(null==this.form.value.ProductID||""==this.form.value.ProductID)return this.dialog.alert("Please .... Select Product Name"),void(null===(e=null==document?void 0:document.getElementById("ProductID"))||void 0===e||e.focus());if(null==this.form.value.Serviceid||""==this.form.value.Serviceid)return this.dialog.alert("Please .... select Service ...."),void(null===(t=null==document?void 0:document.getElementById("Serviceid"))||void 0===t||t.focus());if(1==this.flag){var o=this.labourChargeDetail.filter(function(e){return e.AdditionalServiceChargeID!=i.ServiceChargeID});this.labourChargeDetail=o}0==this.flag&&(this.ServiceChargeID=this.ServiceChargeID+1);var r=this.ServiceNameData.filter(function(e){return e.ServiceID==i.form.value.Serviceid}),n=this.productList.filter(function(e){return e.ProductID==i.form.value.ProductID});this.LabourChargesList={AdditionalServiceChargeID:this.ServiceChargeID,AdditionalServiceDID:this.serviceDetailId,ServiceID:this.form.value.Serviceid,ServiceName:r[0].ServiceName,ProductID:this.form.value.ProductID,ProductName:n[0].ProductName,Quantity:this.form.value.Quantitys,Rate:this.form.value.Rate,Rate_L:this.form.value.Rate_L,Remarks:this.form.value.Remarkss},this.DetailList=this.labourChargeDetail,this.DetailList.push(this.LabourChargesList),this.labourChargeDetail=this.DetailList.slice(),console.log("this.LabourChargesList",this.labourChargeDetail),this.form.controls.Serviceid.reset(),this.form.controls.Quantitys.reset(),this.form.controls.Rate.reset(),this.form.controls.Rate_L.reset(),this.form.controls.Remarkss.reset(),this.flag=!1}},{key:"getRowStyle",value:function(e){if(1==e.flag)return{"background-color":"pink"}}},{key:"onSubmit",value:function(e){var t,i=this;if(null==this.form.value.CustomerID||""==this.form.value.CustomerID)return this.dialog.alert("Please .... Select Customer Name"),void(null===(t=null==document?void 0:document.getElementById("CustomerID"))||void 0===t||t.focus());0!=this.ServiceListDetail.length?0!=this.labourChargeDetail.length?(this.modename=0==this.AdditionalServicesID?"New":"Update",this.AdditionalServiceSave={AdditionalServiceID:this.AdditionalServicesID,WarehouseID:this.currentUser.warehouseId,CustomerID:this.form.value.CustomerID,BillDate:this.form.value.BillDate,BillNumber:this.form.value.BillNumber,AddonMonthlyBill:this.form.value.AddonMonthlyBill,Remarks:this.form.value.Remarks,CreatedBy:this.currentUser.userId,Mode:this.modename,LTD_AdditionalServiceCharges:this.labourChargeDetail,LTD_AdditionalServiceDetailS:this.ServiceListDetail},console.log(this.AdditionalServiceSave),this.api.post("/AdditionalService/AdditionalServices_Insert",this.AdditionalServiceSave).subscribe(function(e){i.dialog.this.dialog.alert(e.Table[0].Column1),i.BindDropdown()},function(e){console.error(e)})):this.dialog.alert("Please... Add Labour Service Charges ..!!!"):this.dialog.alert("Please... Add Service Details ..!!!")}},{key:"onRowDblclickedDetail",value:function(e,t){console.log("ssd",e.data),this.OnServiceSelectEdit(null==e.data?"0":e.data[0].ServiceID),this.form.controls.cbServiceID.reset(),this.form.controls.CbUnitName.reset(),this.form.controls.cbLabourContractorID.reset(),this.form.controls.Quantity.reset(),this.form.controls.Description.reset(),this.form.controls.StartTime.reset(),this.form.controls.EndTime.reset(),this.form.controls.TruckNo.reset(),this.form.controls.ContainerNo.reset(),this.form.controls.PerUnitCharges.reset(),this.form.controls.Charges.reset(),this.form.controls.Remarks1.reset(),this.UnitNameData.filter(function(t){return t.ServiceID==e.data[0].ServiceID}),this.form.patchValue({cbServiceID:e.data[0].ServiceID,cbLabourContractorID:e.data[0].LabourContractorID,Quantity:e.data[0].Quantity,Description:e.data[0].Description,StartTime:e.data[0].StartTime,EndTime:e.data[0].EndTime,TruckNo:e.data[0].TruckNo,ContainerNo:e.data[0].ContainerNo,PerUnitCharges:e.data[0].PerUnitCharges,Charges:e.data[0].Charges,Remarks1:e.data[0].Remarks}),this.serviceDetailId=e.data.AdditionalServiceDID,this.flag=!0,console.log("Wprk3333",e.data),this.tab2=0}},{key:"onRowDblclickedCharges",value:function(e){console.log("ssd",e.data),this.form.controls.ProductID.reset(),this.form.controls.Serviceid.reset(),this.form.controls.Quantitys.reset(),this.form.controls.Rate.reset(),this.form.controls.Rate_L.reset(),this.form.controls.Remarkss.reset(),this.form.patchValue({ProductID:e.data.ProductID,ProductName:e.data.ProductName,Serviceid:e.data.ServiceID,Quantitys:e.data.Quantity,Rate:e.data.Rate,Rate_L:e.data.Rate_L,Remarkss:e.data.Remarks}),this.ServiceChargeID=e.data.AdditionalServiceChargeID,this.flag=!0,console.log("Wprk3333",e.data),this.tab3=0}},{key:"editAdditionalServicesData",value:function(e){var t=this;console.log("record",e.rowData.AdditionalServiceID),this.form.reset(),this.AdditionalServicesID=e.rowData.AdditionalServiceID;var i=this.customerList.filter(function(t){return t.CustomerName==e.rowData.CustomerName}),o={AdditionalServiceID:e.rowData.AdditionalServiceID,BillDate:e.rowData.BillDate,BillNumber:e.rowData.BillNumber,CustomerID:null==i[0].CustomerID?0:i[0].CustomerID,cbLabourContractorID:0,AddonMonthlyBill:!0,Remarks:e.rowData.Remarks,cbServiceID:0,CbUnitName:"",Quantity:0,Description:"",StartTime:null,EndTime:null,TruckNo:0,ContainerNo:0,PerUnitCharges:0,Charges:0,Remarks1:"",ProductID:0,Serviceid:0,Quantitys:0,Rate:0,Rate_L:0,Remarkss:""},r={BillDate:e.rowData.BillDate,BillNumber:e.rowData.BillNumber,CustomerID:null==i[0].CustomerID?0:i[0].CustomerID,cbLabourContractorID:0,AddonMonthlyBill:!0,Remarks:e.rowData.Remarks,cbServiceID:0,CbUnitName:"",Quantity:0,Description:"",StartTime:null,EndTime:null,TruckNo:0,ContainerNo:0,PerUnitCharges:0,Charges:0,Remarks1:"",ProductID:0,Serviceid:0,Quantitys:0,Rate:0,Rate_L:0,Remarkss:""};this.api.post("/AdditionalService/Get_AdditionalServiceCharges",o).subscribe(function(e){t.labourChargeDetail=e,console.log("this.labourChargeDetail",t.labourChargeDetail)},function(e){console.error(e)}),this.api.post("/AdditionalService/Get_AdditionalServiceDetail",o).subscribe(function(e){t.ServiceListDetail=e,console.log("this.ServiceListDetail",e)},function(e){console.error(e)}),this.form.setValue(r),this.tab=0}}]),i}();return i.\u0275fac=function(e){return new(e||i)(f.Y36(m.qu),f.Y36(h.sM),f.Y36(p.cP))},i.\u0275cmp=f.Xpm({type:i,selectors:[["app-additional-services"]],decls:186,vars:54,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Additional Services Master"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-4"],[1,"form-group"],["formControlName","CustomerID","id","CustomerID",1,"form-control","form-control-sm",3,"ngClass"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["type","text","formControlName","BillNumber","id","BillNumber","readonly","",1,"form-control","form-control-sm"],["type","datetime-local","formControlName","BillDate","id","BillDate","placeholder","yyyy-MM-dd","name","BillDate",1,"form-control","form-control-rounded",3,"ngModel"],["formControlName","cbLabourContractorID","id","cbLabourContractorID",1,"form-control","form-control-sm"],["type","text","formControlName","Remarks","id","Remarks",1,"form-control","form-control-sm"],["type","checkbox","formControlName","AddonMonthlyBill","id","AddonMonthlyBill",1,"form-check-input",2,"margin-top","30px !important","margin-left","2px !important"],["label","Service Details"],["formControlName","cbServiceID","id","cbServiceID",1,"form-control","form-control-sm",3,"change"],["formControlName","CbUnitName","id","CbUnitName",1,"form-control","form-control-sm"],["type","text","formControlName","Quantity","id","Quantity",1,"form-control","form-control-sm"],["type","text","formControlName","Description","id","Description",1,"form-control","form-control-sm"],["type","text","formControlName","TruckNo","id","TruckNo",1,"form-control","form-control-sm"],["type","text","formControlName","ContainerNo","id","ContainerNo",1,"form-control","form-control-sm"],["type","text","formControlName","PerUnitCharges","id","PerUnitCharges",1,"form-control","form-control-sm"],["type","text","formControlName","Charges","id","Charges",1,"form-control","form-control-sm"],["type","text","formControlName","Remarks1","id","Remarks1",1,"form-control","form-control-sm"],[1,"row","pt-2",3,"hidden"],["type","datetime-local","formControlName","StartTime","id","StartTime","placeholder","yyyy-MM-dd","name","StartTime",1,"form-control","form-control-rounded",3,"ngModel"],["type","datetime-local","formControlName","EndTime","id","EndTime","placeholder","yyyy-MM-dd","name","EndTime",1,"form-control","form-control-rounded",3,"ngModel"],[1,"row"],["type","button",1,"btn","btn-primary","btn-sm",2,"width","90px !important","margin-left","15px !important",3,"click"],["label","Service Details List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","250px",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridlist",""],["label","Labour Service Charges"],["formControlName","ProductID","id","ProductID",1,"form-control","form-control-sm"],["formControlName","Serviceid","id","Serviceid",1,"form-control","form-control-sm",3,"change"],["type","text","formControlName","Quantitys","id","Quantitys",1,"form-control","form-control-sm"],["type","text","formControlName","Rate","id","Rate",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","formControlName","Rate_L","id","Rate_L",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","text","formControlName","Remarkss","id","Remarkss",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","90px !important","margin-left","15px !important",3,"click"],["label","Labour Service Charges List"],[1,"ag-theme-alpine",2,"height","250px",3,"rowData","columnDefs","getRowStyle","rowDoubleClicked"],[1,"col-sm-6"],["type","submit",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important","margin-left","250px !important"],["label","List"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[1,"text-danger"],[4,"ngIf"]],template:function(e,t){if(1&e){var i=f.EpF();f._UZ(0,"breadcrumb"),f.TgZ(1,"div",0),f.TgZ(2,"div",1),f.TgZ(3,"mat-card"),f.TgZ(4,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabchange(e)})("selectedIndexChange",function(e){return t.tab=e}),f.TgZ(5,"mat-tab",3),f.TgZ(6,"form",4),f.NdJ("ngSubmit",function(){return t.onSubmit(t.form)}),f.TgZ(7,"div",5),f.TgZ(8,"div",6),f.TgZ(9,"div",7),f.TgZ(10,"div",8),f.TgZ(11,"label"),f._uU(12,"Customer Name"),f.qZA(),f.TgZ(13,"select",9),f.TgZ(14,"option",10),f._uU(15,"Select"),f.qZA(),f.YNc(16,b,2,2,"option",11),f.qZA(),f.YNc(17,I,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(18,"div",7),f.TgZ(19,"div",8),f.TgZ(20,"label"),f._uU(21,"Bill No"),f.qZA(),f._UZ(22,"input",13),f.qZA(),f.qZA(),f.TgZ(23,"div",7),f.TgZ(24,"div",8),f.TgZ(25,"label"),f._uU(26,"Bill Date"),f.qZA(),f._UZ(27,"input",14),f.ALo(28,"date"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(29,"div",6),f.TgZ(30,"div",7),f.TgZ(31,"div",8),f.TgZ(32,"label"),f._uU(33,"LabourContractor"),f.qZA(),f.TgZ(34,"select",15),f.TgZ(35,"option",10),f._uU(36,"Select"),f.qZA(),f.YNc(37,R,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(38,"div",7),f.TgZ(39,"div",8),f.TgZ(40,"label"),f._uU(41,"Remarks"),f.qZA(),f._UZ(42,"input",16),f.qZA(),f.qZA(),f.TgZ(43,"div",7),f.TgZ(44,"div",8),f.TgZ(45,"label"),f._uU(46,"Add To Monthly Bill"),f.qZA(),f._UZ(47,"input",17),f.qZA(),f.qZA(),f.qZA(),f._UZ(48,"hr"),f.TgZ(49,"h4"),f._uU(50,"Service Details"),f.qZA(),f.TgZ(51,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabchange2(e)})("selectedIndexChange",function(e){return t.tab2=e}),f.TgZ(52,"mat-tab",18),f.TgZ(53,"div",5),f.TgZ(54,"div",6),f.TgZ(55,"div",7),f.TgZ(56,"div",8),f.TgZ(57,"label"),f._uU(58,"Service Name"),f.qZA(),f.TgZ(59,"select",19),f.NdJ("change",function(e){return t.OnServiceSelect(e)})("change",function(e){return t.OnServiceSelectDate(e)}),f.TgZ(60,"option",10),f._uU(61,"Select"),f.qZA(),f.YNc(62,S,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(63,"div",7),f.TgZ(64,"div",8),f.TgZ(65,"label"),f._uU(66,"Unit Name"),f.qZA(),f.TgZ(67,"select",20),f.YNc(68,N,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(69,"div",7),f.TgZ(70,"div",8),f.TgZ(71,"label"),f._uU(72,"Quantity"),f.qZA(),f._UZ(73,"input",21),f.qZA(),f.qZA(),f.qZA(),f.TgZ(74,"div",6),f.TgZ(75,"div",7),f.TgZ(76,"div",8),f.TgZ(77,"label"),f._uU(78,"Description"),f.qZA(),f._UZ(79,"input",22),f.qZA(),f.qZA(),f.TgZ(80,"div",7),f.TgZ(81,"div",8),f.TgZ(82,"label"),f._uU(83,"Truck No"),f.qZA(),f._UZ(84,"input",23),f.qZA(),f.qZA(),f.TgZ(85,"div",7),f.TgZ(86,"div",8),f.TgZ(87,"label"),f._uU(88,"Container No"),f.qZA(),f._UZ(89,"input",24),f.qZA(),f.qZA(),f.qZA(),f.TgZ(90,"div",6),f.TgZ(91,"div",7),f.TgZ(92,"div",8),f.TgZ(93,"label"),f._uU(94,"Per Unit Charges"),f.qZA(),f._UZ(95,"input",25),f.qZA(),f.qZA(),f.TgZ(96,"div",7),f.TgZ(97,"div",8),f.TgZ(98,"label"),f._uU(99,"Charges"),f.qZA(),f._UZ(100,"input",26),f.qZA(),f.qZA(),f.TgZ(101,"div",7),f.TgZ(102,"div",8),f.TgZ(103,"label"),f._uU(104,"Remarks"),f.qZA(),f._UZ(105,"input",27),f.qZA(),f.qZA(),f.qZA(),f.TgZ(106,"div",28),f.TgZ(107,"div",7),f.TgZ(108,"div",8),f.TgZ(109,"label"),f._uU(110,"Start Time"),f.qZA(),f._UZ(111,"input",29),f.ALo(112,"date"),f.qZA(),f.qZA(),f.TgZ(113,"div",7),f.TgZ(114,"div",8),f.TgZ(115,"label"),f._uU(116,"End Time"),f.qZA(),f._UZ(117,"input",30),f.ALo(118,"date"),f.qZA(),f.qZA(),f.qZA(),f._UZ(119,"div",31),f.TgZ(120,"div"),f.TgZ(121,"button",32),f.NdJ("click",function(){return t.OnAddDetails()}),f._uU(122," Add "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(123,"mat-tab",33),f.TgZ(124,"div",34),f.TgZ(125,"mtx-grid",35,36),f.NdJ("dblclick",function(e){f.CHM(i);var o=f.MAs(126);return t.onRowDblclickedDetail(o,e)}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(127,"hr"),f.TgZ(128,"h4"),f._uU(129,"Labour Service Charges"),f.qZA(),f.TgZ(130,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabchange3(e)})("selectedIndexChange",function(e){return t.tab3=e}),f.TgZ(131,"mat-tab",37),f.TgZ(132,"div",5),f.TgZ(133,"div",6),f.TgZ(134,"div",7),f.TgZ(135,"div",8),f.TgZ(136,"label"),f._uU(137,"Product"),f.qZA(),f.TgZ(138,"select",38),f.TgZ(139,"option",10),f._uU(140,"Select "),f.qZA(),f.YNc(141,q,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(142,"div",7),f.TgZ(143,"div",8),f.TgZ(144,"label"),f._uU(145,"Service Name"),f.qZA(),f.TgZ(146,"select",39),f.NdJ("change",function(e){return t.OnServiceSelectCharges(e)}),f.TgZ(147,"option",10),f._uU(148,"Select"),f.qZA(),f.YNc(149,k,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(150,"div",7),f.TgZ(151,"div",8),f.TgZ(152,"label"),f._uU(153,"Quantity"),f.qZA(),f._UZ(154,"input",40),f.qZA(),f.qZA(),f.qZA(),f.TgZ(155,"div",6),f.TgZ(156,"div",7),f.TgZ(157,"div",8),f.TgZ(158,"label"),f._uU(159,"Rate"),f.qZA(),f.TgZ(160,"input",41),f.NdJ("ngModelChange",function(e){return t.servicerates=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(161,"div",7),f.TgZ(162,"div",8),f.TgZ(163,"label"),f._uU(164,"Rate_L"),f.qZA(),f.TgZ(165,"input",42),f.NdJ("ngModelChange",function(e){return t.servicerates2=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(166,"div",7),f.TgZ(167,"div",8),f.TgZ(168,"label"),f._uU(169,"Remarks"),f.qZA(),f._UZ(170,"input",43),f.qZA(),f.qZA(),f.qZA(),f.TgZ(171,"div",6),f.TgZ(172,"div",7),f.TgZ(173,"button",44),f.NdJ("click",function(){return t.OnAddChargesClick()}),f._uU(174," Add "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(175,"mat-tab",45),f.TgZ(176,"div",34),f.TgZ(177,"ag-grid-angular",46),f.NdJ("rowDoubleClicked",function(e){return t.onRowDblclickedCharges(e)}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(178,"div",6),f.TgZ(179,"div",47),f.TgZ(180,"div",8),f.TgZ(181,"button",48),f._uU(182," Save "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(183,"mat-tab",49),f.TgZ(184,"div",34),f._UZ(185,"ag-grid-angular",50),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(4),f.Q6J("selectedIndex",t.tab),f.xp6(2),f.Q6J("formGroup",t.form),f.xp6(7),f.Q6J("ngClass",f.VKq(51,_,t.submitted&&t.f.CustomerID.invalid)),f.xp6(3),f.Q6J("ngForOf",t.customerList),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.form.controls.CustomerID.errors),f.xp6(10),f.Q6J("ngModel",f.xi3(28,42,t.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(10),f.Q6J("ngForOf",t.LabourContractorList),f.xp6(14),f.Q6J("selectedIndex",t.tab2),f.xp6(11),f.Q6J("ngForOf",t.ServiceidData),f.xp6(6),f.Q6J("ngForOf",t.UnitNameData),f.xp6(38),f.Q6J("hidden",!t.show),f.xp6(5),f.Q6J("ngModel",f.xi3(112,45,t.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(6),f.Q6J("ngModel",f.xi3(118,48,t.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(8),f.Q6J("data",t.ServiceListDetail)("columns",t.ServiceDetailsColumn)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(53,L))("pageIndex",0),f.xp6(5),f.Q6J("selectedIndex",t.tab3),f.xp6(11),f.Q6J("ngForOf",t.productList),f.xp6(8),f.Q6J("ngForOf",t.ServiceNameData),f.xp6(11),f.Q6J("ngModel",t.servicerates),f.xp6(5),f.Q6J("ngModel",t.servicerates2),f.xp6(12),f.Q6J("rowData",t.labourChargeDetail)("columnDefs",t.LabourChargesColumn)("getRowStyle",t.getRowStyle),f.xp6(8),f.Q6J("rowData",t.AdditionalServicesData)("columnDefs",t.AdditionalServicesDataColumn)("frameworkComponents",t.frameworkComponents))},directives:[v.L,D.xw,D.yH,Z.a8,y.SP,y.uX,m._Y,m.JL,m.sg,m.EJ,m.JJ,m.u,l.mk,C.oO,m.YN,m.Kr,l.sg,l.O5,m.Fj,m.Wl,T.CM,c.N8],pipes:[l.uU],styles:[""]}),i}();function w(e,t){1&e&&(f.TgZ(0,"div",5),f.TgZ(1,"div",7),f.TgZ(2,"div",8),f._UZ(3,"input",24),f.TgZ(4,"label",15),f._uU(5,"In company Name"),f.qZA(),f.qZA(),f.qZA(),f.qZA())}var M=function(){var e=function(){function e(i,o){t(this,e),this.fb=i,this.api=o,this.tab=0,this.InCompany=!1,this.ListOfBill=[],this.newDynamicSave={},this.ServiceDetailsColumn=[{headerName:"InvoiceID",field:"InvoiceID",hide:!0,minWidth:170},{headerName:"InvoiceNo",field:"InvoiceNo",minWidth:250},{headerName:"InvoiceDate",field:"InvoiceDate",minWidth:170},{headerName:"CustomerName",field:"CustomerName",minWidth:170},{headerName:"InvoiceType",field:"InvoiceType",minWidth:170},{headerName:"WareHouseName",field:"WareHouseName",minWidth:170},{headerName:"InvoiceAmount",field:"InvoiceAmount",minWidth:120}],this.currentUser=this.api.getCurrentUser();var r=new l.uU("en-US").transform(Date(),"yyyy-MM-dd");this.todayDate=r}return o(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({BillDate:["",m.kI.required],FromDate:["",m.kI.required],ToDate:["",m.kI.required],ckStorage:[!0],ckLabour:[!1],ckInCompanyNames:[!1]}),this.SetDates()}},{key:"tabchange",value:function(e){this.tab=e}},{key:"SetDates",value:function(){if(this.currentDate=new Date,this.currentDate.getMonth()+1==1){var e=new Date(this.currentDate.getFullYear()-1,12,0,23,59,59,999),t=new l.uU("en-US").transform(e,"yyyy-MM-dd");this.lastDate=t;var i=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1),o=new l.uU("en-US").transform(i,"yyyy-MM-dd");this.firstDate=o}else{var r=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth(),0,23,59,59,999),n=new l.uU("en-US").transform(r,"yyyy-MM-dd");this.lastDate=n;var a=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1,1),c=new l.uU("en-US").transform(a,"yyyy-MM-dd");this.firstDate=c}}},{key:"OnSaveBillProcess",value:function(){var e=this;if(this.newDynamicSave={},1==this.form.controls.ckStorage.value){var t={BillDate:this.form.controls.BillDate.value,BillStartDate:this.form.controls.FromDate.value,BillEndDate:this.form.controls.ToDate.value,WarehouseID:this.currentUser.warehouseId,CreatedBy:this.currentUser.userId,InCompanyName:this.form.controls.ckInCompanyNames.value,customers:"string",invoiceType:2};console.log(t),this.api.post("/BillProcess/Invoice_Process_storage",t).subscribe(function(t){e.Successdata=t,0==e.Successdata.length?this.dialog.alert("something went wrong ..... "):this.dialog.alert("Storage Bill Process Successfully ..... ")},function(t){console.error(t),e.Result_of_billing(2)})}else if(1==this.form.controls.ckLabour.value){var i={BillDate:this.form.controls.BillDate.value,BillStartDate:this.form.controls.FromDate.value,BillEndDate:this.form.controls.ToDate.value,WarehouseID:this.currentUser.warehouseId,CreatedBy:this.currentUser.userId,InCompanyName:this.form.controls.ckInCompanyNames.value,customers:"string",invoiceType:3};console.log(i),this.api.post("/BillProcess/Invoice_Process_Labour",i).subscribe(function(t){e.Successdata=t,e.Successdata=t,0==e.Successdata.length?this.dialog.alert("something went wrong ..... "):this.dialog.alert("Storage Bill Process Successfully ..... ")},function(t){console.error(t),e.Result_of_billing(3)})}else 0==this.form.controls.ckStorage.value&&0==this.form.controls.ckStorage.value&&this.dialog.alert("Please click atleast one Invoice Type.....")}},{key:"Result_of_billing",value:function(e){var t=this;this.api.post("/BillProcess/Invoice_Process_Validation",{BillDate:this.form.controls.BillDate.value,BillStartDate:this.form.controls.FromDate.value,BillEndDate:this.form.controls.ToDate.value,WarehouseID:this.currentUser.warehouseId,CreatedBy:this.currentUser.userId,InCompanyName:this.form.controls.ckInCompanyNames.value,customers:"string",invoiceType:e}).subscribe(function(e){t.resultdata=e,0==t.resultdata.length?this.dialog.alert("something went wrong ..... "):this.dialog.alert("Bill Process Successfully ..... ")},function(e){console.error(e)})}},{key:"OnResetBillProcess",value:function(){this.SetDates()}},{key:"OnListBillProcess",value:function(){var e=this;this.api.post("/BillProcess/BillProcess_List",{BillDate:"2023-07-05T06:16:58.734Z",BillStartDate:"2023-07-05T06:16:58.734Z",BillEndDate:"2023-07-05T06:16:58.734Z",WarehouseID:this.currentUser.warehouseId,CreatedBy:0,InCompanyName:!0,customers:"string",invoiceType:0}).subscribe(function(t){e.ListOfBill=[],e.ListOfBill=t,console.log(t)},function(e){console.error(e)})}},{key:"isStorageChecked",value:function(e){1==e.target.checked?(this.form.controls.ckLabour.setValue(!1),this.InCompany=!1):(this.form.controls.ckLabour.setValue(!0),this.InCompany=!0)}},{key:"isLabourChecked",value:function(e){1==e.target.checked?(this.form.controls.ckStorage.setValue(!1),this.InCompany=!0):(this.form.controls.ckStorage.setValue(!0),this.InCompany=!1)}},{key:"onRowDblclickedDetail",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Y36(m.qu),f.Y36(h.sM))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-billprocess"]],decls:61,vars:17,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Bill Process"],[3,"formGroup"],[1,"row"],[1,"col-8"],[1,"col"],[1,"form-group"],["type","date","formControlName","BillDate","id","BillDate","placeholder","yyyy-MM-dd","name","BillDate",1,"form-control","form-control-rounded",3,"ngModel"],[1,"col-6"],["type","date","formControlName","FromDate","id","FromDate","placeholder","yyyy-MM-dd","name","FromDate",1,"form-control","form-control-rounded",3,"ngModel"],["type","date","formControlName","ToDate","id","ToDate","placeholder","yyyy-MM-dd","name","ToDate",1,"form-control","form-control-rounded",3,"ngModel"],[1,"col-4"],["type","checkbox","formControlName","ckStorage","id","ckStorage","name","ckStorage",1,"col-4","form-control-sm",3,"change"],[1,"col-8","checkTextclass"],["type","checkbox","formControlName","ckLabour","id","ckLabour","name","ckLabour",1,"col-4","form-control-sm",3,"change"],["class","row",4,"ngIf"],[1,"row",2,"margin-bottom","3%"],[1,"col-3"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"click"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","550px",3,"rowData","columnDefs","rowDoubleClicked"],["label","Bill Reprocess"],["type","checkbox","formControlName","ckInCompanyNames","id","ckInCompanyNames","name","ckInCompanyNames",1,"col-4","form-control-sm"]],template:function(e,t){1&e&&(f._UZ(0,"breadcrumb"),f.TgZ(1,"div",0),f.TgZ(2,"div",1),f.TgZ(3,"mat-card"),f.TgZ(4,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabchange(e)})("selectedIndexChange",function(e){return t.tab=e}),f.TgZ(5,"mat-tab",3),f.TgZ(6,"form",4),f.TgZ(7,"div",5),f.TgZ(8,"div",6),f.TgZ(9,"h4"),f._uU(10,"Bill Dates"),f.qZA(),f.TgZ(11,"div",5),f.TgZ(12,"div",7),f.TgZ(13,"div",8),f.TgZ(14,"label"),f._uU(15,"Bill Date"),f.qZA(),f._UZ(16,"input",9),f.ALo(17,"date"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(18,"div",5),f.TgZ(19,"div",10),f.TgZ(20,"div",8),f.TgZ(21,"label"),f._uU(22,"From Date"),f.qZA(),f._UZ(23,"input",11),f.ALo(24,"date"),f.qZA(),f.qZA(),f.TgZ(25,"div",10),f.TgZ(26,"div",8),f.TgZ(27,"label"),f._uU(28,"To Date"),f.qZA(),f._UZ(29,"input",12),f.ALo(30,"date"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",13),f.TgZ(32,"h4"),f._uU(33,"Invoice Type"),f.qZA(),f.TgZ(34,"div",5),f.TgZ(35,"div",7),f.TgZ(36,"div",8),f.TgZ(37,"input",14),f.NdJ("change",function(e){return t.isStorageChecked(e)}),f.qZA(),f.TgZ(38,"label",15),f._uU(39,"Storage"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(40,"div",5),f.TgZ(41,"div",7),f.TgZ(42,"div",8),f.TgZ(43,"input",16),f.NdJ("change",function(e){return t.isLabourChecked(e)}),f.qZA(),f.TgZ(44,"label",15),f._uU(45,"Labour"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(46,w,6,0,"div",17),f.qZA(),f.qZA(),f._UZ(47,"hr"),f.TgZ(48,"div",18),f.TgZ(49,"div",19),f.TgZ(50,"button",20),f.NdJ("click",function(){return t.OnSaveBillProcess()}),f._uU(51,"Save"),f.qZA(),f.qZA(),f.TgZ(52,"div",19),f.TgZ(53,"button",20),f.NdJ("click",function(){return t.OnListBillProcess()}),f._uU(54,"List"),f.qZA(),f.qZA(),f.TgZ(55,"div",19),f.TgZ(56,"button",20),f.NdJ("click",function(){return t.OnResetBillProcess()}),f._uU(57,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(58,"div",21),f.TgZ(59,"ag-grid-angular",22),f.NdJ("rowDoubleClicked",function(e){return t.onRowDblclickedDetail(e)}),f.qZA(),f.qZA(),f.qZA(),f._UZ(60,"mat-tab",23),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(4),f.Q6J("selectedIndex",t.tab),f.xp6(2),f.Q6J("formGroup",t.form),f.xp6(10),f.Q6J("ngModel",f.xi3(17,8,t.todayDate,"yyyy-MM-dd")),f.xp6(7),f.Q6J("ngModel",f.xi3(24,11,t.firstDate,"yyyy-MM-dd")),f.xp6(6),f.Q6J("ngModel",f.xi3(30,14,t.lastDate,"yyyy-MM-dd")),f.xp6(17),f.Q6J("ngIf",t.InCompany),f.xp6(13),f.Q6J("rowData",t.ListOfBill)("columnDefs",t.ServiceDetailsColumn))},directives:[v.L,D.xw,D.yH,Z.a8,y.SP,y.uX,m._Y,m.JL,m.sg,m.Fj,m.JJ,m.u,m.Wl,l.O5,c.N8],pipes:[l.uU],styles:[".checkTextclass[_ngcontent-%COMP%]{font-size:x-large;vertical-align:top}"]}),e}(),U=n(48923),P=n(94284),B=n(69517),F=["ReceiptRemarkText"];function J(e,t){if(1&e&&(f.TgZ(0,"option",28),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.CustomerID),f.xp6(1),f.Oqu(i.CustomerName)}}function O(e,t){if(1&e&&(f.TgZ(0,"option",28),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.ReceiptTypeID),f.xp6(1),f.hij("",i.ReceiptType," ")}}function Q(e,t){if(1&e&&(f.TgZ(0,"option",28),f._uU(1),f.qZA()),2&e){var i=t.$implicit;f.s9C("value",i.PaymentModeID),f.xp6(1),f.hij(" ",i.PaymentMode," ")}}function E(e,t){if(1&e){var i=f.EpF();f.TgZ(0,"div",29),f.TgZ(1,"h4",30),f._uU(2,"Remarks"),f.qZA(),f.qZA(),f.TgZ(3,"div",31),f.TgZ(4,"div",32),f.TgZ(5,"div",5),f.TgZ(6,"input",17),f.NdJ("ngModelChange",function(e){return f.CHM(i),f.oxw().txtDeleteRemarks=e}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(7,"div",33),f.TgZ(8,"button",34),f.NdJ("click",function(){f.CHM(i);var e=f.oxw(),t=f.MAs(97);return e.onCloseReceiptRemarkText(t)}),f._uU(9,"OK"),f.qZA(),f.qZA()}if(2&e){var o=f.oxw();f.xp6(6),f.Q6J("ngModel",o.txtDeleteRemarks)}}var W=[{path:"AdditionalServices",component:x},{path:"BillProcess",component:M},{path:"Receipt",component:function(){var i=function(){function i(e,o,r,n,a){t(this,i),this.api=e,this.el=o,this.store=r,this.modalService=n,this.dialog=a,this.tab=1,this.customerList=[],this.customer_id=0,this.ReceiptType_ID=0,this.PaymentModes_ID=0,this.PaymentModesList=[],this.ReceiptTypeList=[],this.Receipt_InvoiceList=[],this.RectInvoiceList=[],this.CollectionAmount=0,this.CollectionReferenceNo="",this.CollectionBankName="",this.CollectionBranch="",this.CollectionTDSAmt=0,this.CollectionRemarks="",this.ReceiptDID=0,this.ReceiptID=0,this.CustomerName=[],this.PaymentModeName=[],this.CollectionDetailList=[],this.CollectionDetailSaveList=[],this.DetailList=[],this.flag=!1,this.FinalAmt=0,this.FinalTDS=0,this.ReceiptList=[],this.MyMenus=[],this.config={backdrop:!1,ignoreBackdropClick:!0},this.ReceiptListcolumns=[{headerName:"Action",floatingFilter:!1,maxWidth:150,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnReceiptActions.bind(this)}},{field:"ReceiptID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{field:"ReceiptNo",filter:"agTextColumnFilter",floatingFilter:!0,resizable:!0},{field:"CustomerName",filter:"agTextColumnFilter",floatingFilter:!0},{field:"BankName",filter:"agTextColumnFilter",floatingFilter:!0},{field:"Branch",filter:"agTextColumnFilter",floatingFilter:!0},{field:"CustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{field:"Paid Amount",filter:"agTextColumnFilter",floatingFilter:!0},{field:"TDSAmount",filter:"agTextColumnFilter",floatingFilter:!0},{field:"DiscountAmt",filter:"agTextColumnFilter",floatingFilter:!0},{field:"Total",filter:"agTextColumnFilter",floatingFilter:!0},{field:"WareHouseName",filter:"agTextColumnFilter",floatingFilter:!0},{field:"ReceiptDate",filter:"agTextColumnFilter",floatingFilter:!0},{field:"ReceiptTypeID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{field:"Status",filter:"agTextColumnFilter",floatingFilter:!0},{field:"Cancelled",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0}],this.ReceiptInvoiceListColumns=[{field:"InvoiceID",hide:!0,resizable:!1},{field:"InvoiceNo",resizable:!0},{field:"InvoiceDate",type:"Date"},{field:"InvoiceAmount"},{field:"AmountPaid",cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!1,cellEditorPopupPosition:"defualt",cellStyle:function(e){return e.value>0?{color:"white",backgroundColor:"red"}:{color:"white",backgroundColor:"green"}}},{field:"PaindingAmount"},{field:"TDSAmount",cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!1,cellEditorPopupPosition:"defualt",cellStyle:function(e){return e.value>0?{color:"white",backgroundColor:"red"}:{color:"white",backgroundColor:"green"}}},{field:"DiscountAmount",cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!1,cellEditorPopupPosition:"defualt",cellStyle:function(e){return e.value>0?{color:"white",backgroundColor:"red"}:{color:"white",backgroundColor:"green"}}},{field:"InvoiceType"},{field:"TDSDeductedByCustomer"}],this.CollectionDetailColumns=[{headerName:"ReceiptDID",field:"ReceiptDID",hide:!0},{headerName:"ReceiptID",field:"ReceiptID",hide:!0},{headerName:"CustomerName",field:"CustomerName",hide:!1},{headerName:"ReceipDate",field:"ReceipDate",hide:!1},{headerName:"PaymentModeID",field:"PaymentModeID",hide:!0},{headerName:"PaymentMode",field:"PaymentMode",hide:!1},{headerName:"Amount",field:"Amount",hide:!1},{headerName:"TDSAmount",field:"TDSAmount",hide:!1},{headerName:"ReferenceNo",field:"ReferenceNo",hide:!1},{headerName:"BankName",field:"BankName",hide:!1},{headerName:"Branch",field:"Branch",hide:!1},{headerName:"ReferenceDate",field:"ReferenceDate",hide:!1},{headerName:"Remarks",field:"Remarks",hide:!1}],this.frameworkComponents={buttonRenderer:U.J}}return o(i,[{key:"ngOnInit",value:function(){this.MyMenus=this.api.getCurrentMenusForButton("Receipt"),this.currentUser=this.api.getCurrentUser(),this.BindDropdown();var e=new l.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.CollectionReferenceDate=e,this.Receipt_date=e,this.OnReceiptLists()}},{key:"BindDropdown",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var i=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.get("/Customer").subscribe(function(e){i.customerList=[],i.customerList=e,i.customer_id=0},function(e){console.error(e)}),this.api.get("/Receipt/ReceiptTypeMasters").subscribe(function(e){i.ReceiptTypeList=[],i.ReceiptTypeList=e,i.ReceiptType_ID=""},function(e){console.error(e)}),this.api.get("/Receipt/PaymentModes").subscribe(function(e){i.PaymentModesList=[],i.PaymentModesList=e,i.PaymentModes_ID=""},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"tabchange",value:function(e){this.tab=e}},{key:"GetCustomerID",value:function(e){var t=this;if(console.log("GetCustomerID=>",this.customer_id),this.customer_id>0){this.CustomerName=[];var i=this.customerList.filter(function(e){return e.CustomerID==t.customer_id});this.CustomerName=i}}},{key:"GetPaymentMode",value:function(e){var t=this;if(console.log("GetCustomerID=>",this.customer_id),this.PaymentModes_ID>0){this.PaymentModeName=[];var i=this.PaymentModesList.filter(function(e){return e.PaymentModeID==t.PaymentModes_ID});this.PaymentModeName=i}}},{key:"GetReceiptType",value:function(e){var t,i=this;if(console.log("GetReceiptType",this.ReceiptType_ID),this.customer_id>0){var o={ReceiptID:0,WarehouseID:this.currentUser.warehouseId,ReceiptDate:0,Amount:0,TDSAmount:0,ReceiptTypeID:Number(this.ReceiptType_ID),CreatedBy:0,remarks:0,customerID:this.customer_id,LTD_ReceiptDetail:[],LTD_ReceiptInvoiceDetail:[]};console.log("Dats",o),this.api.post("/Receipt/Receipt_SelectInvoice",o).subscribe(function(e){i.Receipt_InvoiceList=e,console.log("Receipt_SelectInvoice=>",e)},function(e){console.error(e)})}else this.dialog.alert("Plase Select Customer...!!!!"),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus()}},{key:"OnADD",value:function(){var e=this;if(this.DetailList=[],0==this.flag)this.ReceiptDID=this.ReceiptDID+1;else{var t=this.CollectionDetailList.filter(function(t){return t.ReceiptDID!=e.ReceiptDID});this.CollectionDetailList=t}var i={ReceiptDID:this.ReceiptDID,ReceiptID:this.ReceiptID,CustomerName:this.CustomerName[0].CustomerName,ReceipDate:this.Receipt_date,PaymentModeID:this.PaymentModeName[0].PaymentModeID,PaymentMode:this.PaymentModeName[0].PaymentMode,Amount:this.CollectionAmount,TDSAmount:this.CollectionTDSAmt,ReferenceNo:this.CollectionReferenceNo,BankName:this.CollectionBankName,Branch:this.CollectionBranch,ReferenceDate:this.CollectionReferenceDate,Remarks:this.CollectionRemarks};this.DetailList=this.CollectionDetailList,this.DetailList.push(i),this.CollectionDetailList=[],this.CollectionDetailList=this.DetailList.slice(),console.log("OnADD",this.CollectionDetailList),this.ResetCollectionDetail()}},{key:"ResetCollectionDetail",value:function(){this.PaymentModes_ID=0,this.CollectionAmount=0,this.CollectionReferenceNo="",this.CollectionBankName="",this.CollectionBranch="",this.CollectionTDSAmt=0,this.CollectionRemarks="";var e=new l.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.CollectionReferenceDate=e}},{key:"onReceiptInvoiceCellKeyPress",value:function(e){var t=this;this.CollectionAmount=0,this.CollectionTDSAmt=0,this.Receipt_InvoiceList.length>0&&this.Receipt_InvoiceList.forEach(function(e){t.CollectionAmount=t.CollectionAmount+Number(e.AmountPaid),t.CollectionTDSAmt=t.CollectionTDSAmt+Number(e.TDSAmount)})}},{key:"onCollectionDetailRowDblclicked",value:function(e){this.flag=!0,console.log("testevent",e.data),this.PaymentModes_ID=e.data.PaymentModeID,this.CollectionAmount=e.data.Amount,this.CollectionReferenceNo=e.data.ReferenceNo,this.CollectionBankName=e.data.BankName,this.CollectionBranch=e.data.Branch,this.CollectionTDSAmt=e.data.TDSAmount,this.CollectionRemarks=e.data.Remarks,this.CollectionReferenceDate=e.data.ReferenceDate,this.ReceiptDID=e.data.ReceiptDID,this.ReceiptID=e.data.ReceiptID}},{key:"OnSaveReceipt",value:function(){var e,t,i,o,r,n=this;if(this.CollectionDetailSaveList=[],this.RectInvoiceList=[],0==this.customer_id)this.dialog.alert("Please Select Customers............"),null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus();else if(0==this.ReceiptType_ID)this.dialog.alert("Please Select Receipt Type............"),null===(t=null==document?void 0:document.getElementById("ReceiptType_ID"))||void 0===t||t.focus();else if(null==this.Receipt_date||""==this.Receipt_date)this.dialog.alert("Please Select Receipt Type............"),null===(i=null==document?void 0:document.getElementById("Receipt_date"))||void 0===i||i.focus();else if(0==this.Receipt_InvoiceList.length)this.dialog.alert("Please Enter Invoice Charges............"),null===(o=null==document?void 0:document.getElementById("ReceiptType_ID"))||void 0===o||o.focus();else if(0==this.CollectionDetailList.length)this.dialog.alert("Please Enter Collection Details............"),null===(r=null==document?void 0:document.getElementById("PaymentModes_ID"))||void 0===r||r.focus();else{this.Receipt_InvoiceList.length>0&&this.Receipt_InvoiceList.forEach(function(e){n.FinalAmt=n.FinalAmt+Number(e.AmountPaid),n.FinalTDS=n.FinalTDS+Number(e.TDSAmount),e.AmountPaid>0&&n.RectInvoiceList.push({ReceiptID:n.ReceiptID,InvoiceID:e.InvoiceID,ReceiptAmount:e.AmountPaid,TDSAmount:e.TDSAmount,DiscountAmount:e.DiscountAmount})}),this.CollectionDetailList.length>0&&this.CollectionDetailList.forEach(function(e){n.CollectionDetailSaveList.push({ReceiptDID:e.ReceiptDID,ReceiptID:e.ReceiptID,PaymentModeID:e.PaymentModeID,Amount:e.Amount,TDSAmount:e.TDSAmount,ReferenceNo:e.ReferenceNo,BankName:e.BankName,Branch:e.Branch,ReferenceDate:e.ReferenceDate,Remarks:e.Remarks})});var a={ReceiptID:this.ReceiptID,WarehouseID:this.currentUser.warehouseId,ReceiptDate:this.Receipt_date,Amount:this.FinalAmt,TDSAmount:this.FinalTDS,ReceiptTypeID:this.ReceiptType_ID,CreatedBy:this.currentUser.userId,remarks:"",customerID:this.customer_id,LTD_ReceiptDetail:this.CollectionDetailSaveList,LTD_ReceiptInvoiceDetail:this.RectInvoiceList};this.api.post("/Receipt/Receipt_Insert",a).subscribe(function(e){console.log("Save",e),n.dialog.this.dialog.alert(e.Table[0].Column1),n.OnResetReceipt(),n.OnReceiptLists()},function(e){console.error(e)}),console.log("SaveReceipt",a)}}},{key:"OnResetReceipt",value:function(){this.customer_id=0,this.ResetCollectionDetail(),this.BindDropdown(),this.CollectionDetailSaveList=[],this.RectInvoiceList=[],this.CollectionDetailList=[],this.Receipt_InvoiceList=[],this.ReceiptDID=0,this.ReceiptID=0;var e=new l.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.CollectionReferenceDate=e,this.ReceiptType_ID=0}},{key:"OnReceiptLists",value:function(){var e=this;this.api.get("/Receipt/GetPaymentReceiptList?WarehouseID="+this.currentUser.warehouseId).subscribe(function(t){e.ReceiptList=[],e.ReceiptList=t,console.log("GetPaymentReceiptList",t)},function(e){console.error(e)})}},{key:"OnReceiptActions",value:function(e){var t=this;"Edit"==e.actions?1==e.rowData.Cancelled?this.dialog.alert("Sorry,This Receipt is already cancelled ....!!!"):this.api.post("/Receipt/Receipt_Detail_Edit",{ReceiptID:e.rowData.ReceiptID,WarehouseID:this.currentUser.warehouseId,ReceiptDate:this.Receipt_date,Amount:this.FinalAmt,TDSAmount:this.FinalTDS,ReceiptTypeID:e.rowData.ReceiptTypeID,CreatedBy:this.currentUser.userId,remarks:this.txtDeleteRemarks,customerID:this.customer_id,LTD_ReceiptDetail:this.CollectionDetailSaveList,LTD_ReceiptInvoiceDetail:this.RectInvoiceList}).subscribe(function(e){console.log("editdata",e.Table),console.log("editdata1",e.Table1),t.ReceiptID=e.Table[0].ReceiptID,t.ReceiptType_ID=e.Table[0].ReceiptTypeID,t.Receipt_date=e.Table[0].ReceiptDate,t.PaymentModes_ID=e.Table[0].PaymentModeID,t.CollectionAmount=e.Table[0].Amount,t.CollectionReferenceNo=e.Table[0].ReferenceNo,t.CollectionBankName=e.Table[0].BankName,t.CollectionBranch=e.Table[0].Branch,t.CollectionReferenceDate=e.Table[0].ReferenceDate,t.CollectionTDSAmt=e.Table[0].TDSAmount,t.CollectionRemarks=e.Table[0].Remarks,t.ReceiptDID=e.Table[0].ReceiptDID,t.Receipt_InvoiceList=[],t.Receipt_InvoiceList=e.Table1,t.tab=0,t.flag=!0,t.customer_id=e.Table1[0].CustomerID,t.GetCustomerID(t.customer_id),t.GetPaymentMode(e.Table[0].PaymentModeID)},function(e){console.error(e)}):"Delete"==e.actions&&window.confirm("Are sure you want to delete this Receipt...?")&&(1==e.rowData.Cancelled?this.dialog.alert("Sorry,This Receipt is already cancelled ....!!!"):(this.txtDeleteRemarks="",this.ReceiptID=e.rowData.ReceiptID,this.ReceiptType_ID=e.rowData.ReceiptTypeID,this.modalService.open(this.ReceiptRemarkText,this.config)))}},{key:"onCloseReceiptRemarkText",value:function(e){var t=this;this.modalService.dismissAll(e),this.api.post("/Receipt/Receipt_Cancelled",{ReceiptID:this.ReceiptID,WarehouseID:this.currentUser.warehouseId,ReceiptDate:this.Receipt_date,Amount:this.FinalAmt,TDSAmount:this.FinalTDS,ReceiptTypeID:this.ReceiptType_ID,CreatedBy:this.currentUser.userId,remarks:this.txtDeleteRemarks,customerID:this.customer_id,LTD_ReceiptDetail:this.CollectionDetailSaveList,LTD_ReceiptInvoiceDetail:this.RectInvoiceList}).subscribe(function(e){console.log("Delete",e),t.dialog.this.dialog.alert(e[0]),t.OnReceiptLists()},function(e){console.error(e)})}}]),i}();return i.\u0275fac=function(e){return new(e||i)(f.Y36(h.sM),f.Y36(f.SBq),f.Y36(P.n2),f.Y36(B.FF),f.Y36(p.cP))},i.\u0275cmp=f.Xpm({type:i,selectors:[["app-receipt"]],viewQuery:function(e,t){var i;(1&e&&f.Gf(F,5),2&e)&&(f.iGM(i=f.CRH())&&(t.ReceiptRemarkText=i.first))},decls:98,vars:33,consts:[[1,"container-fluid"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Receipt"],[1,"row","pt-2"],[1,"col-sm-4","col-md-4"],[1,"form-group"],["id","customer_id",1,"form-control","form-control-sm",3,"ngModel","change","ngModelChange"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","ReceiptType_ID",1,"form-control","form-control-sm",3,"ngModel","change","ngModelChange"],["type","datetime-local","id","Receipt_date","placeholder","yyyy-MM-dd","name","Receipt_date",1,"form-control","form-control-rounded",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","gridOptions","cellValueChanged"],[1,"row"],[1,"font-weight-bold"],[1,"col-sm-3","col-md-3"],["id","PaymentModes_ID",1,"form-control","form-control-sm",3,"ngModel","change","ngModelChange"],["type","text",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["type","datetime-local","id","CollectionReferenceDate","placeholder","yyyy-MM-dd","name","CollectionReferenceDate",1,"form-control","form-control-rounded",3,"ngModel","ngModelChange"],[1,"col-sm-2","col-md-2"],[1,"form-group",2,"position","absolute","bottom","5px"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"click"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","gridOptions"],[1,"col-md-3"],["label","Receipt List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents","gridOptions"],["ReceiptRemarkText",""],[3,"value"],[1,"modal-header"],["id","modal-basic-title"],[1,"modal-body"],[1,"col-sm-12","col-md-12"],[1,"modal-footer"],["type","button",1,"btn","btn-info",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"mat-tab-group",1),f.NdJ("selectedIndexChange",function(e){return t.tab=e})("selectedIndexChange",function(e){return t.tabchange(e)}),f.TgZ(2,"mat-tab",2),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"label"),f._uU(7,"Customer Name"),f.qZA(),f.TgZ(8,"select",6),f.NdJ("change",function(e){return t.GetCustomerID(e)})("ngModelChange",function(e){return t.customer_id=e}),f.TgZ(9,"option",7),f._uU(10,"Select"),f.qZA(),f.YNc(11,J,2,2,"option",8),f.qZA(),f.qZA(),f.qZA(),f.TgZ(12,"div",4),f.TgZ(13,"div",5),f.TgZ(14,"label"),f._uU(15,"Receipt Type"),f.qZA(),f.TgZ(16,"select",9),f.NdJ("change",function(e){return t.GetReceiptType(e)})("ngModelChange",function(e){return t.ReceiptType_ID=e}),f.TgZ(17,"option",7),f._uU(18,"Select"),f.qZA(),f.YNc(19,O,2,2,"option",8),f.qZA(),f.qZA(),f.qZA(),f.TgZ(20,"div",4),f.TgZ(21,"div",5),f.TgZ(22,"label"),f._uU(23,"Receipt Date"),f.qZA(),f.TgZ(24,"input",10),f.NdJ("ngModelChange",function(e){return t.Receipt_date=e}),f.ALo(25,"date"),f.qZA(),f.qZA(),f.qZA(),f._UZ(26,"hr"),f.TgZ(27,"div",11),f.TgZ(28,"ag-grid-angular",12),f.NdJ("cellValueChanged",function(e){return t.onReceiptInvoiceCellKeyPress(e)}),f.qZA(),f.qZA(),f.qZA(),f._UZ(29,"hr"),f.TgZ(30,"div",13),f.TgZ(31,"div",11),f.TgZ(32,"p",14),f._uU(33,"Collection Details:"),f.qZA(),f.TgZ(34,"div",13),f.TgZ(35,"div",15),f.TgZ(36,"div",5),f.TgZ(37,"label"),f._uU(38,"Payment Mode"),f.qZA(),f.TgZ(39,"select",16),f.NdJ("change",function(e){return t.GetPaymentMode(e)})("ngModelChange",function(e){return t.PaymentModes_ID=e}),f.TgZ(40,"option",7),f._uU(41,"Select"),f.qZA(),f.YNc(42,Q,2,2,"option",8),f.qZA(),f.qZA(),f.qZA(),f.TgZ(43,"div",15),f.TgZ(44,"div",5),f.TgZ(45,"label"),f._uU(46,"Amount"),f.qZA(),f.TgZ(47,"input",17),f.NdJ("ngModelChange",function(e){return t.CollectionAmount=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(48,"div",15),f.TgZ(49,"div",5),f.TgZ(50,"label"),f._uU(51,"Reference No"),f.qZA(),f.TgZ(52,"input",17),f.NdJ("ngModelChange",function(e){return t.CollectionReferenceNo=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(53,"div",15),f.TgZ(54,"div",5),f.TgZ(55,"label"),f._uU(56,"Bank Name"),f.qZA(),f.TgZ(57,"input",17),f.NdJ("ngModelChange",function(e){return t.CollectionBankName=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(58,"div",15),f.TgZ(59,"div",5),f.TgZ(60,"label"),f._uU(61,"Branch"),f.qZA(),f.TgZ(62,"input",17),f.NdJ("ngModelChange",function(e){return t.CollectionBranch=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(63,"div",15),f.TgZ(64,"div",5),f.TgZ(65,"label"),f._uU(66,"Reference Date"),f.qZA(),f.TgZ(67,"input",18),f.NdJ("ngModelChange",function(e){return t.CollectionReferenceDate=e}),f.ALo(68,"date"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(69,"div",19),f.TgZ(70,"div",5),f.TgZ(71,"label"),f._uU(72,"TDS Amount"),f.qZA(),f.TgZ(73,"input",17),f.NdJ("ngModelChange",function(e){return t.CollectionTDSAmt=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(74,"div",19),f.TgZ(75,"div",5),f.TgZ(76,"label"),f._uU(77,"Remarks"),f.qZA(),f.TgZ(78,"input",17),f.NdJ("ngModelChange",function(e){return t.CollectionRemarks=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(79,"div",19),f.TgZ(80,"div",20),f.TgZ(81,"button",21),f.NdJ("click",function(){return t.OnADD()}),f._uU(82,"ADD"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(83,"div",11),f._UZ(84,"ag-grid-angular",22),f.qZA(),f.qZA(),f._UZ(85,"hr"),f.TgZ(86,"div",13),f.TgZ(87,"div",23),f.TgZ(88,"button",21),f.NdJ("click",function(){return t.OnSaveReceipt()}),f._uU(89,"Save"),f.qZA(),f.qZA(),f.TgZ(90,"div",23),f.TgZ(91,"button",21),f.NdJ("click",function(){return t.OnResetReceipt()}),f._uU(92,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(93,"mat-tab",24),f.TgZ(94,"div",25),f._UZ(95,"ag-grid-angular",26),f.qZA(),f.YNc(96,E,10,1,"ng-template",null,27,f.W1O),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(1),f.Q6J("selectedIndex",t.tab),f.xp6(7),f.Q6J("ngModel",t.customer_id),f.xp6(3),f.Q6J("ngForOf",t.customerList),f.xp6(5),f.Q6J("ngModel",t.ReceiptType_ID),f.xp6(3),f.Q6J("ngForOf",t.ReceiptTypeList),f.xp6(5),f.Q6J("ngModel",t.Receipt_date)("ngModel",f.xi3(25,27,t.Receipt_date,"yyyy-MM-dd hh:mm:ss")),f.xp6(4),f.Q6J("rowData",t.Receipt_InvoiceList)("columnDefs",t.ReceiptInvoiceListColumns)("gridOptions",t.gridOptionsInvoiceList),f.xp6(11),f.Q6J("ngModel",t.PaymentModes_ID),f.xp6(3),f.Q6J("ngForOf",t.PaymentModesList),f.xp6(5),f.Q6J("ngModel",t.CollectionAmount),f.xp6(5),f.Q6J("ngModel",t.CollectionReferenceNo),f.xp6(5),f.Q6J("ngModel",t.CollectionBankName),f.xp6(5),f.Q6J("ngModel",t.CollectionBranch),f.xp6(5),f.Q6J("ngModel",t.CollectionReferenceDate)("ngModel",f.xi3(68,30,t.CollectionReferenceDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(6),f.Q6J("ngModel",t.CollectionTDSAmt),f.xp6(5),f.Q6J("ngModel",t.CollectionRemarks),f.xp6(6),f.Q6J("rowData",t.CollectionDetailList)("columnDefs",t.CollectionDetailColumns)("gridOptions",t.gridOptions),f.xp6(11),f.Q6J("rowData",t.ReceiptList)("columnDefs",t.ReceiptListcolumns)("frameworkComponents",t.frameworkComponents)("gridOptions",t.gridOptionsList))},directives:[y.SP,y.uX,m.EJ,m.JJ,m.On,m.YN,m.Kr,l.sg,m.Fj,c.N8],pipes:[l.uU],styles:[""]}),i}()}],G=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[u.Bz.forChild(W)],u.Bz]}),e}(),Y=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[l.ez,s.m,G,c.sF.withComponents([])]]}),e}()}}])}();