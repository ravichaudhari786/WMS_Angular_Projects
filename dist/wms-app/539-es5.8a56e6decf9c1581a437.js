!function(){"use strict";function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return t};var t={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",n=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,r){return e[t]=r}}function d(e,t,r,o){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),n=new C(o||[]);return a._invoke=function(e,t,r){var o="suspendedStart";return function(i,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw a;return N()}for(r.method=i,r.arg=a;;){var n=r.delegate;if(n){var l=Z(n,r);if(l){if(l===c)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=u(e,t,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===c)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}(e,r,n),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}t.wrap=d;var c={};function m(){}function f(){}function h(){}var g={};s(g,a,function(){return this});var D=Object.getPrototypeOf,p=D&&D(D(w([])));p&&p!==r&&o.call(p,a)&&(g=p);var v=h.prototype=m.prototype=Object.create(g);function I(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function y(e,t){function r(i,a,n,l){var s=u(e[i],e,a);if("throw"!==s.type){var d=s.arg,c=d.value;return c&&"object"==typeof c&&o.call(c,"__await")?t.resolve(c.__await).then(function(e){r("next",e,n,l)},function(e){r("throw",e,n,l)}):t.resolve(c).then(function(e){d.value=e,n(d)},function(e){return r("throw",e,n,l)})}l(s.arg)}var i;this._invoke=function(e,o){function a(){return new t(function(t,i){r(e,o,t,i)})}return i=i?i.then(a,a):a()}}function Z(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,Z(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var o=u(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,c;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function w(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=h,s(v,"constructor",h),s(h,"constructor",f),f.displayName=s(h,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,l,"GeneratorFunction")),e.prototype=Object.create(v),e},t.awrap=function(e){return{__await:e}},I(y.prototype),s(y.prototype,n,function(){return this}),t.AsyncIterator=y,t.async=function(e,r,o,i,a){void 0===a&&(a=Promise);var n=new y(d(e,r,o,i),a);return t.isGeneratorFunction(r)?n:n.next().then(function(e){return e.done?e.value:n.next()})},I(v),s(v,l,"Generator"),s(v,a,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var o=t.pop();if(o in e)return r.value=o,r.done=!1,r}return r.done=!0,r}},t.values=w,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return n.type="throw",n.arg=e,t.next=r,o&&(t.method="next",t.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],n=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var n=a?a.completion:{};return n.type=e,n.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),b(r),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var i=o.arg;b(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:w(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkwms_app=self.webpackChunkwms_app||[]).push([[539],{96539:function(r,i,a){a.r(i),a.d(i,{ProcessModule:function(){return $e}});var n,l=a(66269),s=a(63423),d=a(64762),u=a(3679),c=a(1527),m=a(38583),f=a(37716),h=((n=function(){function e(){t(this,e),this.label=""}return o(e,[{key:"agInit",value:function(e){this.params=e,this.label=this.params.label||null}},{key:"refresh",value:function(e){return!0}},{key:"onClick",value:function(e,t){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data,actions:t})}}]),e}()).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-inward-action-button"]],decls:5,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"button",1),f.NdJ("click",function(e){return t.onClick(e,"Edit")}),f._uU(2,"Edit"),f.qZA(),f.TgZ(3,"button",2),f.NdJ("click",function(e){return t.onClick(e,"Delete")}),f._uU(4,"Delete"),f.qZA(),f.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),n),g=a(99603),D=a(69517),p=a(35618),v=a(93738),I=a(65939),y=a(98295),Z=a(88030),T=a(25239),b=a(63887);function C(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function w(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.DockID),f.xp6(1),f.Oqu(r.DockName)}}function N(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.UserID),f.xp6(1),f.Oqu(r.UserName)}}function A(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.Remarks),f.xp6(1),f.Oqu(r.Remarks)}}function S(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.ProductID),f.xp6(1),f.Oqu(r.ProductName)}}function L(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.BrandID),f.xp6(1),f.Oqu(r.BrandName)}}function x(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.Counts),f.xp6(1),f.Oqu(r.Counts)}}function k(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.StorageAreaTypeID),f.xp6(1),f.hij("",r.ServiceName," ")}}function _(e,t){if(1&e&&(f.TgZ(0,"option",70),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.hij(" ",r.ContractorName,"")}}function q(e,t){if(1&e&&(f.TgZ(0,"option",71),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.Q6J("ngValue",r),f.xp6(1),f.Oqu(r.Remarks)}}function O(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",72),f.TgZ(1,"h4",73),f._uU(2,"Storage Area"),f.qZA(),f.qZA(),f._UZ(3,"br"),f.TgZ(4,"div",23),f.TgZ(5,"div",74),f.TgZ(6,"label"),f._uU(7,"Quantity "),f.qZA(),f._UZ(8,"input",75),f.qZA(),f.TgZ(9,"div",74),f.TgZ(10,"label"),f._uU(11,"AllocatedQty"),f.qZA(),f._UZ(12,"input",76),f.qZA(),f.qZA(),f.TgZ(13,"div",77),f.TgZ(14,"ag-grid-angular",78,79),f.NdJ("cellValueChanged",function(e){return f.CHM(r),f.oxw().onCellKeyPress(e)}),f.qZA(),f.qZA(),f.TgZ(16,"div",80),f.TgZ(17,"button",81),f.NdJ("click",function(){f.CHM(r);var e=f.oxw(),t=f.MAs(191);return e.onSaveStorageArea(t)}),f._uU(18,"ADD"),f.qZA(),f.TgZ(19,"button",82),f.NdJ("click",function(){f.CHM(r);var e=f.oxw(),t=f.MAs(191);return e.oncloseStoragearea(t)}),f._uU(20,"cancel"),f.qZA(),f.qZA()}if(2&e){var o=f.oxw();f.xp6(14),f.Q6J("rowData",o.storageAreaList)("columnDefs",o.columnDefs)}}function F(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",72),f.TgZ(1,"h4",73),f._uU(2,"Customer Contact"),f.qZA(),f.qZA(),f.TgZ(3,"div",77),f._UZ(4,"ag-grid-angular",83),f.qZA(),f.TgZ(5,"div",80),f.TgZ(6,"button",82),f.NdJ("click",function(){f.CHM(r);var e=f.oxw(),t=f.MAs(193);return e.onCloseCustomerContact(t)}),f._uU(7,"cancel"),f.qZA(),f.qZA()}if(2&e){var o=f.oxw();f.xp6(4),f.Q6J("rowData",o.customercontactList)("columnDefs",o.CustomerContactcolumnDefs)("groupIncludeTotalFooter",!0)}}function U(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",72),f.TgZ(1,"h4",73),f._uU(2,"Transporter Details"),f.qZA(),f.TgZ(3,"button",84),f.NdJ("click",function(){return f.CHM(r),f.oxw().onAddTranspoterDetailNewrow()}),f._uU(4,"+"),f.qZA(),f.qZA(),f.TgZ(5,"div",77),f.TgZ(6,"ag-grid-angular",85),f.NdJ("rowClicked",function(e){return f.CHM(r),f.oxw().onRowSelectedTransport(e)}),f.qZA(),f.qZA(),f.TgZ(7,"div",86),f.TgZ(8,"button",87),f.NdJ("click",function(){return f.CHM(r),f.oxw().onRemoveTranspoterDetailNewrow()}),f._uU(9,"-"),f.qZA(),f.TgZ(10,"button",88),f.NdJ("click",function(){f.CHM(r);var e=f.oxw(),t=f.MAs(195);return e.onCloseTransportContact(t)}),f._uU(11,"Cancel"),f.qZA(),f.qZA()}if(2&e){var o=f.oxw();f.xp6(6),f.Q6J("rowData",o.TransportList)("columnDefs",o.TransperdetailcolumnDefs)}}var P=function(e){return{"is-invalid":e}},B=function(){return[10,20,50,100,500]},Q=function(){var r=function(){function r(e,o,i,a,n){var l=this;t(this,r),this.fb=e,this.api=o,this.dialog=i,this.modalService=a,this.el=n,this.collapsed=!1,this.OnAddProductClick=!1,this.InwardID=0,this.ReceiptNo="0",this.DID=0,this.Flag=!1,this.click=!1,this.challanid=0,this.InwardTransportID=0,this.challandid=0,this.closeResult="",this.tab=0,this.config={backdrop:!1,ignoreBackdropClick:!0},this.submitted=!1,this.firstlotno="",this.StorageId=0,this.challanquantity=0,this.allocatedQty=0,this.outquantity=0,this.inprocessquantity=0,this.balancequantity=0,this.transferdid=0,this.focusedRowKey=117,this.servicesid=0,this.ProductRate=0,this.isnew=!0,this.InwardDetailList=[],this.DetailList=[],this.newDynamicInwardDetails={},this.newDynamicInwardtransfer={},this.InwardchargesList=[],this.ChargesList=[],this.InwardTransportList=[],this.TransportList=[],this.InwardshowStorageArea=[],this.InwardshowStorage=[],this.InwardValidateStorage=[],this.storageAreaList=[],this.SaveInward=[],this.SaveInwardlist=[],this.newDynamicSaveInward={},this.GetInwardListJson={},this.InData={},this.InServiceData={},this.BindDropdownData={},this.rowSelection="multiple",this.columnDefs=[{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0},{headerName:"StorageArea",field:"StorageArea",checkboxSelection:!1,filter:"agTextColumnFilter",filterParams:{applyMiniFilterWhileTyping:!0},floatingFilter:!0},{headerName:"Qty",field:"AllocatedQty",aggFunc:"sum",cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!0,cellEditorPopupPosition:"defualt",cellStyle:function(e){return e.value>0?{color:"white",backgroundColor:"blue"}:{color:"black",backgroundColor:"transparent"}}}],this.AppliedStoragecolumnDefs=[{headerName:"InwardDID",field:"InwardDID",hide:!1},{headerName:"LotNo",field:"LotNo",filter:!0},{headerName:"TransporterName",field:"TransporterName",filter:!0},{headerName:"TruckNo",field:"TruckNo",filter:!0},{headerName:"TransporterName",field:"TransporterName",filter:!0},{headerName:"ContainerNo",field:"ContainerNo",filter:!0},{headerName:"Applied Qty",field:"Qty",filter:!0}],this.CustomerContactcolumnDefs=[{headerName:"CustomerContactID",field:"CustomerContactID",hide:!0},{headerName:"Contact Person",field:"ContactPersonName"},{headerName:"Mobile No",field:"MobileNo"},{headerName:"Email ID",field:"EmailID"},{headerName:"Send SMS",field:"SendSMS"},{headerName:"Send Email",field:"SendEmail"}],this.TransperdetailcolumnDefs=[{headerName:"InwardTransportID",field:"InwardTransportID",hide:!0},{headerName:"TransporterName",field:"TransporterName",editable:!0},{headerName:"TruckNo",field:"TruckNo",editable:!0},{headerName:"ContainerNo",field:"ContainerNo",editable:!0}],this.InwardDetailColumns=[{header:"InwardDID",field:"InwardDID",hide:!0},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo"},{header:"BrandID",field:"BrandID",hide:!0},{header:"BrandName",field:"BrandName"},{header:"ItemsInPacket",field:"ItemsInPacket"},{header:"InQuantity",field:"InQuantity"},{header:"MFD Date",field:"MFGDate",hide:!0},{header:"ExpiryDate",field:"ExpDate",hide:!0},{header:"Remarks",field:"Remarks"},{header:"LabourContractorID",field:"LabourContractorID",hide:!0},{header:"LabourContracterName",field:"LabourContracterName"},{header:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0},{header:"StorageAreaType",field:"StorageAreaType"},{header:"SelfLife",field:"SelfLife"},{header:"Country",field:"Country"}],this.serviceColumns=[{field:"Add",cellRenderer:function(e){return l.checkBoxCellEditRenderer(e)},hide:!1,width:10},{field:"InwardDID",hide:!0},{field:"ServiceID",hide:!0,resizable:!0},{field:"ServiceName"},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.AppliedStorageArea=[{header:"Add",field:"Add",hide:!0},{header:"InwardDID",field:"InwardDID",hide:!0},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo",hide:!0},{header:"StorageArea",field:"StorageArea",hide:!0},{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"AllocatedQuantity",field:"AllocatedQuantity",hide:!0},{header:"IsCustomerArea",field:"IsCustomerArea",hide:!0}],this.StorageAreaColumns=[{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"StorageArea",field:"StorageArea",hide:!1},{header:"AllocatedQty",field:"AllocatedQty"}],this.columns=[{minWidth:100,header:"Edit",field:"Edit",pinned:"right",right:"0px",type:"button",buttons:[{type:"icon",text:"edit",icon:"edit",tooltip:"Edit",click:function(e){console.log(e),l.tab=0}}]},{header:"InwardID",field:"InwardID",hide:!1,minWidth:100},{header:"CustomerID",field:"CustomerID",hide:!0},{header:"ReceiptNo",field:"ReceiptNo",minWidth:100},{header:"CustomerName",field:"CustomerName",minWidth:200},{header:"DocID",field:"DocID",minWidth:100},{header:"UnLoadingBy",field:"UnLoadingBy",hide:!0},{header:"InwardDate",field:"InwardDate",minWidth:100},{header:"BillingStartDate",field:"BillingStartDate",minWidth:100},{header:"PersonName",field:"PersonName",minWidth:100},{header:"Remarks",field:"Remarks",minWidth:100},{header:"Status",field:"Status",minWidth:100,hide:!0},{header:"StatusName",field:"StatusName",minWidth:100}],this.columnstest=[{header:"Action",field:"Action",minWidth:105,pinned:"left",type:"button",buttons:[{type:"icon",icon:"edit",tooltip:"Edit",click:function(e){return l.onEditTestListRow(e)}},{color:"warn",type:"icon",icon:"delete",tooltip:"delete",pop:!0,popTitle:"Do you want to delete inward ....!!",popCloseText:"No",popOkText:"Yes",popDescription:"",popCloseColor:"warn",popOkColor:"primary",click:function(e){return l.onDeleteTestListRow(e)}}]},{header:"InwardID",field:"InwardID",hide:!0},{header:"CustomerID",field:"CustomerID",hide:!0},{header:"ReceiptNo",field:"ReceiptNo",minWidth:80},{header:"CustomerName",field:"CustomerName",minWidth:200},{header:"DocID",field:"DocID",hide:!0},{header:"UnLoadingBy",field:"UnLoadingBy",hide:!0},{header:"InwardDate",field:"InwardDate",minWidth:100,type:"date",typeParameter:{format:"dd-MM-yyyy"}},{header:"BillingStartDate",field:"BillingStartDate",minWidth:100,type:"date",typeParameter:{format:"dd-MM-yyyy"},hide:!0},{header:"PersonName",field:"PersonName",minWidth:120},{header:"Status",field:"Status",hide:!0,minWidth:120},{header:"Remarks",field:"Remarks",minWidth:200},{header:"StatusName",field:"StatusName",minWidth:120}],this.columnsInwardList=[{headerName:"Action",floatingFilter:!1,maxWidth:150,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnInwardActions.bind(this)}},{headerName:"InwardID",field:"InwardID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ReceiptNo",field:"ReceiptNo",minWidth:80,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DocID",field:"DocID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"UnLoadingBy",field:"UnLoadingBy",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardDate",field:"InwardDate",minWidth:100,type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BillingStartDate",field:"BillingStartDate",minWidth:100,type:"date",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"PersonName",field:"PersonName",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0}],this.frameworkComponents={buttonRenderer:h},this.currentUser=this.api.getCurrentUser();var s=new m.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=s,this.productdate=new Date,this.form=this.fb.group({customer_id:[null,u.kI.required],challan_no:[null,u.kI.required],dock_name:["",u.kI.required],inward_date:["",u.kI.required],unloading_by:[null,[u.kI.required]],custremarks:[null,u.kI.required],transportername:[null,u.kI.required],truckno:[null,u.kI.required],container_no:[null,u.kI.required],selflife:[null,u.kI.required],product_id:[null,u.kI.required],brand_id:[null,u.kI.required],packetcount:[null,u.kI.required],quantity:[null,u.kI.required],service_id:[null,u.kI.required],mgfdate:[null,u.kI.required],expdate:[null,u.kI.required],labourcontractor_id:[null,u.kI.required],lot_no:[null,u.kI.required],remarks:[null,u.kI.required],country:["",u.kI.required],allocatedQty:[0,u.kI.required]})}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdownData={InwardID:0,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""},this.BindDropdown(),this.inwardservicelist=[],console.log(this.todayDate)}},{key:"BindDropdown",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.get("/Customer").subscribe(function(e){r.customerList=e},function(e){console.error(e)}),this.api.get("/dock").subscribe(function(e){r.dockList=e},function(e){console.error(e)}),this.api.get("/UnloadingBy").subscribe(function(e){r.unloadingList=e},function(e){console.error(e)}),this.api.get("/Remarks").subscribe(function(e){r.remarkList=e.filter(function(e){return 1==e.ProcessID})},function(e){console.error(e)}),this.api.get("/brand").subscribe(function(e){r.brandList=e},function(e){console.error(e)}),this.api.get("/CountInPacket").subscribe(function(e){r.packateCountList=e},function(e){console.error(e)}),this.api.get("/LabourContracter").subscribe(function(e){r.labourContractorList=e},function(e){console.error(e)}),this.api.get("/StorageAreaType/servieceStorageAreaType").subscribe(function(e){r.serviceTypeList=e},function(e){console.error(e)}),this.api.post("/InwardList",this.BindDropdownData).subscribe(function(e){r.InwardList=e},function(e){console.error(e)}),this.api.post("/Inward/GetLotNo",this.BindDropdownData).subscribe(function(e){r.CurrentLotNo=e[0].LotNo},function(e){console.error(e)}),this.api.get("/StorageAreaMaster",this.BindDropdownData).subscribe(function(e){r.storageAreaList=e},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"f",get:function(){return this.form.controls}},{key:"GetCustomerID",value:function(e){console.log("customer_id =",this.form.value.customer_id)}},{key:"GetServicedetail",value:function(){var e=this;this.api.get("/StorageAreaType/servieceStorageAreaType").subscribe(function(t){e.serviceTypeList=t},function(e){console.error(e)})}},{key:"printIconClick",value:function(e){}},{key:"OnApplyClick",value:function(e,t){var r,o;null==this.form.value.customer_id||0==this.form.value.customer_id?(alert("Select Customers ....."),null===(r=null==document?void 0:document.getElementById("customer_id"))||void 0===r||r.focus()):(""==this.form.value.challan_no||null==this.form.value.challan_no)&&(alert("Enter challan No ....."),null===(o=null==document?void 0:document.getElementById("challan_no"))||void 0===o||o.focus())}},{key:"onCustomerContact",value:function(e){var t,r=this;if(null==this.form.value.customer_id||0==this.form.value.customer_id)alert("Select Customers ....."),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus();else{var o={InwardID:0,CustomerID:Number(this.form.value.customer_id),Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""};this.api.post("/Inward/GetCustomerContact",o).subscribe(function(e){r.customercontactList=e},function(e){console.error(e)}),this.modalService.open(e)}}},{key:"onCloseCustomerContact",value:function(e){this.modalService.dismissAll(e)}},{key:"onCloseTransportContact",value:function(e){var t=this.TransportList.filter(function(e){return e.TruckNo.length>0});this.TransportList=t,this.modalService.dismissAll(e)}},{key:"OnTransportAdd",value:function(e){null==this.form.value.truckno||""==this.form.value.truckno?alert("Please .... Enter Truck Number..."):(0==this.TransportList.length?(this.InwardTransportID=1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:this.form.value.transportername,TruckNo:this.form.value.truckno,ContainerNo:this.form.value.container_no}),this.TransportList.slice()):this.InwardTransportID=this.InwardTransportID+1,this.modalService.open(e))}},{key:"onRowSelectedTransport",value:function(e){this.InwardTransportID=e.data.InwardTransportID}},{key:"onRemoveTranspoterDetailNewrow",value:function(){var e=this,t=this.TransportList.filter(function(t){return t.InwardTransportID!=e.InwardTransportID});this.TransportList=t}},{key:"onAddTranspoterDetailNewrow",value:function(){this.InwardTransportID=this.InwardTransportID+1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:"",TruckNo:"",ContainerNo:""});var e=this.TransportList.filter(function(e){return e});this.TransportList=e}},{key:"OnProductSelect",value:function(e){var t=this;this.api.get("/service/InwardService?productID="+this.form.value.product_id+"&customerID="+this.form.value.customer_id).subscribe(function(e){t.inwardservicelist=e,console.log(t.inwardservicelist)},function(e){console.error(e)})}},{key:"OnBrandSelect",value:function(e){}},{key:"OnServiceSelect",value:function(e){var t,r,o=this;return null==this.form.value.customer_id?(alert("Please .... select Customers"),this.form.controls.product_id.reset(),this.form.controls.service_id.reset(),this.inwardservicelist=[],void(null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus())):null==this.form.value.product_id?(alert("Please .... select Product"),this.form.controls.product_id.reset(),this.form.controls.service_id.reset(),this.inwardservicelist=[],void(null===(r=null==document?void 0:document.getElementById("product_id"))||void 0===r||r.focus())):(this.InServiceData={InwardID:0,CustomerID:Number(this.form.value.customer_id),Remarks:"",CreatedBy:0,serviceID:Number(this.form.value.service_id),ProductID:Number(this.form.value.product_id),CompanyId:0,WarehouseId:0,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""},this.api.post("/Inward/GetServiceId",this.InServiceData).subscribe(function(e){o.servicesid=e[0].StorageAreaTypeID},function(e){console.error(e)}),void this.api.post("/Inward/GetInwardProductRate",this.InServiceData).subscribe(function(e){var t;console.log(" mess =>"+e[0].Message),""!==e[0].Message&&(alert(""+e[0].Message),o.form.controls.product_id.reset(),o.form.controls.service_id.reset(),o.inwardservicelist=[],null===(t=null==document?void 0:document.getElementById("product_id"))||void 0===t||t.focus())},function(e){console.error(e)}))}},{key:"OnLabourSelect",value:function(e){}},{key:"onRowDblclicked",value:function(e,t){var r=this;this.Flag=!0,this.GetServicedetail(),console.log(this.InwardTransportList),this.form.controls.product_id.reset(),this.form.controls.brand_id.reset(),this.form.controls.packetcount.reset(),this.form.controls.service_id.reset(),this.form.controls.mgfdate.reset(),this.form.controls.expdate.reset(),this.form.controls.remarks.reset(),this.form.controls.selflife.setValue("0"),this.form.controls.quantity.reset(),this.form.controls.country.setValue(""),this.CurrentLotNo=Number(this.CurrentLotNo)+1,this.form.patchValue({brand_id:e.cellSelection[0].rowData.BrandID,product_id:e.cellSelection[0].rowData.ProductID,packetcount:e.cellSelection[0].rowData.ItemsInPacket,quantity:e.cellSelection[0].rowData.InQuantity,selflife:e.cellSelection[0].rowData.SelfLife,mgfdate:e.cellSelection[0].rowData.MFGDate,expdate:e.cellSelection[0].rowData.ExpDate,lot_no:e.cellSelection[0].rowData.LotNo,country:e.cellSelection[0].rowData.Country,service_id:e.cellSelection[0].rowData.StorageAreaTypeID,labourcontractor_id:e.cellSelection[0].rowData.LabourContractorID}),this.DID=e.cellSelection[0].rowData.InwardDID,this.servicesid=e.cellSelection[0].rowData.ServiceID,this.challanid=e.cellSelection[0].rowData.ChallanID,this.challandid=e.cellSelection[0].rowData.ChallanDID,this.firstlotno=e.cellSelection[0].rowData.FirstLotNo,this.challanquantity=e.cellSelection[0].rowData.ChallanQuantity,this.outquantity=e.cellSelection[0].rowData.OutQuantity,this.inprocessquantity=e.cellSelection[0].rowData.InprocessQuantity,this.transferdid=e.cellSelection[0].rowData.TransferDID,this.isnew=e.cellSelection[0].rowData.IsNew,this.inwardservicelist=[],this.inwardservicelist=this.InwardchargesList.filter(function(t){return t.InwardDID==e.cellSelection[0].rowData.InwardDID}),this.inwardservicelist.forEach(function(e){e.Add=!0}),this.api.get("/service/InwardService?productID="+e.cellSelection[0].rowData.ProductID+"&customerID="+this.form.value.customer_id).subscribe(function(e){r.inwardserviTest=e,r.SetServiceTo_inwardservicelist()},function(e){console.error(e)}),this.GetStorageAreaList();var o=this.InwardshowStorageArea.filter(function(e){return e.InwardDID==r.DID}),i=this.storageAreaList;i.forEach(function(e){return o.forEach(function(t){e.StorageAreaID===t.StorageAreaID&&(e.AllocatedQty=t.StorageQuantity)}),e}),this.storageAreaList=[],this.storageAreaList=i;var a=this.storageAreaList.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e});this.allocatedQty=a,this.form.controls.allocatedQty.setValue(this.allocatedQty)}},{key:"SetServiceTo_inwardservicelist",value:function(){var e=this;if(this.inwardserviTest.length>0){var t=this.inwardservicelist.concat(this.inwardserviTest.filter(function(t){return!e.inwardservicelist.find(function(e){return e.ServiceID==t.ServiceID})}));this.inwardservicelist=t}}},{key:"OnAddClick",value:function(){var e,t,r,o,i,a,n=this;if(this.storageAreaList.length>0&&(this.InwardValidateStorage=this.storageAreaList.filter(function(e){return e.AllocatedQty>0}),this.allocatedQty=this.InwardValidateStorage.length>0?this.InwardValidateStorage.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e}):0),0==this.serviceTypeList.length&&this.GetServicedetail(),0==this.TransportList.length&&(this.InwardTransportID=1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:this.form.value.transportername,TruckNo:this.form.value.truckno,ContainerNo:this.form.value.container_no}),this.TransportList.slice()),null==this.form.value.truckno||""==this.form.value.truckno)return alert("Please .... Enter Truck number"),void(null===(e=null==document?void 0:document.getElementById("truckno"))||void 0===e||e.focus());if(null==this.form.value.product_id)return alert("Please .... select Product"),void(null===(t=null==document?void 0:document.getElementById("product_id"))||void 0===t||t.focus());if(null==this.form.value.quantity)return alert("Please... Enter Quantity ..!!!"),void(null===(r=null==document?void 0:document.getElementById("quantity"))||void 0===r||r.focus());if(null==this.form.value.service_id)return alert("Please... Select Service Type ..!!!"),void(null===(o=null==document?void 0:document.getElementById("service_id"))||void 0===o||o.focus());if(null==this.form.value.labourcontractor_id)return alert("Please... Select labour contractor ..!!!"),void(null===(i=null==document?void 0:document.getElementById("labourcontractor_id"))||void 0===i||i.focus());if(this.form.value.quantity!=this.allocatedQty)return alert("Please... Add storage area quntity ..!!!"),void(null===(a=null==document?void 0:document.getElementById("BtnStorageArea"))||void 0===a||a.focus());if(1==this.Flag){if(0==this.ChargesList.length||0==this.InwardchargesList.length){this.ChargesList=[],this.inwardservicelist.forEach(function(e){1==e.Add&&n.ChargesList.push({InwardDID:n.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.ChargesList.slice();var l=this.storageAreaList.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e});this.allocatedQty=l}else if(0==this.ChargesList.length){var s=this.InwardchargesList.filter(function(e){return e.InwardDID==n.DID});this.ChargesList=s,l=this.storageAreaList.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e}),this.allocatedQty=l}var d=this.InwardDetailList.filter(function(e){return e.InwardDID!=n.DID});this.InwardDetailList=d;var u=this.InwardchargesList.filter(function(e){return e.InwardDID!=n.DID});this.InwardchargesList=u;var c=this.InwardTransportList.filter(function(e){return e.InwardDID!=n.DID});this.InwardTransportList=c;var m=this.InwardshowStorageArea.filter(function(e){return e.InwardDID!=n.DID});this.InwardshowStorageArea=m}else 0==this.Flag&&(this.DID=this.DID+1,this.allocatedQty=0);(null==this.form.value.selflife||""==this.form.value.selflife)&&this.form.controls.selflife.setValue("0"),null==this.form.value.remarks&&(this.form.value.remarks=" "),null==this.form.value.brand_id&&(this.form.value.brand_id=" ");var f=this.brandList.filter(function(e){return e.BrandID==n.form.value.brand_id}),h=this.productList.filter(function(e){return e.ProductID==n.form.value.product_id}),g=this.serviceTypeList.filter(function(e){return e.StorageAreaTypeID==n.form.value.service_id}),D=this.labourContractorList.filter(function(e){return e.LabourContractorID==n.form.value.labourcontractor_id});0==f.length&&f.push({BrandID:0,BrandName:""}),0==g.length&&g.push({BrandID:0,BrandName:""}),this.newDynamicInwardDetails=[],this.DetailList=[],this.newDynamicInwardtransfer=[],this.newDynamicInwardDetails={InwardDID:this.DID,ChallanID:this.challanid,ChallanDID:this.challandid,ProductID:this.form.value.product_id,ProductName:h[0].ProductName,LotNo:this.form.value.lot_no,FirstLotNo:this.firstlotno,BrandID:this.form.value.brand_id,BrandName:f[0].BrandName,ItemsInPacket:this.form.value.packetcount,InQuantity:this.form.value.quantity,ChallanQuantity:this.challanquantity,OutQuantity:this.outquantity,InprocessQuantity:this.inprocessquantity,BalanceQuantity:this.form.value.quantity,MFGDate:this.todayDate,ExpDate:this.todayDate,Remarks:this.form.value.remarks.Remarks,TransferDID:this.transferdid,LabourContractorID:this.form.value.labourcontractor_id,LabourContracterName:D[0].ContractorName,StorageAreaTypeID:this.servicesid,StorageAreaType:g[0].ServiceName,SelfLife:this.form.value.selflife,IsNew:this.isnew,Country:this.form.value.country,ServiceID:this.form.value.service_id},this.DetailList=this.InwardDetailList,this.DetailList.push(this.newDynamicInwardDetails),this.InwardDetailList=this.DetailList.slice(),console.log("this.InwardDetailList",this.InwardDetailList),0==this.ChargesList.length||0==this.InwardchargesList.length?(this.ChargesList=[],this.inwardservicelist.forEach(function(e){1==e.Add&&n.InwardchargesList.push({InwardDID:n.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.InwardchargesList.slice()):(this.ChargesList.forEach(function(e){n.InwardchargesList.push({InwardDID:n.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.InwardchargesList.slice()),this.TransportList.forEach(function(e){n.InwardTransportList.push({InwardDID:n.DID,LotNo:n.form.value.lot_no,TransporterName:null==e.TransporterName?"A":e.TransporterName,TruckNo:null==e.TruckNo?"B":e.TruckNo,ContainerNo:null==e.ContainerNo?"C":e.ContainerNo,Qty:n.form.value.quantity})}),this.InwardchargesList.slice(),this.storageAreaList.forEach(function(e){e.AllocatedQty>0&&n.InwardshowStorageArea.push({InwardDID:n.DID,StorageAreaID:e.StorageAreaID,StorageQuantity:e.AllocatedQty,LotNo:n.form.value.lot_no,IsCustomerAreaSelected:!1})}),this.InwardshowStorageArea.slice(),console.log(this.InwardDetailList),console.log(this.InwardchargesList),console.log(this.InwardTransportList),console.log(this.InwardshowStorageArea),this.form.controls.product_id.reset(),this.form.controls.brand_id.reset(),this.form.controls.packetcount.reset(),this.form.controls.service_id.reset(),this.form.controls.mgfdate.reset(),this.form.controls.expdate.reset(),this.form.controls.remarks.reset(),this.form.controls.selflife.setValue("0"),this.form.controls.quantity.reset(),this.form.controls.country.setValue(""),this.CurrentLotNo=Number(this.CurrentLotNo)+1,this.ChargesList=[],this.inwardservicelist=[],this.storageAreaList=[],this.Flag=!1,this.GetStorageAreaList()}},{key:"GetStorageAreaList",value:function(){var e=this;this.api.get("/StorageAreaMaster?WarehouseID="+this.currentUser.warehouseId).subscribe(function(t){e.storageAreaList=t,e.allocatedQty=0},function(e){console.error(e)})}},{key:"openStorageArea",value:function(e){var t,r=this;if(this.allocatedQty=0,null==this.form.value.quantity||0==this.form.value.quantity)alert("Please .... Enter Quantity"),null===(t=null==document?void 0:document.getElementById("quantity"))||void 0===t||t.focus();else{if(1==this.Flag){var o=this.InwardshowStorageArea.filter(function(e){return e.InwardDID==r.DID}),i=this.storageAreaList;i.forEach(function(e){return o.forEach(function(t){e.StorageAreaID===t.StorageAreaID&&(e.AllocatedQty=t.StorageQuantity)}),e}),this.storageAreaList=[],this.storageAreaList=i;var a=this.storageAreaList.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e});this.allocatedQty=a,this.form.controls.allocatedQty.setValue(this.allocatedQty)}else this.storageAreaList.length>0&&(this.InwardValidateStorage=this.storageAreaList.filter(function(e){return e.AllocatedQty>0}),this.InwardValidateStorage.length>0?(this.allocatedQty=this.InwardValidateStorage.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e}),this.form.controls.allocatedQty.setValue(this.allocatedQty)):(this.allocatedQty=0,this.form.controls.allocatedQty.setValue(this.allocatedQty)));this.modalService.open(e,this.config)}}},{key:"oncloseStoragearea",value:function(e){var t=this.storageAreaList.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e});this.form.value.quantity==t?(this.onStorageGridRefresh(),this.modalService.dismissAll(e),this.allocatedQty=0):(alert("Please, Enter correct Quantity ..."),this.onStorageGridRefresh(),this.modalService.dismissAll(e),this.allocatedQty=0),console.log(this.storageAreaList)}},{key:"onSaveStorageArea",value:function(e){var t=this.storageAreaList.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e});this.form.value.quantity==t?(this.onStorageGridRefresh(),this.modalService.dismissAll(e)):(alert("Please, Enter correct Quantity ..."),this.onStorageGridRefresh(),this.modalService.open(e),this.allocatedQty=0),console.log(this.storageAreaList)}},{key:"onCellKeyPress",value:function(e){this.allocatedQty=0,this.StorageId=e.data.StorageAreaID;var t=this.storageAreaList.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e});this.allocatedQty=t,this.form.value.quantity>=this.allocatedQty?(this.form.controls.allocatedQty.setValue(this.allocatedQty),this.storageAreaList.slice()):(this.storageAreaList.forEach(function(t){t.StorageAreaID==e.data.StorageAreaID&&(t.AllocatedQty=0)}),alert("Please .... enter proper quantity")),this.onStorageGridRefresh()}},{key:"onStorageGridRefresh",value:function(){this.allocatedQty=0;var e=this.storageAreaList.map(function(e){return e.AllocatedQty}).reduce(function(e,t){return t+e});this.allocatedQty=e,this.form.controls.allocatedQty.setValue(this.allocatedQty);var t=this.storageAreaList.filter(function(e){return e});this.storageAreaList=t}},{key:"Ondeleteclick",value:function(e){console.log(e)}},{key:"tabInwardchange",value:function(e){this.tab=e,this.GetInwardList()}},{key:"OnSaveinward",value:function(){var e,t,r,o,i,a=this;return null==this.form.value.customer_id||""==this.form.value.customer_id?(alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus())):null==this.form.value.dock_name||""==this.form.value.dock_name?(alert("Please .... select Dock name ...."),void(null===(t=null==document?void 0:document.getElementById("dock_name"))||void 0===t||t.focus())):null==this.form.value.inward_date?(alert("Please... Enter inward date ..!!!"),void(null===(r=null==document?void 0:document.getElementById("inward_date"))||void 0===r||r.focus())):null==this.form.value.unloading_by?(alert("Please... Select unloading by ..!!!"),void(null===(o=null==document?void 0:document.getElementById("unloading_by"))||void 0===o||o.focus())):null==this.form.value.truckno?(alert("Please... Select truck no ..!!!"),void(null===(i=null==document?void 0:document.getElementById("truckno"))||void 0===i||i.focus())):void(0!=this.InwardDetailList.length?0!=this.InwardshowStorageArea.length?0!=this.InwardTransportList.length?(this.click=!0,this.newDynamicSaveInward={InwardID:this.InwardID,CustomerID:this.form.value.customer_id,CompanyID:this.currentUser.companyId,WarehouseID:this.currentUser.warehouseId,InwardDate:this.form.value.inward_date,Remarks:null==this.form.value.custremarks?"":this.form.value.custremarks,FinancialYearID:this.currentUser.FinantialYearId,UserID:this.currentUser.userId,ReceiptNo:this.ReceiptNo,dockID:this.form.value.dock_name,UnLoadingBy:this.form.value.unloading_by,StorageAreaMasterID:1,InwardDetailModel:this.InwardDetailList,InwardChargesModel:this.InwardchargesList,InwardLocationModel:this.InwardshowStorageArea,InwardTransperModel:this.InwardTransportList},this.api.post("/Inward/SaveInward",this.newDynamicSaveInward).subscribe(function(e){a.dialog.alert(e.Table[0].Column1),a.OnResetInward()},function(e){console.error(e)}),this.GetInwardList(),console.log(this.newDynamicSaveInward)):alert("Please... Add transport Details..!!!"):alert("Please... Add Storage Details ..!!!"):alert("Please... Add Product Details ..!!!"))}},{key:"GetInwardList",value:function(){var e=this;this.GetInwardListJson={CompanyId:this.currentUser.companyId,WarehouseId:this.currentUser.warehouseId,FinantialYearId:this.currentUser.FinantialYearId},this.api.post("/InwardList",this.GetInwardListJson).subscribe(function(t){e.InwardList=t},function(e){console.error(e)})}},{key:"onKeyfilter",value:function(e){var t=this;this.GetInwardListJson={CompanyId:this.currentUser.companyId,WarehouseId:this.currentUser.warehouseId,FinantialYearId:this.currentUser.FinantialYearId},this.api.post("/InwardList",this.GetInwardListJson).subscribe(function(r){t.InwardList=r;var o=e,i=t.InwardList.filter(function(e){return e.CustomerName.toLowerCase().indexOf(o.toLowerCase())>=0||e.BillingStartDate.toLowerCase().indexOf(o.toLowerCase())>=0||e.InwardDate.toLowerCase().indexOf(o.toLowerCase())>=0||e.PersonName.toLowerCase().indexOf(o.toLowerCase())>=0||e.ReceiptNo.toLowerCase().indexOf(o.toLowerCase())>=0||e.StatusName.toLowerCase().indexOf(o.toLowerCase())>=0});t.InwardList=i,console.log(t.InwardList)},function(e){console.error(e)})}},{key:"SetDataTo_Inwardlist",value:function(){var e=this;this.api.get("/InwardList?companyId="+this.currentUser.companyId+"&warehouseId="+this.currentUser.warehouseId+"&finantialYearId="+this.currentUser.FinantialYearId).subscribe(function(t){e.InwardList=[],e.InwardList=t},function(e){console.error(e)})}},{key:"onDeleteTestListRow",value:function(e){if(console.log(e),51==e.Status){var t={InwardID:e.InwardID,CustomerID:Number(e.CustomerID),Remarks:0,CreatedBy:Number(this.currentUser.userId),serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""};console.log(t)}else 52==e.Status||0==e.Status?(console.log("Sorry,Inward is under process. You can't Delete ....!!!"),alert("Sorry,Inward is under process. You can't Delete....!!!")):53==e.Status?(console.log("Sorry,Outward already generated.You can't Delete....!!!"),alert("Sorry,Outward already generated.You can't Delete....!!!")):54==e.Status&&(console.log("Sorry,Inward is already cancelled ....!!!"),alert("Sorry,Inward is already cancelled ....!!!"))}},{key:"OnResetInward",value:function(){this.click=!1,this.form.reset(),this.BindDropdown(),this.InwardTransportID=0;var e=new m.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=e,this.form.controls.inward_date.setValue(this.todayDate),this.InwardDetailList=[],this.customercontactList=[],this.inwardservicelist=[],this.storageAreaList=[],this.TransportList=[],this.GetStorageAreaList(),this.DID=0,this.InwardID=0,this.ReceiptNo="0"}},{key:"onEditTestListRow",value:function(e){var t=this,r=new m.uU("en-US").transform(e.InwardDate,"yyyy-MM-dd hh:mm:ss");51==e.Status?(this.api.post("/Inward/GetCustomerProducts?customerid="+e.CustomerID+"&warehouseid="+this.currentUser.warehouseId).subscribe(function(e){t.productList=e},function(e){console.error(e)}),this.GetStorageAreaList(),this.InData={InwardID:e.InwardID,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:0,WarehouseId:0,FinantialYearId:0,challan:0,StorageAreaMasterID:0,FinancialYear:""},this.api.post("/Inward/GetInwardDetailsByID",this.InData).subscribe(function(o){t.InwardDetailList=o.Table,t.InwardshowStorageArea=o.Table1,t.InwardTransportList=o.Table2,t.InwardchargesList=o.Table3,t.InwardID=e.InwardID,t.InwardTransportID=0,t.ReceiptNo=e.ReceiptNo,t.InwardTransportList.filter(function(e,t,r){return r.findIndex(function(t){return t.TruckNo===e.TruckNo})===t}).forEach(function(e){t.InwardTransportID=t.InwardTransportID+1,t.TransportList.push({InwardTransportID:t.InwardTransportID,TransporterName:null==e.TransporterName?"A":e.TransporterName,TruckNo:null==e.TruckNo?"B":e.TruckNo,ContainerNo:null==e.ContainerNo?"C":e.ContainerNo})}),t.TransportList.slice(),t.form.setValue({customer_id:null==e.CustomerID?"":e.CustomerID,dock_name:e.DocID,challan_no:0,inward_date:r,unloading_by:e.UnLoadingBy,custremarks:e.Remarks,transportername:null==t.InwardTransportList[0].TransporterName?"":t.InwardTransportList[0].TransporterName,truckno:null==t.InwardTransportList[0].TruckNo?"":t.InwardTransportList[0].TruckNo,container_no:null==t.InwardTransportList[0].TruckNo?"":t.InwardTransportList[0].TruckNo,selflife:"0",product_id:0,brand_id:0,packetcount:0,quantity:0,service_id:0,mgfdate:null,expdate:null,labourcontractor_id:0,lot_no:t.CurrentLotNo,remarks:"",country:"",allocatedQty:0})},function(e){console.log(e)}),this.tab=0,console.log(this.InwardTransportList),console.log(this.TransportList)):52==e.Status||0==e.Status?(console.log("Sorry,Inward is under process. You can't edit ....!!!"),alert("Sorry,Inward is under process. You can't edit ....!!!")):53==e.Status?(console.log("Sorry,Outward already generated.You can't edit ....!!!"),alert("Sorry,Outward already generated.You can't edit ....!!!")):54==e.Status&&(console.log("Sorry,Inward is already cancelled ....!!!"),alert("Sorry,Inward is already cancelled ....!!!"))}},{key:"contentReady",value:function(e){this.collapsed||(this.collapsed=!0,e.component.expandRow(["EnviroCare"]))}},{key:"checkBoxCellEditRenderer",value:function(e){var t=this,r=document.createElement("input");return r.type="checkbox",r.value="false",r.checked=e.value,r.addEventListener("click",function(r){e.setValue(1!=e.value),t.ChargesList=[],t.inwardservicelist.forEach(function(e){1==e.Add&&t.ChargesList.push({InwardDID:t.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),t.ChargesList.slice(),console.log(t.ChargesList)}),r}},{key:"OnInwardActions",value:function(e){var t=this;if("Delete"==String(e.actions))if(51==e.rowData.Status){var r={InwardID:e.rowData.InwardID,CustomerID:Number(e.rowData.CustomerID),Remarks:0,CreatedBy:Number(this.currentUser.userId),serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""};console.log(r),this.api.post("/Inward/DeleteInward",r).subscribe(function(e){t.dialog.alert(e.Table[0].message),t.SetDataTo_Inwardlist()},function(e){console.error(e)})}else 52==e.rowData.Status||0==e.rowData.Status?this.dialog.alert("Sorry,Inward is under process. You can't Delete....!!!"):53==e.rowData.Status?this.dialog.alert("Sorry,Outward already generated.You can't Delete....!!!"):54==e.rowData.Status&&this.dialog.alert("Sorry,Inward is already cancelled ....!!!");else if("Edit"==String(e.actions)){var o=new m.uU("en-US").transform(e.rowData.InwardDate,"yyyy-MM-dd hh:mm:ss");51==e.rowData.Status?(this.api.post("/Inward/GetCustomerProducts?customerid="+e.rowData.CustomerID+"&warehouseid="+this.currentUser.warehouseId).subscribe(function(e){t.productList=e},function(e){console.error(e)}),this.GetStorageAreaList(),this.InData={InwardID:e.rowData.InwardID,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:0,WarehouseId:0,FinantialYearId:0,challan:0,StorageAreaMasterID:0,FinancialYear:""},this.api.post("/Inward/GetInwardDetailsByID",this.InData).subscribe(function(r){t.InwardDetailList=r.Table,t.InwardshowStorageArea=r.Table1,t.InwardTransportList=r.Table2,t.InwardchargesList=r.Table3,t.InwardID=e.rowData.InwardID,t.InwardTransportID=0,t.ReceiptNo=e.rowData.ReceiptNo,t.InwardTransportList.filter(function(e,t,r){return r.findIndex(function(t){return t.TruckNo===e.TruckNo})===t}).forEach(function(e){t.InwardTransportID=t.InwardTransportID+1,t.TransportList.push({InwardTransportID:t.InwardTransportID,TransporterName:null==e.TransporterName?"A":e.TransporterName,TruckNo:null==e.TruckNo?"B":e.TruckNo,ContainerNo:null==e.ContainerNo?"C":e.ContainerNo})}),t.TransportList.slice(),t.form.setValue({customer_id:null==e.rowData.CustomerID?"":e.rowData.CustomerID,dock_name:e.rowData.DocID,challan_no:0,inward_date:o,unloading_by:e.rowData.UnLoadingBy,custremarks:e.rowData.Remarks,transportername:null==t.InwardTransportList[0].TransporterName?"":t.InwardTransportList[0].TransporterName,truckno:null==t.InwardTransportList[0].TruckNo?"":t.InwardTransportList[0].TruckNo,container_no:null==t.InwardTransportList[0].TruckNo?"":t.InwardTransportList[0].TruckNo,selflife:"0",product_id:0,brand_id:0,packetcount:0,quantity:0,service_id:0,mgfdate:null,expdate:null,labourcontractor_id:0,lot_no:t.CurrentLotNo,remarks:"",country:"",allocatedQty:0})},function(e){console.log(e)}),this.tab=0):52==e.rowData.Status||0==e.rowData.Status?this.dialog.alert("Sorry,Inward is under process. You can't edit ....!!!"):53==e.rowData.Status?this.dialog.alert("Sorry,Outward already generated.You can't edit ....!!!"):54==e.rowData.Status&&this.dialog.alert("Sorry,Inward is already cancelled ....!!!")}}}]),r}();return r.\u0275fac=function(e){return new(e||r)(f.Y36(u.qu),f.Y36(c.sM),f.Y36(g.cP),f.Y36(D.FF),f.Y36(f.SBq))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-inward"]],decls:222,vars:67,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Inward"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm",3,"change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-2","col-md-2"],["type","text","formControlName","challan_no","id","challan_no","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],[1,"btn","btn-secondary","btn-sm",2,"width","100% !important","margin-top","20px !important",3,"click"],[1,"col-sm-6","col-md-3"],["formControlName","dock_name","id","dock_name",1,"form-control","form-control-sm"],["type","datetime-local","formControlName","inward_date","id","inward_date","placeholder","yyyy-MM-dd","name","inward_date",1,"form-control","form-control-rounded",3,"ngModel"],["formControlName","unloading_by","id","unloading_by",1,"form-control","form-control-sm"],["formControlName","custremarks","id","custremarks",1,"form-control","form-control-sm"],[1,"col-12"],[1,"font-weight-bold"],[1,"row"],[1,"col"],["type","text","formControlName","transportername","id","transportername","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],["type","text","formControlName","truckno","id","truckno","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],["type","text","formControlName","container_no","id","container_no","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],[1,"col-9"],[1,"col-sm-6","col-md-4"],["formControlName","product_id","id","product_id",1,"form-control","form-control-sm",3,"change"],["formControlName","brand_id","id","brand_id",1,"form-control","form-control-sm",3,"change"],["formControlName","packetcount","id","packetcount",1,"form-control","form-control-sm"],["type","text","formControlName","quantity","id","quantity","autocomplete","off","placeholder","","required","",1,"form-control","form-control-sm"],["formControlName","service_id","id","service_id",1,"form-control","form-control-sm",3,"change"],["disabled","",3,"ngValue"],["type","text","formControlName","selflife","id","selflife","placeholder","",1,"form-control","form-control-sm"],["type","date","formControlName","mgfdate","id","mgfdate","placeholder","",1,"form-control","form-control-sm"],["type","date","formControlName","expdate","id","expdate","placeholder","",1,"form-control","form-control-sm"],["formControlName","labourcontractor_id","id","labourcontractor_id",1,"form-control","form-control-sm",3,"change"],["type","text","formControlName","lot_no","id","lot_no","placeholder","","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["formControlName","remarks","id","remarks",1,"form-control","form-control-sm"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","formControlName","country","id","country","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],[1,"col-3"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"id","disabled","click"],["id","BtnStorageArea",1,"btn","btn-secondary","btn-sm",2,"width","100px !important","margin-top","20px !important",3,"click"],[1,"btn","btn-secondary","btn-sm",2,"width","100px !important","margin-top","20px !important"],[1,"btn","btn-secondary","btn-sm",2,"width","105px !important","margin-top","20px !important"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["StorageAreacontent",""],["CustomerContactcontent",""],["style","width:620px;"],["TranspoterDetailcontent",""],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridlist",""],[1,"col-md-6"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"click"],["label","Inward List"],[1,"form-control-sm"],["type","text","id","filtertext",1,"form-control-sm",3,"keyup"],["filtertext",""],[2,"height","800px"],[2,"height","790px",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSize"],["label","Delivery Order List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[3,"ngValue"],[1,"modal-header"],["id","modal-basic-title"],[1,"col-6"],["formControlName","quantity","id","quantity","readonly","",2,"width","50%"],["formControlName","allocatedQty","id","allocatedQty","readonly","",2,"width","50%"],[1,"modal-body"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","cellValueChanged"],["LocationGrid",""],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-info",3,"click"],["rowSelection","multiple",1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","groupIncludeTotalFooter"],["type","button",1,"btn","btn-secondary","btn-lg",3,"click"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","rowClicked"],[1,"modalfooter"],["type","button",1,"btn","btn-danger",2,"float","left","width","60px",3,"click"],["type","button",1,"btn","btn-info",2,"float","right","width","100px",3,"click"]],template:function(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabInwardchange(e)})("selectedIndexChange",function(e){return t.tab=e}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.NdJ("change",function(e){return t.GetCustomerID(e)}),f.TgZ(13,"option",10),f._uU(14,"Select"),f.qZA(),f.YNc(15,C,2,2,"option",11),f.qZA(),f._UZ(16,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",8),f.TgZ(19,"label"),f._uU(20,"Challan No."),f.qZA(),f._UZ(21,"input",14),f.qZA(),f.qZA(),f.TgZ(22,"div",13),f.TgZ(23,"div",8),f.TgZ(24,"button",15),f.NdJ("click",function(){return t.OnApplyClick(t.f.customer_id.value,t.f.challan_no.value)}),f._uU(25," Apply "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(26,"div",13),f.TgZ(27,"div",8),f.TgZ(28,"button",15),f.NdJ("click",function(){f.CHM(r);var e=f.MAs(193);return t.onCustomerContact(e)}),f._uU(29," Contact "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(30,"div",16),f.TgZ(31,"div",8),f.TgZ(32,"label"),f._uU(33,"Dock Name"),f.qZA(),f.TgZ(34,"select",17),f.TgZ(35,"option",10),f._uU(36,"Select "),f.qZA(),f.YNc(37,w,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(38,"div",16),f.TgZ(39,"div",8),f.TgZ(40,"label"),f._uU(41,"Inward Date"),f.qZA(),f._UZ(42,"input",18),f.ALo(43,"date"),f.qZA(),f.qZA(),f.TgZ(44,"div",16),f.TgZ(45,"div",8),f.TgZ(46,"label"),f._uU(47,"Unloading By"),f.qZA(),f.TgZ(48,"select",19),f.TgZ(49,"option",10),f._uU(50,"Select "),f.qZA(),f.YNc(51,N,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(52,"div",16),f.TgZ(53,"div",8),f.TgZ(54,"label"),f._uU(55,"Remarks"),f.qZA(),f.TgZ(56,"select",20),f.TgZ(57,"option",10),f._uU(58,"Select "),f.qZA(),f.YNc(59,A,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(60,"hr"),f.TgZ(61,"div",21),f.TgZ(62,"p",22),f._uU(63,"Transporter Details "),f.qZA(),f.TgZ(64,"div",23),f.TgZ(65,"div",24),f.TgZ(66,"div",23),f.TgZ(67,"div",16),f.TgZ(68,"div",8),f.TgZ(69,"label"),f._uU(70,"Transporter Name"),f.qZA(),f._UZ(71,"input",25),f.qZA(),f.qZA(),f.TgZ(72,"div",16),f.TgZ(73,"div",8),f.TgZ(74,"label"),f._uU(75,"Truck No"),f.qZA(),f._UZ(76,"input",26),f.qZA(),f.qZA(),f.TgZ(77,"div",16),f.TgZ(78,"div",8),f.TgZ(79,"label"),f._uU(80,"Container No"),f.qZA(),f._UZ(81,"input",27),f.qZA(),f.qZA(),f.TgZ(82,"div",16),f.TgZ(83,"div",8),f.TgZ(84,"button",28),f.NdJ("click",function(){f.CHM(r);var e=f.MAs(195);return t.OnTransportAdd(e)}),f._uU(85," Add "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(86,"hr"),f.TgZ(87,"div",21),f.TgZ(88,"p",22),f._uU(89," Inward Details "),f.qZA(),f.TgZ(90,"div",23),f.TgZ(91,"div",29),f.TgZ(92,"div",23),f.TgZ(93,"div",30),f.TgZ(94,"div",8),f.TgZ(95,"label"),f._uU(96,"Product Name"),f.qZA(),f.TgZ(97,"select",31),f.NdJ("change",function(e){return t.OnProductSelect(e)}),f.TgZ(98,"option",10),f._uU(99,"Select "),f.qZA(),f.YNc(100,S,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(101,"div",30),f.TgZ(102,"div",8),f.TgZ(103,"label"),f._uU(104,"Brand Name "),f.qZA(),f.TgZ(105,"select",32),f.NdJ("change",function(e){return t.OnBrandSelect(e)}),f.TgZ(106,"option",10),f._uU(107,"Select "),f.qZA(),f.YNc(108,L,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(109,"div",30),f.TgZ(110,"div",8),f.TgZ(111,"label"),f._uU(112,"Count In Packet"),f.qZA(),f.TgZ(113,"select",33),f.TgZ(114,"option",10),f._uU(115,"Select "),f.qZA(),f.YNc(116,x,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(117,"div",30),f.TgZ(118,"div",8),f.TgZ(119,"label"),f._uU(120,"Quantity"),f.qZA(),f._UZ(121,"input",34),f.qZA(),f.qZA(),f.TgZ(122,"div",30),f.TgZ(123,"div",8),f.TgZ(124,"label"),f._uU(125,"Service Type"),f.qZA(),f.TgZ(126,"select",35),f.NdJ("change",function(e){return t.OnServiceSelect(e)}),f.TgZ(127,"option",36),f._uU(128,"Select "),f.qZA(),f.YNc(129,k,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(130,"div",30),f.TgZ(131,"div",8),f.TgZ(132,"label"),f._uU(133,"Self Life"),f.qZA(),f._UZ(134,"input",37),f.qZA(),f.qZA(),f.TgZ(135,"div",30),f.TgZ(136,"div",8),f.TgZ(137,"label"),f._uU(138,"Mfg Date"),f.qZA(),f._UZ(139,"input",38),f.qZA(),f.qZA(),f.TgZ(140,"div",30),f.TgZ(141,"div",8),f.TgZ(142,"label"),f._uU(143,"Expiry Date"),f.qZA(),f._UZ(144,"input",39),f.qZA(),f.qZA(),f.TgZ(145,"div",30),f.TgZ(146,"div",8),f.TgZ(147,"label"),f._uU(148,"Labour Contracter"),f.qZA(),f.TgZ(149,"select",40),f.NdJ("change",function(e){return t.OnLabourSelect(e)}),f.TgZ(150,"option",36),f._uU(151,"Select "),f.qZA(),f.YNc(152,_,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(153,"div",30),f.TgZ(154,"div",8),f.TgZ(155,"label"),f._uU(156,"Lot No"),f.qZA(),f.TgZ(157,"input",41),f.NdJ("ngModelChange",function(e){return t.CurrentLotNo=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(158,"div",30),f.TgZ(159,"div",8),f.TgZ(160,"label"),f._uU(161,"Remarks"),f.qZA(),f.TgZ(162,"select",42),f.TgZ(163,"option",36),f._uU(164,"Select "),f.qZA(),f.YNc(165,q,2,2,"option",43),f.qZA(),f.qZA(),f.qZA(),f.TgZ(166,"div",30),f.TgZ(167,"div",8),f.TgZ(168,"label"),f._uU(169,"Country"),f.qZA(),f._UZ(170,"input",44),f.qZA(),f.qZA(),f.TgZ(171,"div",45),f.TgZ(172,"div",8),f.TgZ(173,"button",46),f.NdJ("click",function(){return t.OnAddClick()}),f._uU(174," Add "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(175,"div",45),f.TgZ(176,"div",8),f.TgZ(177,"button",47),f.NdJ("click",function(){f.CHM(r);var e=f.MAs(191);return t.openStorageArea(e)}),f._uU(178," Storage Area "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(179,"div",45),f.TgZ(180,"div",8),f.TgZ(181,"button",48),f._uU(182," Label Print "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(183,"div",45),f.TgZ(184,"div",8),f.TgZ(185,"button",49),f._uU(186," Receipt Print "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(187,"div",45),f.TgZ(188,"div",50),f._UZ(189,"ag-grid-angular",51),f.qZA(),f.qZA(),f.qZA(),f.YNc(190,O,21,2,"ng-template",null,52,f.W1O),f.YNc(192,F,8,3,"ng-template",null,53,f.W1O),f.YNc(194,U,12,2,"ng-template",54,55,f.W1O),f.qZA(),f._UZ(196,"hr"),f.TgZ(197,"div",21),f.TgZ(198,"p",22),f._uU(199," Inward Details List "),f.qZA(),f.TgZ(200,"mtx-grid",56,57),f.NdJ("dblclick",function(e){f.CHM(r);var o=f.MAs(201);return t.onRowDblclicked(o,e)}),f.qZA(),f.qZA(),f._UZ(202,"hr"),f.TgZ(203,"div",23),f.TgZ(204,"div",58),f.TgZ(205,"button",59),f.NdJ("click",function(){return t.OnSaveinward()}),f._uU(206,"Save"),f.qZA(),f.qZA(),f.TgZ(207,"div",58),f.TgZ(208,"button",60),f.NdJ("click",function(){return t.OnResetInward()}),f._uU(209,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(210,"mat-tab",61),f.TgZ(211,"div",62),f.TgZ(212,"label",62),f._uU(213,"Filter "),f.qZA(),f.TgZ(214,"input",63,64),f.NdJ("keyup",function(){f.CHM(r);var e=f.MAs(215);return t.onKeyfilter(e.value)}),f.qZA(),f.qZA(),f._UZ(216,"br"),f.TgZ(217,"div",65),f._UZ(218,"mtx-grid",66),f.qZA(),f.qZA(),f.TgZ(219,"mat-tab",67),f.TgZ(220,"div",68),f._UZ(221,"ag-grid-angular",69),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Q6J("selectedIndex",t.tab),f.xp6(2),f.Q6J("formGroup",t.form),f.xp6(10),f.Q6J("ngForOf",t.customerList),f.xp6(6),f.Q6J("ngClass",f.VKq(64,P,t.submitted&&t.f.challan_no.errors)),f.xp6(16),f.Q6J("ngForOf",t.dockList),f.xp6(5),f.Q6J("ngModel",f.xi3(43,61,t.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(9),f.Q6J("ngForOf",t.unloadingList),f.xp6(8),f.Q6J("ngForOf",t.remarkList),f.xp6(41),f.Q6J("ngForOf",t.productList),f.xp6(8),f.Q6J("ngForOf",t.brandList),f.xp6(8),f.Q6J("ngForOf",t.packateCountList),f.xp6(11),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",t.serviceTypeList),f.xp6(21),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",t.labourContractorList),f.xp6(5),f.Q6J("ngModel",t.CurrentLotNo),f.xp6(6),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",t.remarkList),f.xp6(8),f.Q6J("id",t.OnAddClick)("disabled",t.OnAddProductClick),f.xp6(16),f.Q6J("rowData",t.inwardservicelist)("columnDefs",t.serviceColumns),f.xp6(11),f.Q6J("data",t.InwardDetailList)("columns",t.InwardDetailColumns)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(66,B))("pageIndex",0),f.xp6(5),f.Q6J("disabled",t.click),f.xp6(13),f.Q6J("data",t.InwardList)("columns",t.columnstest)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Item List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!1)("showPaginator",!1)("pageSize",1e7),f.xp6(3),f.Q6J("rowData",t.InwardList)("columnDefs",t.columnsInwardList)("frameworkComponents",t.frameworkComponents))},directives:[p.xw,p.yH,v.a8,I.SP,I.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,m.sg,y.TO,u.Fj,m.mk,Z.oO,u.Q7,T.N8,b.CM],pipes:[m.uU],styles:[".mtx-grid[_ngcontent-%COMP%]{height:280px}input.ng-invalid[_ngcontent-%COMP%]:focus{outline-color:red}.ng-deep[_ngcontent-%COMP%]   #gridContainer[_ngcontent-%COMP%]{height:440px}.ng-deep[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{padding:20px;margin-top:20px;background-color:rgba(191,191,191,.15)}.ng-deep[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{margin-top:10px}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-right:10px}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%] > .dx-selectbox[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.modalfooter[_ngcontent-%COMP%]{flex-wrap:wrap;padding:.75rem;border-top:1px solid #dee2e6;border-bottom-right-radius:calc(.3rem - 1px);border-bottom-left-radius:calc(.3rem - 1px)}"]}),r}();a(52107);var R=function(){var e=function(){function e(){t(this,e),this.label=""}return o(e,[{key:"agInit",value:function(e){this.params=e,this.label=this.params.label||null}},{key:"refresh",value:function(e){return!0}},{key:"onClick",value:function(e,t){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data,actions:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-deliveryorderaction-buttons"]],decls:5,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"button",1),f.NdJ("click",function(e){return t.onClick(e,"Edit")}),f._uU(2,"Edit"),f.qZA(),f.TgZ(3,"button",2),f.NdJ("click",function(e){return t.onClick(e,"Delete")}),f._uU(4,"Delete"),f.qZA(),f.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),e}();function J(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function M(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.PartyName),f.xp6(1),f.Oqu(r.PartyName)}}function E(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerPartyID),f.xp6(1),f.Oqu(r.PartyName)}}function Y(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerContactID),f.xp6(1),f.Oqu(r.ContactPersonName)}}function G(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.Remarks),f.xp6(1),f.Oqu(r.Remarks)}}function W(e,t){if(1&e&&(f.TgZ(0,"option",60),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function H(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",47),f.TgZ(1,"h4",48),f._uU(2,"Customer Parties"),f.qZA(),f.qZA(),f.TgZ(3,"div",49),f.TgZ(4,"div",39),f.TgZ(5,"div",50),f.TgZ(6,"div",8),f.TgZ(7,"label"),f._uU(8,"Customer Name"),f.qZA(),f.TgZ(9,"select",51),f.YNc(10,W,2,2,"option",52),f.qZA(),f.qZA(),f.TgZ(11,"div",50),f.TgZ(12,"div",8),f.TgZ(13,"label"),f._uU(14,"Party Name"),f.qZA(),f._UZ(15,"input",53),f.qZA(),f.qZA(),f.TgZ(16,"div",50),f.TgZ(17,"div",8),f.TgZ(18,"label"),f._uU(19,"Shipping Address"),f.qZA(),f._UZ(20,"input",54),f.qZA(),f.qZA(),f.TgZ(21,"div",50),f.TgZ(22,"div",8),f.TgZ(23,"label"),f._uU(24,"Shipping Address2"),f.qZA(),f._UZ(25,"input",55),f.qZA(),f.qZA(),f.TgZ(26,"div",50),f.TgZ(27,"div",8),f.TgZ(28,"label"),f._uU(29,"Pin Code"),f.qZA(),f._UZ(30,"input",56),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",57),f.TgZ(32,"button",58),f.NdJ("click",function(){f.CHM(r);var e=f.oxw(),t=f.MAs(95);return e.onAddCustomerParty(t)}),f._uU(33,"ADD"),f.qZA(),f.TgZ(34,"button",59),f.NdJ("click",function(){f.CHM(r);var e=f.oxw(),t=f.MAs(95);return e.onCloseCustpmerParty(t)}),f._uU(35,"Cancel"),f.qZA(),f.qZA()}if(2&e){var o=f.oxw();f.xp6(10),f.Q6J("ngForOf",o.customerList)}}var V=function(){var r=function(){function r(e,o,i,a){t(this,r),this.api=e,this.fb=o,this.modalService=i,this.dialog=a,this.OrderGivenByList=[],this.DeliveryOrdersearchList=[],this.DO_Detail=[],this.checkCust=!1,this.SaveCustomerParty={},this.SaveDeliveryOrder={},this.clickSave=!1,this.DeliveryOrderID=0,this.config={backdrop:!1,ignoreBackdropClick:!0},this.tab=0,this.DeliveryOrdercolumnDefs=[{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{headerName:"InwardDID",field:"InwardDID",hide:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0},{headerName:"ProductID",field:"ProductID",hide:!0},{headerName:"ProductName",field:"ProductName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"LotNo",field:"LotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},resizable:!0},{headerName:"FirstLotNo",field:"FirstLotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"StorageAreaName",field:"StorageAreaName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"InQuantity",field:"InQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"PendingDO",field:"PendingDO",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"OutQuantity",field:"OutQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"DOQuantity",field:"DOQuantity",hide:!1,cellEditorPopup:!0,sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!0,valueParser:"Number(newValue)",editable:!0,cellStyle:function(e){return e.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}},{headerName:"BrandID",field:"BrandID",hide:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"BrandName",field:"BrandName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"ItemsInPacket",field:"ItemsInPacket",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200}],this.columnsDeliveryOrderList=[{headerName:"Action",floatingFilter:!1,maxWidth:150,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnDeliveryOrderActions.bind(this)}},{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DO No",maxWidth:100,field:"DeliveryOrderNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DO Date",resizable:!0,field:"DeliveryOrderDate",type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedBy",field:"CreatedBy",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Process",field:"Process",resizable:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerPartyID",field:"CustomerPartyID",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",resizable:!0,hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser(),this.form=this.fb.group({customer_id:[null,u.kI.required],chk_Do_Disptch:[null,u.kI.required],deliveryorder_date:[null,u.kI.required],customerParty_id:[null,u.kI.required],DeliveryParty_id:[null,u.kI.required],txtDO_No:[null,u.kI.required],txtShipping_Address:[null,u.kI.required],txtTruckNo:[null,u.kI.required],txtContainerNo:[null,u.kI.required],OrderGivenBy_id:[null,u.kI.required],DORemarks:[null,u.kI.required],Party_customer_id:[null,u.kI.required],txtPartyName:[null,u.kI.required],txtshiffadd1:[null,u.kI.required],txtshiffadd2:[null,u.kI.required],txtPinCode:[null,u.kI.required],txtMobileNo:[null,u.kI.required],txtTotalDOQty:[null,u.kI.required]});var n=new m.uU("en-US").transform(Date(),"yyyy-MM-dd");this.todayDate=n,this.frameworkComponents={buttonRenderer:R}}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdown()}},{key:"BindDropdown",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.get("/Customer").subscribe(function(e){r.customerList=e},function(e){console.error(e)}),this.api.get("/CustomerParty").subscribe(function(e){r.customePartyList=e},function(e){console.error(e)}),this.api.get("/Remarks").subscribe(function(e){r.remarkList=e.filter(function(e){return 2==e.ProcessID})},function(e){console.error(e)}),this.BindDeliveryOrderList();case 1:case"end":return e.stop()}},t,this)}))}},{key:"getRowStyle",value:function(e){if(13==e.data.StatusID)return{"background-color":"pink"}}},{key:"BindDeliveryOrderList",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.get("/DeliveryOrder/DOList?FinancialYearID="+this.currentUser.FinantialYearId+"&WareHouseID="+this.currentUser.warehouseId+"&UserID="+this.currentUser.userId).subscribe(function(e){r.DeliveryOrderList=e},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"tabDeliveryOrderchange",value:function(e){this.tab=e,this.BindDeliveryOrderList()}},{key:"BindOrderGIvenBy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.api.get("/CustomerContacts/GetCustomerContactsList?CustomerID="+t).subscribe(function(t){e.OrderGivenByList=[],e.OrderGivenByList=t},function(e){console.error(e)})}},{key:"GetCustomerID",value:function(e){var t=this;this.checkCust=!1,this.BindOrderGIvenBy(this.form.value.customer_id),this.api.get("/DeliveryOrder/DOValidation?CustomerID="+this.form.value.customer_id+"&WaherhouseID="+this.currentUser.warehouseId).subscribe(function(e){e.Table.length>0&&(t.checkCust=!0,alert("Order is stopped for some reason .... !!!"))},function(e){console.error(e)})}},{key:"OnSearchClick",value:function(){var e,t=this;null==this.form.value.customer_id?(alert("Select Customers ....."),null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus()):this.api.post("/DeliveryOrder/DOSearch?CustomerID="+this.form.value.customer_id+"&WarehouseID="+this.currentUser.warehouseId).subscribe(function(e){t.DeliveryOrdersearchList=e,0==e.length&&alert("Data not found ..... !!!")},function(e){console.error(e)})}},{key:"onDOCellKeyPress",value:function(e){e.data.BalanceQuantity>e.data.DOQuantity?this.onDOSearchGridRefresh():e.data.BalanceQuantity==e.data.DOQuantity?(alert(e.data.ProductName+" And Lot no "+e.data.LotNo+", Stock will be null or zero ...!!!"),this.onDOSearchGridRefresh()):e.data.BalanceQuantity<e.data.DOQuantity&&(this.DeliveryOrdersearchList.forEach(function(t){t.InwardLocationID==e.data.InwardLocationID&&(t.DOQuantity=0)}),alert("DO Quantity must be less than or equal to balance quantity ..!!!"),this.onDOSearchGridRefresh())}},{key:"onDOSearchGridRefresh",value:function(){var e=this.DeliveryOrdersearchList.filter(function(e){return e});this.DeliveryOrdersearchList=e;var t=this.DeliveryOrdersearchList.map(function(e){return e.DOQuantity}).reduce(function(e,t){return t+e});this.form.controls.txtTotalDOQty.setValue(t)}},{key:"onCustomerPartyContact",value:function(e){var t;null==this.form.value.customer_id||0==this.form.value.customer_id?(alert("Select Customers ....."),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus()):(this.form.controls.Party_customer_id.setValue(this.form.value.customer_id),this.modalService.open(e,this.config))}},{key:"onCloseCustpmerParty",value:function(e){this.modalService.dismissAll(e)}},{key:"onAddCustomerParty",value:function(e){var t,r,o=this;null==this.form.value.Party_customer_id||0==this.form.value.Party_customer_id?(alert("Select Customers ....."),null===(t=null==document?void 0:document.getElementById("Party_customer_id"))||void 0===t||t.focus()):null==this.form.value.txtPartyName||0==this.form.value.txtPartyName?(alert("Enter Customer Party Name ..... !!!"),null===(r=null==document?void 0:document.getElementById("txtPartyName"))||void 0===r||r.focus()):(this.SaveCustomerParty={CustomerID:this.form.value.customer_id,PartyName:null==this.form.value.txtPartyName?"":this.form.value.txtPartyName,ShippingAddress:null==this.form.value.txtshiffadd1?"":this.form.value.txtshiffadd1,ShippingAddress1:null==this.form.value.txtshiffadd2?"":this.form.value.txtshiffadd2,PinCode:null==this.form.value.txtPinCode?"":this.form.value.txtPinCode,CreatedBy:this.currentUser.userId},console.log(this.SaveCustomerParty),this.api.post("/DeliveryOrder/AddParty",this.SaveCustomerParty).subscribe(function(t){alert(t.Table[0].Message),o.form.controls.txtPartyName.reset(),o.form.controls.txtshiffadd1.reset(),o.form.controls.txtshiffadd2.reset(),o.form.controls.txtPinCode.reset(),o.modalService.dismissAll(e)},function(e){console.error(e)}),this.api.get("/CustomerParty").subscribe(function(e){o.customePartyList=e},function(e){console.error(e)}))}},{key:"GetMobileNo",value:function(e){var t=this,r=this.OrderGivenByList.filter(function(e){return e.CustomerContactID==t.form.value.OrderGivenBy_id});this.form.controls.txtMobileNo.setValue(r[0].MobileNo),console.log(r[0].MobileNo)}},{key:"onSaveDeliveryOrder",value:function(){var e,t,r=this;if(null==this.form.value.customer_id||""==this.form.value.customer_id)return alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus());this.api.get("/DeliveryOrder/DOValidation?CustomerID="+this.form.value.customer_id+"&WaherhouseID="+this.currentUser.warehouseId).subscribe(function(e){var o,i;if(e.Table.length>0)r.checkCust=!0,alert("Order is stopped for some reason .... !!!");else{if(t=r.DeliveryOrdersearchList.length>0?r.DeliveryOrdersearchList.map(function(e){return e.DOQuantity}).reduce(function(e,t){return t+e}):0,null==r.form.value.customerParty_id||""==r.form.value.customerParty_id)return alert("Please .... Select customer Party"),void(null===(o=null==document?void 0:document.getElementById("customerParty_id"))||void 0===o||o.focus());if(null==r.form.value.OrderGivenBy_id||""==r.form.value.OrderGivenBy_id)return alert("Please .... Select Order Given By"),void(null===(i=null==document?void 0:document.getElementById("OrderGivenBy_id"))||void 0===i||i.focus());if(t<=0)return void alert("Please .... Add DO quantity In delivery order detail ");r.clickSave=!0;var a,n=r.OrderGivenByList.filter(function(e){return e.CustomerContactID==r.form.value.OrderGivenBy_id});a=n.length>0?n[0].ContactPersonName:"",r.DeliveryOrdersearchList.filter(function(e){return e.DOQuantity>0}).forEach(function(e){r.DO_Detail.push({DeliveryOrderID:r.DeliveryOrderID,ProductID:e.ProductID,InwardDID:e.InwardDID,LotNo:e.LotNo,DOQuantity:e.DOQuantity,InwardLocationID:e.InwardLocationID,StorageAreaID:e.StorageAreaID})}),r.DO_Detail.slice(),r.SaveDeliveryOrder={DeliveryOrderID:r.DeliveryOrderID,DeliveryOrderDate:r.form.value.deliveryorder_date,CustomerID:r.form.value.customer_id,WareHouseID:r.currentUser.warehouseId,CompanyID:r.currentUser.companyId,DeliverTo:r.form.value.customerParty_id,CustomerPartyID:null==r.form.value.DeliveryParty_id?0:r.form.value.DeliveryParty_id,ShippingAddress:null==r.form.value.txtShipping_Address?"":r.form.value.txtShipping_Address,OrderGivenBy:a,Remarks:null==r.form.value.DORemarks?"":r.form.value.DORemarks,CreatedBy:r.currentUser.userId,ByCustomer:0,IsDoDispatch:null!=r.form.value.chk_Do_Disptch&&r.form.value.chk_Do_Disptch,TruckNo:null==r.form.value.txtTruckNo?"":r.form.value.txtTruckNo,ContainerNo:null==r.form.value.txtContainerNo?"":r.form.value.txtContainerNo,DeliveryOrderDetailModel:r.DO_Detail},r.api.post("/DeliveryOrder/SaveDO",r.SaveDeliveryOrder).subscribe(function(e){alert(e.Table[0].Message)},function(e){console.error(e),r.clickSave=!1}),console.log(r.SaveDeliveryOrder)}},function(e){console.error(e)})}},{key:"onResetDeliveryOrder",value:function(){this.clickSave=!1,this.checkCust=!1,this.form.reset(),this.BindDropdown(),this.DeliveryOrderID=0;var e=new m.uU("en-US").transform(Date(),"yyyy-MM-dd");this.todayDate=e,this.form.controls.deliveryorder_date.setValue(this.todayDate),this.DeliveryOrdersearchList=[],this.DO_Detail=[],this.SaveDeliveryOrder={}}},{key:"OnDeliveryOrderActions",value:function(e){var t=this;"Delete"==String(e.actions)?this.api.get("/DeliveryOrder/DOValidation?CustomerID="+e.rowData.CustomerID+"&WaherhouseID="+e.rowData.WareHouseID).subscribe(function(r){if(r.Table.length>0)t.checkCust=!0,t.dialog.alert("Order is stopped for some reason .... !!!");else if(11==e.rowData.StatusID)t.dialog.alert("Sorry,Outward already generated ....!!!");else if(15==e.rowData.StatusID)t.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!");else if(13==e.rowData.StatusID)t.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!");else if(12==e.rowData.StatusID){if(1==confirm("Sorry,this translation have dispatch. Do you want to deleted or deactivate your translation ...")){var o=prompt("Remarks ");t.api.post("/DeliveryOrder/PartiallyCancelled?DeliveryOrderID="+e.rowData.DeliveryOrderID+"&CustomerId="+e.rowData.CustomerID+"&Remarks="+o+"&CreatedBy="+t.currentUser.userId).subscribe(function(e){t.dialog.alert(e),t.BindDeliveryOrderList()},function(e){console.error(e)})}}else 1==confirm("Do you want to deleted or deactivate your Delivery Order ...??")&&(prompt("Remarks"),t.api.post("/DeliveryOrder/CancelledDO?DeliveryOrderID="+e.rowData.DeliveryOrderID+"&CustomerId="+e.rowData.CustomerID+"&Remarks=test&CreatedBy="+t.currentUser.userId).subscribe(function(e){t.dialog.alert(e),t.BindDeliveryOrderList()},function(e){console.error(e)}))},function(e){console.error(e)}):"Edit"==String(e.actions)&&(this.onResetDeliveryOrder(),this.api.get("/DeliveryOrder/DOValidation?CustomerID="+e.rowData.CustomerID+"&WaherhouseID="+e.rowData.WareHouseID).subscribe(function(r){r.Table.length>0?(t.checkCust=!0,t.dialog.alert("Order is stopped for some reason .... !!!")):11==e.rowData.StatusID?t.dialog.alert("Sorry,Outward already generated ....!!!"):12==e.rowData.StatusID?t.dialog.alert("Sorry,Dispatch already generated ....!!!"):13==e.rowData.StatusID?t.dialog.alert("Sorry,You can't edit this transaction ,because it's already Cancelled or deactivate ....!!!"):15==e.rowData.StatusID?t.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!"):"Online"==e.rowData.Process?t.dialog.alert("Sorry,You can't edit because its generated by customer....!!!"):t.api.get("/DeliveryOrder/GetEditDelivryOrder?DeliveryOrderID="+e.rowData.DeliveryOrderID).subscribe(function(r){t.tab=0,t.DeliveryOrdersearchList=r.Table1,t.DeliveryOrderID=e.rowData.DeliveryOrderID,t.onDOSearchGridRefresh();var o=new m.uU("en-US").transform(e.rowData.DeliveryOrderDate,"yyyy-MM-dd");t.BindOrderGIvenBy(e.rowData.CustomerID);var i,a,n=t.DeliveryOrdersearchList.map(function(e){return e.DOQuantity}).reduce(function(e,t){return t+e}),l=t.OrderGivenByList.filter(function(t){return t.ContactPersonName==e.rowData.OrderGivenBy});l.length>0?(i=l[0].CustomerContactID,a=l[0].MobileNo,t.form.controls.txtMobileNo.setValue(l[0].MobileNo)):(i=0,a="",t.form.controls.txtMobileNo.setValue("")),t.form.setValue({customer_id:e.rowData.CustomerID,deliveryorder_date:o,chk_Do_Disptch:!1,customerParty_id:e.rowData.DeliverTo,DeliveryParty_id:e.rowData.CustomerPartyID,txtDO_No:e.rowData.DeliveryOrderNo,txtShipping_Address:e.rowData.ShippingAddress,txtTruckNo:e.rowData.TruckNo,txtContainerNo:e.rowData.ContainerNo,OrderGivenBy_id:i,DORemarks:e.rowData.Remarks,Party_customer_id:e.rowData.CustomerID,txtPartyName:"",txtshiffadd1:"",txtshiffadd2:"",txtPinCode:"",txtMobileNo:a,txtTotalDOQty:n})},function(e){console.error(e)})},function(e){console.error(e)}))}}]),r}();return r.\u0275fac=function(e){return new(e||r)(f.Y36(c.sM),f.Y36(u.qu),f.Y36(D.FF),f.Y36(g.cP))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-deliveryorder"]],decls:118,vars:19,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Delivery Order"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-4","col-md-4"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm",3,"change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-3","col-md-3"],["type","date","formControlName","deliveryorder_date","id","deliveryorder_date","placeholder","","name","deliveryorder_date",1,"form-control","form-control-rounded",3,"ngModel"],[1,"form-group","pt-4"],["type","button",1,"btn","btn-secondary","btn-block",3,"disabled","click"],[1,"col-sm-2","col-md-2"],["type","checkbox","formControlName","chk_Do_Disptch","id","chk_Do_Disptch",1,"form-control"],["formControlName","customerParty_id","id","customerParty_id",1,"form-control","form-control-sm"],["formControlName","DeliveryParty_id","id","DeliveryParty_id",1,"form-control","form-control-sm"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],["type","text","formControlName","txtDO_No","id","txtDO_No","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShipping_Address","id","txtShipping_Address","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["type","text","formControlName","txtTruckNo","id","txtTruckNo","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainerNo","id","txtContainerNo","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["formControlName","OrderGivenBy_id","id","OrderGivenBy_id",1,"form-control","form-control-sm",3,"change"],["type","text","formControlName","txtMobileNo","id","txtMobileNo","readonly","","placeholder","",1,"form-control","form-control-sm"],["formControlName","DORemarks","id","DORemarks",1,"form-control","form-control-sm"],["style","width:620px;"],["CustomerPartycontent",""],[1,"col-12"],[1,"font-weight-bold"],[1,"ag-theme-alpine",2,"height","500px","font-size","12px!important",3,"rowData","columnDefs","cellValueChanged"],[1,"row","mt-2"],[1,"col-sm-12"],[1,"form-group","float-right",2,"display","flex"],["type","text","formControlName","txtTotalDOQty","id","txtTotalDOQty","readonly","","placeholder","",1,"form-control","form-control-sm"],[1,"row"],[1,"col-sm-3","mt-1","mb-1"],["type","button",1,"btn","btn-secondary",2,"width","100%",3,"disabled","click"],["type","button",1,"btn","btn-secondary",2,"width","100%",3,"click"],["label","Delivery Order List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents","getRowStyle"],[3,"value"],[1,"modal-header"],["id","modal-basic-title"],[1,"modal-body"],[1,"col-sm-12","col-md-12"],["formControlName","Party_customer_id","id","Party_customer_id",1,"form-control","form-control-sm"],["disabled","",3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","txtPartyName","id","txtPartyName","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtshiffadd1","id","txtshiffadd1","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtshiffadd2","id","txtshiffadd2","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtPinCode","id","txtPinCode","placeholder","",1,"form-control","form-control-sm"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click"],["disabled","",3,"value"]],template:function(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabDeliveryOrderchange(e)})("selectedIndexChange",function(e){return t.tab=e}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.NdJ("change",function(e){return t.GetCustomerID(e)}),f.TgZ(13,"option",10),f._uU(14,"Select"),f.qZA(),f.YNc(15,J,2,2,"option",11),f.qZA(),f._UZ(16,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",8),f.TgZ(19,"label"),f._uU(20,"Delivery Order Date"),f.qZA(),f._UZ(21,"input",14),f.ALo(22,"date"),f.qZA(),f.qZA(),f.TgZ(23,"div",13),f.TgZ(24,"div",15),f.TgZ(25,"button",16),f.NdJ("click",function(){return t.OnSearchClick()}),f._uU(26,"Search"),f.qZA(),f._UZ(27,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(28,"div",17),f.TgZ(29,"div",8),f.TgZ(30,"label"),f._uU(31,"Do & Dispatch"),f.qZA(),f._UZ(32,"input",18),f.qZA(),f.qZA(),f.TgZ(33,"div",7),f.TgZ(34,"div",8),f.TgZ(35,"label"),f._uU(36,"Customer Party"),f.qZA(),f.TgZ(37,"select",19),f.TgZ(38,"option",10),f._uU(39,"Select"),f.qZA(),f.YNc(40,M,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(41,"div",13),f.TgZ(42,"div",8),f.TgZ(43,"label"),f._uU(44,"Delivery Party"),f.qZA(),f.TgZ(45,"select",20),f.TgZ(46,"option",10),f._uU(47,"Select"),f.qZA(),f.YNc(48,E,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(49,"div",13),f.TgZ(50,"div",21),f.TgZ(51,"button",22),f.NdJ("click",function(){f.CHM(r);var e=f.MAs(95);return t.onCustomerPartyContact(e)}),f._uU(52,"ADD Party"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(53,"div",17),f.TgZ(54,"div",8),f.TgZ(55,"label"),f._uU(56,"DO No"),f.qZA(),f._UZ(57,"input",23),f.qZA(),f.qZA(),f.TgZ(58,"div",7),f.TgZ(59,"div",8),f.TgZ(60,"label"),f._uU(61,"Shipping Address"),f.qZA(),f._UZ(62,"input",24),f.qZA(),f.qZA(),f.TgZ(63,"div",7),f.TgZ(64,"div",8),f.TgZ(65,"label"),f._uU(66,"Truck No"),f.qZA(),f._UZ(67,"input",25),f.qZA(),f.qZA(),f.TgZ(68,"div",7),f.TgZ(69,"div",8),f.TgZ(70,"label"),f._uU(71,"Container No"),f.qZA(),f._UZ(72,"input",26),f.qZA(),f.qZA(),f.TgZ(73,"div",7),f.TgZ(74,"div",8),f.TgZ(75,"label"),f._uU(76,"OrderGivenBy"),f.qZA(),f.TgZ(77,"select",27),f.NdJ("change",function(e){return t.GetMobileNo(e)}),f.TgZ(78,"option",10),f._uU(79,"Select"),f.qZA(),f.YNc(80,Y,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(81,"div",7),f.TgZ(82,"div",8),f.TgZ(83,"label"),f._uU(84,"Mobile No"),f.qZA(),f._UZ(85,"input",28),f.qZA(),f.qZA(),f.TgZ(86,"div",7),f.TgZ(87,"div",8),f.TgZ(88,"label"),f._uU(89,"Remarks"),f.qZA(),f.TgZ(90,"select",29),f.TgZ(91,"option",10),f._uU(92,"Select "),f.qZA(),f.YNc(93,G,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(94,H,36,1,"ng-template",30,31,f.W1O),f._UZ(96,"hr"),f.qZA(),f.TgZ(97,"div",32),f.TgZ(98,"p",33),f._uU(99," Delivery Order Details"),f.qZA(),f.TgZ(100,"div"),f.TgZ(101,"ag-grid-angular",34),f.NdJ("cellValueChanged",function(e){return t.onDOCellKeyPress(e)}),f.qZA(),f.qZA(),f.TgZ(102,"div",35),f.TgZ(103,"div",36),f.TgZ(104,"div",37),f.TgZ(105,"label"),f._uU(106,"Total DO Quantity"),f.qZA(),f._UZ(107,"input",38),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(108,"div",39),f.TgZ(109,"div",40),f.TgZ(110,"button",41),f.NdJ("click",function(){return t.onSaveDeliveryOrder()}),f._uU(111,"Save"),f.qZA(),f.qZA(),f.TgZ(112,"div",40),f.TgZ(113,"button",42),f.NdJ("click",function(){return t.onResetDeliveryOrder()}),f._uU(114,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(115,"mat-tab",43),f.TgZ(116,"div",44),f._UZ(117,"ag-grid-angular",45),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Q6J("selectedIndex",t.tab),f.xp6(2),f.Q6J("formGroup",t.form),f.xp6(10),f.Q6J("ngForOf",t.customerList),f.xp6(6),f.Q6J("ngModel",f.xi3(22,16,t.todayDate,"yyyy-MM-dd")),f.xp6(4),f.Q6J("disabled",t.checkCust),f.xp6(15),f.Q6J("ngForOf",t.customePartyList),f.xp6(8),f.Q6J("ngForOf",t.customePartyList),f.xp6(32),f.Q6J("ngForOf",t.OrderGivenByList),f.xp6(13),f.Q6J("ngForOf",t.remarkList),f.xp6(8),f.Q6J("rowData",t.DeliveryOrdersearchList)("columnDefs",t.DeliveryOrdercolumnDefs),f.xp6(9),f.Q6J("disabled",t.clickSave),f.xp6(7),f.Q6J("rowData",t.DeliveryOrderList)("columnDefs",t.columnsDeliveryOrderList)("frameworkComponents",t.frameworkComponents)("getRowStyle",t.getRowStyle))},directives:[p.xw,p.yH,v.a8,I.SP,I.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,m.sg,y.TO,u.Fj,u.Wl,T.N8],pipes:[m.uU],styles:[".rag-red[_ngcontent-%COMP%]{background-color:red!important}"]}),r}(),z=function(){var e=function(){function e(){t(this,e),this.label=""}return o(e,[{key:"agInit",value:function(e){this.params=e,this.label=this.params.label||null}},{key:"refresh",value:function(e){return!0}},{key:"onClick",value:function(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-dispatchdeletebutton"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"button",0),f.NdJ("click",function(e){return t.onClick(e)}),f._uU(1,"Delete"),f.qZA())},styles:[""]}),e}();function $(e,t){if(1&e&&(f.TgZ(0,"option",37),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function j(e,t){if(1&e&&(f.TgZ(0,"option",37),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerPartyID),f.xp6(1),f.Oqu(r.PartyName)}}var K=function(){var r=function(){function r(e,o,i){t(this,r),this.api=e,this.fb=o,this.dialog=i,this.SaveDispatch={},this.tab=0,this.clickSave=!1,this.DeliveryOrderID=0,this.DispatchDetailList=[],this.DispatchDetail=[],this.DispatchDetailcolumnDefs=[{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderDID",field:"DeliveryOrderDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductID",field:"ProductID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageArea",field:"StorageArea",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardDID",field:"InwardDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DOQuantity",field:"DOQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchQuantity",field:"DispatchQuantity",hide:!1,filter:"agNumberColumnFilter",valueParser:"Number(newValue)",floatingFilter:!0,cellEditorPopup:!0,sort:"desc",editable:!0,cellStyle:function(e){return e.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}},{headerName:"BrandName",field:"BrandName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ItemsInPacket",field:"ItemsInPacket",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.DispatchSearchcolumnDefs=[{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderDate",field:"DeliveryOrderDate",hide:!1,type:"date",cellRenderer:"dateTimeRenderer",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.DispatchsListColumnDefs=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnCancelledDispatch.bind(this),label:"Click 1"}},{headerName:"DispatchID",field:"DispatchID",minWidth:100,hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchNo",field:"DispatchNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerPartyID",field:"CustomerPartyID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"PartyName",field:"PartyName",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchDate",field:"DispatchDate",hide:!1,minWidth:100,type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CeatedBy",field:"CeatedBy",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser(),this.form=this.fb.group({customer_id:[null,u.kI.required],DeliveryTo_ID:[null,u.kI.required],txtShipping_Address:[null,u.kI.required],OrderGivenBy_id:[null,u.kI.required],txtTruckNo:[null,u.kI.required],txtContainerNo:[null,u.kI.required],DispatchRemarks:[null,u.kI.required],txtTotalDispatchQty:[null,u.kI.required]}),this.frameworkComponents={buttonRenderer:z}}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdown(),this.onDispatchList(),this.DispatchSearchList=[],this.DispatchDetailList=[]}},{key:"BindDropdown",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.get("/Customer").subscribe(function(e){r.customerList=e},function(e){console.error(e)}),this.api.get("/CustomerParty").subscribe(function(e){r.customePartyList=e},function(e){console.error(e)}),this.api.get("/Remarks").subscribe(function(e){r.remarkList=e.filter(function(e){return 2==e.ProcessID})},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"tabDeliveryOrderchange",value:function(e){this.tab=e,this.onDispatchList()}},{key:"OnSearchClick",value:function(){var e,t=this;if(null==this.form.value.customer_id||""==this.form.value.customer_id)return alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus());this.api.get("/Dispatch/DispatchSearch?CustomerID="+this.form.value.customer_id+"&WarehouseId="+this.currentUser.warehouseId+"&CompanyID="+this.currentUser.companyId).subscribe(function(e){t.DispatchSearchList=e},function(e){console.error(e)})}},{key:"rowDODoubleClicked",value:function(e){var t=this,r=this.customePartyList.filter(function(t){return t.PartyName==e.data.DeliverTo});this.form.setValue(r.length>0?{customer_id:this.form.value.customer_id,DeliveryTo_ID:r[0].CustomerPartyID,txtShipping_Address:e.data.ShippingAddress,OrderGivenBy_id:e.data.OrderGivenBy,txtTruckNo:e.data.TruckNo,txtContainerNo:e.data.ContainerNo,DispatchRemarks:e.data.Remarks,txtTotalDispatchQty:0}:{customer_id:this.form.value.customer_id,DeliveryTo_ID:0,txtShipping_Address:e.data.ShippingAddress,OrderGivenBy_id:e.data.OrderGivenBy,txtTruckNo:e.data.TruckNo,txtContainerNo:e.data.ContainerNo,DispatchRemarks:e.data.Remarks,txtTotalDispatchQty:0}),this.DeliveryOrderID=e.data.DeliveryOrderID,this.api.get("/Dispatch/GetDispatchDetails?DeliveryOrderID="+e.data.DeliveryOrderID+"&DeliveryOrderNo="+e.data.DeliveryOrderNo).subscribe(function(e){t.DispatchDetailList=e},function(e){console.error(e)})}},{key:"onDispatchCellKeyPress",value:function(e){console.log(this.DispatchDetailList),e.data.BalanceQuantity>e.data.DispatchQuantity||e.data.BalanceQuantity==e.data.DispatchQuantity?this.onDispatchDetailGridRefresh():e.data.BalanceQuantity<e.data.DispatchQuantity&&(this.DispatchDetailList.forEach(function(t){t.InwardLocationID==e.data.InwardLocationID&&(t.DispatchQuantity=0)}),alert("DispatchQuantity Must be less than or equal to BalanceQuantity.....!!!"),this.onDispatchDetailGridRefresh())}},{key:"onDispatchDetailGridRefresh",value:function(){var e=this.DispatchDetailList.filter(function(e){return e});this.DispatchDetailList=e;var t=this.DispatchDetailList.map(function(e){return e.DispatchQuantity}).reduce(function(e,t){return t+e});console.log(t),this.form.controls.txtTotalDispatchQty.setValue(t)}},{key:"onDispatchList",value:function(){var e=this;this.api.get("/Dispatch/Dispatch_Select").subscribe(function(t){e.DispatchList=t},function(e){console.error(e)})}},{key:"OnCancelledDispatch",value:function(e){var t=this;if(console.log(e.rowData),41==e.rowData.StatusID)this.dialog.alert("This transaction already generated Outward, You can't delete it....!!!");else if(43==e.rowData.StatusID)this.dialog.alert("This transaction already generated Cancelled, You can't delete it....!!!");else if(1==confirm("Do you want to deleted or deactivate your dispatch...")){var r=prompt("Remarks ");this.api.post("/Dispatch/Dispatch_Cancelled?DispatchID="+e.rowData.DispatchID+"&Remark="+r+"&CreatedBy="+this.currentUser.userId).subscribe(function(e){t.dialog.alert(e),t.onDispatchList()},function(e){console.error(e)})}}},{key:"onDeleteDORow",value:function(e){var t=this;if(console.log(e),41==e.StatusID)alert("This transaction already generated Outward, You can't delete it....!!!");else if(43==e.StatusID)alert("This transaction already generated Cancelled, You can't delete it....!!!");else if(1==confirm("Do you want to deleted or deactivate your dispatch...")){var r=prompt("Remarks ");this.api.post("/Dispatch/Dispatch_Cancelled?DispatchID="+e.DispatchID+"&Remark="+r+"&CreatedBy="+this.currentUser.userId).subscribe(function(e){alert(e),t.onDispatchList()},function(e){console.error(e)})}}},{key:"onSaveDispatch",value:function(){var e,t,r,o,i=this;return o=this.DispatchDetailList.length>0?this.DispatchDetailList.map(function(e){return e.DispatchQuantity}).reduce(function(e,t){return t+e}):0,null==this.form.value.customer_id||""==this.form.value.customer_id?(alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus())):null==this.form.value.DeliveryTo_ID||""==this.form.value.DeliveryTo_ID?(alert("Please.... Select Deliver To..!!!"),void(null===(t=null==document?void 0:document.getElementById("DeliveryTo_ID"))||void 0===t||t.focus())):null==this.form.value.OrderGivenBy_id||""==this.form.value.OrderGivenBy_id?(alert("Please Enter Order Given By..!!!"),void(null===(r=null==document?void 0:document.getElementById("OrderGivenBy_id"))||void 0===r||r.focus())):void(o<=0?alert("Please .... Add Dispatch quantity In delivery order detail "):(console.log(o),this.clickSave=!0,this.DispatchDetail=[],this.DispatchDetailList.filter(function(e){return e.DispatchQuantity>0}).forEach(function(e){i.DispatchDetail.push({DeliveryOrderDID:e.DeliveryOrderDID,ProductID:e.ProductID,InwardDID:e.InwardDID,LotNo:e.LotNo,DispatchQuantity:e.DispatchQuantity,InwardLocationID:e.InwardLocationID,StorageAreaID:e.StorageAreaID})}),this.DispatchDetail.slice(),console.log(this.DispatchDetail),this.SaveDispatch={DispatchID:0,CustomerID:this.form.value.customer_id,CustomerPartyID:this.form.value.DeliveryTo_ID,WareHouseID:this.currentUser.warehouseId,ShippingAddress:this.form.value.txtShipping_Address,OrderGivenBy:this.form.value.OrderGivenBy_id,Remarks:this.form.value.DispatchRemarks,CreatedBy:this.currentUser.userId,DeliveryOrderID:this.DeliveryOrderID,TruckNo:this.form.value.txtTruckNo,ContainerNo:this.form.value.txtContainerNo,DispatchDetailModel:this.DispatchDetail},console.log(this.SaveDispatch),this.api.post("/Dispatch/SaveDispatch",this.SaveDispatch).subscribe(function(e){console.log(e),alert(e.Table[0].Message)},function(e){console.error(e),i.clickSave=!1})))}},{key:"onResetDispatch",value:function(){this.form.reset(),this.BindDropdown(),this.DispatchSearchList=[],this.DispatchDetailList=[],this.clickSave=!1}}]),r}();return r.\u0275fac=function(e){return new(e||r)(f.Y36(c.sM),f.Y36(u.qu),f.Y36(g.cP))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-dispatch"]],decls:80,vars:12,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Dispatch"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-5","col-md-5"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-2","col-md-2"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],["formControlName","DeliveryTo_ID","id","DeliveryTo_ID",1,"form-control","form-control-sm"],[1,"col-sm-6","col-md-6"],["type","text","formControlName","txtShipping_Address","id","txtShipping_Address","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","OrderGivenBy_id","id","OrderGivenBy_id","placeholder","",1,"form-control","form-control-sm"],[1,"col-sm-4","col-md-4"],["type","text","formControlName","txtTruckNo","id","txtTruckNo","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainerNo","id","txtContainerNo","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","DispatchRemarks","id","DispatchRemarks","placeholder","",1,"form-control","form-control-sm"],[1,"col-12"],[1,"font-weight-bold"],[1,"ag-theme-alpine",2,"height","250px",3,"rowData","columnDefs","rowDoubleClicked"],[1,"ag-theme-alpine",2,"height","250px",3,"rowData","columnDefs","cellValueChanged"],[1,"row","mt-2"],[1,"col-sm-12"],[1,"form-group","float-right",2,"display","flex"],["type","text","formControlName","txtTotalDispatchQty","id","txtTotalDispatchQty","readonly","","placeholder","",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-secondary",2,"width","20%",3,"disabled","click"],["type","button",1,"btn","btn-secondary","ml-3",2,"width","20%",3,"click"],["label","Dispatch List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","500px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabDeliveryOrderchange(e)})("selectedIndexChange",function(e){return t.tab=e}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.TgZ(13,"option",10),f._uU(14,"Select"),f.qZA(),f.YNc(15,$,2,2,"option",11),f.qZA(),f._UZ(16,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",14),f.TgZ(19,"button",15),f.NdJ("click",function(){return t.OnSearchClick()}),f._uU(20,"Search"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(21,"div",7),f.TgZ(22,"div",8),f.TgZ(23,"label"),f._uU(24,"DeliveryTo"),f.qZA(),f.TgZ(25,"select",16),f.TgZ(26,"option",10),f._uU(27,"Select"),f.qZA(),f.YNc(28,j,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(29,"div",17),f.TgZ(30,"div",8),f.TgZ(31,"label"),f._uU(32,"Shipping Address"),f.qZA(),f._UZ(33,"input",18),f.qZA(),f.qZA(),f.TgZ(34,"div",17),f.TgZ(35,"div",8),f.TgZ(36,"label"),f._uU(37,"OrderGivenBy"),f.qZA(),f._UZ(38,"input",19),f.qZA(),f.qZA(),f.TgZ(39,"div",20),f.TgZ(40,"div",8),f.TgZ(41,"label"),f._uU(42,"Truck No"),f.qZA(),f._UZ(43,"input",21),f.qZA(),f.qZA(),f.TgZ(44,"div",20),f.TgZ(45,"div",8),f.TgZ(46,"label"),f._uU(47,"Container No"),f.qZA(),f._UZ(48,"input",22),f.qZA(),f.qZA(),f.TgZ(49,"div",20),f.TgZ(50,"div",8),f.TgZ(51,"label"),f._uU(52,"Remarks"),f.qZA(),f._UZ(53,"input",23),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(54,"hr"),f.TgZ(55,"div",24),f.TgZ(56,"p",25),f._uU(57," Delivery Order List"),f.qZA(),f.TgZ(58,"div"),f.TgZ(59,"ag-grid-angular",26),f.NdJ("rowDoubleClicked",function(e){return t.rowDODoubleClicked(e)}),f.qZA(),f.qZA(),f.qZA(),f._UZ(60,"hr"),f.TgZ(61,"div",24),f.TgZ(62,"p",25),f._uU(63,"Dispatch Details"),f.qZA(),f.TgZ(64,"div"),f.TgZ(65,"ag-grid-angular",27),f.NdJ("cellValueChanged",function(e){return t.onDispatchCellKeyPress(e)}),f.qZA(),f.qZA(),f.TgZ(66,"div",28),f.TgZ(67,"div",29),f.TgZ(68,"div",30),f.TgZ(69,"label"),f._uU(70,"Total Dispatch Qty"),f.qZA(),f._UZ(71,"input",31),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(72,"br"),f.TgZ(73,"button",32),f.NdJ("click",function(){return t.onSaveDispatch()}),f._uU(74,"Save"),f.qZA(),f.TgZ(75,"button",33),f.NdJ("click",function(){return t.onResetDispatch()}),f._uU(76,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(77,"mat-tab",34),f.TgZ(78,"div",35),f._UZ(79,"ag-grid-angular",36),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(3),f.Q6J("selectedIndex",t.tab),f.xp6(2),f.Q6J("formGroup",t.form),f.xp6(10),f.Q6J("ngForOf",t.customerList),f.xp6(13),f.Q6J("ngForOf",t.customePartyList),f.xp6(31),f.Q6J("rowData",t.DispatchSearchList)("columnDefs",t.DispatchSearchcolumnDefs),f.xp6(6),f.Q6J("rowData",t.DispatchDetailList)("columnDefs",t.DispatchDetailcolumnDefs),f.xp6(8),f.Q6J("disabled",t.clickSave),f.xp6(6),f.Q6J("rowData",t.DispatchList)("columnDefs",t.DispatchsListColumnDefs)("frameworkComponents",t.frameworkComponents))},directives:[p.xw,p.yH,v.a8,I.SP,I.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,m.sg,y.TO,u.Fj,T.N8],styles:[""]}),r}(),X=function(){var e=function(){function e(){t(this,e),this.label=""}return o(e,[{key:"agInit",value:function(e){this.params=e,this.label=this.params.label||null}},{key:"refresh",value:function(e){return!0}},{key:"onClick",value:function(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-outwarddeletebutton"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"button",0),f.NdJ("click",function(e){return t.onClick(e)}),f._uU(1,"Delete"),f.qZA())},styles:[""]}),e}();function ee(e,t){if(1&e&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function te(e,t){if(1&e&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerPartyID),f.xp6(1),f.Oqu(r.PartyName)}}function re(e,t){if(1&e&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.Remarks),f.xp6(1),f.Oqu(r.Remarks)}}function oe(e,t){if(1&e&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.DockID),f.xp6(1),f.Oqu(r.DockName)}}function ie(e,t){if(1&e&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.UserID),f.xp6(1),f.Oqu(r.UserName)}}function ae(e,t){if(1&e&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.Oqu(r.ContractorName)}}function ne(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"div",44),f.TgZ(2,"h5",45),f._uU(3,"Customer Party"),f.qZA(),f.qZA(),f._UZ(4,"br"),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",46),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Party Name"),f.qZA(),f._UZ(12,"input",47),f.qZA(),f.qZA(),f.TgZ(13,"div",46),f.TgZ(14,"div",8),f.TgZ(15,"label",48),f._uU(16,"Shipping Address1"),f.qZA(),f._UZ(17,"input",49),f.qZA(),f.qZA(),f.TgZ(18,"div",46),f.TgZ(19,"div",8),f.TgZ(20,"label",48),f._uU(21,"Shipping Address2"),f.qZA(),f._UZ(22,"input",50),f.qZA(),f.qZA(),f.TgZ(23,"div",46),f.TgZ(24,"div",8),f.TgZ(25,"label",48),f._uU(26,"Pin Code"),f.qZA(),f._UZ(27,"input",51),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(28,"div",52),f.TgZ(29,"button",53),f.NdJ("click",function(){return f.CHM(r),f.oxw().onAddParty()}),f._uU(30,"OK"),f.qZA(),f.TgZ(31,"button",54),f.NdJ("click",function(){f.CHM(r);var e=f.oxw(),t=f.MAs(125);return e.onCloseAddParty(t)}),f._uU(32,"cancel"),f.qZA(),f.qZA(),f.qZA()}if(2&e){var o=f.oxw();f.xp6(5),f.Q6J("formGroup",o.formParty)}}var le=function(){return[10,20,50,100,500]},se=function(){var r=function(){function r(e,o,i,a,n){var l=this;t(this,r),this.api=e,this.fb=o,this.fbParty=i,this.dialogs=a,this.modalService=n,this.outID=0,this.DOID=0,this.DisptID=0,this.tab=0,this.DID=0,this.Out_Count=0,this.OutwardDetailsData={},this.ChargesListData=[],this.OutwardDetailList=[],this.config={backdrop:!1,ignoreBackdropClick:!0},this.SaveCustomerParty={},this.GetPendingDO={},this.newArr=[],this.Saveclick=!1,this.PendingDOListColum=[{header:"DispatchID",field:"DispatchID",hide:!0},{header:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{header:"DeliveryOrderNo",field:"DeliveryOrderNo"},{header:"DispatchNo",field:"DispatchNo"},{header:"CreatedDate",field:"CreatedDate",hide:!0},{header:"OrderGivenBy",field:"OrderGivenBy"},{header:"DeliverTo",field:"DeliverTo"},{header:"ShippingAddress",field:"ShippingAddress"},{header:"Remarks",field:"Remarks",hide:!1},{header:"TruckNo",field:"TruckNo",hide:!1},{header:"ContainerNo",field:"ContainerNo"}],this.DeliveryOrderDetailColumns=[{field:"Outward",hide:!1,cellRenderer:function(e){return l.DeliveryOrderDetailCellRenderer(e)},width:10},{field:"ProductName",hide:!1},{field:"LotNo",hide:!1,resizable:!0},{field:"BrandName"},{field:"CountInPacket",hide:!0},{field:"StorageArea",hide:!0},{field:"DispatchQuantity"},{field:"FirstLotNo",hide:!1},{field:"DeliveryOrderDID",hide:!1},{field:"DispatchDID"},{field:"ProductID",hide:!1}],this.DeliveryOrderDetailChargeColumns=[{field:"Add",width:10,hide:!1,cellRenderer:function(e){return l.DeliveryOrderChargeCellEditRenderer(e)}},{field:"ServiceID",hide:!0},{field:"ServiceName",hide:!1,resizable:!0},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.Columnsdata=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnCancelledOutward.bind(this),label:"Click 1"}},{headerName:"OutWardID",field:"OutWardID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OutWardNo",field:"OutWardNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WarehouseID",field:"WarehouseID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseName",field:"WareHouseName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OutWardDate",field:"OutWardDate",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchNo",field:"DispatchNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransporterName",field:"TransporterName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"IsCancelled",field:"IsCancelled",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DriverName",field:"DriverName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DocID",field:"DocID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LoadingBy",field:"LoadingBy",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser();var s=new m.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=s,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:X},this.form=this.fb.group({customer_id:[null,u.kI.required],Outward_Date:[null,u.kI.required],txtTruck_No:[null,u.kI.required],txtContainer_No:[null,u.kI.required],cbCustomer_Party:[null,u.kI.required],cbRemarks:["",u.kI.required],txtDriver_Name:[null,u.kI.required],txtDriver_MobileNo:[null,u.kI.required],cbDock_Name:[null,u.kI.required],cbLodingBy_Name:[null,u.kI.required],cbLabourContractor:[null,u.kI.required]}),this.formParty=this.fbParty.group({txtPartyName:["",u.kI.required],txtShippingAddress1:["",u.kI.required],txtShippingAddress2:["",u.kI.required],txtPinCode:["",u.kI.required]})}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdown(),this.BindCustomerParty(),this.BindOutwardList(),this.DeliveryOrderDetailList=[],this.DeliveryOrderDetailChargeList=[]}},{key:"BindDropdown",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.get("/Customer").subscribe(function(e){r.customerList=e},function(e){console.error(e)}),this.api.get("/Remarks").subscribe(function(e){r.remarkList=e.filter(function(e){return 3==e.ProcessID})},function(e){console.error(e)}),this.api.get("/dock").subscribe(function(e){r.dockList=e},function(e){console.error(e)}),this.api.get("/UnloadingBy").subscribe(function(e){r.unloadingList=e},function(e){console.error(e)}),this.api.get("/LabourContracter").subscribe(function(e){r.labourContractorList=e},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"BindCustomerParty",value:function(){var e=this;this.api.get("/CustomerParty").subscribe(function(t){e.customePartyList=t},function(e){console.error(e)})}},{key:"BindOutwardList",value:function(){var e=this;this.api.post("/Outward/GetOutwardList",{outwardID:0,warehouseID:1,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"",createdBy:0,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:0}).subscribe(function(t){e.OutwardList12=t},function(e){console.error(e)})}},{key:"tabOutward",value:function(e){this.tab=e}},{key:"OnSearchPendingDO",value:function(){var e,t=this;null==this.form.value.customer_id||""==this.form.value.customer_id?(alert("Please .... Select Customer Name"),null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus()):(this.GetPendingDO={CustomerID:this.form.value.customer_id,WarehouseId:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId},this.api.post("/Outward/GetDeliveryOrderByID",this.GetPendingDO).subscribe(function(e){e.length>0?t.PendingDOList=e:alert("No Pending DO .....")},function(e){console.error(e)}))}},{key:"openPartyWindow",value:function(e){var t;null==this.form.value.customer_id||""==this.form.value.customer_id?(alert("Please .... Select Customer Name"),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus()):this.modalService.open(e)}},{key:"onCloseAddParty",value:function(e){this.modalService.dismissAll(e)}},{key:"onAddParty",value:function(){var e,t=this;null==this.formParty.value.txtPartyName||""==this.formParty.value.txtPartyName?(alert("Please .... Enter Party Name"),null===(e=null==document?void 0:document.getElementById("txtPartyName"))||void 0===e||e.focus()):(this.SaveCustomerParty={CustomerPartyID:0,CustomerID:this.form.value.customer_id,PartyName:this.formParty.value.txtPartyName,ShippingAddress:this.formParty.value.txtShippingAddress1,ShippingAddress1:this.formParty.value.txtShippingAddress2,PinCode:this.formParty.value.txtPinCode,CreatedBy:this.currentUser.userId},this.api.post("/CustomerParty/CustomerPartysave",this.SaveCustomerParty).subscribe(function(e){alert(e),t.formParty.reset(),t.BindCustomerParty()},function(e){console.error(e)}))}},{key:"onRowDblclicked",value:function(e,t){var r,o=this;if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)alert("Please .... Select Labour Contractor"),null===(r=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===r||r.focus();else{this.DOID=Number(e.cellSelection[0].rowData.DeliveryOrderID),this.DisptID=Number(e.cellSelection[0].rowData.DispatchID);var i=this.customePartyList.filter(function(t){return t.PartyName==e.cellSelection[0].rowData.DeliverTo});this.form.patchValue({txtTruck_No:e.cellSelection[0].rowData.TruckNo,txtContainer_No:e.cellSelection[0].rowData.ContainerNo,cbCustomer_Party:i[0].CustomerPartyID}),this.api.post("/Outward/GetDeliveryOrderDetail",{outwardID:0,warehouseID:0,outWardDate:0,billStartDate:0,deliveryOrderID:0,customerPartyID:0,truckNo:0,containerNo:0,transporterName:0,remarks:0,createdBy:0,customerID:0,driverName:0,driverNo:0,docID:0,loadingBy:0,transferID:0,dispatchID:e.cellSelection[0].rowData.DispatchID,StatusID:0}).subscribe(function(e){o.DeliveryOrderDetailList=e},function(e){console.error(e)})}}},{key:"DeliveryOrderDetailCellRenderer",value:function(e){var t=this,r=document.createElement("input");r.type="checkbox",r.value="true",r.checked=e.value;var o={CustomerID:this.form.value.customer_id,WarehouseId:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId,ProductID:e.data.ProductID};if(r.addEventListener("click",function(t){e.setValue(1!=e.value)}),"true"==e.value.toString())this.api.post("/Outward/GetOutwardServices",o).subscribe(function(r){if(t.DeliveryOrderDetailChargeList=[],t.DeliveryOrderDetailChargeList=r,t.DID=t.DID+1,t.OutwardDetailsData={OutwardDID:t.DID,DeliveryOrderDID:e.data.DeliveryOrderDID,DispatchDID:e.data.DispatchDID,OutQuantity:e.data.DispatchQuantity,LabourContractorID:t.form.value.cbLabourContractor},t.OutwardDetailList.length>0){var o=t.OutwardDetailList.filter(function(t){return t.DeliveryOrderDID!=e.data.DeliveryOrderDID});t.OutwardDetailList=o}t.OutwardDetailList.push(t.OutwardDetailsData),t.DeliveryOrderDetailChargeList.forEach(function(e){1==e.Add&&t.ChargesListData.push({OutwardDID:t.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,Rate:e.C_Rate,L_Rate:e.L_Rate})}),t.ChargesListData.slice()},function(e){console.error(e)});else if(this.DeliveryOrderDetailChargeList=[],this.OutwardDetailList.length>0){var i=this.OutwardDetailList.filter(function(t){return t.DeliveryOrderDID==e.data.DeliveryOrderDID}),a=this.ChargesListData.filter(function(e){return e.OutwardDID!=i[0].OutwardDID});this.ChargesListData=a}return r}},{key:"DeliveryOrderChargeCellEditRenderer",value:function(e){var t=this,r=document.createElement("input");return r.type="checkbox",r.value="true",r.checked=e.value,r.addEventListener("click",function(r){e.setValue(1!=e.value);var o=t.ChargesListData.filter(function(e){return e.OutwardDID!=t.DID});t.ChargesListData=o,t.DeliveryOrderDetailChargeList.forEach(function(e){1==e.Add&&t.ChargesListData.push({OutwardDID:t.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,Rate:e.C_Rate,L_Rate:e.L_Rate})}),t.ChargesListData.slice()}),r}},{key:"OnSaveOutward",value:function(){var e,t,r,o,i,a,n=this;if(this.DeliveryOrderDetailList.length>0){var l=this.DeliveryOrderDetailList.filter(function(e){return 0==e.Outward});this.Out_Count=l.length}if(console.log("Save"),null==this.form.value.customer_id||""==this.form.value.customer_id)return alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus());if(null==this.form.value.Outward_Date)return alert("Please... Select Outward Date ..!!!"),void(null===(t=null==document?void 0:document.getElementById("Outward_Date"))||void 0===t||t.focus());if(null==this.form.value.txtTruck_No||""==this.form.value.txtTruck_No)return alert("Please .... Enter Truck No ...."),void(null===(r=null==document?void 0:document.getElementById("txtTruck_No"))||void 0===r||r.focus());if(null==this.form.value.cbDock_Name||""==this.form.value.cbDock_Name)return alert("Please .... select Dock name ...."),void(null===(o=null==document?void 0:document.getElementById("cbDock_Name"))||void 0===o||o.focus());if(null==this.form.value.cbLodingBy_Name)return alert("Please... Select unloading by ..!!!"),void(null===(i=null==document?void 0:document.getElementById("cbLodingBy_Name"))||void 0===i||i.focus());if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)return alert("Please .... select Labour Contractor ...."),void(null===(a=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===a||a.focus());if(0!=this.DeliveryOrderDetailList.length)if(this.Out_Count>0)alert("Please... Select Outward Product ..!!!");else{this.Saveclick=!0,this.newArr=[],this.OutwardDetailList.forEach(function(e){n.ChargesListData.forEach(function(t){e.OutwardDID==t.OutwardDID&&n.newArr.push({OutwardDID:e.DeliveryOrderDID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,Rate:t.Rate,L_Rate:t.L_Rate})})}),this.ChargesListData=this.newArr;var s={OutwardID:this.outID,WarehouseID:this.currentUser.warehouseId,OutWardDate:this.form.value.Outward_Date,BillStartDate:this.form.value.Outward_Date,DeliveryOrderID:this.DOID,CustomerPartyID:this.form.value.cbCustomer_Party,TruckNo:this.form.value.txtTruck_No,ContainerNo:this.form.value.txtContainer_No,TransporterName:"",Remarks:this.form.value.cbRemarks,CreatedBy:this.currentUser.userId,CustomerID:Number(this.form.value.customer_id),OutwardDetailModel:this.OutwardDetailList,OutwardChargeModel:this.ChargesListData,DriverName:this.form.value.txtDriver_Name,DriverNo:this.form.value.txtDriver_MobileNo,DocID:Number(this.form.value.cbDock_Name),LoadingBy:Number(this.form.value.cbLodingBy_Name),TransferID:0,DispatchID:this.DisptID};this.api.post("/Outward/Outward_Insert",s).subscribe(function(e){n.BindOutwardList()},function(e){console.error(e)})}else alert("Please... Add Outward Details ..!!!")}},{key:"OnResetOuward",value:function(){this.form.reset(),this.Saveclick=!1,this.BindOutwardList();var e=new m.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=e,this.outID=0,this.DOID=0,this.DisptID=0,this.BindCustomerParty(),this.DeliveryOrderDetailList=[],this.DeliveryOrderDetailChargeList=[],this.PendingDOList=[],this.SaveCustomerParty=[],this.DeliveryOrderDetailList=[],this.OutwardDetailList=[],this.ChargesListData=[],this.Out_Count=0,this.newArr=[]}},{key:"onDeleteOutward",value:function(e){var t=this;console.log("0",e);var r={outwardID:e.OutWardID,warehouseID:e.WarehouseID,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"BY test",createdBy:this.currentUser.userId,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:e.StatusID};console.log("Delete ",r),this.api.post("/Outward/OutwardStatus_validation",r).subscribe(function(o){console.log("process ",o[0].Count),0==o[0].Count?(alert("Some data is updated. So Please, reperform your cancelled operation"),t.BindOutwardList()):(e.StatusID=82)?alert("Sorry,Outward already deactivated or deleted ....!!!"):t.api.post("/Outward/OutWard_Cancelled",r).subscribe(function(e){alert(e),t.BindOutwardList()},function(e){console.error(e)})},function(e){console.error(e)})}},{key:"OnCancelledOutward",value:function(e){var t=this;if(window.confirm("Do you want to cancel your Outward...!!!")){var r={outwardID:e.rowData.OutWardID,warehouseID:e.rowData.WarehouseID,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"BY test",createdBy:this.currentUser.userId,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:e.rowData.StatusID};this.api.post("/Outward/OutwardStatus_validation",r).subscribe(function(o){0==o[0].Count?(alert("Some data is updated. So Please, reperform your cancelled operation"),t.BindOutwardList()):(e.rowData.StatusID=82)?alert("Sorry,Outward already deactivated or deleted ....!!!"):t.api.post("/Outward/OutWard_Cancelled",r).subscribe(function(e){alert(e),t.BindOutwardList()},function(e){console.error(e)})},function(e){console.error(e)})}else console.log("Cancel")}}]),r}();return r.\u0275fac=function(e){return new(e||r)(f.Y36(c.sM),f.Y36(u.qu),f.Y36(u.qu),f.Y36(g.cP),f.Y36(D.FF))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-outward"]],decls:126,vars:39,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Outward"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-5","col-md-5"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-3","col-md-3"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],[1,"col-sm-4","col-md-4"],["type","datetime-local","formControlName","Outward_Date","id","Outward_Date","placeholder","","name","deliveryorder_date",1,"form-control","form-control-rounded",3,"ngModel"],[1,"col-sm-6","col-md-6"],["type","text","formControlName","txtTruck_No","id","txtTruck_No","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainer_No","id","txtContainer_No","placeholder","",1,"form-control","form-control-sm"],["formControlName","cbCustomer_Party","id","cbCustomer_Party",1,"form-control","form-control-sm"],["formControlName","cbRemarks","id","cbRemarks",1,"form-control","form-control-sm"],["type","text","formControlName","txtDriver_Name","id","txtDriver_Name","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtDriver_MobileNo","id","txtDriver_MobileNo","placeholder","",1,"form-control","form-control-sm"],["formControlName","cbDock_Name","id","cbDock_Name",1,"form-control","form-control-sm"],["formControlName","cbLodingBy_Name","id","cbLodingBy_Name",1,"form-control","form-control-sm"],["formControlName","cbLabourContractor","id","cbLabourContractor",1,"form-control","form-control-sm"],[1,"row"],[1,"col-12"],[1,"font-weight-bold"],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridPendingDOdList",""],[1,"col-8"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],[1,"col-4"],[1,"col-sm-4"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"click"],["label","Outward List"],[1,"ag-theme-alpine",2,"height","400px",3,"rowData","columnDefs","frameworkComponents"],["AddPartyContent",""],[3,"value"],[1,"modal-header"],["id","modal-basic-title"],[1,"col-sm-6"],["type","text","formControlName","txtPartyName","id","txtPartyName","autocomplete","off",1,"form-control","form-control-sm"],["for","company"],["type","text","formControlName","txtShippingAddress1","id","txtShippingAddress1",1,"form-control","form-control-sm"],["type","text","formControlName","txtShippingAddress2","id","txtShippingAddress2",1,"form-control","form-control-sm"],["type","text","formControlName","txtPinCode","id","txtPinCode",1,"form-control","form-control-sm"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-info",3,"click"]],template:function(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabOutward(e)})("selectedIndexChange",function(e){return t.tab=e}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.TgZ(13,"option",10),f._uU(14,"Select"),f.qZA(),f.YNc(15,ee,2,2,"option",11),f.qZA(),f._UZ(16,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",14),f.TgZ(19,"button",15),f.NdJ("click",function(){return t.OnSearchPendingDO()}),f._uU(20,"Pending DO"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(21,"div",16),f.TgZ(22,"div",8),f.TgZ(23,"label"),f._uU(24,"Outward Date"),f.qZA(),f._UZ(25,"input",17),f.ALo(26,"date"),f.qZA(),f.qZA(),f.TgZ(27,"div",18),f.TgZ(28,"div",8),f.TgZ(29,"label"),f._uU(30,"Truck No"),f.qZA(),f._UZ(31,"input",19),f.qZA(),f.qZA(),f.TgZ(32,"div",18),f.TgZ(33,"div",8),f.TgZ(34,"label"),f._uU(35,"Container No"),f.qZA(),f._UZ(36,"input",20),f.qZA(),f.qZA(),f.TgZ(37,"div",16),f.TgZ(38,"div",8),f.TgZ(39,"label"),f._uU(40,"Customer Party"),f.qZA(),f.TgZ(41,"select",21),f.TgZ(42,"option",10),f._uU(43,"Select"),f.qZA(),f.YNc(44,te,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(45,"div",13),f.TgZ(46,"div",14),f.TgZ(47,"button",15),f.NdJ("click",function(){f.CHM(r);var e=f.MAs(125);return t.openPartyWindow(e)}),f._uU(48,"ADD Party"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(49,"div",7),f.TgZ(50,"div",8),f.TgZ(51,"label"),f._uU(52,"Remarks"),f.qZA(),f.TgZ(53,"select",22),f.TgZ(54,"option",10),f._uU(55,"Select"),f.qZA(),f.YNc(56,re,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(57,"div",18),f.TgZ(58,"div",8),f.TgZ(59,"label"),f._uU(60,"Driver Name"),f.qZA(),f._UZ(61,"input",23),f.qZA(),f.qZA(),f.TgZ(62,"div",18),f.TgZ(63,"div",8),f.TgZ(64,"label"),f._uU(65,"Driver Mobile No"),f.qZA(),f._UZ(66,"input",24),f.qZA(),f.qZA(),f.TgZ(67,"div",16),f.TgZ(68,"div",8),f.TgZ(69,"label"),f._uU(70,"Dock Name"),f.qZA(),f.TgZ(71,"select",25),f.TgZ(72,"option",10),f._uU(73,"Select"),f.qZA(),f.YNc(74,oe,2,2,"option",11),f.qZA(),f._UZ(75,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(76,"div",16),f.TgZ(77,"div",8),f.TgZ(78,"label"),f._uU(79,"LodingBy Name"),f.qZA(),f.TgZ(80,"select",26),f.TgZ(81,"option",10),f._uU(82,"Select"),f.qZA(),f.YNc(83,ie,2,2,"option",11),f.qZA(),f._UZ(84,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(85,"div",16),f.TgZ(86,"div",8),f.TgZ(87,"label"),f._uU(88,"Labour Contractor"),f.qZA(),f.TgZ(89,"select",27),f.TgZ(90,"option",10),f._uU(91,"Select"),f.qZA(),f.YNc(92,ae,2,2,"option",11),f.qZA(),f._UZ(93,"mat-error",12),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(94,"hr"),f.TgZ(95,"div",28),f.TgZ(96,"div",29),f.TgZ(97,"p",30),f._uU(98,"Pending DO"),f.qZA(),f.TgZ(99,"mtx-grid",31,32),f.NdJ("dblclick",function(e){f.CHM(r);var o=f.MAs(100);return t.onRowDblclicked(o,e)}),f.qZA(),f.qZA(),f.qZA(),f._UZ(101,"hr"),f.TgZ(102,"div",28),f.TgZ(103,"div",33),f.TgZ(104,"p",30),f._uU(105,"Product List"),f.qZA(),f.TgZ(106,"div",34),f._UZ(107,"ag-grid-angular",35),f.qZA(),f.qZA(),f.TgZ(108,"div",36),f.TgZ(109,"p",30),f._uU(110,"Product Charges"),f.qZA(),f.TgZ(111,"div",34),f._UZ(112,"ag-grid-angular",35),f.qZA(),f.qZA(),f.qZA(),f._UZ(113,"hr"),f.TgZ(114,"div",28),f.TgZ(115,"div",37),f.TgZ(116,"button",38),f.NdJ("click",function(){return t.OnSaveOutward()}),f._uU(117,"Save"),f.qZA(),f.qZA(),f.TgZ(118,"div",37),f.TgZ(119,"button",39),f.NdJ("click",function(){return t.OnResetOuward()}),f._uU(120,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(121,"mat-tab",40),f.TgZ(122,"div",29),f._UZ(123,"ag-grid-angular",41),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(124,ne,33,1,"ng-template",null,42,f.W1O)}2&e&&(f.xp6(3),f.Q6J("selectedIndex",t.tab),f.xp6(2),f.Q6J("formGroup",t.form),f.xp6(10),f.Q6J("ngForOf",t.customerList),f.xp6(10),f.Q6J("ngModel",f.xi3(26,35,t.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(19),f.Q6J("ngForOf",t.customePartyList),f.xp6(12),f.Q6J("ngForOf",t.remarkList),f.xp6(18),f.Q6J("ngForOf",t.dockList),f.xp6(9),f.Q6J("ngForOf",t.unloadingList),f.xp6(9),f.Q6J("ngForOf",t.labourContractorList),f.xp6(7),f.Q6J("data",t.PendingDOList)("columns",t.PendingDOListColum)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!0)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(38,le))("pageIndex",0),f.xp6(8),f.Q6J("rowData",t.DeliveryOrderDetailList)("columnDefs",t.DeliveryOrderDetailColumns),f.xp6(5),f.Q6J("rowData",t.DeliveryOrderDetailChargeList)("columnDefs",t.DeliveryOrderDetailChargeColumns),f.xp6(4),f.Q6J("disabled",t.Saveclick),f.xp6(7),f.Q6J("rowData",t.OutwardList12)("columnDefs",t.Columnsdata)("frameworkComponents",t.frameworkComponents))},directives:[p.xw,p.yH,v.a8,I.SP,I.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,m.sg,y.TO,u.Fj,b.CM,T.N8],pipes:[m.uU],styles:[""]}),r}(),de=function(){var e=function(){function e(){t(this,e),this.label=""}return o(e,[{key:"agInit",value:function(e){this.params=e,this.label=this.params.label||null}},{key:"refresh",value:function(e){return!0}},{key:"onClick",value:function(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-shiftingedit-button"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"button",0),f.NdJ("click",function(e){return t.onClick(e)}),f._uU(1,"Delete"),f.qZA())},styles:[""]}),e}(),ue=a(22238);function ce(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function me(e,t){1&e&&(f.TgZ(0,"span"),f._uU(1,"Customer Name"),f.qZA())}function fe(e,t){if(1&e&&(f.TgZ(0,"div",47),f.YNc(1,me,2,0,"span",48),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.cbCustomerID||null==r.f.cbCustomerID.errors?null:r.f.cbCustomerID.errors.required)}}function he(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Enter Lot No"),f.qZA())}function ge(e,t){if(1&e&&(f.TgZ(0,"div",47),f.YNc(1,he,2,0,"div",48),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtLotNo||null==r.f.txtLotNo.errors?null:r.f.txtLotNo.errors.required)}}function De(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Enter inward date"),f.qZA())}function pe(e,t){if(1&e&&(f.TgZ(0,"div",47),f.YNc(1,De,2,0,"div",48),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.shift_date||null==r.f.shift_date.errors?null:r.f.shift_date.errors.required)}}function ve(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.UserID),f.xp6(1),f.Oqu(r.UserName)}}function Ie(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Select Item Type"),f.qZA())}function ye(e,t){if(1&e&&(f.TgZ(0,"div",47),f.YNc(1,Ie,2,0,"div",48),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.cbloadingByID.errors?null:r.f.cbloadingByID.errors.required)}}function Ze(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.StorageAreaID),f.xp6(1),f.hij("",r.Storage_Area_Name," ")}}function Te(e,t){if(1&e&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.hij(" ",r.ContractorName,"")}}var be=function(e){return{"is-invalid":e}},Ce=function(){return[10,20,50,100,500]},we=function(){var r=function(){function r(e,o,i,a,n){t(this,r),this.fb=e,this.fbAdd=o,this.api=i,this.dialog=a,this.dialogBox=n,this.submitted=!1,this.HideSaveButton=!0,this.tab=0,this.UserID=0,this.ServiceList=[],this.ShiftingDetailList=[],this.SDetailSaveList=[],this.SChargeSaveList=[],this.DetailList=[],this.ShiftDetail={},this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.shiftingsDID=0,this.Flag=!1,this.ShiftingID=0,this.BalanceStockColumn=[{header:"InwardDID",field:"InwardDID",hide:!1},{header:"WareHouseID",field:"WareHouseID",hide:!1},{header:"InwardLocationID",field:"InwardLocationID"},{header:"StorageAreaID",field:"StorageAreaID"},{header:"Location",field:"Location",hide:!1},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo"},{header:"BrandName",field:"BrandName"},{header:"ItemsInPacket",field:"ItemsInPacket",hide:!1},{header:"InQuantity",field:"InQuantity",hide:!1},{header:"OutQuantity",field:"OutQuantity"},{header:"InprocessQuantity",field:"InprocessQuantity"},{header:"BalanceQuantity",field:"BalanceQuantity"}],this.serviceColumns=[{field:"ShiftingID",hide:!0},{field:"ServiceID",hide:!0},{field:"ServiceName",hide:!1,resizable:!0,width:120},{field:"Rate",hide:!1,width:70,cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",cellStyle:function(e){return e.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}},{field:"Rate_L",hide:!1,width:80,cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",cellStyle:function(e){return e.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}}],this.ShiftingDetailColumns=[{header:"ShiftingDID",field:"ShiftingDID",hide:!1},{header:"InwardLocationID",field:"InwardLocationID",hide:!1},{header:"InwardDID",field:"InwardDID"},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo",hide:!1},{header:"BrandName",field:"BrandName"},{header:"ItemInPackets",field:"ItemInPackets"},{header:"BalanceQuantity",field:"BalanceQuantity"},{header:"ShiftingQuantity",field:"ShiftingQuantity",hide:!1},{header:"FromLocation",field:"FromLocation",hide:!1},{header:"ToLocation",field:"ToLocation"},{header:"LabourContractor",field:"LabourContractor",hide:!1},{header:"FromLocationID",field:"FromLocationID"},{header:"ToLocationID",field:"ToLocationID",hide:!1},{header:"LabourContractorID",field:"LabourContractorID"}],this.ShiftingListColumnDefs=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnCancelledShifting.bind(this),label:"Click 1"}},{headerName:"ShiftingDID",field:"ShiftingDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShiftingID",field:"ShiftingID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromLocation",field:"FromLocation",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToLocation",field:"ToLocation",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Quantity",field:"Quantity",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LabourContractorName",field:"LabourContractorName",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LoadingBy",field:"LoadingBy",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedBy",field:"CreatedBy",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedDate",field:"CreatedDate",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WarehouseID",field:"WarehouseID",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0}];var l=new m.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=l,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:de}}return o(r,[{key:"ngOnInit",value:function(){this.form=this.fb.group({cbCustomerID:["",u.kI.required],txtLotNo:[""],shift_date:["",u.kI.required],cbloadingByID:[null,u.kI.required],txtProductName:[""],txtShiftDetailLotNo:[""],txtBrandName:[""],txtpacketcount:[""],txtBalquantity:[""],txtShiftingQty:[""],txtLocation:[""],cbToLocation:[""],cblabourcontractor_id:[""]}),this.ShiftingServiceList=[],this.BindDropdown(),this.BindShiftingList()}},{key:"BindDropdown",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r,o=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={warehouseID:this.currentUser.warehouseId,StorageAreaID:0,LTD_StorageAreaS:null,createdBy:0,BlockID:0},this.api.get("/Customer").subscribe(function(e){o.customerList=e},function(e){console.error(e)}),this.api.get("/UnloadingBy").subscribe(function(e){o.loadingByList=e},function(e){console.error(e)}),this.api.get("/LabourContracter").subscribe(function(e){o.labourContractorList=e},function(e){console.error(e)}),this.api.post("/Storage/StorageArea_Select",r).subscribe(function(e){o.StorageAreas=e},function(e){console.error(e)});case 2:case"end":return e.stop()}},t,this)}))}},{key:"BindShiftingList",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.post("/Shifting/Shifting_List",{warehouseID:this.currentUser.warehouseId,StorageAreaID:0,LTD_StorageAreaS:null,createdBy:0,BlockID:0}).subscribe(function(e){r.ShiftingList=e},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"f",get:function(){return this.form.controls}},{key:"OnSearchClick",value:function(){var e,t,r=this;return null==this.form.value.cbCustomerID||""==this.form.value.cbCustomerID?(alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("cbCustomerID"))||void 0===e||e.focus())):null==this.form.value.txtLotNo||""==this.form.value.txtLotNo?(alert("Please .... Enter Lot No "),void(null===(t=null==document?void 0:document.getElementById("txtLotNo"))||void 0===t||t.focus())):void this.api.post("/Shifting/GetInwardDetails",{remarks:"",shiftingDID:0,shiftingID:0,warehouseID:0,customerID:this.form.value.cbCustomerID,createdBy:0,shiftingDate:0,loadingBy:0,LotNo:this.form.value.txtLotNo}).subscribe(function(e){r.BalanceStockList=e},function(e){console.error(e)})}},{key:"onRowDblclicked",value:function(e,t){var r=this;this.api.get("/Shifting/Shifting_services").subscribe(function(t){var o;r.ShiftingServiceList=t,r.InwardDID=0,r.InwardLocationID=0,r.WareHousesID=0,r.FromLocationID=0,r.form.controls.txtProductName.reset(),r.form.controls.txtShiftDetailLotNo.reset(),r.form.controls.txtBrandName.reset(),r.form.controls.txtpacketcount.reset(),r.form.controls.txtBalquantity.reset(),r.form.controls.txtShiftingQty.reset(),r.form.controls.txtLocation.reset(),r.form.controls.cbToLocation.reset(),r.InwardDID=e.cellSelection[0].rowData.InwardDID,r.InwardLocationID=e.cellSelection[0].rowData.InwardLocationID,r.WareHousesID=e.cellSelection[0].rowData.WareHouseID,r.FromLocationID=e.cellSelection[0].rowData.StorageAreaID,r.form.patchValue({txtProductName:e.cellSelection[0].rowData.ProductName,txtShiftDetailLotNo:e.cellSelection[0].rowData.LotNo,txtBrandName:e.cellSelection[0].rowData.BrandName,txtpacketcount:e.cellSelection[0].rowData.ItemsInPacket,txtBalquantity:e.cellSelection[0].rowData.BalanceQuantity,txtShiftingQty:"",txtLocation:e.cellSelection[0].rowData.Location}),null===(o=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===o||o.focus()},function(e){console.error(e)})}},{key:"onKeyfilter",value:function(e){Number(this.form.value.txtBalquantity)>0&&Number(this.form.value.txtBalquantity)<Number(e)&&(alert("Shifting Quantity greater than the Balance Quantity ....!!!"),this.form.controls.txtShiftingQty.setValue(""))}},{key:"OnToLocationSelect",value:function(e){var t=this,r=this.StorageAreas.filter(function(e){return e.StorageAreaID==t.form.value.cbToLocation});(""!=this.form.value.txtLocation||null!=this.form.value.txtLocation)&&this.form.value.txtLocation==r[0].Storage_Area_Name&&(alert("Please Select other location"),this.form.controls.cbToLocation.reset())}},{key:"OnAddClick",value:function(){var e,t,r,o,i=this;if(null==this.form.value.txtShiftingQty||""==this.form.value.txtShiftingQty)return alert("Please .... Enter Shifting Quantity...!!"),void(null===(e=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===e||e.focus());if(Number(this.form.value.txtBalquantity)<Number(this.form.value.txtShiftingQty))return alert("Shifting Quantity greater than the Balance Quantity ....!!!"),void(null===(t=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===t||t.focus());if(null==this.form.value.cbToLocation||0==this.form.value.cbToLocation)return alert("Please .... Select To Location...!!"),void(null===(r=null==document?void 0:document.getElementById("cbToLocation"))||void 0===r||r.focus());if(null==this.form.value.cblabourcontractor_id||0==this.form.value.cblabourcontractor_id)return alert("Please .... Select Labour Contractor...!!"),void(null===(o=null==document?void 0:document.getElementById("cblabourcontractor_id"))||void 0===o||o.focus());var a=this.StorageAreas.filter(function(e){return e.StorageAreaID==i.form.value.cbToLocation}),n=this.StorageAreas.filter(function(e){return e.StorageAreaID==i.FromLocationID}),l=this.labourContractorList.filter(function(e){return e.LabourContractorID==i.form.value.cblabourcontractor_id});0==this.Flag&&(this.shiftingsDID=this.shiftingsDID+1);var s=this.ShiftingDetailList.filter(function(e){return e.ShiftingDID!=i.shiftingsDID});this.ShiftingDetailList=s;var d=this.ServiceList.filter(function(e){return e.ShiftingDID!=i.shiftingsDID});this.ServiceList=d,this.ShiftDetail=[],this.ShiftDetail={ShiftingDID:this.shiftingsDID,InwardLocationID:this.InwardLocationID,InwardDID:this.InwardDID,ProductName:this.form.value.txtProductName,LotNo:this.form.value.txtShiftDetailLotNo,BrandName:this.form.value.txtBrandName,ItemInPacket:this.form.value.txtpacketcount,BalanceQuantity:this.form.value.txtBalquantity,ShiftingQuantity:Number(this.form.value.txtShiftingQty),FromLocation:n[0].Storage_Area_Name,ToLocation:a[0].Storage_Area_Name,LabourContractor:l[0].ContractorName,FromLocationID:this.FromLocationID,ToLocationID:Number(this.form.value.cbToLocation),LabourContractorID:Number(this.form.value.cblabourcontractor_id)},this.DetailList=this.ShiftingDetailList,this.DetailList.push(this.ShiftDetail),this.ShiftingDetailList=this.DetailList.slice(),this.ShiftingServiceList.forEach(function(e){e.Rate>=0&&i.ServiceList.push({ShiftingDID:i.shiftingsDID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,Rate:e.Rate,Rate_L:e.Rate_L})}),this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.form.controls.txtProductName.reset(),this.form.controls.txtShiftDetailLotNo.reset(),this.form.controls.txtBrandName.reset(),this.form.controls.txtpacketcount.reset(),this.form.controls.txtBalquantity.reset(),this.form.controls.txtShiftingQty.reset(),this.form.controls.txtLocation.reset(),this.form.controls.cbToLocation.reset(),this.form.controls.txtLotNo.reset(),this.BalanceStockList=[],this.ShiftingServiceList=[]}},{key:"onSubmit",value:function(e){var t=this;this.submitted=!0,console.log(e),this.form.invalid?alert("invalid"):0==this.ShiftingDetailList.length?alert("Enter Shifting Detail ..."):(this.HideSaveButton=!1,alert("Save"),this.ShiftingDetailList.forEach(function(e){e.ShiftingDID>0&&t.SDetailSaveList.push({ShiftingDID:e.ShiftingDID,InwardLocationID:e.InwardLocationID,LotNo:e.LotNo,InwardDID:e.InwardDID,FromLocationID:e.FromLocationID,ToLocationID:e.ToLocationID,Quantity:e.ShiftingQuantity,LabourContractorID:e.LabourContractorID})}),this.ServiceList.forEach(function(e){(e.Rate>0||e.Rate_L>0)&&t.SChargeSaveList.push({ShiftingDID:e.ShiftingDID,ServiceID:e.ServiceID,Rate:e.Rate,Rate_L:e.Rate_L})}),this.api.post("/Shifting/Shifting_insert",{ShiftingID:this.ShiftingID,WarehouseID:this.currentUser.warehouseId,CustomerID:this.form.value.cbCustomerID,CreatedBy:this.currentUser.userId,TD_ShiftingDetails:this.SDetailSaveList,TD_ShiftingCharges:this.SChargeSaveList,ShiftingDate:this.form.value.shift_date,LoadingBy:this.form.value.cbloadingByID}).subscribe(function(e){t.dialog.alert(e.Table[0].Column1)},function(e){console.error(e)}))}},{key:"tabchange",value:function(e){this.tab=e}},{key:"onReset",value:function(){this.submitted=!1,this.HideSaveButton=!0}},{key:"onShiftDetailRowDblclick",value:function(e,t){var r=this;this.Flag=!0,this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.form.controls.txtProductName.reset(),this.form.controls.txtShiftDetailLotNo.reset(),this.form.controls.txtBrandName.reset(),this.form.controls.txtpacketcount.reset(),this.form.controls.txtBalquantity.reset(),this.form.controls.txtShiftingQty.reset(),this.form.controls.txtLocation.reset(),this.form.controls.cbToLocation.reset(),this.form.controls.cblabourcontractor_id.reset(),this.form.patchValue({txtProductName:e.cellSelection[0].rowData.ProductName,txtShiftDetailLotNo:e.cellSelection[0].rowData.LotNo,txtBrandName:e.cellSelection[0].rowData.BrandName,txtpacketcount:e.cellSelection[0].rowData.ItemsInPacket,txtBalquantity:e.cellSelection[0].rowData.BalanceQuantity,txtShiftingQty:e.cellSelection[0].rowData.ShiftingQuantity,txtLocation:e.cellSelection[0].rowData.FromLocation,cbToLocation:e.cellSelection[0].rowData.ToLocationID,cblabourcontractor_id:e.cellSelection[0].rowData.LabourContractorID}),this.InwardDID=e.cellSelection[0].rowData.InwardDID,this.InwardLocationID=e.cellSelection[0].rowData.InwardLocationID,this.WareHousesID=this.currentUser.warehouseId,this.FromLocationID=e.cellSelection[0].rowData.FromLocationID,this.shiftingsDID=e.cellSelection[0].rowData.ShiftingDID;var o=this.ServiceList.filter(function(e){return e.ShiftingDID==r.shiftingsDID});this.ShiftingServiceList=o}},{key:"OnCancelledShifting",value:function(e){var t=this;if(window.confirm("Do you want to cancel your Shifting...!!!")){var r={remarks:"",shiftingDID:0,shiftingID:e.rowData.ShiftingID,warehouseID:this.currentUser.warehouseId,customerID:this.form.value.cbCustomerID,createdBy:0,shiftingDate:0,loadingBy:0,LotNo:this.form.value.txtLotNo,StatusID:e.rowData.StatusID};console.log(r),this.api.post("/Shifting/ShiftingStatus_validation",r).subscribe(function(r){console.log(r),Number(r[0])>0?62==Number(e.rowData.StatusID)?t.dialog.alert("Sorry,this transaction has already cancelled ....!!!"):61==Number(e.rowData.StatusID)&&t.api.post("/Shifting/Shifting_Cancelled",{warehouseID:t.currentUser.warehouseId,StorageAreaID:0,shiftingDID:e.rowData.ShiftingDID,shiftingID:e.rowData.ShiftingID,LTD_StorageAreaS:null,BlockID:0,remarks:"text",createdBy:t.currentUser.userId}).subscribe(function(e){t.dialog.alert(e),t.BindShiftingList()},function(e){console.error(e)}):t.dialog.alert("Some data is updated. So Please reperform your delete operation...!!!")},function(e){console.error(e)})}}}]),r}();return r.\u0275fac=function(e){return new(e||r)(f.Y36(u.qu),f.Y36(u.qu),f.Y36(c.sM),f.Y36(g.cP),f.Y36(ue.uw))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-shifting"]],decls:129,vars:67,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Shifting"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-6"],[1,"form-group"],["formControlName","cbCustomerID","id","cbCustomerID",1,"form-control","form-control-sm",3,"ngClass"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-4"],["for","company"],["type","text","formControlName","txtLotNo","id","txtLotNo",1,"form-control","form-control-sm"],[1,"col-sm-2"],[1,"row"],[1,"form-group","pl-2"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],["type","datetime-local","formControlName","shift_date","id","shift_date","placeholder","yyyy-MM-dd","name","shift_date",1,"form-control","form-control-sm",3,"ngModel"],[1,"col-sm-8"],["formControlName","cbloadingByID","id","cbloadingByID",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-sm-12"],[1,"font-weight-bold"],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridPendingDOdList",""],[1,"col-12"],["type","text","formControlName","txtProductName","id","txtProductName","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShiftDetailLotNo","id","txtShiftDetailLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBrandName","id","txtBrandName","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtpacketcount","id","txtpacketcount","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBalquantity","id","txtBalquantity","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShiftingQty","id","txtShiftingQty","autocomplete","off","placeholder","",1,"form-control","form-control-sm",3,"keyup"],["txtShiftingQty",""],["type","text","formControlName","txtLocation","id","txtLocation","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbToLocation","id","cbToLocation",1,"form-control","form-control-sm",3,"change"],["disabled","",3,"ngValue"],["formControlName","cblabourcontractor_id","id","cblabourcontractor_id",1,"form-control","form-control-sm"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["gridShiftDetailList",""],["type","submit",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"hidden","value"],["label","Shifting List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabchange(e)})("selectedIndexChange",function(e){return t.tab=e}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.NdJ("ngSubmit",function(){return t.onSubmit(t.form)}),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.TgZ(13,"option",10),f._uU(14,"Select "),f.qZA(),f.YNc(15,ce,2,2,"option",11),f.qZA(),f.YNc(16,fe,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",8),f.TgZ(19,"label",14),f._uU(20,"LotNo"),f.qZA(),f._UZ(21,"input",15),f.YNc(22,ge,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(23,"div",16),f.TgZ(24,"div",17),f.TgZ(25,"div",18),f.TgZ(26,"button",19),f.NdJ("click",function(){return t.OnSearchClick()}),f._uU(27,"Apply "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(28,"div",13),f.TgZ(29,"div",8),f.TgZ(30,"label",14),f._uU(31,"Shifting Date"),f.qZA(),f._UZ(32,"input",20),f.ALo(33,"date"),f.YNc(34,pe,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(35,"div",21),f.TgZ(36,"div",8),f.TgZ(37,"label"),f._uU(38,"Loading By"),f.qZA(),f.TgZ(39,"select",22),f.TgZ(40,"option",10),f._uU(41,"Select "),f.qZA(),f.YNc(42,ve,2,2,"option",11),f.qZA(),f.YNc(43,ye,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(44,"div",23),f._UZ(45,"hr"),f.TgZ(46,"p",24),f._uU(47,"Pending DO"),f.qZA(),f.TgZ(48,"mtx-grid",25,26),f.NdJ("dblclick",function(e){f.CHM(r);var o=f.MAs(49);return t.onRowDblclicked(o,e)}),f.qZA(),f.qZA(),f.TgZ(50,"div",27),f._UZ(51,"hr"),f.TgZ(52,"p",24),f._uU(53,"Shifting Details"),f.qZA(),f.TgZ(54,"div",17),f.TgZ(55,"div",21),f.TgZ(56,"div",17),f.TgZ(57,"div",7),f.TgZ(58,"div",8),f.TgZ(59,"label"),f._uU(60,"Product Name"),f.qZA(),f._UZ(61,"input",28),f.qZA(),f.qZA(),f.TgZ(62,"div",7),f.TgZ(63,"div",8),f.TgZ(64,"label"),f._uU(65,"Lot No"),f.qZA(),f._UZ(66,"input",29),f.qZA(),f.qZA(),f.TgZ(67,"div",7),f.TgZ(68,"div",8),f.TgZ(69,"label"),f._uU(70,"Brand Name "),f.qZA(),f._UZ(71,"input",30),f.qZA(),f.qZA(),f.TgZ(72,"div",7),f.TgZ(73,"div",8),f.TgZ(74,"label"),f._uU(75,"Count In Packet"),f.qZA(),f._UZ(76,"input",31),f.qZA(),f.qZA(),f.TgZ(77,"div",7),f.TgZ(78,"div",8),f.TgZ(79,"label"),f._uU(80,"Balance Quantity"),f.qZA(),f._UZ(81,"input",32),f.qZA(),f.qZA(),f.TgZ(82,"div",7),f.TgZ(83,"div",8),f.TgZ(84,"label"),f._uU(85,"Shifting Quantity"),f.qZA(),f.TgZ(86,"input",33,34),f.NdJ("keyup",function(){f.CHM(r);var e=f.MAs(87);return t.onKeyfilter(e.value)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(88,"div",7),f.TgZ(89,"div",8),f.TgZ(90,"label"),f._uU(91,"Location"),f.qZA(),f._UZ(92,"input",35),f.qZA(),f.qZA(),f.TgZ(93,"div",7),f.TgZ(94,"div",8),f.TgZ(95,"label"),f._uU(96,"To Location"),f.qZA(),f.TgZ(97,"select",36),f.NdJ("change",function(e){return t.OnToLocationSelect(e)}),f.TgZ(98,"option",37),f._uU(99,"Select "),f.qZA(),f.YNc(100,Ze,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(101,"div",7),f.TgZ(102,"div",8),f.TgZ(103,"label"),f._uU(104,"Labour Contracter"),f.qZA(),f.TgZ(105,"select",38),f.TgZ(106,"option",37),f._uU(107,"Select "),f.qZA(),f.YNc(108,Te,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(109,"div",7),f.TgZ(110,"div",8),f.TgZ(111,"button",19),f.NdJ("click",function(){return t.OnAddClick()}),f._uU(112," Add "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(113,"div",13),f.TgZ(114,"div",39),f._UZ(115,"ag-grid-angular",40),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(116,"div",27),f._UZ(117,"hr"),f.TgZ(118,"p",24),f._uU(119," Shifting Detail List "),f.qZA(),f.TgZ(120,"mtx-grid",25,41),f.NdJ("dblclick",function(e){f.CHM(r);var o=f.MAs(121);return t.onShiftDetailRowDblclick(o,e)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(122,"div",23),f.TgZ(123,"div",8),f.TgZ(124,"button",42),f._uU(125," Save "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(126,"mat-tab",43),f.TgZ(127,"div",44),f._UZ(128,"ag-grid-angular",45),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Q6J("selectedIndex",t.tab),f.xp6(2),f.Q6J("formGroup",t.form),f.xp6(7),f.Q6J("ngClass",f.VKq(61,be,t.submitted&&t.f.cbCustomerID.invalid)),f.xp6(3),f.Q6J("ngForOf",t.customerList),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.cbCustomerID.invalid),f.xp6(6),f.Q6J("ngIf",t.submitted&&t.f.txtLotNo.invalid),f.xp6(10),f.Q6J("ngModel",f.xi3(33,58,t.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(2),f.Q6J("ngIf",t.submitted&&t.f.shift_date.invalid),f.xp6(5),f.Q6J("ngClass",f.VKq(63,be,t.submitted&&t.f.cbloadingByID.invalid)),f.xp6(3),f.Q6J("ngForOf",t.loadingByList),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.cbloadingByID.invalid),f.xp6(5),f.Q6J("data",t.BalanceStockList)("columns",t.BalanceStockColumn)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!0)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(65,Ce))("pageIndex",0),f.xp6(50),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",t.StorageAreas),f.xp6(6),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",t.labourContractorList),f.xp6(7),f.Q6J("rowData",t.ShiftingServiceList)("columnDefs",t.serviceColumns),f.xp6(5),f.Q6J("data",t.ShiftingDetailList)("columns",t.ShiftingDetailColumns)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(66,Ce))("pageIndex",0),f.xp6(4),f.Q6J("hidden",!t.HideSaveButton)("value",t.submitted),f.xp6(4),f.Q6J("rowData",t.ShiftingList)("columnDefs",t.ShiftingListColumnDefs)("frameworkComponents",t.frameworkComponents))},directives:[p.xw,p.yH,v.a8,I.SP,I.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,m.mk,Z.oO,u.YN,u.Kr,m.sg,m.O5,u.Fj,b.CM,T.N8],pipes:[m.uU],styles:[""]}),r}(),Ne=function(){var e=function(){function e(){t(this,e),this.label=""}return o(e,[{key:"agInit",value:function(e){this.params=e,this.label=this.params.label||null}},{key:"refresh",value:function(e){return!0}},{key:"onClick",value:function(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-transferdeletebutton"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(f.TgZ(0,"button",0),f.NdJ("click",function(e){return t.onClick(e)}),f._uU(1,"Delete"),f.qZA())},styles:[""]}),e}();function Ae(e,t){if(1&e&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function Se(e,t){1&e&&(f.TgZ(0,"span"),f._uU(1,"Select Customer"),f.qZA())}function Le(e,t){if(1&e&&(f.TgZ(0,"div",56),f.YNc(1,Se,2,0,"span",57),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.cbCustomerID||null==r.f.cbCustomerID.errors?null:r.f.cbCustomerID.errors.required)}}function xe(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"select Transfer date"),f.qZA())}function ke(e,t){if(1&e&&(f.TgZ(0,"div",56),f.YNc(1,xe,2,0,"div",57),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.Transfer_date||null==r.f.Transfer_date.errors?null:r.f.Transfer_date.errors.required)}}function _e(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Enter Lot No"),f.qZA())}function qe(e,t){if(1&e&&(f.TgZ(0,"div",56),f.YNc(1,_e,2,0,"div",57),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtTransfeNo||null==r.f.txtTransfeNo.errors?null:r.f.txtTransfeNo.errors.required)}}function Oe(e,t){if(1&e&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function Fe(e,t){1&e&&(f.TgZ(0,"span"),f._uU(1,"Select To Customer"),f.qZA())}function Ue(e,t){if(1&e&&(f.TgZ(0,"div",56),f.YNc(1,Fe,2,0,"span",57),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.cbToCustomerID||null==r.f.cbToCustomerID.errors?null:r.f.cbToCustomerID.errors.required)}}function Pe(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Order Given By"),f.qZA())}function Be(e,t){if(1&e&&(f.TgZ(0,"div",56),f.YNc(1,Pe,2,0,"div",57),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtOrderGivenBy||null==r.f.txtOrderGivenBy.errors?null:r.f.txtOrderGivenBy.errors.required)}}function Qe(e,t){1&e&&(f.TgZ(0,"div"),f._uU(1,"Enter Lot No"),f.qZA())}function Re(e,t){if(1&e&&(f.TgZ(0,"div",56),f.YNc(1,Qe,2,0,"div",57),f.qZA()),2&e){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtRemarks||null==r.f.txtRemarks.errors?null:r.f.txtRemarks.errors.required)}}function Je(e,t){if(1&e&&(f.TgZ(0,"option",58),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.ProductID),f.xp6(1),f.Oqu(r.ProductName)}}function Me(e,t){if(1&e&&(f.TgZ(0,"option",58),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.StorageAreaTypeID),f.xp6(1),f.hij("",r.ServiceName," ")}}function Ee(e,t){if(1&e&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.StorageAreaID),f.xp6(1),f.hij("",r.StorageArea," ")}}function Ye(e,t){if(1&e&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.hij("",r.ContractorName," ")}}function Ge(e,t){if(1&e&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&e){var r=t.$implicit;f.s9C("value",r.Remarks),f.xp6(1),f.hij("",r.Remarks," ")}}var We=function(e){return{"is-invalid":e}},He=function(){return[10,20,50,100,500]},Ve=[{path:"Inward",component:Q},{path:"DeliveryOrder",component:V},{path:"Dispatch",component:K},{path:"Outward",component:se},{path:"Shifting",component:we},{path:"Transfer",component:function(){var r=function(){function r(e,o,i,a,n){var l=this;t(this,r),this.fb=e,this.fbAdd=o,this.api=i,this.dialog=a,this.dialogBox=n,this.tab=0,this.submitted=!1,this.HideSaveButton=!0,this.DID=0,this.TransfersID=0,this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.NewLotNo="",this.NewLotNoID=0,this.TransferDetailsList=[],this.DetailList=[],this.ChargesList=[],this.TransferchargesList=[],this.TrnsNewLotList=[],this.flag=!1,this.TransferDetailtab=0,this.TransferDetailsListSave=[],this.TransferChargesListSave=[],this.ShiftingProductListCol=[{headerName:"InwardDID",field:"InwardDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductID",field:"ProductID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FirstLotNo",field:"FirstLotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BrandName",field:"BrandName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CountInPacket",field:"CountInPacket",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Location",field:"Location",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaType",field:"StorageAreaType",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductRemarks",field:"ProductRemarks",filter:"agTextColumnFilter",floatingFilter:!0}],this.serviceColumns=[{field:"Add",cellRenderer:function(e){return l.checkBoxCellEditRenderer(e)},hide:!1,width:10},{field:"TransferDID",hide:!0},{field:"ServiceID",hide:!0,resizable:!1},{field:"ServiceName"},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.TransferListColumnDefs=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnCancelledTransfer.bind(this),label:"Click 1"}},{headerName:"TransferID",field:"TransferID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransferNo",field:"TransferNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromCustomerID",field:"FromCustomerID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromCustomer",field:"FromCustomer",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToCustomerID",field:"ToCustomerID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToCustomer",field:"ToCustomer",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransferDate",field:"TransferDate",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseName",field:"WareHouseName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.TransferDetailColumns=[{header:"TransferDID",field:"TransferDID",hide:!0},{header:"InwardDID",field:"InwardDID",hide:!0},{header:"LotNo",field:"LotNo",hide:!1},{header:"NewLotNo",field:"NewLotNo"},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"BrandName",field:"BrandName"},{header:"InwardLocationID",field:"InwardLocationID",hide:!0},{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"ToStorageAreaID",field:"ToStorageAreaID",hide:!0},{header:"Location",field:"Location"},{header:"BalanceQty",field:"BalanceQty"},{header:"TransferQty",field:"TransferQty"},{header:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0},{header:"StorageAreaType",field:"StorageAreaType"},{header:"LabourContractorID",field:"LabourContractorID",hide:!0},{header:"LabourContractorName",field:"LabourContractorName"},{header:"countInPacket",field:"countInPacket"},{header:"ProductRemarks",field:"ProductRemarks"}];var s=new m.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=s,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:Ne}}return o(r,[{key:"ngOnInit",value:function(){this.ProductList=[],this.TransferServiceList=[],this.form=this.fb.group({cbCustomerID:["",u.kI.required],Transfer_date:["",u.kI.required],txtTransfeNo:["",u.kI.required],cbToCustomerID:["",u.kI.required],txtOrderGivenBy:[null,u.kI.required],txtRemarks:[""],txtLotNo:[""],cbproduct_id:[""],txtBalanceQty:[""],txtBrand:[""],txtCount:[""],txtTransferQty:[""],cbStorageAreaType:[""],txtBillingCycle:[""],ckCustomerarea:[""],cbRemarks:[""],txtNewLotNo:[""],cbLocation:[""],cbLabourContractor:[""]}),this.BindDropdown(),this.BindTransferList(),this.BindTransferNewLotList()}},{key:"f",get:function(){return this.form.controls}},{key:"BindDropdown",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r,o=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0},this.api.get("/Customer").subscribe(function(e){o.customerList=e},function(e){console.error(e)}),this.api.get("/StorageAreaType/ServieceStorageAreaType").subscribe(function(e){o.StorageAreaTypeList=e},function(e){console.error(e)}),this.api.post("/Transfer/GetStorageArea",r).subscribe(function(e){o.LocationList=e},function(e){console.error(e)}),this.api.get("/LabourContracter").subscribe(function(e){o.labourContractorList=e},function(e){console.error(e)}),this.api.get("/Remarks").subscribe(function(e){o.remarkList=e.filter(function(e){return 6==e.ProcessID})},function(e){console.error(e)});case 2:case"end":return e.stop()}},t,this)}))}},{key:"BindTransferNewLotList",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.TrnsNewLotList=[],this.NewLotNolist=[],this.BindNewLotNoData={InwardID:0,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""},this.api.post("/Inward/GetLotNo",this.BindNewLotNoData).subscribe(function(e){r.NewLotNolist=e,r.NewLotNo=r.NewLotNolist[0].Prefix+r.NewLotNolist[0].LotNo+r.NewLotNolist[0].Sufix,r.NewLotNoID=Number(r.NewLotNolist[0].LotNo),r.form.controls.txtNewLotNo.setValue(r.NewLotNo)},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"BindTransferList",value:function(){return(0,d.mG)(this,void 0,void 0,e().mark(function t(){var r=this;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.api.post("/Transfer/Transfer_List",{transferID:0,wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:"",createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(function(e){r.TransferList=e},function(e){console.error(e)});case 1:case"end":return e.stop()}},t,this)}))}},{key:"tabchange",value:function(e){this.tab=e}},{key:"OnSaveTransfer",value:function(e){var t=this;this.submitted=!0,console.log(e),this.TransferDetailsList.forEach(function(e){t.TransferDetailsList.length>0&&t.TransferDetailsListSave.push({TransferDID:e.TransferDID,InwardDID:e.InwardDID,ProductID:e.ProductID,LotNo:e.LotNo,InwardLocationID:e.InwardLocationID,StorageAreaID:e.StorageAreaID,TransferQuantity:e.TransferQty,ToStorageAreaID:e.ToStorageAreaID,LabourContractorID:e.LabourContractorID,Remarks:e.ProductRemarks,StorageAreaTypeID:e.StorageAreaTypeID,NewLotNo:e.NewLotNo})}),this.TransferDetailsListSave.slice(),this.TransferchargesList.forEach(function(e){t.TransferchargesList.length>0&&t.TransferChargesListSave.push({Add:e.Add,TransferDID:e.TransferDID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.TransferChargesListSave.slice(),this.SaveTransferData={TransferID:this.TransfersID,WareHouseID:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId,FromCustomerID:this.form.value.cbCustomerID,ToCustomerID:this.form.value.cbToCustomerID,TransferDate:this.form.value.Transfer_date,OrderGivenBy:this.form.value.txtOrderGivenBy,Remarks:this.form.value.txtRemarks,CreatedBy:this.currentUser.userId,TDTransferDetail:this.TransferDetailsListSave,TDTransferCharges:this.TransferChargesListSave,FinancialYearID:this.currentUser.FinantialYearId,StorageAreaMasterID:1},console.log(this.SaveTransferData),this.api.post("/Transfer/Transfer_Insert",this.SaveTransferData).subscribe(function(e){t.dialog.alert(e.Table[0].Message),t.BindTransferList()},function(e){console.error(e)})}},{key:"GetCustomerID",value:function(e){var t=this;this.api.post("/Transfer/GetTransferProductList",{transferID:0,wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:this.form.value.cbCustomerID,toCustomerID:0,transferDate:0,orderGivenBy:"",remarks:"",createdBy:0,financialYearID:this.currentUser.FinantialYearId,storageAreaMasterID:0}).subscribe(function(e){t.ProductList=e},function(e){console.error(e)}),this.api.post("/Inward/GetCustomerProducts?customerid="+this.form.value.cbCustomerID+"&warehouseid="+this.currentUser.warehouseId).subscribe(function(e){t.ProductNameList=e},function(e){console.error(e)})}},{key:"checkBoxCellEditRenderer",value:function(e){var t=this,r=document.createElement("input");return r.type="checkbox",r.value="false",r.checked=e.value,r.addEventListener("click",function(r){e.setValue(1!=e.value),t.ChargesList=[],t.TransferServiceList.forEach(function(e){1==e.Add&&t.ChargesList.push({Add:!0,TransferDID:t.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),t.ChargesList.slice()}),r}},{key:"OnCustomerarea",value:function(e){var t,r=this;1==this.form.value.ckCustomerarea?null==this.form.value.cbToCustomerID||""==this.form.value.cbToCustomerID?(alert("Please... Select To CustomerID ..!!!"),null===(t=null==document?void 0:document.getElementById("cbToCustomerID"))||void 0===t||t.focus(),this.form.controls.ckCustomerarea.setValue(!1)):this.api.post("/Transfer/GetStorageArea",{wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:this.form.value.cbToCustomerID,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(function(e){r.LocationList=e},function(e){console.error(e)}):this.api.post("/Transfer/GetStorageArea",{wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(function(e){r.LocationList=e},function(e){console.error(e)})}},{key:"onProductListRowClicked",value:function(e){var t,r=this,o={InwardID:0,CustomerID:Number(this.form.value.cbCustomerID),Remarks:"",CreatedBy:0,serviceID:0,ProductID:Number(e.data.ProductID),CompanyId:0,WarehouseId:this.currentUser.warehouseId,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""};this.api.post("/Transfer/GetTransferServices",o).subscribe(function(e){r.TransferServiceList=e},function(e){console.error(e)}),this.form.patchValue({txtLotNo:e.data.LotNo,cbproduct_id:e.data.ProductID,txtBrand:e.data.BrandName,txtBalanceQty:e.data.BalanceQuantity,txtCount:e.data.CountInPacket,cbStorageAreaType:e.data.StorageAreaTypeID,cbLocation:e.data.StorageAreaID}),this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.InwardDID=e.data.InwardDID,this.InwardLocationID=e.data.InwardLocationID,this.StorageAreaID=e.data.StorageAreaID,null===(t=null==document?void 0:document.getElementById("txtTransferQty"))||void 0===t||t.focus()}},{key:"onKeyTransferQty",value:function(e){Number(this.form.value.txtTransferQty)>0&&Number(this.form.value.txtBalanceQty)<Number(e)&&(this.dialog.alert("Transfer Quantity is less than equal to balance quantity ....!!!"),this.form.controls.txtTransferQty.setValue(""))}},{key:"OnAddClick",value:function(){var e,t,r=this;if(null==this.form.value.txtTransferQty||""==this.form.value.txtTransferQty||"0"==this.form.value.txtTransferQty)return null===(e=null==document?void 0:document.getElementById("txtTransferQty"))||void 0===e||e.focus(),void this.dialog.alert("Please .... Enter Transfer Quantity...");if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)return null===(t=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===t||t.focus(),void this.dialog.alert("Please .... Enter Labour Contractor....");if(1==this.flag){var o=this.DetailList.filter(function(e){return e.TransferDID!=r.DID});this.DetailList=o;var i=this.TransferchargesList.filter(function(e){return e.TransferDID!=r.DID});this.TransferchargesList=i}var a=this.ProductNameList.filter(function(e){return e.ProductID==r.form.value.cbproduct_id}),n=this.LocationList.filter(function(e){return e.StorageAreaID==r.form.value.cbLocation}),l=this.StorageAreaTypeList.filter(function(e){return e.StorageAreaTypeID==r.form.value.cbStorageAreaType}),s=this.labourContractorList.filter(function(e){return e.LabourContractorID==r.form.value.cbLabourContractor});0==this.flag&&(this.DID=this.DID+1,this.TrnsNewLotList.push({LotNo:String(this.NewLotNoID),Prefix:"",Sufix:""}),this.NewLotNoID=this.NewLotNoID+1),this.newTransferDetail=[],this.newTransferDetail={TransferDID:this.DID,InwardDID:this.InwardDID,LotNo:this.form.value.txtLotNo,NewLotNo:this.form.value.txtNewLotNo,ProductID:this.form.value.cbproduct_id,ProductName:a[0].ProductName,BrandName:this.form.value.txtBrand,InwardLocationID:this.InwardLocationID,StorageAreaID:this.StorageAreaID,ToStorageAreaID:Number(this.form.value.cbLocation),Location:n[0].StorageArea,BalanceQty:this.form.value.txtBalanceQty,TransferQty:Number(this.form.value.txtTransferQty),StorageAreaTypeID:this.form.value.cbStorageAreaType,StorageAreaType:l[0].ServiceName,LabourContractorID:this.form.value.cbLabourContractor,LabourContractorName:s[0].ContractorName,countInPacket:this.form.value.txtCount,ProductRemarks:this.form.value.cbRemarks},this.DetailList.push(this.newTransferDetail),this.TransferDetailsList=this.DetailList.slice(),this.TransferServiceList.forEach(function(e){1==e.Add&&r.TransferchargesList.push({Add:!0,TransferDID:r.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.NewLotNo=this.NewLotNolist[0].Prefix+this.NewLotNoID+this.NewLotNolist[0].Sufix,this.form.controls.txtNewLotNo.setValue(this.NewLotNo),this.form.controls.txtLotNo.reset(),this.form.controls.cbproduct_id.reset(),this.form.controls.txtBalanceQty.reset(),this.form.controls.txtBrand.reset(),this.form.controls.txtCount.reset(),this.form.controls.txtTransferQty.reset(),this.form.controls.cbStorageAreaType.reset(),this.form.controls.txtBillingCycle.reset(),this.form.controls.ckCustomerarea.reset(),this.form.controls.cbRemarks.reset(),this.form.controls.cbLocation.reset(),this.TransferServiceList=[],console.log("Add_detail",this.TransferDetailsList),console.log("Add_charges",this.TransferchargesList)}},{key:"onRowDblclickedTransfer",value:function(e,t){var r=this;this.flag=!0,this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.DID=e.cellSelection[0].rowData.TransferDID,this.InwardDID=e.cellSelection[0].rowData.InwardDID,this.InwardLocationID=e.cellSelection[0].rowData.InwardLocationID,this.StorageAreaID=e.cellSelection[0].rowData.StorageAreaID,this.form.patchValue({txtLotNo:e.cellSelection[0].rowData.LotNo,cbproduct_id:e.cellSelection[0].rowData.ProductID,txtBalanceQty:e.cellSelection[0].rowData.BalanceQty,txtBrand:e.cellSelection[0].rowData.BrandName,txtCount:e.cellSelection[0].rowData.countInPacket,txtTransferQty:e.cellSelection[0].rowData.TransferQty,cbStorageAreaType:e.cellSelection[0].rowData.StorageAreaTypeID,txtBillingCycle:"",ckCustomerarea:!1,cbRemarks:e.cellSelection[0].rowData.ProductRemarks,txtNewLotNo:e.cellSelection[0].rowData.NewLotNo,cbLocation:e.cellSelection[0].rowData.ToStorageAreaID,cbLabourContractor:e.cellSelection[0].rowData.LabourContractorID}),this.TransferDetailtab=0;var o={InwardID:0,CustomerID:Number(this.form.value.cbCustomerID),Remarks:"",CreatedBy:0,serviceID:0,ProductID:Number(e.cellSelection[0].rowData.ProductID),CompanyId:0,WarehouseId:this.currentUser.warehouseId,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""};this.api.post("/Transfer/GetTransferServices",o).subscribe(function(e){r.TransferServiceList=e,r.serviceListEditBind()},function(e){console.error(e)})}},{key:"serviceListEditBind",value:function(){var e=this,t=this.TransferchargesList.filter(function(t){return t.TransferDID==e.DID});this.TransferServiceTest=t;var r=this.TransferServiceTest.concat(this.TransferServiceList.filter(function(t){return!e.TransferServiceTest.find(function(e){return e.ServiceID==t.ServiceID})}));this.TransferServiceList=r,this.TransferServiceList.forEach(function(t){t.ServiceID>0&&(t.TransferDID=e.DID)})}},{key:"OnCancelledTransfer",value:function(e){var t=this;if(console.log(e.rowData),window.confirm("Do you want to cancel your Transfer...!!!")){var r={transferID:Number(e.rowData.TransferID),wareHouseID:Number(e.rowData.WareHouseID),companyID:0,fromCustomerID:Number(e.rowData.FromCustomerID),toCustomerID:0,transferDate:"",orderGivenBy:"",remarks:"",createdBy:0,financialYearID:0,storageAreaMasterID:0,StatusID:Number(e.rowData.StatusID)};console.log(r),this.api.post("/Transfer/TransferStatus_validation",r).subscribe(function(r){if(Number(r[0])>0)if(72==Number(e.rowData.StatusID))t.dialog.alert("Sorry,Transfer already deactivated or deleted ....!!!");else{var o={transferID:Number(e.rowData.TransferID),wareHouseID:Number(e.rowData.WareHouseID),companyID:0,fromCustomerID:Number(e.rowData.FromCustomerID),toCustomerID:Number(e.rowData.ToCustomerID),transferDate:"",orderGivenBy:"",remarks:"",createdBy:t.currentUser.userId,financialYearID:0,storageAreaMasterID:0,StatusID:Number(e.rowData.StatusID)};t.api.post("/Transfer/Transfer_Cancelled",o).subscribe(function(e){t.dialog.alert(e),t.BindTransferList()},function(e){console.error(e)})}else t.dialog.alert("Please re-perform your delete operation...!!!")},function(e){console.error(e)})}}}]),r}();return r.\u0275fac=function(e){return new(e||r)(f.Y36(u.qu),f.Y36(u.qu),f.Y36(c.sM),f.Y36(g.cP),f.Y36(ue.uw))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-transfer"]],decls:161,vars:62,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Transfer"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-7"],[1,"form-group"],["formControlName","cbCustomerID","id","cbCustomerID",1,"form-control","form-control-sm",3,"ngClass","change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-3"],["for","company"],["type","datetime-local","formControlName","Transfer_date","id","Transfer_date","placeholder","yyyy-MM-dd","name","Transfer_date",1,"form-control","form-control-sm",3,"ngModel"],[1,"col-sm-2"],["type","text","readonly","","formControlName","txtTransfeNo","id","txtTransfeNo",1,"form-control","form-control-sm"],[1,"col-sm-6"],["formControlName","cbToCustomerID","id","cbToCustomerID",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtOrderGivenBy","id","txtOrderGivenBy",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtRemarks","id","txtRemarks",1,"form-control","form-control-sm"],[1,"col-sm-12"],[1,"font-weight-bold"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","rowSelection","rowDoubleClicked"],["label","Transfer Product Details"],[1,"col-sm-9"],[1,"row"],["type","text","formControlName","txtLotNo","id","txtLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbproduct_id","id","cbproduct_id",1,"form-control","form-control-sm"],["disabled","",3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","txtBalanceQty","id","txtBalanceQty","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBrand","id","txtBrand","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtTransferQty","id","txtTransferQty","autocomplete","off","placeholder","",1,"form-control","form-control-sm",3,"keyup"],["txtTransferQty",""],["type","text","formControlName","txtCount","id","txtCount","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbStorageAreaType","id","cbStorageAreaType","readonly","",1,"form-control","form-control-sm"],["disabled","",3,"ngValue"],["type","text","formControlName","txtBillingCycle","id","txtBillingCycle","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","checkbox","formControlName","ckCustomerarea","id","ckCustomerarea",1,"form-control",3,"change"],["type","text","formControlName","txtNewLotNo","id","txtNewLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbLocation","id","cbLocation",1,"form-control","form-control-sm"],["formControlName","cbLabourContractor","id","cbLabourContractor",1,"form-control","form-control-sm"],["formControlName","cbRemarks","id","cbRemarks",1,"form-control","form-control-sm"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["type","button",1,"btn","btn-primary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],["label","Product Detail List"],[1,"col-12"],[2,"height","400px",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridTransferDetailList",""],["type","submit",1,"btn","btn-primary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"hidden","value"],["label","Transfer List"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],["disabled","",3,"value"]],template:function(e,t){if(1&e){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.tabchange(e)})("selectedIndexChange",function(e){return t.tab=e}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.NdJ("ngSubmit",function(){return t.OnSaveTransfer(t.form)}),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.NdJ("change",function(e){return t.GetCustomerID(e)}),f.TgZ(13,"option",10),f._uU(14,"Select "),f.qZA(),f.YNc(15,Ae,2,2,"option",11),f.qZA(),f.YNc(16,Le,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",8),f.TgZ(19,"label",14),f._uU(20,"Transfer Date"),f.qZA(),f._UZ(21,"input",15),f.ALo(22,"date"),f.YNc(23,ke,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(24,"div",16),f.TgZ(25,"div",8),f.TgZ(26,"label",14),f._uU(27,"Transfer No"),f.qZA(),f._UZ(28,"input",17),f.YNc(29,qe,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(30,"div",18),f.TgZ(31,"div",8),f.TgZ(32,"label"),f._uU(33,"To Customer"),f.qZA(),f.TgZ(34,"select",19),f.TgZ(35,"option",10),f._uU(36,"Select "),f.qZA(),f.YNc(37,Oe,2,2,"option",11),f.qZA(),f.YNc(38,Ue,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(39,"div",13),f.TgZ(40,"div",8),f.TgZ(41,"label",14),f._uU(42,"Order Given By"),f.qZA(),f._UZ(43,"input",20),f.YNc(44,Be,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(45,"div",13),f.TgZ(46,"div",8),f.TgZ(47,"label",14),f._uU(48,"Remarks"),f.qZA(),f._UZ(49,"input",21),f.YNc(50,Re,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(51,"div",22),f._UZ(52,"hr"),f.TgZ(53,"p",23),f._uU(54,"Product List"),f.qZA(),f.TgZ(55,"div",24),f.TgZ(56,"ag-grid-angular",25),f.NdJ("rowDoubleClicked",function(e){return t.onProductListRowClicked(e)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(57,"div",22),f._UZ(58,"hr"),f.TgZ(59,"mat-card"),f.TgZ(60,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(e){return t.TransferDetailtab=e}),f.TgZ(61,"mat-tab",26),f.TgZ(62,"div",6),f.TgZ(63,"div",27),f.TgZ(64,"div",28),f.TgZ(65,"div",18),f.TgZ(66,"div",8),f.TgZ(67,"label"),f._uU(68,"Lot No"),f.qZA(),f._UZ(69,"input",29),f.qZA(),f.qZA(),f.TgZ(70,"div",18),f.TgZ(71,"div",8),f.TgZ(72,"label"),f._uU(73,"Product Name"),f.qZA(),f.TgZ(74,"select",30),f.TgZ(75,"option",10),f._uU(76,"Select "),f.qZA(),f.YNc(77,Je,2,2,"option",31),f.qZA(),f.qZA(),f.qZA(),f.TgZ(78,"div",18),f.TgZ(79,"div",8),f.TgZ(80,"label"),f._uU(81,"Balance Qty"),f.qZA(),f._UZ(82,"input",32),f.qZA(),f.qZA(),f.TgZ(83,"div",18),f.TgZ(84,"div",8),f.TgZ(85,"label"),f._uU(86,"Brand"),f.qZA(),f._UZ(87,"input",33),f.qZA(),f.qZA(),f.TgZ(88,"div",18),f.TgZ(89,"div",8),f.TgZ(90,"label"),f._uU(91,"Transfer Qty"),f.qZA(),f.TgZ(92,"input",34,35),f.NdJ("keyup",function(){f.CHM(r);var e=f.MAs(93);return t.onKeyTransferQty(e.value)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(94,"div",18),f.TgZ(95,"div",8),f.TgZ(96,"label"),f._uU(97,"Count"),f.qZA(),f._UZ(98,"input",36),f.qZA(),f.qZA(),f.TgZ(99,"div",18),f.TgZ(100,"div",8),f.TgZ(101,"label"),f._uU(102,"Storage Type"),f.qZA(),f.TgZ(103,"select",37),f._UZ(104,"option",38),f.YNc(105,Me,2,2,"option",31),f.qZA(),f.qZA(),f.qZA(),f.TgZ(106,"div",18),f.TgZ(107,"div",8),f.TgZ(108,"label"),f._uU(109,"Billing Cycle"),f.qZA(),f._UZ(110,"input",39),f.qZA(),f.qZA(),f.TgZ(111,"div",18),f.TgZ(112,"div",8),f.TgZ(113,"label"),f._uU(114,"Use To Customer Area"),f.qZA(),f.TgZ(115,"input",40),f.NdJ("change",function(e){return t.OnCustomerarea(e)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(116,"div",18),f.TgZ(117,"div",8),f.TgZ(118,"label"),f._uU(119,"New Lot No"),f.qZA(),f._UZ(120,"input",41),f.qZA(),f.qZA(),f.TgZ(121,"div",18),f.TgZ(122,"div",8),f.TgZ(123,"label"),f._uU(124,"Location"),f.qZA(),f.TgZ(125,"select",42),f._UZ(126,"option",38),f.YNc(127,Ee,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(128,"div",18),f.TgZ(129,"div",8),f.TgZ(130,"label"),f._uU(131,"Labour Contractor"),f.qZA(),f.TgZ(132,"select",43),f._UZ(133,"option",38),f.YNc(134,Ye,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(135,"div",22),f.TgZ(136,"div",8),f.TgZ(137,"label"),f._uU(138,"Remarks"),f.qZA(),f.TgZ(139,"select",44),f._UZ(140,"option",38),f.YNc(141,Ge,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(142,"div",13),f.TgZ(143,"div",45),f._UZ(144,"ag-grid-angular",46),f.qZA(),f.qZA(),f.TgZ(145,"div",27),f.TgZ(146,"div",8),f.TgZ(147,"button",47),f.NdJ("click",function(){return t.OnAddClick()}),f._uU(148,"Add"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(149,"mat-tab",48),f.TgZ(150,"div",49),f._UZ(151,"hr"),f.TgZ(152,"mtx-grid",50,51),f.NdJ("dblclick",function(e){f.CHM(r);var o=f.MAs(153);return t.onRowDblclickedTransfer(o,e)}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(154,"div",27),f.TgZ(155,"div",8),f.TgZ(156,"button",52),f._uU(157," Save "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(158,"mat-tab",53),f.TgZ(159,"div",24),f._UZ(160,"ag-grid-angular",54),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Q6J("selectedIndex",t.tab),f.xp6(2),f.Q6J("formGroup",t.form),f.xp6(7),f.Q6J("ngClass",f.VKq(55,We,t.submitted&&t.f.cbCustomerID.invalid)),f.xp6(3),f.Q6J("ngForOf",t.customerList),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.cbCustomerID.invalid),f.xp6(5),f.Q6J("ngModel",f.xi3(22,52,t.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(2),f.Q6J("ngIf",t.submitted&&t.f.Transfer_date.invalid),f.xp6(6),f.Q6J("ngIf",t.submitted&&t.f.txtTransfeNo.invalid),f.xp6(5),f.Q6J("ngClass",f.VKq(57,We,t.submitted&&t.f.cbToCustomerID.invalid)),f.xp6(3),f.Q6J("ngForOf",t.customerList),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.cbToCustomerID.invalid),f.xp6(5),f.Q6J("ngClass",f.VKq(59,We,t.submitted&&t.form.controls.txtOrderGivenBy.errors)),f.xp6(1),f.Q6J("ngIf",t.submitted&&t.f.txtOrderGivenBy.invalid),f.xp6(6),f.Q6J("ngIf",t.submitted&&t.f.txtRemarks.invalid),f.xp6(6),f.Q6J("rowData",t.ProductList)("columnDefs",t.ShiftingProductListCol)("rowSelection","single"),f.xp6(4),f.Q6J("selectedIndex",t.TransferDetailtab),f.xp6(17),f.Q6J("ngForOf",t.ProductNameList),f.xp6(27),f.Q6J("ngValue",null),f.xp6(1),f.Q6J("ngForOf",t.StorageAreaTypeList),f.xp6(21),f.Q6J("ngValue",null),f.xp6(1),f.Q6J("ngForOf",t.LocationList),f.xp6(6),f.Q6J("ngValue",null),f.xp6(1),f.Q6J("ngForOf",t.labourContractorList),f.xp6(6),f.Q6J("ngValue",null),f.xp6(1),f.Q6J("ngForOf",t.remarkList),f.xp6(3),f.Q6J("rowData",t.TransferServiceList)("columnDefs",t.serviceColumns),f.xp6(8),f.Q6J("data",t.TransferDetailsList)("columns",t.TransferDetailColumns)("loading",!1)("columnResizable",!1)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(61,He))("pageIndex",0),f.xp6(4),f.Q6J("hidden",!t.HideSaveButton)("value",t.submitted),f.xp6(4),f.Q6J("rowData",t.TransferList)("columnDefs",t.TransferListColumnDefs)("frameworkComponents",t.frameworkComponents))},directives:[p.xw,p.yH,v.a8,I.SP,I.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,m.mk,Z.oO,u.YN,u.Kr,m.sg,m.O5,u.Fj,T.N8,u.Wl,b.CM],pipes:[m.uU],styles:[""]}),r}()}],ze=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[s.Bz.forChild(Ve)],s.Bz]}),e}(),$e=function(){var e=o(function e(){t(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[l.m,ue.Is,ze,T.sF.withComponents([])]]}),e}()}}])}();