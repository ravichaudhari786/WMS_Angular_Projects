!function(){"use strict";function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return e};var e={},r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",n=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(w){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),n=new C(o||[]);return a._invoke=function(t,e,r){var o="suspendedStart";return function(i,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw a;return A()}for(r.method=i,r.arg=a;;){var n=r.delegate;if(n){var l=y(n,r);if(l){if(l===c)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=d(t,e,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===c)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}(t,r,n),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(w){return{type:"throw",arg:w}}}e.wrap=u;var c={};function m(){}function f(){}function h(){}var g={};s(g,a,function(){return this});var D=Object.getPrototypeOf,p=D&&D(D(N([])));p&&p!==r&&o.call(p,a)&&(g=p);var v=h.prototype=m.prototype=Object.create(g);function Z(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function I(t,e){function r(i,a,n,l){var s=d(t[i],t,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&o.call(c,"__await")?e.resolve(c.__await).then(function(t){r("next",t,n,l)},function(t){r("throw",t,n,l)}):e.resolve(c).then(function(t){u.value=t,n(u)},function(t){return r("throw",t,n,l)})}l(s.arg)}var i;this._invoke=function(t,o){function a(){return new e(function(e,i){r(t,o,e,i)})}return i=i?i.then(a,a):a()}}function y(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,y(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var o=d(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,c;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function b(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=h,s(v,"constructor",h),s(h,"constructor",f),f.displayName=s(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,l,"GeneratorFunction")),t.prototype=Object.create(v),t},e.awrap=function(t){return{__await:t}},Z(I.prototype),s(I.prototype,n,function(){return this}),e.AsyncIterator=I,e.async=function(t,r,o,i,a){void 0===a&&(a=Promise);var n=new I(u(t,r,o,i),a);return e.isGeneratorFunction(r)?n:n.next().then(function(t){return t.done?t.value:n.next()})},Z(v),s(v,l,"Generator"),s(v,a,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),e.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var o=e.pop();if(o in t)return r.value=o,r.done=!1,r}return r.done=!0,r}},e.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return n.type="throw",n.arg=t,e.next=r,o&&(e.method="next",e.arg=void 0),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],n=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),s=o.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var n=a?a.completion:{};return n.type=t,n.arg=e,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),b(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var o=r.completion;if("throw"===o.type){var i=o.arg;b(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},e}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,e,o){return e&&r(t.prototype,e),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkwms_app=self.webpackChunkwms_app||[]).push([[872],{61872:function(r,i,a){a.r(i),a.d(i,{ProcessModule:function(){return xe}});var n=a(66269),l=a(63423),s=a(64762),u=a(3679),d=a(1527),c=a(38583),m=a(48923),f=a(37716),h=a(99603),g=a(69517),D=a(35618),p=a(93738),v=a(65939),Z=a(98295),I=a(88030),y=a(25239),T=a(63887);function b(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function C(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.DockID),f.xp6(1),f.Oqu(r.DockName)}}function N(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.UserID),f.xp6(1),f.Oqu(r.UserName)}}function A(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.Remarks),f.xp6(1),f.Oqu(r.Remarks)}}function w(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.ProductID),f.xp6(1),f.Oqu(r.ProductName)}}function x(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.BrandID),f.xp6(1),f.Oqu(r.BrandName)}}function L(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.Counts),f.xp6(1),f.Oqu(r.Counts)}}function q(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.StorageAreaTypeID),f.xp6(1),f.hij("",r.ServiceName," ")}}function S(t,e){if(1&t&&(f.TgZ(0,"option",64),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.hij(" ",r.ContractorName,"")}}function k(t,e){if(1&t&&(f.TgZ(0,"option",65),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.Q6J("ngValue",r),f.xp6(1),f.Oqu(r.Remarks)}}function _(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",66),f.TgZ(1,"h4",67),f._uU(2,"Storage Area"),f.qZA(),f.qZA(),f._UZ(3,"br"),f.TgZ(4,"div",23),f.TgZ(5,"div",68),f.TgZ(6,"label"),f._uU(7,"Quantity "),f.qZA(),f._UZ(8,"input",69),f.qZA(),f.TgZ(9,"div",68),f.TgZ(10,"label"),f._uU(11,"AllocatedQty"),f.qZA(),f._UZ(12,"input",70),f.qZA(),f.qZA(),f.TgZ(13,"div",71),f.TgZ(14,"ag-grid-angular",72,73),f.NdJ("cellValueChanged",function(t){return f.CHM(r),f.oxw().onCellKeyPress(t)}),f.qZA(),f.qZA(),f.TgZ(16,"div",74),f.TgZ(17,"button",75),f.NdJ("click",function(){f.CHM(r);var t=f.oxw(),e=f.MAs(191);return t.onSaveStorageArea(e)}),f._uU(18,"ADD"),f.qZA(),f.TgZ(19,"button",76),f.NdJ("click",function(){f.CHM(r);var t=f.oxw(),e=f.MAs(191);return t.oncloseStoragearea(e)}),f._uU(20,"cancel"),f.qZA(),f.qZA()}if(2&t){var o=f.oxw();f.xp6(14),f.Q6J("rowData",o.storageAreaList)("columnDefs",o.columnDefs)}}function O(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",66),f.TgZ(1,"h4",67),f._uU(2,"Customer Contact"),f.qZA(),f.qZA(),f.TgZ(3,"div",71),f._UZ(4,"ag-grid-angular",77),f.qZA(),f.TgZ(5,"div",74),f.TgZ(6,"button",76),f.NdJ("click",function(){f.CHM(r);var t=f.oxw(),e=f.MAs(193);return t.onCloseCustomerContact(e)}),f._uU(7,"cancel"),f.qZA(),f.qZA()}if(2&t){var o=f.oxw();f.xp6(4),f.Q6J("rowData",o.customercontactList)("columnDefs",o.CustomerContactcolumnDefs)("groupIncludeTotalFooter",!0)}}function U(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",66),f.TgZ(1,"h4",67),f._uU(2,"Transporter Details"),f.qZA(),f.TgZ(3,"button",78),f.NdJ("click",function(){return f.CHM(r),f.oxw().onAddTranspoterDetailNewrow()}),f._uU(4,"+"),f.qZA(),f.qZA(),f.TgZ(5,"div",71),f.TgZ(6,"ag-grid-angular",79),f.NdJ("rowClicked",function(t){return f.CHM(r),f.oxw().onRowSelectedTransport(t)}),f.qZA(),f.qZA(),f.TgZ(7,"div",80),f.TgZ(8,"button",81),f.NdJ("click",function(){return f.CHM(r),f.oxw().onRemoveTranspoterDetailNewrow()}),f._uU(9,"-"),f.qZA(),f.TgZ(10,"button",82),f.NdJ("click",function(){f.CHM(r);var t=f.oxw(),e=f.MAs(195);return t.onCloseTransportContact(e)}),f._uU(11,"Cancel"),f.qZA(),f.qZA()}if(2&t){var o=f.oxw();f.xp6(6),f.Q6J("rowData",o.TransportList)("columnDefs",o.TransperdetailcolumnDefs)}}var F,P=function(t){return{"is-invalid":t}},B=function(){return[10,20,50,100,500]},Q=((F=function(){function r(t,o,i,a,n){var l=this;e(this,r),this.fb=t,this.api=o,this.dialog=i,this.modalService=a,this.el=n,this.collapsed=!1,this.OnAddProductClick=!1,this.InwardID=0,this.ReceiptNo="0",this.DID=0,this.Flag=!1,this.click=!1,this.challanid=0,this.InwardTransportID=0,this.challandid=0,this.closeResult="",this.tab=0,this.config={backdrop:!1,ignoreBackdropClick:!0},this.submitted=!1,this.firstlotno="",this.StorageId=0,this.challanquantity=0,this.allocatedQty=0,this.outquantity=0,this.inprocessquantity=0,this.balancequantity=0,this.transferdid=0,this.focusedRowKey=117,this.servicesid=0,this.ProductRate=0,this.isnew=!0,this.ChallansProductList=[],this.ChallansLocation=[],this.InwardDetailList=[],this.DetailList=[],this.newDynamicInwardDetails={},this.newDynamicInwardtransfer={},this.InwardchargesList=[],this.ChargesList=[],this.InwardTransportList=[],this.TransportList=[],this.InwardshowStorageArea=[],this.InwardshowStorage=[],this.InwardValidateStorage=[],this.storageAreaList=[],this.SaveInward=[],this.SaveInwardlist=[],this.newDynamicSaveInward={},this.GetInwardListJson={},this.InData={},this.InServiceData={},this.BindDropdownData={},this.MyMenus=[],this.rowSelection="multiple",this.columnDefs=[{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0},{headerName:"StorageArea",field:"StorageArea",checkboxSelection:!1,filter:"agTextColumnFilter",filterParams:{applyMiniFilterWhileTyping:!0},floatingFilter:!0},{headerName:"Qty",field:"AllocatedQuantity",aggFunc:"sum",cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!0,cellEditorPopupPosition:"defualt",cellStyle:function(t){return t.value>0?{color:"white",backgroundColor:"blue"}:{color:"black",backgroundColor:"transparent"}}}],this.AppliedStoragecolumnDefs=[{headerName:"InwardDID",field:"InwardDID",hide:!1},{headerName:"LotNo",field:"LotNo",filter:!0},{headerName:"TransporterName",field:"TransporterName",filter:!0},{headerName:"TruckNo",field:"TruckNo",filter:!0},{headerName:"TransporterName",field:"TransporterName",filter:!0},{headerName:"ContainerNo",field:"ContainerNo",filter:!0},{headerName:"Applied Qty",field:"Qty",filter:!0}],this.CustomerContactcolumnDefs=[{headerName:"CustomerContactID",field:"CustomerContactID",hide:!0},{headerName:"Contact Person",field:"ContactPersonName"},{headerName:"Mobile No",field:"MobileNo"},{headerName:"Email ID",field:"EmailID"},{headerName:"Send SMS",field:"SendSMS"},{headerName:"Send Email",field:"SendEmail"}],this.TransperdetailcolumnDefs=[{headerName:"InwardTransportID",field:"InwardTransportID",hide:!0},{headerName:"TransporterName",field:"TransporterName",editable:!0},{headerName:"TruckNo",field:"TruckNo",editable:!0},{headerName:"ContainerNo",field:"ContainerNo",editable:!0}],this.InwardDetailColumns=[{header:"InwardDID",field:"InwardDID",hide:!0},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo"},{header:"BrandID",field:"BrandID",hide:!0},{header:"BrandName",field:"BrandName"},{header:"ItemsInPacket",field:"ItemsInPacket"},{header:"InQuantity",field:"InQuantity"},{header:"MFD Date",field:"MFGDate",hide:!0},{header:"ExpiryDate",field:"ExpDate",hide:!0},{header:"Remarks",field:"Remarks"},{header:"LabourContractorID",field:"LabourContractorID",hide:!0},{header:"LabourContracterName",field:"LabourContracterName"},{header:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0},{header:"StorageAreaType",field:"StorageAreaType"},{header:"SelfLife",field:"SelfLife"},{header:"Country",field:"Country"}],this.serviceColumns=[{type:"checkbox",field:"Add",cellRenderer:function(t){return l.checkBoxCellEditRenderer(t)},hide:!1,width:10},{field:"InwardDID",hide:!0},{field:"ServiceID",hide:!0,resizable:!0},{field:"ServiceName"},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.AppliedStorageArea=[{header:"Add",field:"Add",hide:!0},{header:"InwardDID",field:"InwardDID",hide:!0},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo",hide:!0},{header:"StorageArea",field:"StorageArea",hide:!0},{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"AllocatedQuantity",field:"AllocatedQuantity",hide:!0},{header:"IsCustomerArea",field:"IsCustomerArea",hide:!0}],this.StorageAreaColumns=[{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"StorageArea",field:"StorageArea",hide:!1},{header:"AllocatedQty",field:"AllocatedQty"}],this.columns=[{minWidth:100,header:"Edit",field:"Edit",pinned:"right",right:"0px",type:"button",buttons:[{type:"icon",text:"edit",icon:"edit",tooltip:"Edit",click:function(t){console.log(t),l.tab=0}}]},{header:"InwardID",field:"InwardID",hide:!1,minWidth:100},{header:"CustomerID",field:"CustomerID",hide:!0},{header:"ReceiptNo",field:"ReceiptNo",minWidth:100},{header:"CustomerName",field:"CustomerName",minWidth:200},{header:"DocID",field:"DocID",minWidth:100},{header:"UnLoadingBy",field:"UnLoadingBy",hide:!0},{header:"InwardDate",field:"InwardDate",minWidth:100},{header:"BillingStartDate",field:"BillingStartDate",minWidth:100},{header:"PersonName",field:"PersonName",minWidth:100},{header:"Remarks",field:"Remarks",minWidth:100},{header:"Status",field:"Status",minWidth:100,hide:!0},{header:"StatusName",field:"StatusName",minWidth:100}],this.columnsInwardList=[{headerName:"Action",floatingFilter:!1,maxWidth:200,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnInwardActions.bind(this)}},{headerName:"InwardID",field:"InwardID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ReceiptNo",field:"ReceiptNo",minWidth:80,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DocID",field:"DocID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"UnLoadingBy",field:"UnLoadingBy",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardDate",field:"InwardDate",minWidth:100,type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BillingStartDate",field:"BillingStartDate",minWidth:100,type:"date",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"PersonName",field:"PersonName",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0}],this.MyMenus=this.api.getCurrentMenusForButton("Inward"),this.currentUser=this.api.getCurrentUser();var s=new c.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=s,this.productdate=new Date,this.form=this.fb.group({customer_id:[null,u.kI.required],challan_no:[null,u.kI.required],dock_name:["",u.kI.required],inward_date:["",u.kI.required],unloading_by:[null,[u.kI.required]],custremarks:[null,u.kI.required],transportername:[null,u.kI.required],truckno:[null,u.kI.required],container_no:[null,u.kI.required],selflife:[null,u.kI.required],product_id:[null,u.kI.required],brand_id:[null,u.kI.required],packetcount:[null,u.kI.required],quantity:[null,u.kI.required],service_id:[null,u.kI.required],mgfdate:[null,u.kI.required],expdate:[null,u.kI.required],labourcontractor_id:[null,u.kI.required],lot_no:[null,u.kI.required],remarks:[null,u.kI.required],country:["",u.kI.required],allocatedQty:[0,u.kI.required]}),this.frameworkComponents={buttonRenderer:m.J}}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdownData={InwardID:0,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""},this.BindDropdown(),this.inwardservicelist=[],console.log(this.todayDate)}},{key:"BindDropdown",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.get("/Customer").subscribe(function(t){r.customerList=t},function(t){console.error(t)}),this.api.get("/dock").subscribe(function(t){r.dockList=t},function(t){console.error(t)}),this.api.get("/UnloadingBy").subscribe(function(t){r.unloadingList=t},function(t){console.error(t)}),this.api.get("/Remarks").subscribe(function(t){r.remarkList=t.filter(function(t){return 1==t.ProcessID})},function(t){console.error(t)}),this.api.get("/brand").subscribe(function(t){r.brandList=t},function(t){console.error(t)}),this.api.get("/CountInPacket").subscribe(function(t){r.packateCountList=t},function(t){console.error(t)}),this.api.get("/LabourContracter").subscribe(function(t){r.labourContractorList=t},function(t){console.error(t)}),this.api.get("/StorageAreaType/servieceStorageAreaType").subscribe(function(t){r.serviceTypeList=t},function(t){console.error(t)}),this.api.post("/InwardList",this.BindDropdownData).subscribe(function(t){r.InwardList=t},function(t){console.error(t)}),this.api.post("/Inward/GetLotNo",this.BindDropdownData).subscribe(function(t){r.CurrentLotNo=t[0].LotNo},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"f",get:function(){return this.form.controls}},{key:"GetCustomerID",value:function(t){var e=this;console.log("customer_id =",this.form.value.customer_id),this.api.post("/Inward/GetCustomerProducts",this.BindDropdownData).subscribe(function(t){e.productList=t},function(t){console.error(t)})}},{key:"GetServicedetail",value:function(){var t=this;this.api.get("/StorageAreaType/servieceStorageAreaType").subscribe(function(e){t.serviceTypeList=e},function(t){console.error(t)})}},{key:"printIconClick",value:function(t){}},{key:"OnApplyClick",value:function(t,e){var r,o;null==this.form.value.customer_id||0==this.form.value.customer_id?(this.dialog.alert("Select Customers ....."),null===(r=null==document?void 0:document.getElementById("customer_id"))||void 0===r||r.focus()):(""==this.form.value.challan_no||null==this.form.value.challan_no)&&(this.dialog.alert("Enter challan No ....."),null===(o=null==document?void 0:document.getElementById("challan_no"))||void 0===o||o.focus())}},{key:"onCustomerContact",value:function(t){var e,r=this;if(null==this.form.value.customer_id||0==this.form.value.customer_id)this.dialog.alert("Select Customers ....."),null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus();else{var o={InwardID:0,CustomerID:Number(this.form.value.customer_id),Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""};this.api.post("/Inward/GetCustomerContact",o).subscribe(function(t){r.customercontactList=t},function(t){console.error(t)}),this.modalService.open(t)}}},{key:"onCloseCustomerContact",value:function(t){this.modalService.dismissAll(t)}},{key:"onCloseTransportContact",value:function(t){var e=this.TransportList.filter(function(t){return t.TruckNo.length>0});this.TransportList=e,this.modalService.dismissAll(t)}},{key:"OnTransportAdd",value:function(t){null==this.form.value.truckno||""==this.form.value.truckno?this.dialog.alert("Please .... Enter Truck Number..."):(0==this.TransportList.length?(this.InwardTransportID=1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:this.form.value.transportername,TruckNo:this.form.value.truckno,ContainerNo:this.form.value.container_no}),this.TransportList.slice()):this.InwardTransportID=this.InwardTransportID+1,this.modalService.open(t))}},{key:"onRowSelectedTransport",value:function(t){this.InwardTransportID=t.data.InwardTransportID}},{key:"onRemoveTranspoterDetailNewrow",value:function(){var t=this,e=this.TransportList.filter(function(e){return e.InwardTransportID!=t.InwardTransportID});this.TransportList=e}},{key:"onAddTranspoterDetailNewrow",value:function(){this.InwardTransportID=this.InwardTransportID+1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:"",TruckNo:"",ContainerNo:""});var t=this.TransportList.filter(function(t){return t});this.TransportList=t}},{key:"OnProductSelect",value:function(t){var e=this;this.api.get("/service/InwardService?productID="+this.form.value.product_id+"&customerID="+this.form.value.customer_id).subscribe(function(t){e.inwardservicelist=t,console.log(e.inwardservicelist)},function(t){console.error(t)})}},{key:"OnBrandSelect",value:function(t){}},{key:"OnServiceSelect",value:function(t){var e,r,o=this;return null==this.form.value.customer_id?(this.dialog.alert("Please .... select Customers"),this.form.controls.product_id.reset(),this.form.controls.service_id.reset(),this.inwardservicelist=[],void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus())):null==this.form.value.product_id?(this.dialog.alert("Please .... select Product"),this.form.controls.product_id.reset(),this.form.controls.service_id.reset(),this.inwardservicelist=[],void(null===(r=null==document?void 0:document.getElementById("product_id"))||void 0===r||r.focus())):(this.InServiceData={InwardID:0,CustomerID:Number(this.form.value.customer_id),Remarks:"",CreatedBy:0,serviceID:Number(this.form.value.service_id),ProductID:Number(this.form.value.product_id),CompanyId:0,WarehouseId:0,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""},this.api.post("/Inward/GetServiceId",this.InServiceData).subscribe(function(t){o.servicesid=t[0].StorageAreaTypeID},function(t){console.error(t)}),void this.api.post("/Inward/GetInwardProductRate",this.InServiceData).subscribe(function(t){var e;console.log(" mess =>"+t[0].Message),""!==t[0].Message&&(this.dialog.alert(""+t[0].Message),o.form.controls.product_id.reset(),o.form.controls.service_id.reset(),o.inwardservicelist=[],null===(e=null==document?void 0:document.getElementById("product_id"))||void 0===e||e.focus())},function(t){console.error(t)}))}},{key:"OnLabourSelect",value:function(t){}},{key:"onRowDblclicked",value:function(t,e){var r=this;this.Flag=!0,this.GetServicedetail(),console.log(this.InwardTransportList),this.form.controls.product_id.reset(),this.form.controls.brand_id.reset(),this.form.controls.packetcount.reset(),this.form.controls.service_id.reset(),this.form.controls.mgfdate.reset(),this.form.controls.expdate.reset(),this.form.controls.remarks.reset(),this.form.controls.selflife.setValue("0"),this.form.controls.quantity.reset(),this.form.controls.country.setValue(""),this.CurrentLotNo=Number(this.CurrentLotNo)+1,this.form.patchValue({brand_id:t.cellSelection[0].rowData.BrandID,product_id:t.cellSelection[0].rowData.ProductID,packetcount:t.cellSelection[0].rowData.ItemsInPacket,quantity:t.cellSelection[0].rowData.InQuantity,selflife:t.cellSelection[0].rowData.SelfLife,mgfdate:t.cellSelection[0].rowData.MFGDate,expdate:t.cellSelection[0].rowData.ExpDate,lot_no:t.cellSelection[0].rowData.LotNo,country:t.cellSelection[0].rowData.Country,service_id:t.cellSelection[0].rowData.StorageAreaTypeID,labourcontractor_id:t.cellSelection[0].rowData.LabourContractorID}),this.DID=t.cellSelection[0].rowData.InwardDID,this.servicesid=t.cellSelection[0].rowData.ServiceID,this.challanid=t.cellSelection[0].rowData.ChallanID,this.challandid=t.cellSelection[0].rowData.ChallanDID,this.firstlotno=t.cellSelection[0].rowData.FirstLotNo,this.challanquantity=t.cellSelection[0].rowData.ChallanQuantity,this.outquantity=t.cellSelection[0].rowData.OutQuantity,this.inprocessquantity=t.cellSelection[0].rowData.InprocessQuantity,this.transferdid=t.cellSelection[0].rowData.TransferDID,this.isnew=t.cellSelection[0].rowData.IsNew,this.inwardservicelist=[],this.inwardservicelist=this.InwardchargesList.filter(function(e){return e.InwardDID==t.cellSelection[0].rowData.InwardDID}),this.inwardservicelist.forEach(function(t){t.Add=!0}),this.api.get("/service/InwardService?productID="+t.cellSelection[0].rowData.ProductID+"&customerID="+this.form.value.customer_id).subscribe(function(t){r.inwardserviTest=t,r.SetServiceTo_inwardservicelist()},function(t){console.error(t)}),this.GetStorageAreaList();var o=this.InwardshowStorageArea.filter(function(t){return t.InwardDID==r.DID}),i=this.storageAreaList;i.forEach(function(t){return o.forEach(function(e){t.StorageAreaID===e.StorageAreaID&&(t.AllocatedQuantity=e.StorageQuantity)}),t}),this.storageAreaList=[],this.storageAreaList=i;var a=this.storageAreaList.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t});this.allocatedQty=a,this.form.controls.allocatedQty.setValue(this.allocatedQty)}},{key:"SetServiceTo_inwardservicelist",value:function(){var t=this;if(this.inwardserviTest.length>0){var e=this.inwardservicelist.concat(this.inwardserviTest.filter(function(e){return!t.inwardservicelist.find(function(t){return t.ServiceID==e.ServiceID})}));this.inwardservicelist=e}}},{key:"OnAddClick",value:function(){var t,e,r,o,i,a,n=this;if(this.storageAreaList.length>0&&(this.InwardValidateStorage=this.storageAreaList.filter(function(t){return t.AllocatedQuantity>0}),this.allocatedQty=this.InwardValidateStorage.length>0?this.InwardValidateStorage.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t}):0),0==this.serviceTypeList.length&&this.GetServicedetail(),0==this.TransportList.length&&(this.InwardTransportID=1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:this.form.value.transportername,TruckNo:this.form.value.truckno,ContainerNo:this.form.value.container_no}),this.TransportList.slice()),null==this.form.value.truckno||""==this.form.value.truckno)return this.dialog.alert("Please .... Enter Truck number"),void(null===(t=null==document?void 0:document.getElementById("truckno"))||void 0===t||t.focus());if(null==this.form.value.product_id)return this.dialog.alert("Please .... select Product"),void(null===(e=null==document?void 0:document.getElementById("product_id"))||void 0===e||e.focus());if(null==this.form.value.quantity)return this.dialog.alert("Please... Enter Quantity ..!!!"),void(null===(r=null==document?void 0:document.getElementById("quantity"))||void 0===r||r.focus());if(null==this.form.value.service_id)return this.dialog.alert("Please... Select Service Type ..!!!"),void(null===(o=null==document?void 0:document.getElementById("service_id"))||void 0===o||o.focus());if(null==this.form.value.labourcontractor_id)return this.dialog.alert("Please... Select labour contractor ..!!!"),void(null===(i=null==document?void 0:document.getElementById("labourcontractor_id"))||void 0===i||i.focus());if(this.form.value.quantity!=this.allocatedQty)return this.dialog.alert("Please... Add storage area quntity ..!!!"),void(null===(a=null==document?void 0:document.getElementById("BtnStorageArea"))||void 0===a||a.focus());if(1==this.Flag){if(0==this.ChargesList.length||0==this.InwardchargesList.length){this.ChargesList=[],this.inwardservicelist.forEach(function(t){1==t.Add&&n.ChargesList.push({InwardDID:n.DID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,C_Rate:t.C_Rate,L_Rate:t.L_Rate})}),this.ChargesList.slice();var l=this.storageAreaList.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t});this.allocatedQty=l}else if(0==this.ChargesList.length){var s=this.InwardchargesList.filter(function(t){return t.InwardDID==n.DID});this.ChargesList=s,l=this.storageAreaList.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t}),this.allocatedQty=l}var u=this.InwardDetailList.filter(function(t){return t.InwardDID!=n.DID});this.InwardDetailList=u;var d=this.InwardchargesList.filter(function(t){return t.InwardDID!=n.DID});this.InwardchargesList=d;var c=this.InwardTransportList.filter(function(t){return t.InwardDID!=n.DID});this.InwardTransportList=c;var m=this.InwardshowStorageArea.filter(function(t){return t.InwardDID!=n.DID});this.InwardshowStorageArea=m}else 0==this.Flag&&(this.DID=this.DID+1,this.allocatedQty=0);(null==this.form.value.selflife||""==this.form.value.selflife)&&this.form.controls.selflife.setValue("0"),null==this.form.value.remarks&&(this.form.value.remarks=" "),null==this.form.value.brand_id&&(this.form.value.brand_id=" ");var f=this.brandList.filter(function(t){return t.BrandID==n.form.value.brand_id}),h=this.productList.filter(function(t){return t.ProductID==n.form.value.product_id}),g=this.serviceTypeList.filter(function(t){return t.StorageAreaTypeID==n.form.value.service_id}),D=this.labourContractorList.filter(function(t){return t.LabourContractorID==n.form.value.labourcontractor_id});0==f.length&&f.push({BrandID:0,BrandName:""}),0==g.length&&g.push({BrandID:0,BrandName:""}),this.newDynamicInwardDetails=[],this.DetailList=[],this.newDynamicInwardtransfer=[],this.newDynamicInwardDetails={InwardDID:this.DID,ChallanID:this.challanid,ChallanDID:this.challandid,ProductID:this.form.value.product_id,ProductName:h[0].ProductName,LotNo:this.form.value.lot_no,FirstLotNo:this.firstlotno,BrandID:this.form.value.brand_id,BrandName:f[0].BrandName,ItemsInPacket:this.form.value.packetcount,InQuantity:this.form.value.quantity,ChallanQuantity:this.challanquantity,OutQuantity:this.outquantity,InprocessQuantity:this.inprocessquantity,BalanceQuantity:this.form.value.quantity,MFGDate:this.todayDate,ExpDate:this.todayDate,Remarks:this.form.value.remarks.Remarks,TransferDID:this.transferdid,LabourContractorID:this.form.value.labourcontractor_id,LabourContracterName:D[0].ContractorName,StorageAreaTypeID:this.servicesid,StorageAreaType:g[0].ServiceName,SelfLife:this.form.value.selflife,IsNew:this.isnew,Country:this.form.value.country,ServiceID:this.form.value.service_id},this.DetailList=this.InwardDetailList,this.DetailList.push(this.newDynamicInwardDetails),this.InwardDetailList=this.DetailList.slice(),console.log("this.InwardDetailList",this.InwardDetailList),0==this.ChargesList.length||0==this.InwardchargesList.length?(this.ChargesList=[],this.inwardservicelist.forEach(function(t){1==t.Add&&n.InwardchargesList.push({InwardDID:n.DID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,C_Rate:t.C_Rate,L_Rate:t.L_Rate})}),this.InwardchargesList.slice()):(this.ChargesList.forEach(function(t){n.InwardchargesList.push({InwardDID:n.DID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,C_Rate:t.C_Rate,L_Rate:t.L_Rate})}),this.InwardchargesList.slice()),this.TransportList.forEach(function(t){n.InwardTransportList.push({InwardDID:n.DID,LotNo:n.form.value.lot_no,TransporterName:null==t.TransporterName?"A":t.TransporterName,TruckNo:null==t.TruckNo?"B":t.TruckNo,ContainerNo:null==t.ContainerNo?"C":t.ContainerNo,Qty:n.form.value.quantity})}),this.InwardchargesList.slice(),this.storageAreaList.forEach(function(t){t.AllocatedQuantity>0&&n.InwardshowStorageArea.push({InwardDID:n.DID,StorageAreaID:t.StorageAreaID,StorageQuantity:t.AllocatedQuantity,LotNo:n.form.value.lot_no,IsCustomerAreaSelected:!1})}),this.InwardshowStorageArea.slice(),console.log(this.InwardDetailList),console.log(this.InwardchargesList),console.log(this.InwardTransportList),console.log(this.InwardshowStorageArea),this.form.controls.product_id.reset(),this.form.controls.brand_id.reset(),this.form.controls.packetcount.reset(),this.form.controls.service_id.reset(),this.form.controls.mgfdate.reset(),this.form.controls.expdate.reset(),this.form.controls.remarks.reset(),this.form.controls.selflife.setValue("0"),this.form.controls.quantity.reset(),this.form.controls.country.setValue(""),this.CurrentLotNo=Number(this.CurrentLotNo)+1,this.ChargesList=[],this.inwardservicelist=[],this.storageAreaList=[],this.Flag=!1,this.GetStorageAreaList()}},{key:"GetStorageAreaList",value:function(){var t=this;this.api.get("/StorageAreaMaster?WarehouseID="+this.currentUser.warehouseId).subscribe(function(e){t.storageAreaList=e,t.allocatedQty=0,console.log("this.storageAreaList",t.storageAreaList)},function(t){console.error(t)})}},{key:"openStorageArea",value:function(t){var e=this;this.ChallansProductList.push({AddArea:!0,Auto:!1,ChallanDID:0,ProductID:this.form.value.product_id,ProductName:"",LotNo:this.form.value.lot_no,BrandName:"",ItemsInPacket:"",InQuantity:this.form.value.quantity,StorageAreaTypeID:this.servicesid,StorageAreaType:"",Applied:!1}),this.ChallansLocation.push({ChallanDID:0,StorageAreaID:0,StorageQuantity:this.form.value.quantity,LotNo:this.form.value.lot_no,IsCustomerAreaSelected:!1}),this.api.post("/Inward/GetAvailableStorageArea",{WarehouseID:this.currentUser.warehouseId,CustomerID:this.form.value.customer_id,Mode:"Inward",InwardID:this.InwardID,ChallanID:0,Cproduct:this.ChallansProductList,Clocation:this.ChallansLocation}).subscribe(function(r){var o;if(e.storageAreaList=r.Table,e.allocatedQty=0,console.log("this.storageAreaList",e.storageAreaList),e.allocatedQty=0,null==e.form.value.quantity||0==e.form.value.quantity)this.dialog.alert("Please .... Enter Quantity"),null===(o=null==document?void 0:document.getElementById("quantity"))||void 0===o||o.focus();else{if(1==e.Flag){var i=e.InwardshowStorageArea.filter(function(t){return t.InwardDID==e.DID}),a=e.storageAreaList;a.forEach(function(t){return i.forEach(function(e){t.StorageAreaID===e.StorageAreaID&&(t.AllocatedQuantity=e.StorageQuantity)}),t}),e.storageAreaList=[],e.storageAreaList=a;var n=e.storageAreaList.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t});e.allocatedQty=n,e.form.controls.allocatedQty.setValue(e.allocatedQty)}else e.storageAreaList.length>0&&(e.InwardValidateStorage=e.storageAreaList.filter(function(t){return t.AllocatedQty>0}),e.InwardValidateStorage.length>0?(e.allocatedQty=e.InwardValidateStorage.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t}),e.form.controls.allocatedQty.setValue(e.allocatedQty)):(e.allocatedQty=0,e.form.controls.allocatedQty.setValue(e.allocatedQty)));e.modalService.open(t,e.config)}},function(t){console.error(t)})}},{key:"oncloseStoragearea",value:function(t){var e=this.storageAreaList.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t});this.form.value.quantity==e?(this.onStorageGridRefresh(),this.modalService.dismissAll(t),this.allocatedQty=0):(this.dialog.alert("Please, Enter correct Quantity ..."),this.onStorageGridRefresh(),this.modalService.dismissAll(t),this.allocatedQty=0),console.log(this.storageAreaList)}},{key:"onSaveStorageArea",value:function(t){var e=this.storageAreaList.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t});this.form.value.quantity==e?(this.onStorageGridRefresh(),this.modalService.dismissAll(t)):(this.dialog.alert("Please, Enter correct Quantity ..."),this.onStorageGridRefresh(),this.modalService.open(t),this.allocatedQty=0),console.log(this.storageAreaList)}},{key:"onCellKeyPress",value:function(t){this.allocatedQty=0,this.StorageId=t.data.StorageAreaID;var e=this.storageAreaList.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t});this.allocatedQty=e,this.form.value.quantity>=this.allocatedQty?(this.form.controls.allocatedQty.setValue(this.allocatedQty),this.storageAreaList.slice()):(this.storageAreaList.forEach(function(e){e.StorageAreaID==t.data.StorageAreaID&&(e.AllocatedQuantity=0)}),this.dialog.alert("Please .... enter proper quantity")),this.onStorageGridRefresh()}},{key:"onStorageGridRefresh",value:function(){this.allocatedQty=0;var t=this.storageAreaList.map(function(t){return t.AllocatedQuantity}).reduce(function(t,e){return e+t});this.allocatedQty=t,this.form.controls.allocatedQty.setValue(this.allocatedQty);var e=this.storageAreaList.filter(function(t){return t});this.storageAreaList=e}},{key:"Ondeleteclick",value:function(t){console.log(t)}},{key:"tabInwardchange",value:function(t){this.tab=t,this.GetInwardList()}},{key:"OnSaveinward",value:function(){var t,e,r,o,i,a=this;return null==this.form.value.customer_id||""==this.form.value.customer_id?(this.dialog.alert("Please .... Select Customer Name"),void(null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus())):null==this.form.value.dock_name||""==this.form.value.dock_name?(this.dialog.alert("Please .... select Dock name ...."),void(null===(e=null==document?void 0:document.getElementById("dock_name"))||void 0===e||e.focus())):null==this.form.value.inward_date?(this.dialog.alert("Please... Enter inward date ..!!!"),void(null===(r=null==document?void 0:document.getElementById("inward_date"))||void 0===r||r.focus())):null==this.form.value.unloading_by?(this.dialog.alert("Please... Select unloading by ..!!!"),void(null===(o=null==document?void 0:document.getElementById("unloading_by"))||void 0===o||o.focus())):null==this.form.value.truckno?(this.dialog.alert("Please... Select truck no ..!!!"),void(null===(i=null==document?void 0:document.getElementById("truckno"))||void 0===i||i.focus())):void(0!=this.InwardDetailList.length?0!=this.InwardshowStorageArea.length?0!=this.InwardTransportList.length?(this.click=!0,this.newDynamicSaveInward={InwardID:this.InwardID,CustomerID:this.form.value.customer_id,CompanyID:this.currentUser.companyId,WarehouseID:this.currentUser.warehouseId,InwardDate:this.form.value.inward_date,Remarks:null==this.form.value.custremarks?"":this.form.value.custremarks,FinancialYearID:this.currentUser.FinantialYearId,UserID:this.currentUser.userId,ReceiptNo:this.ReceiptNo,dockID:this.form.value.dock_name,UnLoadingBy:this.form.value.unloading_by,StorageAreaMasterID:1,InwardDetailModel:this.InwardDetailList,InwardChargesModel:this.InwardchargesList,InwardLocationModel:this.InwardshowStorageArea,InwardTransperModel:this.InwardTransportList},this.api.post("/Inward/SaveInward",this.newDynamicSaveInward).subscribe(function(t){a.dialog.this.dialog.alert(t.Table[0].Column1),a.OnResetInward()},function(t){console.error(t)}),this.GetInwardList(),console.log(this.newDynamicSaveInward)):this.dialog.alert("Please... Add transport Details..!!!"):this.dialog.alert("Please... Add Storage Details ..!!!"):this.dialog.alert("Please... Add Product Details ..!!!"))}},{key:"GetInwardList",value:function(){var t=this;this.GetInwardListJson={CompanyId:this.currentUser.companyId,WarehouseId:this.currentUser.warehouseId,FinantialYearId:this.currentUser.FinantialYearId},this.api.post("/InwardList",this.GetInwardListJson).subscribe(function(e){t.InwardList=e},function(t){console.error(t)})}},{key:"SetDataTo_Inwardlist",value:function(){var t=this;this.api.get("/InwardList?companyId="+this.currentUser.companyId+"&warehouseId="+this.currentUser.warehouseId+"&finantialYearId="+this.currentUser.FinantialYearId).subscribe(function(e){t.InwardList=[],t.InwardList=e},function(t){console.error(t)})}},{key:"OnResetInward",value:function(){this.click=!1,this.form.reset(),this.BindDropdown(),this.InwardTransportID=0;var t=new c.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=t,this.form.controls.inward_date.setValue(this.todayDate),this.InwardDetailList=[],this.customercontactList=[],this.inwardservicelist=[],this.storageAreaList=[],this.TransportList=[],this.GetStorageAreaList(),this.DID=0,this.InwardID=0,this.ReceiptNo="0"}},{key:"contentReady",value:function(t){this.collapsed||(this.collapsed=!0,t.component.expandRow(["EnviroCare"]))}},{key:"checkBoxCellEditRenderer",value:function(t){var e=this,r=document.createElement("input");return r.type="checkbox",r.value="false",r.checked=t.value,r.addEventListener("click",function(r){t.setValue(1!=t.value),e.ChargesList=[],e.inwardservicelist.forEach(function(t){1==t.Add&&e.ChargesList.push({InwardDID:e.DID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,C_Rate:t.C_Rate,L_Rate:t.L_Rate})}),e.ChargesList.slice(),console.log(e.ChargesList)}),r}},{key:"OnInwardActions",value:function(t){var e=this;if("Delete"==String(t.actions)){if(window.confirm("Are sure you want to delete this item ?"))if(51==t.rowData.Status){var r={InwardID:t.rowData.InwardID,CustomerID:Number(t.rowData.CustomerID),Remarks:0,CreatedBy:Number(this.currentUser.userId),serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""};console.log(r),this.api.post("/Inward/DeleteInward",r).subscribe(function(t){e.dialog.this.dialog.alert(t.Table[0].message),e.SetDataTo_Inwardlist()},function(t){console.error(t)})}else 52==t.rowData.Status||0==t.rowData.Status?this.dialog.alert("Sorry,Inward is under process. You can't Delete....!!!"):53==t.rowData.Status?this.dialog.alert("Sorry,Outward already generated.You can't Delete....!!!"):54==t.rowData.Status&&this.dialog.alert("Sorry,Inward is already cancelled ....!!!")}else if("Edit"==String(t.actions)){var o=new c.uU("en-US").transform(t.rowData.InwardDate,"yyyy-MM-dd hh:mm:ss");51==t.rowData.Status?(this.api.post("/Inward/GetCustomerProducts?customerid="+t.rowData.CustomerID+"&warehouseid="+this.currentUser.warehouseId).subscribe(function(t){e.productList=t},function(t){console.error(t)}),this.GetStorageAreaList(),this.InData={InwardID:t.rowData.InwardID,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:0,WarehouseId:0,FinantialYearId:0,challan:0,StorageAreaMasterID:0,FinancialYear:""},this.api.post("/Inward/GetInwardDetailsByID",this.InData).subscribe(function(r){e.InwardDetailList=r.Table,e.InwardshowStorageArea=r.Table1,e.InwardTransportList=r.Table2,e.InwardchargesList=r.Table3,e.InwardID=t.rowData.InwardID,e.InwardTransportID=0,e.ReceiptNo=t.rowData.ReceiptNo,e.InwardTransportList.filter(function(t,e,r){return r.findIndex(function(e){return e.TruckNo===t.TruckNo})===e}).forEach(function(t){e.InwardTransportID=e.InwardTransportID+1,e.TransportList.push({InwardTransportID:e.InwardTransportID,TransporterName:null==t.TransporterName?"A":t.TransporterName,TruckNo:null==t.TruckNo?"B":t.TruckNo,ContainerNo:null==t.ContainerNo?"C":t.ContainerNo})}),e.TransportList.slice(),e.form.setValue({customer_id:null==t.rowData.CustomerID?"":t.rowData.CustomerID,dock_name:t.rowData.DocID,challan_no:0,inward_date:o,unloading_by:t.rowData.UnLoadingBy,custremarks:t.rowData.Remarks,transportername:null==e.InwardTransportList[0].TransporterName?"":e.InwardTransportList[0].TransporterName,truckno:null==e.InwardTransportList[0].TruckNo?"":e.InwardTransportList[0].TruckNo,container_no:null==e.InwardTransportList[0].TruckNo?"":e.InwardTransportList[0].TruckNo,selflife:"0",product_id:0,brand_id:0,packetcount:0,quantity:0,service_id:0,mgfdate:null,expdate:null,labourcontractor_id:0,lot_no:e.CurrentLotNo,remarks:"",country:"",allocatedQty:0})},function(t){console.error(t)}),this.tab=0):52==t.rowData.Status||0==t.rowData.Status?this.dialog.alert("Sorry,Inward is under process. You can't edit ....!!!"):53==t.rowData.Status?this.dialog.alert("Sorry,Outward already generated.You can't edit ....!!!"):54==t.rowData.Status&&this.dialog.alert("Sorry,Inward is already cancelled ....!!!")}else"Print"==String(t.actions)&&this.api.get("/Inward/InwardReceipt?InwardID="+t.rowData.InwardID).subscribe(function(t){console.log("InwardReceipt=>",t);var e=t[0].Base64Str,r=window.open("");null==r||r.document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e)+"'></iframe>")},function(t){console.error(t)})}}]),r}()).\u0275fac=function(t){return new(t||F)(f.Y36(u.qu),f.Y36(d.sM),f.Y36(h.cP),f.Y36(g.FF),f.Y36(f.SBq))},F.\u0275cmp=f.Xpm({type:F,selectors:[["app-inward"]],decls:213,vars:50,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Inward"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm",3,"change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-2","col-md-2"],["type","text","formControlName","challan_no","id","challan_no","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],[1,"btn","btn-secondary","btn-sm",2,"width","100% !important","margin-top","20px !important",3,"click"],[1,"col-sm-6","col-md-3"],["formControlName","dock_name","id","dock_name",1,"form-control","form-control-sm"],["type","datetime-local","formControlName","inward_date","id","inward_date","placeholder","yyyy-MM-dd","name","inward_date",1,"form-control","form-control-rounded",3,"ngModel"],["formControlName","unloading_by","id","unloading_by",1,"form-control","form-control-sm"],["formControlName","custremarks","id","custremarks",1,"form-control","form-control-sm"],[1,"col-12"],[1,"font-weight-bold"],[1,"row"],[1,"col"],["type","text","formControlName","transportername","id","transportername","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],["type","text","formControlName","truckno","id","truckno","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],["type","text","formControlName","container_no","id","container_no","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],[1,"col-9"],[1,"col-sm-6","col-md-4"],["formControlName","product_id","id","product_id",1,"form-control","form-control-sm",3,"change"],["formControlName","brand_id","id","brand_id",1,"form-control","form-control-sm",3,"change"],["formControlName","packetcount","id","packetcount",1,"form-control","form-control-sm"],["type","text","formControlName","quantity","id","quantity","autocomplete","off","placeholder","","required","",1,"form-control","form-control-sm"],["formControlName","service_id","id","service_id",1,"form-control","form-control-sm",3,"change"],["disabled","",3,"ngValue"],["type","text","formControlName","selflife","id","selflife","placeholder","",1,"form-control","form-control-sm"],["type","date","formControlName","mgfdate","id","mgfdate","placeholder","",1,"form-control","form-control-sm"],["type","date","formControlName","expdate","id","expdate","placeholder","",1,"form-control","form-control-sm"],["formControlName","labourcontractor_id","id","labourcontractor_id",1,"form-control","form-control-sm",3,"change"],["type","text","formControlName","lot_no","id","lot_no","placeholder","","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["formControlName","remarks","id","remarks",1,"form-control","form-control-sm"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","formControlName","country","id","country","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],[1,"col-3"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"id","disabled","click"],["id","BtnStorageArea",1,"btn","btn-secondary","btn-sm",2,"width","100px !important","margin-top","20px !important",3,"click"],[1,"btn","btn-secondary","btn-sm",2,"width","100px !important","margin-top","20px !important"],[1,"btn","btn-secondary","btn-sm",2,"width","105px !important","margin-top","20px !important"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["StorageAreacontent",""],["CustomerContactcontent",""],["style","width:620px;"],["TranspoterDetailcontent",""],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridlist",""],[1,"col-md-6"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"click"],["label","Inward List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[3,"ngValue"],[1,"modal-header"],["id","modal-basic-title"],[1,"col-6"],["formControlName","quantity","id","quantity","readonly","",2,"width","50%"],["formControlName","allocatedQty","id","allocatedQty","readonly","",2,"width","50%"],[1,"modal-body"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","cellValueChanged"],["LocationGrid",""],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-info",3,"click"],["rowSelection","multiple",1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","groupIncludeTotalFooter"],["type","button",1,"btn","btn-secondary","btn-lg",3,"click"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","rowClicked"],[1,"modalfooter"],["type","button",1,"btn","btn-danger",2,"float","left","width","60px",3,"click"],["type","button",1,"btn","btn-info",2,"float","right","width","100px",3,"click"]],template:function(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(t){return e.tabInwardchange(t)})("selectedIndexChange",function(t){return e.tab=t}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.NdJ("change",function(t){return e.GetCustomerID(t)}),f.TgZ(13,"option",10),f._uU(14,"Select"),f.qZA(),f.YNc(15,b,2,2,"option",11),f.qZA(),f._UZ(16,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",8),f.TgZ(19,"label"),f._uU(20,"Challan No."),f.qZA(),f._UZ(21,"input",14),f.qZA(),f.qZA(),f.TgZ(22,"div",13),f.TgZ(23,"div",8),f.TgZ(24,"button",15),f.NdJ("click",function(){return e.OnApplyClick(e.f.customer_id.value,e.f.challan_no.value)}),f._uU(25," Apply "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(26,"div",13),f.TgZ(27,"div",8),f.TgZ(28,"button",15),f.NdJ("click",function(){f.CHM(r);var t=f.MAs(193);return e.onCustomerContact(t)}),f._uU(29," Contact "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(30,"div",16),f.TgZ(31,"div",8),f.TgZ(32,"label"),f._uU(33,"Dock Name"),f.qZA(),f.TgZ(34,"select",17),f.TgZ(35,"option",10),f._uU(36,"Select "),f.qZA(),f.YNc(37,C,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(38,"div",16),f.TgZ(39,"div",8),f.TgZ(40,"label"),f._uU(41,"Inward Date"),f.qZA(),f._UZ(42,"input",18),f.ALo(43,"date"),f.qZA(),f.qZA(),f.TgZ(44,"div",16),f.TgZ(45,"div",8),f.TgZ(46,"label"),f._uU(47,"Unloading By"),f.qZA(),f.TgZ(48,"select",19),f.TgZ(49,"option",10),f._uU(50,"Select "),f.qZA(),f.YNc(51,N,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(52,"div",16),f.TgZ(53,"div",8),f.TgZ(54,"label"),f._uU(55,"Remarks"),f.qZA(),f.TgZ(56,"select",20),f.TgZ(57,"option",10),f._uU(58,"Select "),f.qZA(),f.YNc(59,A,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(60,"hr"),f.TgZ(61,"div",21),f.TgZ(62,"p",22),f._uU(63,"Transporter Details "),f.qZA(),f.TgZ(64,"div",23),f.TgZ(65,"div",24),f.TgZ(66,"div",23),f.TgZ(67,"div",16),f.TgZ(68,"div",8),f.TgZ(69,"label"),f._uU(70,"Transporter Name"),f.qZA(),f._UZ(71,"input",25),f.qZA(),f.qZA(),f.TgZ(72,"div",16),f.TgZ(73,"div",8),f.TgZ(74,"label"),f._uU(75,"Truck No"),f.qZA(),f._UZ(76,"input",26),f.qZA(),f.qZA(),f.TgZ(77,"div",16),f.TgZ(78,"div",8),f.TgZ(79,"label"),f._uU(80,"Container No"),f.qZA(),f._UZ(81,"input",27),f.qZA(),f.qZA(),f.TgZ(82,"div",16),f.TgZ(83,"div",8),f.TgZ(84,"button",28),f.NdJ("click",function(){f.CHM(r);var t=f.MAs(195);return e.OnTransportAdd(t)}),f._uU(85," Add "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(86,"hr"),f.TgZ(87,"div",21),f.TgZ(88,"p",22),f._uU(89," Inward Details "),f.qZA(),f.TgZ(90,"div",23),f.TgZ(91,"div",29),f.TgZ(92,"div",23),f.TgZ(93,"div",30),f.TgZ(94,"div",8),f.TgZ(95,"label"),f._uU(96,"Product Name"),f.qZA(),f.TgZ(97,"select",31),f.NdJ("change",function(t){return e.OnProductSelect(t)}),f.TgZ(98,"option",10),f._uU(99,"Select "),f.qZA(),f.YNc(100,w,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(101,"div",30),f.TgZ(102,"div",8),f.TgZ(103,"label"),f._uU(104,"Brand Name "),f.qZA(),f.TgZ(105,"select",32),f.NdJ("change",function(t){return e.OnBrandSelect(t)}),f.TgZ(106,"option",10),f._uU(107,"Select "),f.qZA(),f.YNc(108,x,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(109,"div",30),f.TgZ(110,"div",8),f.TgZ(111,"label"),f._uU(112,"Count In Packet"),f.qZA(),f.TgZ(113,"select",33),f.TgZ(114,"option",10),f._uU(115,"Select "),f.qZA(),f.YNc(116,L,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(117,"div",30),f.TgZ(118,"div",8),f.TgZ(119,"label"),f._uU(120,"Quantity"),f.qZA(),f._UZ(121,"input",34),f.qZA(),f.qZA(),f.TgZ(122,"div",30),f.TgZ(123,"div",8),f.TgZ(124,"label"),f._uU(125,"Service Type"),f.qZA(),f.TgZ(126,"select",35),f.NdJ("change",function(t){return e.OnServiceSelect(t)}),f.TgZ(127,"option",36),f._uU(128,"Select "),f.qZA(),f.YNc(129,q,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(130,"div",30),f.TgZ(131,"div",8),f.TgZ(132,"label"),f._uU(133,"Self Life"),f.qZA(),f._UZ(134,"input",37),f.qZA(),f.qZA(),f.TgZ(135,"div",30),f.TgZ(136,"div",8),f.TgZ(137,"label"),f._uU(138,"Mfg Date"),f.qZA(),f._UZ(139,"input",38),f.qZA(),f.qZA(),f.TgZ(140,"div",30),f.TgZ(141,"div",8),f.TgZ(142,"label"),f._uU(143,"Expiry Date"),f.qZA(),f._UZ(144,"input",39),f.qZA(),f.qZA(),f.TgZ(145,"div",30),f.TgZ(146,"div",8),f.TgZ(147,"label"),f._uU(148,"Labour Contracter"),f.qZA(),f.TgZ(149,"select",40),f.NdJ("change",function(t){return e.OnLabourSelect(t)}),f.TgZ(150,"option",36),f._uU(151,"Select "),f.qZA(),f.YNc(152,S,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(153,"div",30),f.TgZ(154,"div",8),f.TgZ(155,"label"),f._uU(156,"Lot No"),f.qZA(),f.TgZ(157,"input",41),f.NdJ("ngModelChange",function(t){return e.CurrentLotNo=t}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(158,"div",30),f.TgZ(159,"div",8),f.TgZ(160,"label"),f._uU(161,"Remarks"),f.qZA(),f.TgZ(162,"select",42),f.TgZ(163,"option",36),f._uU(164,"Select "),f.qZA(),f.YNc(165,k,2,2,"option",43),f.qZA(),f.qZA(),f.qZA(),f.TgZ(166,"div",30),f.TgZ(167,"div",8),f.TgZ(168,"label"),f._uU(169,"Country"),f.qZA(),f._UZ(170,"input",44),f.qZA(),f.qZA(),f.TgZ(171,"div",45),f.TgZ(172,"div",8),f.TgZ(173,"button",46),f.NdJ("click",function(){return e.OnAddClick()}),f._uU(174," Add "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(175,"div",45),f.TgZ(176,"div",8),f.TgZ(177,"button",47),f.NdJ("click",function(){f.CHM(r);var t=f.MAs(191);return e.openStorageArea(t)}),f._uU(178," Storage Area "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(179,"div",45),f.TgZ(180,"div",8),f.TgZ(181,"button",48),f._uU(182," Label Print "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(183,"div",45),f.TgZ(184,"div",8),f.TgZ(185,"button",49),f._uU(186," Receipt Print "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(187,"div",45),f.TgZ(188,"div",50),f._UZ(189,"ag-grid-angular",51),f.qZA(),f.qZA(),f.qZA(),f.YNc(190,_,21,2,"ng-template",null,52,f.W1O),f.YNc(192,O,8,3,"ng-template",null,53,f.W1O),f.YNc(194,U,12,2,"ng-template",54,55,f.W1O),f.qZA(),f._UZ(196,"hr"),f.TgZ(197,"div",21),f.TgZ(198,"p",22),f._uU(199," Inward Details List "),f.qZA(),f.TgZ(200,"mtx-grid",56,57),f.NdJ("dblclick",function(t){f.CHM(r);var o=f.MAs(201);return e.onRowDblclicked(o,t)}),f.qZA(),f.qZA(),f._UZ(202,"hr"),f.TgZ(203,"div",23),f.TgZ(204,"div",58),f.TgZ(205,"button",59),f.NdJ("click",function(){return e.OnSaveinward()}),f._uU(206,"Save"),f.qZA(),f.qZA(),f.TgZ(207,"div",58),f.TgZ(208,"button",60),f.NdJ("click",function(){return e.OnResetInward()}),f._uU(209,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(210,"mat-tab",61),f.TgZ(211,"div",62),f._UZ(212,"ag-grid-angular",63),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&t&&(f.xp6(3),f.Q6J("selectedIndex",e.tab),f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(10),f.Q6J("ngForOf",e.customerList),f.xp6(6),f.Q6J("ngClass",f.VKq(47,P,e.submitted&&e.f.challan_no.errors)),f.xp6(16),f.Q6J("ngForOf",e.dockList),f.xp6(5),f.Q6J("ngModel",f.xi3(43,44,e.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(9),f.Q6J("ngForOf",e.unloadingList),f.xp6(8),f.Q6J("ngForOf",e.remarkList),f.xp6(41),f.Q6J("ngForOf",e.productList),f.xp6(8),f.Q6J("ngForOf",e.brandList),f.xp6(8),f.Q6J("ngForOf",e.packateCountList),f.xp6(11),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.serviceTypeList),f.xp6(21),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.labourContractorList),f.xp6(5),f.Q6J("ngModel",e.CurrentLotNo),f.xp6(6),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.remarkList),f.xp6(8),f.Q6J("id",e.OnAddClick)("disabled",e.OnAddProductClick),f.xp6(16),f.Q6J("rowData",e.inwardservicelist)("columnDefs",e.serviceColumns),f.xp6(11),f.Q6J("data",e.InwardDetailList)("columns",e.InwardDetailColumns)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(49,B))("pageIndex",0),f.xp6(5),f.Q6J("disabled",e.click),f.xp6(7),f.Q6J("rowData",e.InwardList)("columnDefs",e.columnsInwardList)("frameworkComponents",e.frameworkComponents))},directives:[D.xw,D.yH,p.a8,v.SP,v.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,c.sg,Z.TO,u.Fj,c.mk,I.oO,u.Q7,y.N8,T.CM],pipes:[c.uU],styles:[".mtx-grid[_ngcontent-%COMP%]{height:280px}input.ng-invalid[_ngcontent-%COMP%]:focus{outline-color:red}.ng-deep[_ngcontent-%COMP%]   #gridContainer[_ngcontent-%COMP%]{height:440px}.ng-deep[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{padding:20px;margin-top:20px;background-color:rgba(191,191,191,.15)}.ng-deep[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{margin-top:10px}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-right:10px}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%] > .dx-selectbox[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.modalfooter[_ngcontent-%COMP%]{flex-wrap:wrap;padding:.75rem;border-top:1px solid #dee2e6;border-bottom-right-radius:calc(.3rem - 1px);border-bottom-left-radius:calc(.3rem - 1px)}"]}),F);a(52107);var R=function(){var t=function(){function t(){e(this,t),this.label=""}return o(t,[{key:"agInit",value:function(t){this.params=t,this.label=this.params.label||null}},{key:"refresh",value:function(t){return!0}},{key:"onClick",value:function(t,e){this.params.onClick instanceof Function&&this.params.onClick({event:t,rowData:this.params.node.data,actions:e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-deliveryorderaction-buttons"]],decls:7,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"button",1),f.NdJ("click",function(t){return e.onClick(t,"Edit")}),f._uU(2,"Edit"),f.qZA(),f.TgZ(3,"button",1),f.NdJ("click",function(t){return e.onClick(t,"Delete")}),f._uU(4,"Delete"),f.qZA(),f.TgZ(5,"button",2),f.NdJ("click",function(t){return e.onClick(t,"Print")}),f._uU(6,"Print"),f.qZA(),f.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),t}();function J(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function M(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.PartyName),f.xp6(1),f.Oqu(r.PartyName)}}function E(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerPartyID),f.xp6(1),f.Oqu(r.PartyName)}}function Y(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerContactID),f.xp6(1),f.Oqu(r.ContactPersonName)}}function G(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.Remarks),f.xp6(1),f.Oqu(r.Remarks)}}function W(t,e){if(1&t&&(f.TgZ(0,"option",59),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function V(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",47),f.TgZ(1,"h4",48),f._uU(2,"Customer Parties"),f.qZA(),f.qZA(),f.TgZ(3,"div",49),f.TgZ(4,"div",39),f.TgZ(5,"div",50),f.TgZ(6,"div",8),f.TgZ(7,"label"),f._uU(8,"Customer Name"),f.qZA(),f.TgZ(9,"select",51),f.YNc(10,W,2,2,"option",52),f.qZA(),f.qZA(),f.TgZ(11,"div",50),f.TgZ(12,"div",8),f.TgZ(13,"label"),f._uU(14,"Party Name"),f.qZA(),f._UZ(15,"input",53),f.qZA(),f.qZA(),f.TgZ(16,"div",50),f.TgZ(17,"div",8),f.TgZ(18,"label"),f._uU(19,"Shipping Address"),f.qZA(),f._UZ(20,"input",54),f.qZA(),f.qZA(),f.TgZ(21,"div",50),f.TgZ(22,"div",8),f.TgZ(23,"label"),f._uU(24,"Shipping Address2"),f.qZA(),f._UZ(25,"input",55),f.qZA(),f.qZA(),f.TgZ(26,"div",50),f.TgZ(27,"div",8),f.TgZ(28,"label"),f._uU(29,"Pin Code"),f.qZA(),f._UZ(30,"input",56),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(31,"div",57),f.TgZ(32,"button",58),f.NdJ("click",function(){f.CHM(r);var t=f.oxw(),e=f.MAs(95);return t.onAddCustomerParty(e)}),f._uU(33,"ADD"),f.qZA(),f.TgZ(34,"button",58),f.NdJ("click",function(){f.CHM(r);var t=f.oxw(),e=f.MAs(95);return t.onCloseCustpmerParty(e)}),f._uU(35,"Cancel"),f.qZA(),f.qZA()}if(2&t){var o=f.oxw();f.xp6(10),f.Q6J("ngForOf",o.customerList)}}var H=function(){var r=function(){function r(t,o,i,a){e(this,r),this.api=t,this.fb=o,this.modalService=i,this.dialog=a,this.OrderGivenByList=[],this.DeliveryOrdersearchList=[],this.DO_Detail=[],this.checkCust=!1,this.SaveCustomerParty={},this.SaveDeliveryOrder={},this.clickSave=!1,this.DeliveryOrderID=0,this.config={backdrop:!1,ignoreBackdropClick:!0},this.tab=0,this.DeliveryOrdercolumnDefs=[{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{headerName:"InwardDID",field:"InwardDID",hide:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0},{headerName:"ProductID",field:"ProductID",hide:!0},{headerName:"ProductName",field:"ProductName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"LotNo",field:"LotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},resizable:!0},{headerName:"FirstLotNo",field:"FirstLotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"StorageAreaName",field:"StorageAreaName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"InQuantity",field:"InQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"PendingDO",field:"PendingDO",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"OutQuantity",field:"OutQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"DOQuantity",field:"DOQuantity",hide:!1,cellEditorPopup:!0,sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!0,valueParser:"Number(newValue)",editable:!0,cellStyle:function(t){return t.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}},{headerName:"BrandID",field:"BrandID",hide:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"BrandName",field:"BrandName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"ItemsInPacket",field:"ItemsInPacket",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200}],this.columnsDeliveryOrderList=[{headerName:"Action",floatingFilter:!1,maxWidth:200,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnDeliveryOrderActions.bind(this)}},{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DO No",maxWidth:100,field:"DeliveryOrderNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DO Date",resizable:!0,field:"DeliveryOrderDate",type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedBy",field:"CreatedBy",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Process",field:"Process",resizable:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerPartyID",field:"CustomerPartyID",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",resizable:!0,hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser(),this.form=this.fb.group({customer_id:[null,u.kI.required],chk_Do_Disptch:[null,u.kI.required],deliveryorder_date:[null,u.kI.required],customerParty_id:[null,u.kI.required],DeliveryParty_id:[null,u.kI.required],txtDO_No:[null,u.kI.required],txtShipping_Address:[null,u.kI.required],txtTruckNo:[null,u.kI.required],txtContainerNo:[null,u.kI.required],OrderGivenBy_id:[null,u.kI.required],DORemarks:[null,u.kI.required],Party_customer_id:[null,u.kI.required],txtPartyName:[null,u.kI.required],txtshiffadd1:[null,u.kI.required],txtshiffadd2:[null,u.kI.required],txtPinCode:[null,u.kI.required],txtMobileNo:[null,u.kI.required],txtTotalDOQty:[null,u.kI.required]});var n=new c.uU("en-US").transform(Date(),"yyyy-MM-dd");this.todayDate=n,this.frameworkComponents={buttonRenderer:R}}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdown()}},{key:"BindDropdown",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.get("/Customer").subscribe(function(t){r.customerList=t},function(t){console.error(t)}),this.api.get("/CustomerParty").subscribe(function(t){r.customePartyList=t},function(t){console.error(t)}),this.api.get("/Remarks").subscribe(function(t){r.remarkList=t.filter(function(t){return 2==t.ProcessID})},function(t){console.error(t)}),this.BindDeliveryOrderList();case 1:case"end":return t.stop()}},e,this)}))}},{key:"getRowStyle",value:function(t){if(13==t.data.StatusID)return{"background-color":"pink"}}},{key:"BindDeliveryOrderList",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.get("/DeliveryOrder/DOList?FinancialYearID="+this.currentUser.FinantialYearId+"&WareHouseID="+this.currentUser.warehouseId+"&UserID="+this.currentUser.userId).subscribe(function(t){r.DeliveryOrderList=t},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"tabDeliveryOrderchange",value:function(t){this.tab=t,this.BindDeliveryOrderList()}},{key:"BindOrderGIvenBy",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.api.get("/CustomerContacts/GetCustomerContactsList?CustomerID="+e).subscribe(function(e){t.OrderGivenByList=[],t.OrderGivenByList=e},function(t){console.error(t)})}},{key:"GetCustomerID",value:function(t){var e=this;this.checkCust=!1,this.BindOrderGIvenBy(this.form.value.customer_id),this.api.get("/DeliveryOrder/DOValidation?CustomerID="+this.form.value.customer_id+"&WaherhouseID="+this.currentUser.warehouseId).subscribe(function(t){t.Table.length>0&&(e.checkCust=!0,this.dialog.alert("Order is stopped for some reason .... !!!"))},function(t){console.error(t)})}},{key:"OnSearchClick",value:function(){var t,e=this;null==this.form.value.customer_id?(this.dialog.alert("Select Customers ....."),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus()):this.api.post("/DeliveryOrder/DOSearch?CustomerID="+this.form.value.customer_id+"&WarehouseID="+this.currentUser.warehouseId).subscribe(function(t){e.DeliveryOrdersearchList=t,0==t.length&&this.dialog.alert("Data not found ..... !!!")},function(t){console.error(t)})}},{key:"onDOCellKeyPress",value:function(t){t.data.BalanceQuantity>t.data.DOQuantity?this.onDOSearchGridRefresh():t.data.BalanceQuantity==t.data.DOQuantity?(this.dialog.alert(t.data.ProductName+" And Lot no "+t.data.LotNo+", Stock will be null or zero ...!!!"),this.onDOSearchGridRefresh()):t.data.BalanceQuantity<t.data.DOQuantity&&(this.DeliveryOrdersearchList.forEach(function(e){e.InwardLocationID==t.data.InwardLocationID&&(e.DOQuantity=0)}),this.dialog.alert("DO Quantity must be less than or equal to balance quantity ..!!!"),this.onDOSearchGridRefresh())}},{key:"onDOSearchGridRefresh",value:function(){var t=this.DeliveryOrdersearchList.filter(function(t){return t});this.DeliveryOrdersearchList=t;var e=this.DeliveryOrdersearchList.map(function(t){return t.DOQuantity}).reduce(function(t,e){return e+t});this.form.controls.txtTotalDOQty.setValue(e)}},{key:"onCustomerPartyContact",value:function(t){var e;null==this.form.value.customer_id||0==this.form.value.customer_id?(this.dialog.alert("Select Customers ....."),null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus()):(this.form.controls.Party_customer_id.setValue(this.form.value.customer_id),this.modalService.open(t,this.config))}},{key:"onCloseCustpmerParty",value:function(t){this.modalService.dismissAll(t)}},{key:"onAddCustomerParty",value:function(t){var e,r,o=this;null==this.form.value.Party_customer_id||0==this.form.value.Party_customer_id?(this.dialog.alert("Select Customers ....."),null===(e=null==document?void 0:document.getElementById("Party_customer_id"))||void 0===e||e.focus()):null==this.form.value.txtPartyName||0==this.form.value.txtPartyName?(this.dialog.alert("Enter Customer Party Name ..... !!!"),null===(r=null==document?void 0:document.getElementById("txtPartyName"))||void 0===r||r.focus()):(this.SaveCustomerParty={CustomerID:this.form.value.customer_id,PartyName:null==this.form.value.txtPartyName?"":this.form.value.txtPartyName,ShippingAddress:null==this.form.value.txtshiffadd1?"":this.form.value.txtshiffadd1,ShippingAddress1:null==this.form.value.txtshiffadd2?"":this.form.value.txtshiffadd2,PinCode:null==this.form.value.txtPinCode?"":this.form.value.txtPinCode,CreatedBy:this.currentUser.userId},console.log(this.SaveCustomerParty),this.api.post("/DeliveryOrder/AddParty",this.SaveCustomerParty).subscribe(function(e){this.dialog.alert(e.Table[0].Message),o.form.controls.txtPartyName.reset(),o.form.controls.txtshiffadd1.reset(),o.form.controls.txtshiffadd2.reset(),o.form.controls.txtPinCode.reset(),o.modalService.dismissAll(t)},function(t){console.error(t)}),this.api.get("/CustomerParty").subscribe(function(t){o.customePartyList=t},function(t){console.error(t)}))}},{key:"GetMobileNo",value:function(t){var e=this,r=this.OrderGivenByList.filter(function(t){return t.CustomerContactID==e.form.value.OrderGivenBy_id});this.form.controls.txtMobileNo.setValue(r[0].MobileNo),console.log(r[0].MobileNo)}},{key:"onSaveDeliveryOrder",value:function(){var t,e,r=this;if(null==this.form.value.customer_id||""==this.form.value.customer_id)return this.dialog.alert("Please .... Select Customer Name"),void(null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus());this.api.get("/DeliveryOrder/DOValidation?CustomerID="+this.form.value.customer_id+"&WaherhouseID="+this.currentUser.warehouseId).subscribe(function(t){var o,i;if(t.Table.length>0)r.checkCust=!0,this.dialog.alert("Order is stopped for some reason .... !!!");else{if(e=r.DeliveryOrdersearchList.length>0?r.DeliveryOrdersearchList.map(function(t){return t.DOQuantity}).reduce(function(t,e){return e+t}):0,null==r.form.value.customerParty_id||""==r.form.value.customerParty_id)return this.dialog.alert("Please .... Select customer Party"),void(null===(o=null==document?void 0:document.getElementById("customerParty_id"))||void 0===o||o.focus());if(null==r.form.value.OrderGivenBy_id||""==r.form.value.OrderGivenBy_id)return this.dialog.alert("Please .... Select Order Given By"),void(null===(i=null==document?void 0:document.getElementById("OrderGivenBy_id"))||void 0===i||i.focus());if(e<=0)return void this.dialog.alert("Please .... Add DO quantity In delivery order detail ");r.clickSave=!0;var a,n=r.OrderGivenByList.filter(function(t){return t.CustomerContactID==r.form.value.OrderGivenBy_id});a=n.length>0?n[0].ContactPersonName:"",r.DeliveryOrdersearchList.filter(function(t){return t.DOQuantity>0}).forEach(function(t){r.DO_Detail.push({DeliveryOrderID:r.DeliveryOrderID,ProductID:t.ProductID,InwardDID:t.InwardDID,LotNo:t.LotNo,DOQuantity:t.DOQuantity,InwardLocationID:t.InwardLocationID,StorageAreaID:t.StorageAreaID})}),r.DO_Detail.slice(),r.SaveDeliveryOrder={DeliveryOrderID:r.DeliveryOrderID,DeliveryOrderDate:r.form.value.deliveryorder_date,CustomerID:r.form.value.customer_id,WareHouseID:r.currentUser.warehouseId,CompanyID:r.currentUser.companyId,DeliverTo:r.form.value.customerParty_id,CustomerPartyID:null==r.form.value.DeliveryParty_id?0:r.form.value.DeliveryParty_id,ShippingAddress:null==r.form.value.txtShipping_Address?"":r.form.value.txtShipping_Address,OrderGivenBy:a,Remarks:null==r.form.value.DORemarks?"":r.form.value.DORemarks,CreatedBy:r.currentUser.userId,ByCustomer:0,IsDoDispatch:null!=r.form.value.chk_Do_Disptch&&r.form.value.chk_Do_Disptch,TruckNo:null==r.form.value.txtTruckNo?"":r.form.value.txtTruckNo,ContainerNo:null==r.form.value.txtContainerNo?"":r.form.value.txtContainerNo,DeliveryOrderDetailModel:r.DO_Detail},r.api.post("/DeliveryOrder/SaveDO",r.SaveDeliveryOrder).subscribe(function(t){this.dialog.alert(t.Table[0].Message)},function(t){console.error(t),r.clickSave=!1}),console.log(r.SaveDeliveryOrder)}},function(t){console.error(t)})}},{key:"onResetDeliveryOrder",value:function(){this.clickSave=!1,this.checkCust=!1,this.form.reset(),this.BindDropdown(),this.DeliveryOrderID=0;var t=new c.uU("en-US").transform(Date(),"yyyy-MM-dd");this.todayDate=t,this.form.controls.deliveryorder_date.setValue(this.todayDate),this.DeliveryOrdersearchList=[],this.DO_Detail=[],this.SaveDeliveryOrder={}}},{key:"OnDeliveryOrderActions",value:function(t){var e=this;"Delete"==String(t.actions)?this.api.get("/DeliveryOrder/DOValidation?CustomerID="+t.rowData.CustomerID+"&WaherhouseID="+t.rowData.WareHouseID).subscribe(function(r){if(r.Table.length>0)e.checkCust=!0,e.dialog.this.dialog.alert("Order is stopped for some reason .... !!!");else if(11==t.rowData.StatusID)e.dialog.this.dialog.alert("Sorry,Outward already generated ....!!!");else if(15==t.rowData.StatusID)e.dialog.this.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!");else if(13==t.rowData.StatusID)e.dialog.this.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!");else if(12==t.rowData.StatusID){if(1==confirm("Sorry,this translation have dispatch. Do you want to deleted or deactivate your translation ...")){var o=prompt("Remarks ");e.api.post("/DeliveryOrder/PartiallyCancelled?DeliveryOrderID="+t.rowData.DeliveryOrderID+"&CustomerId="+t.rowData.CustomerID+"&Remarks="+o+"&CreatedBy="+e.currentUser.userId).subscribe(function(t){e.dialog.this.dialog.alert(t),e.BindDeliveryOrderList()},function(t){console.error(t)})}}else 1==confirm("Do you want to deleted or deactivate your Delivery Order ...??")&&(prompt("Remarks"),e.api.post("/DeliveryOrder/CancelledDO?DeliveryOrderID="+t.rowData.DeliveryOrderID+"&CustomerId="+t.rowData.CustomerID+"&Remarks=test&CreatedBy="+e.currentUser.userId).subscribe(function(t){e.dialog.this.dialog.alert(t),e.BindDeliveryOrderList()},function(t){console.error(t)}))},function(t){console.error(t)}):"Edit"==String(t.actions)?(this.onResetDeliveryOrder(),this.api.get("/DeliveryOrder/DOValidation?CustomerID="+t.rowData.CustomerID+"&WaherhouseID="+t.rowData.WareHouseID).subscribe(function(r){r.Table.length>0?(e.checkCust=!0,e.dialog.this.dialog.alert("Order is stopped for some reason .... !!!")):11==t.rowData.StatusID?e.dialog.this.dialog.alert("Sorry,Outward already generated ....!!!"):12==t.rowData.StatusID?e.dialog.this.dialog.alert("Sorry,Dispatch already generated ....!!!"):13==t.rowData.StatusID?e.dialog.this.dialog.alert("Sorry,You can't edit this transaction ,because it's already Cancelled or deactivate ....!!!"):15==t.rowData.StatusID?e.dialog.this.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!"):"Online"==t.rowData.Process?e.dialog.this.dialog.alert("Sorry,You can't edit because its generated by customer....!!!"):e.api.get("/DeliveryOrder/GetEditDelivryOrder?DeliveryOrderID="+t.rowData.DeliveryOrderID).subscribe(function(r){e.tab=0,e.DeliveryOrdersearchList=r.Table1,e.DeliveryOrderID=t.rowData.DeliveryOrderID,e.onDOSearchGridRefresh();var o=new c.uU("en-US").transform(t.rowData.DeliveryOrderDate,"yyyy-MM-dd");e.BindOrderGIvenBy(t.rowData.CustomerID);var i,a,n=e.DeliveryOrdersearchList.map(function(t){return t.DOQuantity}).reduce(function(t,e){return e+t}),l=e.OrderGivenByList.filter(function(e){return e.ContactPersonName==t.rowData.OrderGivenBy});l.length>0?(i=l[0].CustomerContactID,a=l[0].MobileNo,e.form.controls.txtMobileNo.setValue(l[0].MobileNo)):(i=0,a="",e.form.controls.txtMobileNo.setValue("")),e.form.setValue({customer_id:t.rowData.CustomerID,deliveryorder_date:o,chk_Do_Disptch:!1,customerParty_id:t.rowData.DeliverTo,DeliveryParty_id:t.rowData.CustomerPartyID,txtDO_No:t.rowData.DeliveryOrderNo,txtShipping_Address:t.rowData.ShippingAddress,txtTruckNo:t.rowData.TruckNo,txtContainerNo:t.rowData.ContainerNo,OrderGivenBy_id:i,DORemarks:t.rowData.Remarks,Party_customer_id:t.rowData.CustomerID,txtPartyName:"",txtshiffadd1:"",txtshiffadd2:"",txtPinCode:"",txtMobileNo:a,txtTotalDOQty:n})},function(t){console.error(t)})},function(t){console.error(t)})):"Print"==String(t.actions)&&this.api.get("/DeliveryOrder/DeliveryOrderReceipt?DeliveryOrderID="+t.rowData.DeliveryOrderID).subscribe(function(t){console.log("OnDeliveryOrderActions=>",t);var e=t[0].Base64Str,r=window.open("");null==r||r.document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e)+"'></iframe>")},function(t){console.error(t)})}}]),r}();return r.\u0275fac=function(t){return new(t||r)(f.Y36(d.sM),f.Y36(u.qu),f.Y36(g.FF),f.Y36(h.cP))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-deliveryorder"]],decls:118,vars:19,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Delivery Order"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-4","col-md-4"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm",3,"change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-3","col-md-3"],["type","date","formControlName","deliveryorder_date","id","deliveryorder_date","placeholder","","name","deliveryorder_date",1,"form-control","form-control-rounded",3,"ngModel"],[1,"form-group","pt-4"],["type","button",1,"btn","btn-secondary","btn-block",3,"disabled","click"],[1,"col-sm-2","col-md-2"],["type","checkbox","formControlName","chk_Do_Disptch","id","chk_Do_Disptch",1,"form-control"],["formControlName","customerParty_id","id","customerParty_id",1,"form-control","form-control-sm"],["formControlName","DeliveryParty_id","id","DeliveryParty_id",1,"form-control","form-control-sm"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],["type","text","formControlName","txtDO_No","id","txtDO_No","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShipping_Address","id","txtShipping_Address","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["type","text","formControlName","txtTruckNo","id","txtTruckNo","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainerNo","id","txtContainerNo","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["formControlName","OrderGivenBy_id","id","OrderGivenBy_id",1,"form-control","form-control-sm",3,"change"],["type","text","formControlName","txtMobileNo","id","txtMobileNo","readonly","","placeholder","",1,"form-control","form-control-sm"],["formControlName","DORemarks","id","DORemarks",1,"form-control","form-control-sm"],["style","width:620px;"],["CustomerPartycontent",""],[1,"col-12"],[1,"font-weight-bold"],[1,"ag-theme-alpine",2,"height","500px","font-size","12px!important",3,"rowData","columnDefs","cellValueChanged"],[1,"row","mt-2"],[1,"col-sm-12"],[1,"form-group","float-right",2,"display","flex"],["type","text","formControlName","txtTotalDOQty","id","txtTotalDOQty","readonly","","placeholder","",1,"form-control","form-control-sm"],[1,"row"],[1,"col-sm-3","mt-1","mb-1"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","100%",3,"disabled","click"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","100%",3,"click"],["label","Delivery Order List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents","getRowStyle"],[3,"value"],[1,"modal-header"],["id","modal-basic-title"],[1,"modal-body"],[1,"col-sm-12","col-md-12"],["formControlName","Party_customer_id","id","Party_customer_id",1,"form-control","form-control-sm"],["disabled","",3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","txtPartyName","id","txtPartyName","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtshiffadd1","id","txtshiffadd1","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtshiffadd2","id","txtshiffadd2","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtPinCode","id","txtPinCode","placeholder","",1,"form-control","form-control-sm"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],["disabled","",3,"value"]],template:function(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(t){return e.tabDeliveryOrderchange(t)})("selectedIndexChange",function(t){return e.tab=t}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.NdJ("change",function(t){return e.GetCustomerID(t)}),f.TgZ(13,"option",10),f._uU(14,"Select"),f.qZA(),f.YNc(15,J,2,2,"option",11),f.qZA(),f._UZ(16,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",8),f.TgZ(19,"label"),f._uU(20,"Delivery Order Date"),f.qZA(),f._UZ(21,"input",14),f.ALo(22,"date"),f.qZA(),f.qZA(),f.TgZ(23,"div",13),f.TgZ(24,"div",15),f.TgZ(25,"button",16),f.NdJ("click",function(){return e.OnSearchClick()}),f._uU(26,"Search"),f.qZA(),f._UZ(27,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(28,"div",17),f.TgZ(29,"div",8),f.TgZ(30,"label"),f._uU(31,"Do & Dispatch"),f.qZA(),f._UZ(32,"input",18),f.qZA(),f.qZA(),f.TgZ(33,"div",7),f.TgZ(34,"div",8),f.TgZ(35,"label"),f._uU(36,"Customer Party"),f.qZA(),f.TgZ(37,"select",19),f.TgZ(38,"option",10),f._uU(39,"Select"),f.qZA(),f.YNc(40,M,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(41,"div",13),f.TgZ(42,"div",8),f.TgZ(43,"label"),f._uU(44,"Delivery Party"),f.qZA(),f.TgZ(45,"select",20),f.TgZ(46,"option",10),f._uU(47,"Select"),f.qZA(),f.YNc(48,E,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(49,"div",13),f.TgZ(50,"div",21),f.TgZ(51,"button",22),f.NdJ("click",function(){f.CHM(r);var t=f.MAs(95);return e.onCustomerPartyContact(t)}),f._uU(52,"ADD Party"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(53,"div",17),f.TgZ(54,"div",8),f.TgZ(55,"label"),f._uU(56,"DO No"),f.qZA(),f._UZ(57,"input",23),f.qZA(),f.qZA(),f.TgZ(58,"div",7),f.TgZ(59,"div",8),f.TgZ(60,"label"),f._uU(61,"Shipping Address"),f.qZA(),f._UZ(62,"input",24),f.qZA(),f.qZA(),f.TgZ(63,"div",7),f.TgZ(64,"div",8),f.TgZ(65,"label"),f._uU(66,"Truck No"),f.qZA(),f._UZ(67,"input",25),f.qZA(),f.qZA(),f.TgZ(68,"div",7),f.TgZ(69,"div",8),f.TgZ(70,"label"),f._uU(71,"Container No"),f.qZA(),f._UZ(72,"input",26),f.qZA(),f.qZA(),f.TgZ(73,"div",7),f.TgZ(74,"div",8),f.TgZ(75,"label"),f._uU(76,"OrderGivenBy"),f.qZA(),f.TgZ(77,"select",27),f.NdJ("change",function(t){return e.GetMobileNo(t)}),f.TgZ(78,"option",10),f._uU(79,"Select"),f.qZA(),f.YNc(80,Y,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(81,"div",7),f.TgZ(82,"div",8),f.TgZ(83,"label"),f._uU(84,"Mobile No"),f.qZA(),f._UZ(85,"input",28),f.qZA(),f.qZA(),f.TgZ(86,"div",7),f.TgZ(87,"div",8),f.TgZ(88,"label"),f._uU(89,"Remarks"),f.qZA(),f.TgZ(90,"select",29),f.TgZ(91,"option",10),f._uU(92,"Select "),f.qZA(),f.YNc(93,G,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(94,V,36,1,"ng-template",30,31,f.W1O),f._UZ(96,"hr"),f.qZA(),f.TgZ(97,"div",32),f.TgZ(98,"p",33),f._uU(99," Delivery Order Details"),f.qZA(),f.TgZ(100,"div"),f.TgZ(101,"ag-grid-angular",34),f.NdJ("cellValueChanged",function(t){return e.onDOCellKeyPress(t)}),f.qZA(),f.qZA(),f.TgZ(102,"div",35),f.TgZ(103,"div",36),f.TgZ(104,"div",37),f.TgZ(105,"label"),f._uU(106,"Total DO Quantity"),f.qZA(),f._UZ(107,"input",38),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(108,"div",39),f.TgZ(109,"div",40),f.TgZ(110,"button",41),f.NdJ("click",function(){return e.onSaveDeliveryOrder()}),f._uU(111,"Save"),f.qZA(),f.qZA(),f.TgZ(112,"div",40),f.TgZ(113,"button",42),f.NdJ("click",function(){return e.onResetDeliveryOrder()}),f._uU(114,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(115,"mat-tab",43),f.TgZ(116,"div",44),f._UZ(117,"ag-grid-angular",45),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&t&&(f.xp6(3),f.Q6J("selectedIndex",e.tab),f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(10),f.Q6J("ngForOf",e.customerList),f.xp6(6),f.Q6J("ngModel",f.xi3(22,16,e.todayDate,"yyyy-MM-dd")),f.xp6(4),f.Q6J("disabled",e.checkCust),f.xp6(15),f.Q6J("ngForOf",e.customePartyList),f.xp6(8),f.Q6J("ngForOf",e.customePartyList),f.xp6(32),f.Q6J("ngForOf",e.OrderGivenByList),f.xp6(13),f.Q6J("ngForOf",e.remarkList),f.xp6(8),f.Q6J("rowData",e.DeliveryOrdersearchList)("columnDefs",e.DeliveryOrdercolumnDefs),f.xp6(9),f.Q6J("disabled",e.clickSave),f.xp6(7),f.Q6J("rowData",e.DeliveryOrderList)("columnDefs",e.columnsDeliveryOrderList)("frameworkComponents",e.frameworkComponents)("getRowStyle",e.getRowStyle))},directives:[D.xw,D.yH,p.a8,v.SP,v.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,c.sg,Z.TO,u.Fj,u.Wl,y.N8],pipes:[c.uU],styles:[".rag-red[_ngcontent-%COMP%]{background-color:red!important}"]}),r}(),$=function(){var t=function(){function t(){e(this,t),this.label=""}return o(t,[{key:"agInit",value:function(t){this.params=t,this.label=this.params.label||null}},{key:"refresh",value:function(t){return!0}},{key:"onClick",value:function(t,e){this.params.onClick instanceof Function&&this.params.onClick({event:t,rowData:this.params.node.data,actions:e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-dispatchdeletebutton"]],decls:5,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"button",1),f.NdJ("click",function(t){return e.onClick(t,"Delete")}),f._uU(2,"Delete"),f.qZA(),f.TgZ(3,"button",2),f.NdJ("click",function(t){return e.onClick(t,"Print")}),f._uU(4,"Print"),f.qZA(),f.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),t}();function z(t,e){if(1&t&&(f.TgZ(0,"option",37),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function K(t,e){if(1&t&&(f.TgZ(0,"option",37),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerPartyID),f.xp6(1),f.Oqu(r.PartyName)}}var j=function(){var r=function(){function r(t,o,i){e(this,r),this.api=t,this.fb=o,this.dialog=i,this.SaveDispatch={},this.tab=0,this.clickSave=!1,this.DeliveryOrderID=0,this.DispatchDetailList=[],this.DispatchDetail=[],this.DispatchDetailcolumnDefs=[{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderDID",field:"DeliveryOrderDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductID",field:"ProductID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageArea",field:"StorageArea",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardDID",field:"InwardDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DOQuantity",field:"DOQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchQuantity",field:"DispatchQuantity",hide:!1,filter:"agNumberColumnFilter",valueParser:"Number(newValue)",floatingFilter:!0,cellEditorPopup:!0,sort:"desc",editable:!0,cellStyle:function(t){return t.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}},{headerName:"BrandName",field:"BrandName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ItemsInPacket",field:"ItemsInPacket",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.DispatchSearchcolumnDefs=[{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderDate",field:"DeliveryOrderDate",hide:!1,type:"date",cellRenderer:"dateTimeRenderer",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.DispatchsListColumnDefs=[{headerName:"Action",width:180,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnActionDispatch.bind(this),label:"Click 1"}},{headerName:"DispatchID",field:"DispatchID",minWidth:100,hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchNo",field:"DispatchNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerPartyID",field:"CustomerPartyID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"PartyName",field:"PartyName",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchDate",field:"DispatchDate",hide:!1,minWidth:100,type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CeatedBy",field:"CeatedBy",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser(),this.form=this.fb.group({customer_id:[null,u.kI.required],DeliveryTo_ID:[null,u.kI.required],txtShipping_Address:[null,u.kI.required],OrderGivenBy_id:[null,u.kI.required],txtTruckNo:[null,u.kI.required],txtContainerNo:[null,u.kI.required],DispatchRemarks:[null,u.kI.required],txtTotalDispatchQty:[null,u.kI.required]}),this.frameworkComponents={buttonRenderer:$}}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdown(),this.onDispatchList(),this.DispatchSearchList=[],this.DispatchDetailList=[]}},{key:"BindDropdown",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.get("/Customer").subscribe(function(t){r.customerList=t},function(t){console.error(t)}),this.api.get("/CustomerParty").subscribe(function(t){r.customePartyList=t},function(t){console.error(t)}),this.api.get("/Remarks").subscribe(function(t){r.remarkList=t.filter(function(t){return 2==t.ProcessID})},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"tabDeliveryOrderchange",value:function(t){this.tab=t,this.onDispatchList()}},{key:"OnSearchClick",value:function(){var t,e=this;if(null==this.form.value.customer_id||""==this.form.value.customer_id)return this.dialog.alert("Please .... Select Customer Name"),void(null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus());this.api.get("/Dispatch/DispatchSearch?CustomerID="+this.form.value.customer_id+"&WarehouseId="+this.currentUser.warehouseId+"&CompanyID="+this.currentUser.companyId).subscribe(function(t){e.DispatchSearchList=t},function(t){console.error(t)})}},{key:"rowDODoubleClicked",value:function(t){var e=this,r=this.customePartyList.filter(function(e){return e.PartyName==t.data.DeliverTo});this.form.setValue(r.length>0?{customer_id:this.form.value.customer_id,DeliveryTo_ID:r[0].CustomerPartyID,txtShipping_Address:t.data.ShippingAddress,OrderGivenBy_id:t.data.OrderGivenBy,txtTruckNo:t.data.TruckNo,txtContainerNo:t.data.ContainerNo,DispatchRemarks:t.data.Remarks,txtTotalDispatchQty:0}:{customer_id:this.form.value.customer_id,DeliveryTo_ID:0,txtShipping_Address:t.data.ShippingAddress,OrderGivenBy_id:t.data.OrderGivenBy,txtTruckNo:t.data.TruckNo,txtContainerNo:t.data.ContainerNo,DispatchRemarks:t.data.Remarks,txtTotalDispatchQty:0}),this.DeliveryOrderID=t.data.DeliveryOrderID,this.api.get("/Dispatch/GetDispatchDetails?DeliveryOrderID="+t.data.DeliveryOrderID+"&DeliveryOrderNo="+t.data.DeliveryOrderNo).subscribe(function(t){e.DispatchDetailList=t},function(t){console.error(t)})}},{key:"onDispatchCellKeyPress",value:function(t){console.log(this.DispatchDetailList),t.data.BalanceQuantity>t.data.DispatchQuantity||t.data.BalanceQuantity==t.data.DispatchQuantity?this.onDispatchDetailGridRefresh():t.data.BalanceQuantity<t.data.DispatchQuantity&&(this.DispatchDetailList.forEach(function(e){e.InwardLocationID==t.data.InwardLocationID&&(e.DispatchQuantity=0)}),this.dialog.alert("DispatchQuantity Must be less than or equal to BalanceQuantity.....!!!"),this.onDispatchDetailGridRefresh())}},{key:"onDispatchDetailGridRefresh",value:function(){var t=this.DispatchDetailList.filter(function(t){return t});this.DispatchDetailList=t;var e=this.DispatchDetailList.map(function(t){return t.DispatchQuantity}).reduce(function(t,e){return e+t});console.log(e),this.form.controls.txtTotalDispatchQty.setValue(e)}},{key:"onDispatchList",value:function(){var t=this;this.api.get("/Dispatch/Dispatch_Select").subscribe(function(e){t.DispatchList=e},function(t){console.error(t)})}},{key:"OnActionDispatch",value:function(t){var e=this;if("Delete"==String(t.actions)){if(41==t.rowData.StatusID)this.dialog.alert("This transaction already generated Outward, You can't delete it....!!!");else if(43==t.rowData.StatusID)this.dialog.alert("This transaction already generated Cancelled, You can't delete it....!!!");else if(1==confirm("Do you want to deleted or deactivate your dispatch...")){var r=prompt("Remarks ");this.api.post("/Dispatch/Dispatch_Cancelled?DispatchID="+t.rowData.DispatchID+"&Remark="+r+"&CreatedBy="+this.currentUser.userId).subscribe(function(t){e.dialog.this.dialog.alert(t),e.onDispatchList()},function(t){console.error(t)})}}else"Print"==String(t.actions)&&this.api.get("/Dispatch/DispatchReceipt?DispatchID="+t.rowData.DispatchID).subscribe(function(t){console.log("OnDeliveryOrderActions=>",t);var e=t[0].Base64Str,r=window.open("");null==r||r.document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e)+"'></iframe>")},function(t){console.error(t)})}},{key:"onDeleteDORow",value:function(t){var e=this;if(console.log(t),41==t.StatusID)this.dialog.alert("This transaction already generated Outward, You can't delete it....!!!");else if(43==t.StatusID)this.dialog.alert("This transaction already generated Cancelled, You can't delete it....!!!");else if(1==confirm("Do you want to deleted or deactivate your dispatch...")){var r=prompt("Remarks ");this.api.post("/Dispatch/Dispatch_Cancelled?DispatchID="+t.DispatchID+"&Remark="+r+"&CreatedBy="+this.currentUser.userId).subscribe(function(t){this.dialog.alert(t),e.onDispatchList()},function(t){console.error(t)})}}},{key:"onSaveDispatch",value:function(){var t,e,r,o,i=this;return o=this.DispatchDetailList.length>0?this.DispatchDetailList.map(function(t){return t.DispatchQuantity}).reduce(function(t,e){return e+t}):0,null==this.form.value.customer_id||""==this.form.value.customer_id?(this.dialog.alert("Please .... Select Customer Name"),void(null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus())):null==this.form.value.DeliveryTo_ID||""==this.form.value.DeliveryTo_ID?(this.dialog.alert("Please.... Select Deliver To..!!!"),void(null===(e=null==document?void 0:document.getElementById("DeliveryTo_ID"))||void 0===e||e.focus())):null==this.form.value.OrderGivenBy_id||""==this.form.value.OrderGivenBy_id?(this.dialog.alert("Please Enter Order Given By..!!!"),void(null===(r=null==document?void 0:document.getElementById("OrderGivenBy_id"))||void 0===r||r.focus())):void(o<=0?this.dialog.alert("Please .... Add Dispatch quantity In delivery order detail "):(console.log(o),this.clickSave=!0,this.DispatchDetail=[],this.DispatchDetailList.filter(function(t){return t.DispatchQuantity>0}).forEach(function(t){i.DispatchDetail.push({DeliveryOrderDID:t.DeliveryOrderDID,ProductID:t.ProductID,InwardDID:t.InwardDID,LotNo:t.LotNo,DispatchQuantity:t.DispatchQuantity,InwardLocationID:t.InwardLocationID,StorageAreaID:t.StorageAreaID})}),this.DispatchDetail.slice(),console.log(this.DispatchDetail),this.SaveDispatch={DispatchID:0,CustomerID:this.form.value.customer_id,CustomerPartyID:this.form.value.DeliveryTo_ID,WareHouseID:this.currentUser.warehouseId,ShippingAddress:this.form.value.txtShipping_Address,OrderGivenBy:this.form.value.OrderGivenBy_id,Remarks:this.form.value.DispatchRemarks,CreatedBy:this.currentUser.userId,DeliveryOrderID:this.DeliveryOrderID,TruckNo:this.form.value.txtTruckNo,ContainerNo:this.form.value.txtContainerNo,DispatchDetailModel:this.DispatchDetail},console.log(this.SaveDispatch),this.api.post("/Dispatch/SaveDispatch",this.SaveDispatch).subscribe(function(t){console.log(t),this.dialog.alert(t.Table[0].Message)},function(t){console.error(t),i.clickSave=!1})))}},{key:"onResetDispatch",value:function(){this.form.reset(),this.BindDropdown(),this.DispatchSearchList=[],this.DispatchDetailList=[],this.clickSave=!1}}]),r}();return r.\u0275fac=function(t){return new(t||r)(f.Y36(d.sM),f.Y36(u.qu),f.Y36(h.cP))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-dispatch"]],decls:80,vars:12,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Dispatch"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-5","col-md-5"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-2","col-md-2"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],["formControlName","DeliveryTo_ID","id","DeliveryTo_ID",1,"form-control","form-control-sm"],[1,"col-sm-6","col-md-6"],["type","text","formControlName","txtShipping_Address","id","txtShipping_Address","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","OrderGivenBy_id","id","OrderGivenBy_id","placeholder","",1,"form-control","form-control-sm"],[1,"col-sm-4","col-md-4"],["type","text","formControlName","txtTruckNo","id","txtTruckNo","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainerNo","id","txtContainerNo","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","DispatchRemarks","id","DispatchRemarks","placeholder","",1,"form-control","form-control-sm"],[1,"col-12"],[1,"font-weight-bold"],[1,"ag-theme-alpine",2,"height","250px",3,"rowData","columnDefs","rowDoubleClicked"],[1,"ag-theme-alpine",2,"height","250px",3,"rowData","columnDefs","cellValueChanged"],[1,"row","mt-2"],[1,"col-sm-12"],[1,"form-group","float-right",2,"display","flex"],["type","text","formControlName","txtTotalDispatchQty","id","txtTotalDispatchQty","readonly","","placeholder","",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-secondary",2,"width","20%",3,"disabled","click"],["type","button",1,"btn","btn-secondary","ml-3",2,"width","20%",3,"click"],["label","Dispatch List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","500px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(t){return e.tabDeliveryOrderchange(t)})("selectedIndexChange",function(t){return e.tab=t}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.TgZ(13,"option",10),f._uU(14,"Select"),f.qZA(),f.YNc(15,z,2,2,"option",11),f.qZA(),f._UZ(16,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",14),f.TgZ(19,"button",15),f.NdJ("click",function(){return e.OnSearchClick()}),f._uU(20,"Search"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(21,"div",7),f.TgZ(22,"div",8),f.TgZ(23,"label"),f._uU(24,"DeliveryTo"),f.qZA(),f.TgZ(25,"select",16),f.TgZ(26,"option",10),f._uU(27,"Select"),f.qZA(),f.YNc(28,K,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(29,"div",17),f.TgZ(30,"div",8),f.TgZ(31,"label"),f._uU(32,"Shipping Address"),f.qZA(),f._UZ(33,"input",18),f.qZA(),f.qZA(),f.TgZ(34,"div",17),f.TgZ(35,"div",8),f.TgZ(36,"label"),f._uU(37,"OrderGivenBy"),f.qZA(),f._UZ(38,"input",19),f.qZA(),f.qZA(),f.TgZ(39,"div",20),f.TgZ(40,"div",8),f.TgZ(41,"label"),f._uU(42,"Truck No"),f.qZA(),f._UZ(43,"input",21),f.qZA(),f.qZA(),f.TgZ(44,"div",20),f.TgZ(45,"div",8),f.TgZ(46,"label"),f._uU(47,"Container No"),f.qZA(),f._UZ(48,"input",22),f.qZA(),f.qZA(),f.TgZ(49,"div",20),f.TgZ(50,"div",8),f.TgZ(51,"label"),f._uU(52,"Remarks"),f.qZA(),f._UZ(53,"input",23),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(54,"hr"),f.TgZ(55,"div",24),f.TgZ(56,"p",25),f._uU(57," Delivery Order List"),f.qZA(),f.TgZ(58,"div"),f.TgZ(59,"ag-grid-angular",26),f.NdJ("rowDoubleClicked",function(t){return e.rowDODoubleClicked(t)}),f.qZA(),f.qZA(),f.qZA(),f._UZ(60,"hr"),f.TgZ(61,"div",24),f.TgZ(62,"p",25),f._uU(63,"Dispatch Details"),f.qZA(),f.TgZ(64,"div"),f.TgZ(65,"ag-grid-angular",27),f.NdJ("cellValueChanged",function(t){return e.onDispatchCellKeyPress(t)}),f.qZA(),f.qZA(),f.TgZ(66,"div",28),f.TgZ(67,"div",29),f.TgZ(68,"div",30),f.TgZ(69,"label"),f._uU(70,"Total Dispatch Qty"),f.qZA(),f._UZ(71,"input",31),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(72,"br"),f.TgZ(73,"button",32),f.NdJ("click",function(){return e.onSaveDispatch()}),f._uU(74,"Save"),f.qZA(),f.TgZ(75,"button",33),f.NdJ("click",function(){return e.onResetDispatch()}),f._uU(76,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(77,"mat-tab",34),f.TgZ(78,"div",35),f._UZ(79,"ag-grid-angular",36),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(3),f.Q6J("selectedIndex",e.tab),f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(10),f.Q6J("ngForOf",e.customerList),f.xp6(13),f.Q6J("ngForOf",e.customePartyList),f.xp6(31),f.Q6J("rowData",e.DispatchSearchList)("columnDefs",e.DispatchSearchcolumnDefs),f.xp6(6),f.Q6J("rowData",e.DispatchDetailList)("columnDefs",e.DispatchDetailcolumnDefs),f.xp6(8),f.Q6J("disabled",e.clickSave),f.xp6(6),f.Q6J("rowData",e.DispatchList)("columnDefs",e.DispatchsListColumnDefs)("frameworkComponents",e.frameworkComponents))},directives:[D.xw,D.yH,p.a8,v.SP,v.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,c.sg,Z.TO,u.Fj,y.N8],styles:[""]}),r}(),X=function(){var t=function(){function t(){e(this,t),this.label=""}return o(t,[{key:"agInit",value:function(t){this.params=t,this.label=this.params.label||null}},{key:"refresh",value:function(t){return!0}},{key:"onClick",value:function(t,e){this.params.onClick instanceof Function&&this.params.onClick({event:t,rowData:this.params.node.data,actions:e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-outwarddeletebutton"]],decls:5,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"button",1),f.NdJ("click",function(t){return e.onClick(t,"Delete")}),f._uU(2,"Delete"),f.qZA(),f.TgZ(3,"button",2),f.NdJ("click",function(t){return e.onClick(t,"Print")}),f._uU(4,"Print"),f.qZA(),f.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),t}();function tt(t,e){if(1&t&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function et(t,e){if(1&t&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerPartyID),f.xp6(1),f.Oqu(r.PartyName)}}function rt(t,e){if(1&t&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.Remarks),f.xp6(1),f.Oqu(r.Remarks)}}function ot(t,e){if(1&t&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.DockID),f.xp6(1),f.Oqu(r.DockName)}}function it(t,e){if(1&t&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.UserID),f.xp6(1),f.Oqu(r.UserName)}}function at(t,e){if(1&t&&(f.TgZ(0,"option",43),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.Oqu(r.ContractorName)}}function nt(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"div",44),f.TgZ(2,"h5",45),f._uU(3,"Customer Party"),f.qZA(),f.qZA(),f._UZ(4,"br"),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",46),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Party Name"),f.qZA(),f._UZ(12,"input",47),f.qZA(),f.qZA(),f.TgZ(13,"div",46),f.TgZ(14,"div",8),f.TgZ(15,"label",48),f._uU(16,"Shipping Address1"),f.qZA(),f._UZ(17,"input",49),f.qZA(),f.qZA(),f.TgZ(18,"div",46),f.TgZ(19,"div",8),f.TgZ(20,"label",48),f._uU(21,"Shipping Address2"),f.qZA(),f._UZ(22,"input",50),f.qZA(),f.qZA(),f.TgZ(23,"div",46),f.TgZ(24,"div",8),f.TgZ(25,"label",48),f._uU(26,"Pin Code"),f.qZA(),f._UZ(27,"input",51),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(28,"div",52),f.TgZ(29,"button",53),f.NdJ("click",function(){return f.CHM(r),f.oxw().onAddParty()}),f._uU(30,"OK"),f.qZA(),f.TgZ(31,"button",54),f.NdJ("click",function(){f.CHM(r);var t=f.oxw(),e=f.MAs(125);return t.onCloseAddParty(e)}),f._uU(32,"cancel"),f.qZA(),f.qZA(),f.qZA()}if(2&t){var o=f.oxw();f.xp6(5),f.Q6J("formGroup",o.formParty)}}var lt=function(){return[10,20,50,100,500]},st=function(){var r=function(){function r(t,o,i,a,n){var l=this;e(this,r),this.api=t,this.fb=o,this.fbParty=i,this.dialogs=a,this.modalService=n,this.outID=0,this.DOID=0,this.DisptID=0,this.tab=0,this.DID=0,this.Out_Count=0,this.OutwardDetailsData={},this.ChargesListData=[],this.OutwardDetailList=[],this.config={backdrop:!1,ignoreBackdropClick:!0},this.SaveCustomerParty={},this.GetPendingDO={},this.newArr=[],this.Saveclick=!1,this.PendingDOListColum=[{header:"DispatchID",field:"DispatchID",hide:!0},{header:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{header:"DeliveryOrderNo",field:"DeliveryOrderNo"},{header:"DispatchNo",field:"DispatchNo"},{header:"CreatedDate",field:"CreatedDate",hide:!0},{header:"OrderGivenBy",field:"OrderGivenBy"},{header:"DeliverTo",field:"DeliverTo"},{header:"ShippingAddress",field:"ShippingAddress"},{header:"Remarks",field:"Remarks",hide:!1},{header:"TruckNo",field:"TruckNo",hide:!1},{header:"ContainerNo",field:"ContainerNo"}],this.DeliveryOrderDetailColumns=[{field:"Outward",hide:!1,cellRenderer:function(t){return l.DeliveryOrderDetailCellRenderer(t)},width:10},{field:"ProductName",hide:!1},{field:"LotNo",hide:!1,resizable:!0},{field:"BrandName"},{field:"CountInPacket",hide:!0},{field:"StorageArea",hide:!0},{field:"DispatchQuantity"},{field:"FirstLotNo",hide:!1},{field:"DeliveryOrderDID",hide:!1},{field:"DispatchDID"},{field:"ProductID",hide:!1}],this.DeliveryOrderDetailChargeColumns=[{field:"Add",width:10,hide:!1,cellRenderer:function(t){return l.DeliveryOrderChargeCellEditRenderer(t)}},{field:"ServiceID",hide:!0},{field:"ServiceName",hide:!1,resizable:!0},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.Columnsdata=[{headerName:"Action",width:200,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnActionOutward.bind(this),label:"Click 1"}},{headerName:"OutWardID",field:"OutWardID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OutWardNo",field:"OutWardNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WarehouseID",field:"WarehouseID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseName",field:"WareHouseName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OutWardDate",field:"OutWardDate",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchNo",field:"DispatchNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransporterName",field:"TransporterName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"IsCancelled",field:"IsCancelled",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DriverName",field:"DriverName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DocID",field:"DocID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LoadingBy",field:"LoadingBy",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser();var s=new c.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=s,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:X},this.form=this.fb.group({customer_id:[null,u.kI.required],Outward_Date:[null,u.kI.required],txtTruck_No:[null,u.kI.required],txtContainer_No:[null,u.kI.required],cbCustomer_Party:[null,u.kI.required],cbRemarks:["",u.kI.required],txtDriver_Name:[null,u.kI.required],txtDriver_MobileNo:[null,u.kI.required],cbDock_Name:[null,u.kI.required],cbLodingBy_Name:[null,u.kI.required],cbLabourContractor:[null,u.kI.required]}),this.formParty=this.fbParty.group({txtPartyName:["",u.kI.required],txtShippingAddress1:["",u.kI.required],txtShippingAddress2:["",u.kI.required],txtPinCode:["",u.kI.required]})}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdown(),this.BindCustomerParty(),this.BindOutwardList(),this.DeliveryOrderDetailList=[],this.DeliveryOrderDetailChargeList=[]}},{key:"BindDropdown",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.get("/Customer").subscribe(function(t){r.customerList=t},function(t){console.error(t)}),this.api.get("/Remarks").subscribe(function(t){r.remarkList=t.filter(function(t){return 3==t.ProcessID})},function(t){console.error(t)}),this.api.get("/dock").subscribe(function(t){r.dockList=t},function(t){console.error(t)}),this.api.get("/UnloadingBy").subscribe(function(t){r.unloadingList=t},function(t){console.error(t)}),this.api.get("/LabourContracter").subscribe(function(t){r.labourContractorList=t},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"BindCustomerParty",value:function(){var t=this;this.api.get("/CustomerParty").subscribe(function(e){t.customePartyList=e},function(t){console.error(t)})}},{key:"BindOutwardList",value:function(){var t=this;this.api.post("/Outward/GetOutwardList",{outwardID:0,warehouseID:1,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"",createdBy:0,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:0}).subscribe(function(e){t.OutwardList12=e},function(t){console.error(t)})}},{key:"tabOutward",value:function(t){this.tab=t}},{key:"OnSearchPendingDO",value:function(){var t,e=this;null==this.form.value.customer_id||""==this.form.value.customer_id?(this.dialog.alert("Please .... Select Customer Name"),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus()):(this.GetPendingDO={CustomerID:this.form.value.customer_id,WarehouseId:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId},this.api.post("/Outward/GetDeliveryOrderByID",this.GetPendingDO).subscribe(function(t){t.length>0?e.PendingDOList=t:this.dialog.alert("No Pending DO .....")},function(t){console.error(t)}))}},{key:"openPartyWindow",value:function(t){var e;null==this.form.value.customer_id||""==this.form.value.customer_id?(this.dialog.alert("Please .... Select Customer Name"),null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus()):this.modalService.open(t)}},{key:"onCloseAddParty",value:function(t){this.modalService.dismissAll(t)}},{key:"onAddParty",value:function(){var t,e=this;null==this.formParty.value.txtPartyName||""==this.formParty.value.txtPartyName?(this.dialog.alert("Please .... Enter Party Name"),null===(t=null==document?void 0:document.getElementById("txtPartyName"))||void 0===t||t.focus()):(this.SaveCustomerParty={CustomerPartyID:0,CustomerID:this.form.value.customer_id,PartyName:this.formParty.value.txtPartyName,ShippingAddress:this.formParty.value.txtShippingAddress1,ShippingAddress1:this.formParty.value.txtShippingAddress2,PinCode:this.formParty.value.txtPinCode,CreatedBy:this.currentUser.userId},this.api.post("/CustomerParty/CustomerPartysave",this.SaveCustomerParty).subscribe(function(t){this.dialog.alert(t),e.formParty.reset(),e.BindCustomerParty()},function(t){console.error(t)}))}},{key:"onRowDblclicked",value:function(t,e){var r,o=this;if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)this.dialog.alert("Please .... Select Labour Contractor"),null===(r=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===r||r.focus();else{this.DOID=Number(t.cellSelection[0].rowData.DeliveryOrderID),this.DisptID=Number(t.cellSelection[0].rowData.DispatchID);var i=this.customePartyList.filter(function(e){return e.PartyName==t.cellSelection[0].rowData.DeliverTo});this.form.patchValue({txtTruck_No:t.cellSelection[0].rowData.TruckNo,txtContainer_No:t.cellSelection[0].rowData.ContainerNo,cbCustomer_Party:i[0].CustomerPartyID}),this.api.post("/Outward/GetDeliveryOrderDetail",{outwardID:0,warehouseID:0,outWardDate:0,billStartDate:0,deliveryOrderID:0,customerPartyID:0,truckNo:0,containerNo:0,transporterName:0,remarks:0,createdBy:0,customerID:0,driverName:0,driverNo:0,docID:0,loadingBy:0,transferID:0,dispatchID:t.cellSelection[0].rowData.DispatchID,StatusID:0}).subscribe(function(t){o.DeliveryOrderDetailList=t},function(t){console.error(t)})}}},{key:"DeliveryOrderDetailCellRenderer",value:function(t){var e=this,r=document.createElement("input");r.type="checkbox",r.value="true",r.checked=t.value;var o={CustomerID:this.form.value.customer_id,WarehouseId:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId,ProductID:t.data.ProductID};if(r.addEventListener("click",function(e){t.setValue(1!=t.value)}),"true"==t.value.toString())this.api.post("/Outward/GetOutwardServices",o).subscribe(function(r){if(e.DeliveryOrderDetailChargeList=[],e.DeliveryOrderDetailChargeList=r,e.DID=e.DID+1,e.OutwardDetailsData={OutwardDID:e.DID,DeliveryOrderDID:t.data.DeliveryOrderDID,DispatchDID:t.data.DispatchDID,OutQuantity:t.data.DispatchQuantity,LabourContractorID:e.form.value.cbLabourContractor},e.OutwardDetailList.length>0){var o=e.OutwardDetailList.filter(function(e){return e.DeliveryOrderDID!=t.data.DeliveryOrderDID});e.OutwardDetailList=o}e.OutwardDetailList.push(e.OutwardDetailsData),e.DeliveryOrderDetailChargeList.forEach(function(t){1==t.Add&&e.ChargesListData.push({OutwardDID:e.DID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,Rate:t.C_Rate,L_Rate:t.L_Rate})}),e.ChargesListData.slice()},function(t){console.error(t)});else if(this.DeliveryOrderDetailChargeList=[],this.OutwardDetailList.length>0){var i=this.OutwardDetailList.filter(function(e){return e.DeliveryOrderDID==t.data.DeliveryOrderDID}),a=this.ChargesListData.filter(function(t){return t.OutwardDID!=i[0].OutwardDID});this.ChargesListData=a}return r}},{key:"DeliveryOrderChargeCellEditRenderer",value:function(t){var e=this,r=document.createElement("input");return r.type="checkbox",r.value="true",r.checked=t.value,r.addEventListener("click",function(r){t.setValue(1!=t.value);var o=e.ChargesListData.filter(function(t){return t.OutwardDID!=e.DID});e.ChargesListData=o,e.DeliveryOrderDetailChargeList.forEach(function(t){1==t.Add&&e.ChargesListData.push({OutwardDID:e.DID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,Rate:t.C_Rate,L_Rate:t.L_Rate})}),e.ChargesListData.slice()}),r}},{key:"OnSaveOutward",value:function(){var t,e,r,o,i,a,n=this;if(this.DeliveryOrderDetailList.length>0){var l=this.DeliveryOrderDetailList.filter(function(t){return 0==t.Outward});this.Out_Count=l.length}if(console.log("Save"),null==this.form.value.customer_id||""==this.form.value.customer_id)return this.dialog.alert("Please .... Select Customer Name"),void(null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus());if(null==this.form.value.Outward_Date)return this.dialog.alert("Please... Select Outward Date ..!!!"),void(null===(e=null==document?void 0:document.getElementById("Outward_Date"))||void 0===e||e.focus());if(null==this.form.value.txtTruck_No||""==this.form.value.txtTruck_No)return this.dialog.alert("Please .... Enter Truck No ...."),void(null===(r=null==document?void 0:document.getElementById("txtTruck_No"))||void 0===r||r.focus());if(null==this.form.value.cbDock_Name||""==this.form.value.cbDock_Name)return this.dialog.alert("Please .... select Dock name ...."),void(null===(o=null==document?void 0:document.getElementById("cbDock_Name"))||void 0===o||o.focus());if(null==this.form.value.cbLodingBy_Name)return this.dialog.alert("Please... Select unloading by ..!!!"),void(null===(i=null==document?void 0:document.getElementById("cbLodingBy_Name"))||void 0===i||i.focus());if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)return this.dialog.alert("Please .... select Labour Contractor ...."),void(null===(a=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===a||a.focus());if(0!=this.DeliveryOrderDetailList.length)if(this.Out_Count>0)this.dialog.alert("Please... Select Outward Product ..!!!");else{this.Saveclick=!0,this.newArr=[],this.OutwardDetailList.forEach(function(t){n.ChargesListData.forEach(function(e){t.OutwardDID==e.OutwardDID&&n.newArr.push({OutwardDID:t.DeliveryOrderDID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,Rate:e.Rate,L_Rate:e.L_Rate})})}),this.ChargesListData=this.newArr;var s={OutwardID:this.outID,WarehouseID:this.currentUser.warehouseId,OutWardDate:this.form.value.Outward_Date,BillStartDate:this.form.value.Outward_Date,DeliveryOrderID:this.DOID,CustomerPartyID:this.form.value.cbCustomer_Party,TruckNo:this.form.value.txtTruck_No,ContainerNo:this.form.value.txtContainer_No,TransporterName:"",Remarks:this.form.value.cbRemarks,CreatedBy:this.currentUser.userId,CustomerID:Number(this.form.value.customer_id),OutwardDetailModel:this.OutwardDetailList,OutwardChargeModel:this.ChargesListData,DriverName:this.form.value.txtDriver_Name,DriverNo:this.form.value.txtDriver_MobileNo,DocID:Number(this.form.value.cbDock_Name),LoadingBy:Number(this.form.value.cbLodingBy_Name),TransferID:0,DispatchID:this.DisptID};this.api.post("/Outward/Outward_Insert",s).subscribe(function(t){n.BindOutwardList()},function(t){console.error(t)})}else this.dialog.alert("Please... Add Outward Details ..!!!")}},{key:"OnResetOuward",value:function(){this.form.reset(),this.Saveclick=!1,this.BindOutwardList();var t=new c.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=t,this.outID=0,this.DOID=0,this.DisptID=0,this.BindCustomerParty(),this.DeliveryOrderDetailList=[],this.DeliveryOrderDetailChargeList=[],this.PendingDOList=[],this.SaveCustomerParty=[],this.DeliveryOrderDetailList=[],this.OutwardDetailList=[],this.ChargesListData=[],this.Out_Count=0,this.newArr=[]}},{key:"onDeleteOutward",value:function(t){var e=this;if(console.log("0",t),window.confirm("Are sure you want to delete this item ?")){var r={outwardID:t.OutWardID,warehouseID:t.WarehouseID,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"BY test",createdBy:this.currentUser.userId,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:t.StatusID};console.log("Delete ",r),this.api.post("/Outward/OutwardStatus_validation",r).subscribe(function(o){console.log("process ",o[0].Count),0==o[0].Count?(this.dialog.alert("Some data is updated. So Please, reperform your cancelled operation"),e.BindOutwardList()):(t.StatusID=82)?this.dialog.alert("Sorry,Outward already deactivated or deleted ....!!!"):e.api.post("/Outward/OutWard_Cancelled",r).subscribe(function(t){this.dialog.alert(t),e.BindOutwardList()},function(t){console.error(t)})},function(t){console.error(t)})}}},{key:"OnActionOutward",value:function(t){var e=this;if("Delete"==String(t.actions))if(window.confirm("Do you want to cancel your Outward...!!!")){var r={outwardID:t.rowData.OutWardID,warehouseID:t.rowData.WarehouseID,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"BY test",createdBy:this.currentUser.userId,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:t.rowData.StatusID};this.api.post("/Outward/OutwardStatus_validation",r).subscribe(function(o){0==o[0].Count?(this.dialog.alert("Some data is updated. So Please, reperform your cancelled operation"),e.BindOutwardList()):(t.rowData.StatusID=82)?this.dialog.alert("Sorry,Outward already deactivated or deleted ....!!!"):e.api.post("/Outward/OutWard_Cancelled",r).subscribe(function(t){this.dialog.alert(t),e.BindOutwardList()},function(t){console.error(t)})},function(t){console.error(t)})}else console.log("Cancel");else"Print"==String(t.actions)&&this.api.get("/Outward/OutwardReceipt?OutwardID="+t.rowData.OutWardID+"&WarehouseID="+this.currentUser.warehouseId).subscribe(function(t){console.log("OutActionata=>",t);var e=t[0].Base64Str,r=window.open("");null==r||r.document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e)+"'></iframe>")},function(t){console.error(t)})}}]),r}();return r.\u0275fac=function(t){return new(t||r)(f.Y36(d.sM),f.Y36(u.qu),f.Y36(u.qu),f.Y36(h.cP),f.Y36(g.FF))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-outward"]],decls:126,vars:39,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Outward"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-5","col-md-5"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-3","col-md-3"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],[1,"col-sm-4","col-md-4"],["type","datetime-local","formControlName","Outward_Date","id","Outward_Date","placeholder","","name","deliveryorder_date",1,"form-control","form-control-rounded",3,"ngModel"],[1,"col-sm-6","col-md-6"],["type","text","formControlName","txtTruck_No","id","txtTruck_No","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainer_No","id","txtContainer_No","placeholder","",1,"form-control","form-control-sm"],["formControlName","cbCustomer_Party","id","cbCustomer_Party",1,"form-control","form-control-sm"],["formControlName","cbRemarks","id","cbRemarks",1,"form-control","form-control-sm"],["type","text","formControlName","txtDriver_Name","id","txtDriver_Name","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtDriver_MobileNo","id","txtDriver_MobileNo","placeholder","",1,"form-control","form-control-sm"],["formControlName","cbDock_Name","id","cbDock_Name",1,"form-control","form-control-sm"],["formControlName","cbLodingBy_Name","id","cbLodingBy_Name",1,"form-control","form-control-sm"],["formControlName","cbLabourContractor","id","cbLabourContractor",1,"form-control","form-control-sm"],[1,"row"],[1,"col-12"],[1,"font-weight-bold"],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridPendingDOdList",""],[1,"col-8"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],[1,"col-4"],[1,"col-sm-4"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"click"],["label","Outward List"],[1,"ag-theme-alpine",2,"height","400px",3,"rowData","columnDefs","frameworkComponents"],["AddPartyContent",""],[3,"value"],[1,"modal-header"],["id","modal-basic-title"],[1,"col-sm-6"],["type","text","formControlName","txtPartyName","id","txtPartyName","autocomplete","off",1,"form-control","form-control-sm"],["for","company"],["type","text","formControlName","txtShippingAddress1","id","txtShippingAddress1",1,"form-control","form-control-sm"],["type","text","formControlName","txtShippingAddress2","id","txtShippingAddress2",1,"form-control","form-control-sm"],["type","text","formControlName","txtPinCode","id","txtPinCode",1,"form-control","form-control-sm"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-info",3,"click"]],template:function(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(t){return e.tabOutward(t)})("selectedIndexChange",function(t){return e.tab=t}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.TgZ(13,"option",10),f._uU(14,"Select"),f.qZA(),f.YNc(15,tt,2,2,"option",11),f.qZA(),f._UZ(16,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",14),f.TgZ(19,"button",15),f.NdJ("click",function(){return e.OnSearchPendingDO()}),f._uU(20,"Pending DO"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(21,"div",16),f.TgZ(22,"div",8),f.TgZ(23,"label"),f._uU(24,"Outward Date"),f.qZA(),f._UZ(25,"input",17),f.ALo(26,"date"),f.qZA(),f.qZA(),f.TgZ(27,"div",18),f.TgZ(28,"div",8),f.TgZ(29,"label"),f._uU(30,"Truck No"),f.qZA(),f._UZ(31,"input",19),f.qZA(),f.qZA(),f.TgZ(32,"div",18),f.TgZ(33,"div",8),f.TgZ(34,"label"),f._uU(35,"Container No"),f.qZA(),f._UZ(36,"input",20),f.qZA(),f.qZA(),f.TgZ(37,"div",16),f.TgZ(38,"div",8),f.TgZ(39,"label"),f._uU(40,"Customer Party"),f.qZA(),f.TgZ(41,"select",21),f.TgZ(42,"option",10),f._uU(43,"Select"),f.qZA(),f.YNc(44,et,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(45,"div",13),f.TgZ(46,"div",14),f.TgZ(47,"button",15),f.NdJ("click",function(){f.CHM(r);var t=f.MAs(125);return e.openPartyWindow(t)}),f._uU(48,"ADD Party"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(49,"div",7),f.TgZ(50,"div",8),f.TgZ(51,"label"),f._uU(52,"Remarks"),f.qZA(),f.TgZ(53,"select",22),f.TgZ(54,"option",10),f._uU(55,"Select"),f.qZA(),f.YNc(56,rt,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(57,"div",18),f.TgZ(58,"div",8),f.TgZ(59,"label"),f._uU(60,"Driver Name"),f.qZA(),f._UZ(61,"input",23),f.qZA(),f.qZA(),f.TgZ(62,"div",18),f.TgZ(63,"div",8),f.TgZ(64,"label"),f._uU(65,"Driver Mobile No"),f.qZA(),f._UZ(66,"input",24),f.qZA(),f.qZA(),f.TgZ(67,"div",16),f.TgZ(68,"div",8),f.TgZ(69,"label"),f._uU(70,"Dock Name"),f.qZA(),f.TgZ(71,"select",25),f.TgZ(72,"option",10),f._uU(73,"Select"),f.qZA(),f.YNc(74,ot,2,2,"option",11),f.qZA(),f._UZ(75,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(76,"div",16),f.TgZ(77,"div",8),f.TgZ(78,"label"),f._uU(79,"LodingBy Name"),f.qZA(),f.TgZ(80,"select",26),f.TgZ(81,"option",10),f._uU(82,"Select"),f.qZA(),f.YNc(83,it,2,2,"option",11),f.qZA(),f._UZ(84,"mat-error",12),f.qZA(),f.qZA(),f.TgZ(85,"div",16),f.TgZ(86,"div",8),f.TgZ(87,"label"),f._uU(88,"Labour Contractor"),f.qZA(),f.TgZ(89,"select",27),f.TgZ(90,"option",10),f._uU(91,"Select"),f.qZA(),f.YNc(92,at,2,2,"option",11),f.qZA(),f._UZ(93,"mat-error",12),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(94,"hr"),f.TgZ(95,"div",28),f.TgZ(96,"div",29),f.TgZ(97,"p",30),f._uU(98,"Pending DO"),f.qZA(),f.TgZ(99,"mtx-grid",31,32),f.NdJ("dblclick",function(t){f.CHM(r);var o=f.MAs(100);return e.onRowDblclicked(o,t)}),f.qZA(),f.qZA(),f.qZA(),f._UZ(101,"hr"),f.TgZ(102,"div",28),f.TgZ(103,"div",33),f.TgZ(104,"p",30),f._uU(105,"Product List"),f.qZA(),f.TgZ(106,"div",34),f._UZ(107,"ag-grid-angular",35),f.qZA(),f.qZA(),f.TgZ(108,"div",36),f.TgZ(109,"p",30),f._uU(110,"Product Charges"),f.qZA(),f.TgZ(111,"div",34),f._UZ(112,"ag-grid-angular",35),f.qZA(),f.qZA(),f.qZA(),f._UZ(113,"hr"),f.TgZ(114,"div",28),f.TgZ(115,"div",37),f.TgZ(116,"button",38),f.NdJ("click",function(){return e.OnSaveOutward()}),f._uU(117,"Save"),f.qZA(),f.qZA(),f.TgZ(118,"div",37),f.TgZ(119,"button",39),f.NdJ("click",function(){return e.OnResetOuward()}),f._uU(120,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(121,"mat-tab",40),f.TgZ(122,"div",29),f._UZ(123,"ag-grid-angular",41),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(124,nt,33,1,"ng-template",null,42,f.W1O)}2&t&&(f.xp6(3),f.Q6J("selectedIndex",e.tab),f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(10),f.Q6J("ngForOf",e.customerList),f.xp6(10),f.Q6J("ngModel",f.xi3(26,35,e.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(19),f.Q6J("ngForOf",e.customePartyList),f.xp6(12),f.Q6J("ngForOf",e.remarkList),f.xp6(18),f.Q6J("ngForOf",e.dockList),f.xp6(9),f.Q6J("ngForOf",e.unloadingList),f.xp6(9),f.Q6J("ngForOf",e.labourContractorList),f.xp6(7),f.Q6J("data",e.PendingDOList)("columns",e.PendingDOListColum)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!0)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(38,lt))("pageIndex",0),f.xp6(8),f.Q6J("rowData",e.DeliveryOrderDetailList)("columnDefs",e.DeliveryOrderDetailColumns),f.xp6(5),f.Q6J("rowData",e.DeliveryOrderDetailChargeList)("columnDefs",e.DeliveryOrderDetailChargeColumns),f.xp6(4),f.Q6J("disabled",e.Saveclick),f.xp6(7),f.Q6J("rowData",e.OutwardList12)("columnDefs",e.Columnsdata)("frameworkComponents",e.frameworkComponents))},directives:[D.xw,D.yH,p.a8,v.SP,v.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,c.sg,Z.TO,u.Fj,T.CM,y.N8],pipes:[c.uU],styles:[""]}),r}(),ut=function(){var t=function(){function t(){e(this,t),this.label=""}return o(t,[{key:"agInit",value:function(t){this.params=t,this.label=this.params.label||null}},{key:"refresh",value:function(t){return!0}},{key:"onClick",value:function(t,e){this.params.onClick instanceof Function&&this.params.onClick({event:t,rowData:this.params.node.data,actions:e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-shiftingedit-button"]],decls:5,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"button",1),f.NdJ("click",function(t){return e.onClick(t,"Delete")}),f._uU(2,"Delete"),f.qZA(),f.TgZ(3,"button",2),f.NdJ("click",function(t){return e.onClick(t,"Print")}),f._uU(4,"Print"),f.qZA(),f.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),t}(),dt=a(22238);function ct(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function mt(t,e){1&t&&(f.TgZ(0,"span"),f._uU(1,"Customer Name"),f.qZA())}function ft(t,e){if(1&t&&(f.TgZ(0,"div",47),f.YNc(1,mt,2,0,"span",48),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.cbCustomerID||null==r.f.cbCustomerID.errors?null:r.f.cbCustomerID.errors.required)}}function ht(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Enter Lot No"),f.qZA())}function gt(t,e){if(1&t&&(f.TgZ(0,"div",47),f.YNc(1,ht,2,0,"div",48),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtLotNo||null==r.f.txtLotNo.errors?null:r.f.txtLotNo.errors.required)}}function Dt(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Enter inward date"),f.qZA())}function pt(t,e){if(1&t&&(f.TgZ(0,"div",47),f.YNc(1,Dt,2,0,"div",48),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.shift_date||null==r.f.shift_date.errors?null:r.f.shift_date.errors.required)}}function vt(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.UserID),f.xp6(1),f.Oqu(r.UserName)}}function Zt(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Select Item Type"),f.qZA())}function It(t,e){if(1&t&&(f.TgZ(0,"div",47),f.YNc(1,Zt,2,0,"div",48),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.cbloadingByID.errors?null:r.f.cbloadingByID.errors.required)}}function yt(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.StorageAreaID),f.xp6(1),f.hij("",r.Storage_Area_Name," ")}}function Tt(t,e){if(1&t&&(f.TgZ(0,"option",46),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.hij(" ",r.ContractorName,"")}}var bt=function(t){return{"is-invalid":t}},Ct=function(){return[10,20,50,100,500]},Nt=function(){var r=function(){function r(t,o,i,a,n){e(this,r),this.fb=t,this.fbAdd=o,this.api=i,this.dialog=a,this.dialogBox=n,this.submitted=!1,this.HideSaveButton=!0,this.tab=0,this.UserID=0,this.ServiceList=[],this.ShiftingDetailList=[],this.SDetailSaveList=[],this.SChargeSaveList=[],this.DetailList=[],this.ShiftDetail={},this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.shiftingsDID=0,this.Flag=!1,this.ShiftingID=0,this.BalanceStockColumn=[{header:"InwardDID",field:"InwardDID",hide:!1},{header:"WareHouseID",field:"WareHouseID",hide:!1},{header:"InwardLocationID",field:"InwardLocationID"},{header:"StorageAreaID",field:"StorageAreaID"},{header:"Location",field:"Location",hide:!1},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo"},{header:"BrandName",field:"BrandName"},{header:"ItemsInPacket",field:"ItemsInPacket",hide:!1},{header:"InQuantity",field:"InQuantity",hide:!1},{header:"OutQuantity",field:"OutQuantity"},{header:"InprocessQuantity",field:"InprocessQuantity"},{header:"BalanceQuantity",field:"BalanceQuantity"}],this.serviceColumns=[{field:"ShiftingID",hide:!0},{field:"ServiceID",hide:!0},{field:"ServiceName",hide:!1,resizable:!0,width:120},{field:"Rate",hide:!1,width:70,cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",cellStyle:function(t){return t.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}},{field:"Rate_L",hide:!1,width:80,cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",cellStyle:function(t){return t.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}}],this.ShiftingDetailColumns=[{header:"ShiftingDID",field:"ShiftingDID",hide:!1},{header:"InwardLocationID",field:"InwardLocationID",hide:!1},{header:"InwardDID",field:"InwardDID"},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo",hide:!1},{header:"BrandName",field:"BrandName"},{header:"ItemInPackets",field:"ItemInPackets"},{header:"BalanceQuantity",field:"BalanceQuantity"},{header:"ShiftingQuantity",field:"ShiftingQuantity",hide:!1},{header:"FromLocation",field:"FromLocation",hide:!1},{header:"ToLocation",field:"ToLocation"},{header:"LabourContractor",field:"LabourContractor",hide:!1},{header:"FromLocationID",field:"FromLocationID"},{header:"ToLocationID",field:"ToLocationID",hide:!1},{header:"LabourContractorID",field:"LabourContractorID"}],this.ShiftingListColumnDefs=[{headerName:"Action",width:150,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnActionShifting.bind(this),label:"Click 1"}},{headerName:"ShiftingDID",field:"ShiftingDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShiftingID",field:"ShiftingID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromLocation",field:"FromLocation",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToLocation",field:"ToLocation",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Quantity",field:"Quantity",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LabourContractorName",field:"LabourContractorName",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LoadingBy",field:"LoadingBy",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedBy",field:"CreatedBy",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedDate",field:"CreatedDate",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WarehouseID",field:"WarehouseID",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0}];var l=new c.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=l,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:ut}}return o(r,[{key:"ngOnInit",value:function(){this.form=this.fb.group({cbCustomerID:["",u.kI.required],txtLotNo:[""],shift_date:["",u.kI.required],cbloadingByID:[null,u.kI.required],txtProductName:[""],txtShiftDetailLotNo:[""],txtBrandName:[""],txtpacketcount:[""],txtBalquantity:[""],txtShiftingQty:[""],txtLocation:[""],cbToLocation:[""],cblabourcontractor_id:[""]}),this.ShiftingServiceList=[],this.BindDropdown(),this.BindShiftingList()}},{key:"BindDropdown",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r,o=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={warehouseID:this.currentUser.warehouseId,StorageAreaID:0,LTD_StorageAreaS:null,createdBy:0,BlockID:0},this.api.get("/Customer").subscribe(function(t){o.customerList=t},function(t){console.error(t)}),this.api.get("/UnloadingBy").subscribe(function(t){o.loadingByList=t},function(t){console.error(t)}),this.api.get("/LabourContracter").subscribe(function(t){o.labourContractorList=t},function(t){console.error(t)}),this.api.post("/Storage/StorageArea_Select",r).subscribe(function(t){o.StorageAreas=t},function(t){console.error(t)});case 2:case"end":return t.stop()}},e,this)}))}},{key:"BindShiftingList",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.post("/Shifting/Shifting_List",{warehouseID:this.currentUser.warehouseId,StorageAreaID:0,LTD_StorageAreaS:null,createdBy:0,BlockID:0}).subscribe(function(t){r.ShiftingList=t},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"f",get:function(){return this.form.controls}},{key:"OnSearchClick",value:function(){var t,e,r=this;return null==this.form.value.cbCustomerID||""==this.form.value.cbCustomerID?(this.dialog.alert("Please .... Select Customer Name"),void(null===(t=null==document?void 0:document.getElementById("cbCustomerID"))||void 0===t||t.focus())):null==this.form.value.txtLotNo||""==this.form.value.txtLotNo?(this.dialog.alert("Please .... Enter Lot No "),void(null===(e=null==document?void 0:document.getElementById("txtLotNo"))||void 0===e||e.focus())):void this.api.post("/Shifting/GetInwardDetails",{remarks:"",shiftingDID:0,shiftingID:0,warehouseID:0,customerID:this.form.value.cbCustomerID,createdBy:0,shiftingDate:0,loadingBy:0,LotNo:this.form.value.txtLotNo}).subscribe(function(t){r.BalanceStockList=t},function(t){console.error(t)})}},{key:"onRowDblclicked",value:function(t,e){var r=this;this.api.get("/Shifting/Shifting_services").subscribe(function(e){var o;r.ShiftingServiceList=e,r.InwardDID=0,r.InwardLocationID=0,r.WareHousesID=0,r.FromLocationID=0,r.form.controls.txtProductName.reset(),r.form.controls.txtShiftDetailLotNo.reset(),r.form.controls.txtBrandName.reset(),r.form.controls.txtpacketcount.reset(),r.form.controls.txtBalquantity.reset(),r.form.controls.txtShiftingQty.reset(),r.form.controls.txtLocation.reset(),r.form.controls.cbToLocation.reset(),r.InwardDID=t.cellSelection[0].rowData.InwardDID,r.InwardLocationID=t.cellSelection[0].rowData.InwardLocationID,r.WareHousesID=t.cellSelection[0].rowData.WareHouseID,r.FromLocationID=t.cellSelection[0].rowData.StorageAreaID,r.form.patchValue({txtProductName:t.cellSelection[0].rowData.ProductName,txtShiftDetailLotNo:t.cellSelection[0].rowData.LotNo,txtBrandName:t.cellSelection[0].rowData.BrandName,txtpacketcount:t.cellSelection[0].rowData.ItemsInPacket,txtBalquantity:t.cellSelection[0].rowData.BalanceQuantity,txtShiftingQty:"",txtLocation:t.cellSelection[0].rowData.Location}),null===(o=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===o||o.focus()},function(t){console.error(t)})}},{key:"onKeyfilter",value:function(t){Number(this.form.value.txtBalquantity)>0&&Number(this.form.value.txtBalquantity)<Number(t)&&(this.dialog.alert("Shifting Quantity greater than the Balance Quantity ....!!!"),this.form.controls.txtShiftingQty.setValue(""))}},{key:"OnToLocationSelect",value:function(t){var e=this,r=this.StorageAreas.filter(function(t){return t.StorageAreaID==e.form.value.cbToLocation});(""!=this.form.value.txtLocation||null!=this.form.value.txtLocation)&&this.form.value.txtLocation==r[0].Storage_Area_Name&&(this.dialog.alert("Please Select other location"),this.form.controls.cbToLocation.reset())}},{key:"OnAddClick",value:function(){var t,e,r,o,i=this;if(null==this.form.value.txtShiftingQty||""==this.form.value.txtShiftingQty)return this.dialog.alert("Please .... Enter Shifting Quantity...!!"),void(null===(t=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===t||t.focus());if(Number(this.form.value.txtBalquantity)<Number(this.form.value.txtShiftingQty))return this.dialog.alert("Shifting Quantity greater than the Balance Quantity ....!!!"),void(null===(e=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===e||e.focus());if(null==this.form.value.cbToLocation||0==this.form.value.cbToLocation)return this.dialog.alert("Please .... Select To Location...!!"),void(null===(r=null==document?void 0:document.getElementById("cbToLocation"))||void 0===r||r.focus());if(null==this.form.value.cblabourcontractor_id||0==this.form.value.cblabourcontractor_id)return this.dialog.alert("Please .... Select Labour Contractor...!!"),void(null===(o=null==document?void 0:document.getElementById("cblabourcontractor_id"))||void 0===o||o.focus());var a=this.StorageAreas.filter(function(t){return t.StorageAreaID==i.form.value.cbToLocation}),n=this.StorageAreas.filter(function(t){return t.StorageAreaID==i.FromLocationID}),l=this.labourContractorList.filter(function(t){return t.LabourContractorID==i.form.value.cblabourcontractor_id});0==this.Flag&&(this.shiftingsDID=this.shiftingsDID+1);var s=this.ShiftingDetailList.filter(function(t){return t.ShiftingDID!=i.shiftingsDID});this.ShiftingDetailList=s;var u=this.ServiceList.filter(function(t){return t.ShiftingDID!=i.shiftingsDID});this.ServiceList=u,this.ShiftDetail=[],this.ShiftDetail={ShiftingDID:this.shiftingsDID,InwardLocationID:this.InwardLocationID,InwardDID:this.InwardDID,ProductName:this.form.value.txtProductName,LotNo:this.form.value.txtShiftDetailLotNo,BrandName:this.form.value.txtBrandName,ItemInPacket:this.form.value.txtpacketcount,BalanceQuantity:this.form.value.txtBalquantity,ShiftingQuantity:Number(this.form.value.txtShiftingQty),FromLocation:n[0].Storage_Area_Name,ToLocation:a[0].Storage_Area_Name,LabourContractor:l[0].ContractorName,FromLocationID:this.FromLocationID,ToLocationID:Number(this.form.value.cbToLocation),LabourContractorID:Number(this.form.value.cblabourcontractor_id)},this.DetailList=this.ShiftingDetailList,this.DetailList.push(this.ShiftDetail),this.ShiftingDetailList=this.DetailList.slice(),this.ShiftingServiceList.forEach(function(t){t.Rate>=0&&i.ServiceList.push({ShiftingDID:i.shiftingsDID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,Rate:t.Rate,Rate_L:t.Rate_L})}),this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.form.controls.txtProductName.reset(),this.form.controls.txtShiftDetailLotNo.reset(),this.form.controls.txtBrandName.reset(),this.form.controls.txtpacketcount.reset(),this.form.controls.txtBalquantity.reset(),this.form.controls.txtShiftingQty.reset(),this.form.controls.txtLocation.reset(),this.form.controls.cbToLocation.reset(),this.form.controls.txtLotNo.reset(),this.BalanceStockList=[],this.ShiftingServiceList=[]}},{key:"onSubmit",value:function(t){var e=this;this.submitted=!0,console.log(t),this.form.invalid?this.dialog.alert("invalid"):0==this.ShiftingDetailList.length?this.dialog.alert("Enter Shifting Detail ..."):(this.HideSaveButton=!1,this.dialog.alert("Save"),this.ShiftingDetailList.forEach(function(t){t.ShiftingDID>0&&e.SDetailSaveList.push({ShiftingDID:t.ShiftingDID,InwardLocationID:t.InwardLocationID,LotNo:t.LotNo,InwardDID:t.InwardDID,FromLocationID:t.FromLocationID,ToLocationID:t.ToLocationID,Quantity:t.ShiftingQuantity,LabourContractorID:t.LabourContractorID})}),this.ServiceList.forEach(function(t){(t.Rate>0||t.Rate_L>0)&&e.SChargeSaveList.push({ShiftingDID:t.ShiftingDID,ServiceID:t.ServiceID,Rate:t.Rate,Rate_L:t.Rate_L})}),this.api.post("/Shifting/Shifting_insert",{ShiftingID:this.ShiftingID,WarehouseID:this.currentUser.warehouseId,CustomerID:this.form.value.cbCustomerID,CreatedBy:this.currentUser.userId,TD_ShiftingDetails:this.SDetailSaveList,TD_ShiftingCharges:this.SChargeSaveList,ShiftingDate:this.form.value.shift_date,LoadingBy:this.form.value.cbloadingByID}).subscribe(function(t){e.dialog.this.dialog.alert(t.Table[0].Column1)},function(t){console.error(t)}))}},{key:"tabchange",value:function(t){this.tab=t}},{key:"onReset",value:function(){this.submitted=!1,this.HideSaveButton=!0}},{key:"onShiftDetailRowDblclick",value:function(t,e){var r=this;this.Flag=!0,this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.form.controls.txtProductName.reset(),this.form.controls.txtShiftDetailLotNo.reset(),this.form.controls.txtBrandName.reset(),this.form.controls.txtpacketcount.reset(),this.form.controls.txtBalquantity.reset(),this.form.controls.txtShiftingQty.reset(),this.form.controls.txtLocation.reset(),this.form.controls.cbToLocation.reset(),this.form.controls.cblabourcontractor_id.reset(),this.form.patchValue({txtProductName:t.cellSelection[0].rowData.ProductName,txtShiftDetailLotNo:t.cellSelection[0].rowData.LotNo,txtBrandName:t.cellSelection[0].rowData.BrandName,txtpacketcount:t.cellSelection[0].rowData.ItemsInPacket,txtBalquantity:t.cellSelection[0].rowData.BalanceQuantity,txtShiftingQty:t.cellSelection[0].rowData.ShiftingQuantity,txtLocation:t.cellSelection[0].rowData.FromLocation,cbToLocation:t.cellSelection[0].rowData.ToLocationID,cblabourcontractor_id:t.cellSelection[0].rowData.LabourContractorID}),this.InwardDID=t.cellSelection[0].rowData.InwardDID,this.InwardLocationID=t.cellSelection[0].rowData.InwardLocationID,this.WareHousesID=this.currentUser.warehouseId,this.FromLocationID=t.cellSelection[0].rowData.FromLocationID,this.shiftingsDID=t.cellSelection[0].rowData.ShiftingDID;var o=this.ServiceList.filter(function(t){return t.ShiftingDID==r.shiftingsDID});this.ShiftingServiceList=o}},{key:"OnActionShifting",value:function(t){var e=this;if("Delete"==String(t.actions)){if(window.confirm("Do you want to cancel your Shifting...!!!")){var r={remarks:"",shiftingDID:0,shiftingID:t.rowData.ShiftingID,warehouseID:this.currentUser.warehouseId,customerID:this.form.value.cbCustomerID,createdBy:0,shiftingDate:0,loadingBy:0,LotNo:this.form.value.txtLotNo,StatusID:t.rowData.StatusID};console.log(r),this.api.post("/Shifting/ShiftingStatus_validation",r).subscribe(function(r){console.log(r),Number(r[0])>0?62==Number(t.rowData.StatusID)?e.dialog.this.dialog.alert("Sorry,this transaction has already cancelled ....!!!"):61==Number(t.rowData.StatusID)&&e.api.post("/Shifting/Shifting_Cancelled",{warehouseID:e.currentUser.warehouseId,StorageAreaID:0,shiftingDID:t.rowData.ShiftingDID,shiftingID:t.rowData.ShiftingID,LTD_StorageAreaS:null,BlockID:0,remarks:"text",createdBy:e.currentUser.userId}).subscribe(function(t){e.dialog.this.dialog.alert(t),e.BindShiftingList()},function(t){console.error(t)}):e.dialog.this.dialog.alert("Some data is updated. So Please reperform your delete operation...!!!")},function(t){console.error(t)})}}else"Print"==String(t.actions)&&this.api.get("/Shifting/ShiftingReceipt?ShiftingID="+t.rowData.ShiftingID).subscribe(function(t){console.log("OnActionShifting=>",t);var e=t[0].Base64Str,r=window.open("");null==r||r.document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e)+"'></iframe>")},function(t){console.error(t)})}}]),r}();return r.\u0275fac=function(t){return new(t||r)(f.Y36(u.qu),f.Y36(u.qu),f.Y36(d.sM),f.Y36(h.cP),f.Y36(dt.uw))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-shifting"]],decls:129,vars:67,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Shifting"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-6"],[1,"form-group"],["formControlName","cbCustomerID","id","cbCustomerID",1,"form-control","form-control-sm",3,"ngClass"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-4"],["for","company"],["type","text","formControlName","txtLotNo","id","txtLotNo",1,"form-control","form-control-sm"],[1,"col-sm-2"],[1,"row"],[1,"form-group","pl-2"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],["type","datetime-local","formControlName","shift_date","id","shift_date","placeholder","yyyy-MM-dd","name","shift_date",1,"form-control","form-control-sm",3,"ngModel"],[1,"col-sm-8"],["formControlName","cbloadingByID","id","cbloadingByID",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-sm-12"],[1,"font-weight-bold"],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridPendingDOdList",""],[1,"col-12"],["type","text","formControlName","txtProductName","id","txtProductName","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShiftDetailLotNo","id","txtShiftDetailLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBrandName","id","txtBrandName","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtpacketcount","id","txtpacketcount","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBalquantity","id","txtBalquantity","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShiftingQty","id","txtShiftingQty","autocomplete","off","placeholder","",1,"form-control","form-control-sm",3,"keyup"],["txtShiftingQty",""],["type","text","formControlName","txtLocation","id","txtLocation","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbToLocation","id","cbToLocation",1,"form-control","form-control-sm",3,"change"],["disabled","",3,"ngValue"],["formControlName","cblabourcontractor_id","id","cblabourcontractor_id",1,"form-control","form-control-sm"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["gridShiftDetailList",""],["type","submit",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"hidden","value"],["label","Shifting List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(t){return e.tabchange(t)})("selectedIndexChange",function(t){return e.tab=t}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.NdJ("ngSubmit",function(){return e.onSubmit(e.form)}),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.TgZ(13,"option",10),f._uU(14,"Select "),f.qZA(),f.YNc(15,ct,2,2,"option",11),f.qZA(),f.YNc(16,ft,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",8),f.TgZ(19,"label",14),f._uU(20,"LotNo"),f.qZA(),f._UZ(21,"input",15),f.YNc(22,gt,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(23,"div",16),f.TgZ(24,"div",17),f.TgZ(25,"div",18),f.TgZ(26,"button",19),f.NdJ("click",function(){return e.OnSearchClick()}),f._uU(27,"Apply "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(28,"div",13),f.TgZ(29,"div",8),f.TgZ(30,"label",14),f._uU(31,"Shifting Date"),f.qZA(),f._UZ(32,"input",20),f.ALo(33,"date"),f.YNc(34,pt,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(35,"div",21),f.TgZ(36,"div",8),f.TgZ(37,"label"),f._uU(38,"Loading By"),f.qZA(),f.TgZ(39,"select",22),f.TgZ(40,"option",10),f._uU(41,"Select "),f.qZA(),f.YNc(42,vt,2,2,"option",11),f.qZA(),f.YNc(43,It,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(44,"div",23),f._UZ(45,"hr"),f.TgZ(46,"p",24),f._uU(47,"Pending DO"),f.qZA(),f.TgZ(48,"mtx-grid",25,26),f.NdJ("dblclick",function(t){f.CHM(r);var o=f.MAs(49);return e.onRowDblclicked(o,t)}),f.qZA(),f.qZA(),f.TgZ(50,"div",27),f._UZ(51,"hr"),f.TgZ(52,"p",24),f._uU(53,"Shifting Details"),f.qZA(),f.TgZ(54,"div",17),f.TgZ(55,"div",21),f.TgZ(56,"div",17),f.TgZ(57,"div",7),f.TgZ(58,"div",8),f.TgZ(59,"label"),f._uU(60,"Product Name"),f.qZA(),f._UZ(61,"input",28),f.qZA(),f.qZA(),f.TgZ(62,"div",7),f.TgZ(63,"div",8),f.TgZ(64,"label"),f._uU(65,"Lot No"),f.qZA(),f._UZ(66,"input",29),f.qZA(),f.qZA(),f.TgZ(67,"div",7),f.TgZ(68,"div",8),f.TgZ(69,"label"),f._uU(70,"Brand Name "),f.qZA(),f._UZ(71,"input",30),f.qZA(),f.qZA(),f.TgZ(72,"div",7),f.TgZ(73,"div",8),f.TgZ(74,"label"),f._uU(75,"Count In Packet"),f.qZA(),f._UZ(76,"input",31),f.qZA(),f.qZA(),f.TgZ(77,"div",7),f.TgZ(78,"div",8),f.TgZ(79,"label"),f._uU(80,"Balance Quantity"),f.qZA(),f._UZ(81,"input",32),f.qZA(),f.qZA(),f.TgZ(82,"div",7),f.TgZ(83,"div",8),f.TgZ(84,"label"),f._uU(85,"Shifting Quantity"),f.qZA(),f.TgZ(86,"input",33,34),f.NdJ("keyup",function(){f.CHM(r);var t=f.MAs(87);return e.onKeyfilter(t.value)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(88,"div",7),f.TgZ(89,"div",8),f.TgZ(90,"label"),f._uU(91,"Location"),f.qZA(),f._UZ(92,"input",35),f.qZA(),f.qZA(),f.TgZ(93,"div",7),f.TgZ(94,"div",8),f.TgZ(95,"label"),f._uU(96,"To Location"),f.qZA(),f.TgZ(97,"select",36),f.NdJ("change",function(t){return e.OnToLocationSelect(t)}),f.TgZ(98,"option",37),f._uU(99,"Select "),f.qZA(),f.YNc(100,yt,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(101,"div",7),f.TgZ(102,"div",8),f.TgZ(103,"label"),f._uU(104,"Labour Contracter"),f.qZA(),f.TgZ(105,"select",38),f.TgZ(106,"option",37),f._uU(107,"Select "),f.qZA(),f.YNc(108,Tt,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(109,"div",7),f.TgZ(110,"div",8),f.TgZ(111,"button",19),f.NdJ("click",function(){return e.OnAddClick()}),f._uU(112," Add "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(113,"div",13),f.TgZ(114,"div",39),f._UZ(115,"ag-grid-angular",40),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(116,"div",27),f._UZ(117,"hr"),f.TgZ(118,"p",24),f._uU(119," Shifting Detail List "),f.qZA(),f.TgZ(120,"mtx-grid",25,41),f.NdJ("dblclick",function(t){f.CHM(r);var o=f.MAs(121);return e.onShiftDetailRowDblclick(o,t)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(122,"div",23),f.TgZ(123,"div",8),f.TgZ(124,"button",42),f._uU(125," Save "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(126,"mat-tab",43),f.TgZ(127,"div",44),f._UZ(128,"ag-grid-angular",45),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&t&&(f.xp6(3),f.Q6J("selectedIndex",e.tab),f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(7),f.Q6J("ngClass",f.VKq(61,bt,e.submitted&&e.f.cbCustomerID.invalid)),f.xp6(3),f.Q6J("ngForOf",e.customerList),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.cbCustomerID.invalid),f.xp6(6),f.Q6J("ngIf",e.submitted&&e.f.txtLotNo.invalid),f.xp6(10),f.Q6J("ngModel",f.xi3(33,58,e.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(2),f.Q6J("ngIf",e.submitted&&e.f.shift_date.invalid),f.xp6(5),f.Q6J("ngClass",f.VKq(63,bt,e.submitted&&e.f.cbloadingByID.invalid)),f.xp6(3),f.Q6J("ngForOf",e.loadingByList),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.cbloadingByID.invalid),f.xp6(5),f.Q6J("data",e.BalanceStockList)("columns",e.BalanceStockColumn)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!0)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(65,Ct))("pageIndex",0),f.xp6(50),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.StorageAreas),f.xp6(6),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.labourContractorList),f.xp6(7),f.Q6J("rowData",e.ShiftingServiceList)("columnDefs",e.serviceColumns),f.xp6(5),f.Q6J("data",e.ShiftingDetailList)("columns",e.ShiftingDetailColumns)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(66,Ct))("pageIndex",0),f.xp6(4),f.Q6J("hidden",!e.HideSaveButton)("value",e.submitted),f.xp6(4),f.Q6J("rowData",e.ShiftingList)("columnDefs",e.ShiftingListColumnDefs)("frameworkComponents",e.frameworkComponents))},directives:[D.xw,D.yH,p.a8,v.SP,v.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,c.mk,I.oO,u.YN,u.Kr,c.sg,c.O5,u.Fj,T.CM,y.N8],pipes:[c.uU],styles:[""]}),r}(),At=function(){var t=function(){function t(){e(this,t),this.label=""}return o(t,[{key:"agInit",value:function(t){this.params=t,this.label=this.params.label||null}},{key:"refresh",value:function(t){return!0}},{key:"onClick",value:function(t,e){this.params.onClick instanceof Function&&this.params.onClick({event:t,rowData:this.params.node.data,actions:e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-transferdeletebutton"]],decls:5,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"button",1),f.NdJ("click",function(t){return e.onClick(t,"Delete")}),f._uU(2,"Delete"),f.qZA(),f.TgZ(3,"button",2),f.NdJ("click",function(t){return e.onClick(t,"Print")}),f._uU(4,"Print"),f.qZA(),f.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),t}();function wt(t,e){if(1&t&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function xt(t,e){1&t&&(f.TgZ(0,"span"),f._uU(1,"Select Customer"),f.qZA())}function Lt(t,e){if(1&t&&(f.TgZ(0,"div",56),f.YNc(1,xt,2,0,"span",57),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.cbCustomerID||null==r.f.cbCustomerID.errors?null:r.f.cbCustomerID.errors.required)}}function qt(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"select Transfer date"),f.qZA())}function St(t,e){if(1&t&&(f.TgZ(0,"div",56),f.YNc(1,qt,2,0,"div",57),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.Transfer_date||null==r.f.Transfer_date.errors?null:r.f.Transfer_date.errors.required)}}function kt(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Enter Lot No"),f.qZA())}function _t(t,e){if(1&t&&(f.TgZ(0,"div",56),f.YNc(1,kt,2,0,"div",57),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtTransfeNo||null==r.f.txtTransfeNo.errors?null:r.f.txtTransfeNo.errors.required)}}function Ot(t,e){if(1&t&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function Ut(t,e){1&t&&(f.TgZ(0,"span"),f._uU(1,"Select To Customer"),f.qZA())}function Ft(t,e){if(1&t&&(f.TgZ(0,"div",56),f.YNc(1,Ut,2,0,"span",57),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.cbToCustomerID||null==r.f.cbToCustomerID.errors?null:r.f.cbToCustomerID.errors.required)}}function Pt(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Order Given By"),f.qZA())}function Bt(t,e){if(1&t&&(f.TgZ(0,"div",56),f.YNc(1,Pt,2,0,"div",57),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtOrderGivenBy||null==r.f.txtOrderGivenBy.errors?null:r.f.txtOrderGivenBy.errors.required)}}function Qt(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Enter Lot No"),f.qZA())}function Rt(t,e){if(1&t&&(f.TgZ(0,"div",56),f.YNc(1,Qt,2,0,"div",57),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtRemarks||null==r.f.txtRemarks.errors?null:r.f.txtRemarks.errors.required)}}function Jt(t,e){if(1&t&&(f.TgZ(0,"option",58),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.ProductID),f.xp6(1),f.Oqu(r.ProductName)}}function Mt(t,e){if(1&t&&(f.TgZ(0,"option",58),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.StorageAreaTypeID),f.xp6(1),f.hij("",r.ServiceName," ")}}function Et(t,e){if(1&t&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.StorageAreaID),f.xp6(1),f.hij("",r.StorageArea," ")}}function Yt(t,e){if(1&t&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.hij("",r.ContractorName," ")}}function Gt(t,e){if(1&t&&(f.TgZ(0,"option",55),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.Remarks),f.xp6(1),f.hij("",r.Remarks," ")}}var Wt=function(t){return{"is-invalid":t}},Vt=function(){return[10,20,50,100,500]},Ht=function(){var r=function(){function r(t,o,i,a,n){var l=this;e(this,r),this.fb=t,this.fbAdd=o,this.api=i,this.dialog=a,this.dialogBox=n,this.tab=0,this.submitted=!1,this.HideSaveButton=!0,this.DID=0,this.TransfersID=0,this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.NewLotNo="",this.NewLotNoID=0,this.TransferDetailsList=[],this.DetailList=[],this.ChargesList=[],this.TransferchargesList=[],this.TrnsNewLotList=[],this.flag=!1,this.TransferDetailtab=0,this.TransferDetailsListSave=[],this.TransferChargesListSave=[],this.ShiftingProductListCol=[{headerName:"InwardDID",field:"InwardDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductID",field:"ProductID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FirstLotNo",field:"FirstLotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BrandName",field:"BrandName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CountInPacket",field:"CountInPacket",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Location",field:"Location",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaType",field:"StorageAreaType",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductRemarks",field:"ProductRemarks",filter:"agTextColumnFilter",floatingFilter:!0}],this.serviceColumns=[{field:"Add",cellRenderer:function(t){return l.checkBoxCellEditRenderer(t)},hide:!1,width:10},{field:"TransferDID",hide:!0},{field:"ServiceID",hide:!0,resizable:!1},{field:"ServiceName"},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.TransferListColumnDefs=[{headerName:"Action",width:150,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnActionTransfer.bind(this),label:"Click 1"}},{headerName:"TransferID",field:"TransferID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransferNo",field:"TransferNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromCustomerID",field:"FromCustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromCustomer",field:"FromCustomer",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToCustomerID",field:"ToCustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToCustomer",field:"ToCustomer",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransferDate",field:"TransferDate",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseName",field:"WareHouseName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.TransferDetailColumns=[{header:"TransferDID",field:"TransferDID",hide:!0},{header:"InwardDID",field:"InwardDID",hide:!0},{header:"LotNo",field:"LotNo",hide:!1},{header:"NewLotNo",field:"NewLotNo"},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"BrandName",field:"BrandName"},{header:"InwardLocationID",field:"InwardLocationID",hide:!0},{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"ToStorageAreaID",field:"ToStorageAreaID",hide:!0},{header:"Location",field:"Location"},{header:"BalanceQty",field:"BalanceQty"},{header:"TransferQty",field:"TransferQty"},{header:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0},{header:"StorageAreaType",field:"StorageAreaType"},{header:"LabourContractorID",field:"LabourContractorID",hide:!0},{header:"LabourContractorName",field:"LabourContractorName"},{header:"countInPacket",field:"countInPacket"},{header:"ProductRemarks",field:"ProductRemarks"}];var s=new c.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=s,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:At}}return o(r,[{key:"ngOnInit",value:function(){this.ProductList=[],this.TransferServiceList=[],this.form=this.fb.group({cbCustomerID:["",u.kI.required],Transfer_date:["",u.kI.required],txtTransfeNo:["",u.kI.required],cbToCustomerID:["",u.kI.required],txtOrderGivenBy:[null,u.kI.required],txtRemarks:[""],txtLotNo:[""],cbproduct_id:[""],txtBalanceQty:[""],txtBrand:[""],txtCount:[""],txtTransferQty:[""],cbStorageAreaType:[""],txtBillingCycle:[""],ckCustomerarea:[""],cbRemarks:[""],txtNewLotNo:[""],cbLocation:[""],cbLabourContractor:[""]}),this.BindDropdown(),this.BindTransferList(),this.BindTransferNewLotList()}},{key:"f",get:function(){return this.form.controls}},{key:"BindDropdown",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r,o=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0},this.api.get("/Customer").subscribe(function(t){o.customerList=t},function(t){console.error(t)}),this.api.get("/StorageAreaType/ServieceStorageAreaType").subscribe(function(t){o.StorageAreaTypeList=t},function(t){console.error(t)}),this.api.post("/Transfer/GetStorageArea",r).subscribe(function(t){o.LocationList=t},function(t){console.error(t)}),this.api.get("/LabourContracter").subscribe(function(t){o.labourContractorList=t},function(t){console.error(t)}),this.api.get("/Remarks").subscribe(function(t){o.remarkList=t.filter(function(t){return 6==t.ProcessID})},function(t){console.error(t)});case 2:case"end":return t.stop()}},e,this)}))}},{key:"BindTransferNewLotList",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.TrnsNewLotList=[],this.NewLotNolist=[],this.BindNewLotNoData={InwardID:0,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""},this.api.post("/Inward/GetLotNo",this.BindNewLotNoData).subscribe(function(t){r.NewLotNolist=t,r.NewLotNo=r.NewLotNolist[0].Prefix+r.NewLotNolist[0].LotNo+r.NewLotNolist[0].Sufix,r.NewLotNoID=Number(r.NewLotNolist[0].LotNo),r.form.controls.txtNewLotNo.setValue(r.NewLotNo)},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"BindTransferList",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.post("/Transfer/Transfer_List",{transferID:0,wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:"",createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(function(t){r.TransferList=t},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"tabchange",value:function(t){this.tab=t}},{key:"OnSaveTransfer",value:function(t){var e=this;this.submitted=!0,console.log(t),this.TransferDetailsList.forEach(function(t){e.TransferDetailsList.length>0&&e.TransferDetailsListSave.push({TransferDID:t.TransferDID,InwardDID:t.InwardDID,ProductID:t.ProductID,LotNo:t.LotNo,InwardLocationID:t.InwardLocationID,StorageAreaID:t.StorageAreaID,TransferQuantity:t.TransferQty,ToStorageAreaID:t.ToStorageAreaID,LabourContractorID:t.LabourContractorID,Remarks:t.ProductRemarks,StorageAreaTypeID:t.StorageAreaTypeID,NewLotNo:t.NewLotNo})}),this.TransferDetailsListSave.slice(),this.TransferchargesList.forEach(function(t){e.TransferchargesList.length>0&&e.TransferChargesListSave.push({Add:t.Add,TransferDID:t.TransferDID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,C_Rate:t.C_Rate,L_Rate:t.L_Rate})}),this.TransferChargesListSave.slice(),this.SaveTransferData={TransferID:this.TransfersID,WareHouseID:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId,FromCustomerID:this.form.value.cbCustomerID,ToCustomerID:this.form.value.cbToCustomerID,TransferDate:this.form.value.Transfer_date,OrderGivenBy:this.form.value.txtOrderGivenBy,Remarks:this.form.value.txtRemarks,CreatedBy:this.currentUser.userId,TDTransferDetail:this.TransferDetailsListSave,TDTransferCharges:this.TransferChargesListSave,FinancialYearID:this.currentUser.FinantialYearId,StorageAreaMasterID:1},console.log(this.SaveTransferData),this.api.post("/Transfer/Transfer_Insert",this.SaveTransferData).subscribe(function(t){e.dialog.this.dialog.alert(t.Table[0].Message),e.BindTransferList()},function(t){console.error(t)})}},{key:"GetCustomerID",value:function(t){var e=this;this.api.post("/Transfer/GetTransferProductList",{transferID:0,wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:this.form.value.cbCustomerID,toCustomerID:0,transferDate:0,orderGivenBy:"",remarks:"",createdBy:0,financialYearID:this.currentUser.FinantialYearId,storageAreaMasterID:0}).subscribe(function(t){e.ProductList=t},function(t){console.error(t)}),this.api.post("/Inward/GetCustomerProducts?customerid="+this.form.value.cbCustomerID+"&warehouseid="+this.currentUser.warehouseId).subscribe(function(t){e.ProductNameList=t},function(t){console.error(t)})}},{key:"checkBoxCellEditRenderer",value:function(t){var e=this,r=document.createElement("input");return r.type="checkbox",r.value="false",r.checked=t.value,r.addEventListener("click",function(r){t.setValue(1!=t.value),e.ChargesList=[],e.TransferServiceList.forEach(function(t){1==t.Add&&e.ChargesList.push({Add:!0,TransferDID:e.DID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,C_Rate:t.C_Rate,L_Rate:t.L_Rate})}),e.ChargesList.slice()}),r}},{key:"OnCustomerarea",value:function(t){var e,r=this;1==this.form.value.ckCustomerarea?null==this.form.value.cbToCustomerID||""==this.form.value.cbToCustomerID?(this.dialog.alert("Please... Select To CustomerID ..!!!"),null===(e=null==document?void 0:document.getElementById("cbToCustomerID"))||void 0===e||e.focus(),this.form.controls.ckCustomerarea.setValue(!1)):this.api.post("/Transfer/GetStorageArea",{wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:this.form.value.cbToCustomerID,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(function(t){r.LocationList=t},function(t){console.error(t)}):this.api.post("/Transfer/GetStorageArea",{wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(function(t){r.LocationList=t},function(t){console.error(t)})}},{key:"onProductListRowClicked",value:function(t){var e,r=this,o={InwardID:0,CustomerID:Number(this.form.value.cbCustomerID),Remarks:"",CreatedBy:0,serviceID:0,ProductID:Number(t.data.ProductID),CompanyId:0,WarehouseId:this.currentUser.warehouseId,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""};this.api.post("/Transfer/GetTransferServices",o).subscribe(function(t){r.TransferServiceList=t},function(t){console.error(t)}),this.form.patchValue({txtLotNo:t.data.LotNo,cbproduct_id:t.data.ProductID,txtBrand:t.data.BrandName,txtBalanceQty:t.data.BalanceQuantity,txtCount:t.data.CountInPacket,cbStorageAreaType:t.data.StorageAreaTypeID,cbLocation:t.data.StorageAreaID}),this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.InwardDID=t.data.InwardDID,this.InwardLocationID=t.data.InwardLocationID,this.StorageAreaID=t.data.StorageAreaID,null===(e=null==document?void 0:document.getElementById("txtTransferQty"))||void 0===e||e.focus()}},{key:"onKeyTransferQty",value:function(t){Number(this.form.value.txtTransferQty)>0&&Number(this.form.value.txtBalanceQty)<Number(t)&&(this.dialog.alert("Transfer Quantity is less than equal to balance quantity ....!!!"),this.form.controls.txtTransferQty.setValue(""))}},{key:"OnAddClick",value:function(){var t,e,r=this;if(null==this.form.value.txtTransferQty||""==this.form.value.txtTransferQty||"0"==this.form.value.txtTransferQty)return null===(t=null==document?void 0:document.getElementById("txtTransferQty"))||void 0===t||t.focus(),void this.dialog.alert("Please .... Enter Transfer Quantity...");if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)return null===(e=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===e||e.focus(),void this.dialog.alert("Please .... Enter Labour Contractor....");if(1==this.flag){var o=this.DetailList.filter(function(t){return t.TransferDID!=r.DID});this.DetailList=o;var i=this.TransferchargesList.filter(function(t){return t.TransferDID!=r.DID});this.TransferchargesList=i}var a=this.ProductNameList.filter(function(t){return t.ProductID==r.form.value.cbproduct_id}),n=this.LocationList.filter(function(t){return t.StorageAreaID==r.form.value.cbLocation}),l=this.StorageAreaTypeList.filter(function(t){return t.StorageAreaTypeID==r.form.value.cbStorageAreaType}),s=this.labourContractorList.filter(function(t){return t.LabourContractorID==r.form.value.cbLabourContractor});0==this.flag&&(this.DID=this.DID+1,this.TrnsNewLotList.push({LotNo:String(this.NewLotNoID),Prefix:"",Sufix:""}),this.NewLotNoID=this.NewLotNoID+1),this.newTransferDetail=[],this.newTransferDetail={TransferDID:this.DID,InwardDID:this.InwardDID,LotNo:this.form.value.txtLotNo,NewLotNo:this.form.value.txtNewLotNo,ProductID:this.form.value.cbproduct_id,ProductName:a[0].ProductName,BrandName:this.form.value.txtBrand,InwardLocationID:this.InwardLocationID,StorageAreaID:this.StorageAreaID,ToStorageAreaID:Number(this.form.value.cbLocation),Location:n[0].StorageArea,BalanceQty:this.form.value.txtBalanceQty,TransferQty:Number(this.form.value.txtTransferQty),StorageAreaTypeID:this.form.value.cbStorageAreaType,StorageAreaType:l[0].ServiceName,LabourContractorID:this.form.value.cbLabourContractor,LabourContractorName:s[0].ContractorName,countInPacket:this.form.value.txtCount,ProductRemarks:this.form.value.cbRemarks},this.DetailList.push(this.newTransferDetail),this.TransferDetailsList=this.DetailList.slice(),this.TransferServiceList.forEach(function(t){1==t.Add&&r.TransferchargesList.push({Add:!0,TransferDID:r.DID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,C_Rate:t.C_Rate,L_Rate:t.L_Rate})}),this.NewLotNo=this.NewLotNolist[0].Prefix+this.NewLotNoID+this.NewLotNolist[0].Sufix,this.form.controls.txtNewLotNo.setValue(this.NewLotNo),this.form.controls.txtLotNo.reset(),this.form.controls.cbproduct_id.reset(),this.form.controls.txtBalanceQty.reset(),this.form.controls.txtBrand.reset(),this.form.controls.txtCount.reset(),this.form.controls.txtTransferQty.reset(),this.form.controls.cbStorageAreaType.reset(),this.form.controls.txtBillingCycle.reset(),this.form.controls.ckCustomerarea.reset(),this.form.controls.cbRemarks.reset(),this.form.controls.cbLocation.reset(),this.TransferServiceList=[],console.log("Add_detail",this.TransferDetailsList),console.log("Add_charges",this.TransferchargesList)}},{key:"onRowDblclickedTransfer",value:function(t,e){var r=this;this.flag=!0,this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.DID=t.cellSelection[0].rowData.TransferDID,this.InwardDID=t.cellSelection[0].rowData.InwardDID,this.InwardLocationID=t.cellSelection[0].rowData.InwardLocationID,this.StorageAreaID=t.cellSelection[0].rowData.StorageAreaID,this.form.patchValue({txtLotNo:t.cellSelection[0].rowData.LotNo,cbproduct_id:t.cellSelection[0].rowData.ProductID,txtBalanceQty:t.cellSelection[0].rowData.BalanceQty,txtBrand:t.cellSelection[0].rowData.BrandName,txtCount:t.cellSelection[0].rowData.countInPacket,txtTransferQty:t.cellSelection[0].rowData.TransferQty,cbStorageAreaType:t.cellSelection[0].rowData.StorageAreaTypeID,txtBillingCycle:"",ckCustomerarea:!1,cbRemarks:t.cellSelection[0].rowData.ProductRemarks,txtNewLotNo:t.cellSelection[0].rowData.NewLotNo,cbLocation:t.cellSelection[0].rowData.ToStorageAreaID,cbLabourContractor:t.cellSelection[0].rowData.LabourContractorID}),this.TransferDetailtab=0;var o={InwardID:0,CustomerID:Number(this.form.value.cbCustomerID),Remarks:"",CreatedBy:0,serviceID:0,ProductID:Number(t.cellSelection[0].rowData.ProductID),CompanyId:0,WarehouseId:this.currentUser.warehouseId,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""};this.api.post("/Transfer/GetTransferServices",o).subscribe(function(t){r.TransferServiceList=t,r.serviceListEditBind()},function(t){console.error(t)})}},{key:"serviceListEditBind",value:function(){var t=this,e=this.TransferchargesList.filter(function(e){return e.TransferDID==t.DID});this.TransferServiceTest=e;var r=this.TransferServiceTest.concat(this.TransferServiceList.filter(function(e){return!t.TransferServiceTest.find(function(t){return t.ServiceID==e.ServiceID})}));this.TransferServiceList=r,this.TransferServiceList.forEach(function(e){e.ServiceID>0&&(e.TransferDID=t.DID)})}},{key:"OnActionTransfer",value:function(t){var e=this;if(console.log(t.rowData),"Delete"==String(t.actions)){if(window.confirm("Do you want to cancel your Transfer...!!!")){var r={transferID:Number(t.rowData.TransferID),wareHouseID:Number(t.rowData.WareHouseID),companyID:0,fromCustomerID:Number(t.rowData.FromCustomerID),toCustomerID:0,transferDate:"",orderGivenBy:"",remarks:"",createdBy:0,financialYearID:0,storageAreaMasterID:0,StatusID:Number(t.rowData.StatusID)};console.log(r),this.api.post("/Transfer/TransferStatus_validation",r).subscribe(function(r){if(Number(r[0])>0)if(72==Number(t.rowData.StatusID))e.dialog.this.dialog.alert("Sorry,Transfer already deactivated or deleted ....!!!");else{var o={transferID:Number(t.rowData.TransferID),wareHouseID:Number(t.rowData.WareHouseID),companyID:0,fromCustomerID:Number(t.rowData.FromCustomerID),toCustomerID:Number(t.rowData.ToCustomerID),transferDate:"",orderGivenBy:"",remarks:"",createdBy:e.currentUser.userId,financialYearID:0,storageAreaMasterID:0,StatusID:Number(t.rowData.StatusID)};e.api.post("/Transfer/Transfer_Cancelled",o).subscribe(function(t){e.dialog.this.dialog.alert(t),e.BindTransferList()},function(t){console.error(t)})}else e.dialog.this.dialog.alert("Please re-perform your delete operation...!!!")},function(t){console.error(t)})}}else"Print"==String(t.actions)&&this.api.get("/Transfer/TransferReceipt?TransferID="+t.rowData.TransferID).subscribe(function(t){console.log("OnActionTransfer=>",t);var e=t[0].Base64Str,r=window.open("");null==r||r.document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e)+"'></iframe>")},function(t){console.error(t)})}}]),r}();return r.\u0275fac=function(t){return new(t||r)(f.Y36(u.qu),f.Y36(u.qu),f.Y36(d.sM),f.Y36(h.cP),f.Y36(dt.uw))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-transfer"]],decls:161,vars:62,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Transfer"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-7"],[1,"form-group"],["formControlName","cbCustomerID","id","cbCustomerID",1,"form-control","form-control-sm",3,"ngClass","change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-3"],["for","company"],["type","datetime-local","formControlName","Transfer_date","id","Transfer_date","placeholder","yyyy-MM-dd","name","Transfer_date",1,"form-control","form-control-sm",3,"ngModel"],[1,"col-sm-2"],["type","text","readonly","","formControlName","txtTransfeNo","id","txtTransfeNo",1,"form-control","form-control-sm"],[1,"col-sm-6"],["formControlName","cbToCustomerID","id","cbToCustomerID",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtOrderGivenBy","id","txtOrderGivenBy",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtRemarks","id","txtRemarks",1,"form-control","form-control-sm"],[1,"col-sm-12"],[1,"font-weight-bold"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","rowSelection","rowDoubleClicked"],["label","Transfer Product Details"],[1,"col-sm-9"],[1,"row"],["type","text","formControlName","txtLotNo","id","txtLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbproduct_id","id","cbproduct_id",1,"form-control","form-control-sm"],["disabled","",3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","txtBalanceQty","id","txtBalanceQty","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBrand","id","txtBrand","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtTransferQty","id","txtTransferQty","autocomplete","off","placeholder","",1,"form-control","form-control-sm",3,"keyup"],["txtTransferQty",""],["type","text","formControlName","txtCount","id","txtCount","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbStorageAreaType","id","cbStorageAreaType","readonly","",1,"form-control","form-control-sm"],["disabled","",3,"ngValue"],["type","text","formControlName","txtBillingCycle","id","txtBillingCycle","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","checkbox","formControlName","ckCustomerarea","id","ckCustomerarea",1,"form-control",3,"change"],["type","text","formControlName","txtNewLotNo","id","txtNewLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbLocation","id","cbLocation",1,"form-control","form-control-sm"],["formControlName","cbLabourContractor","id","cbLabourContractor",1,"form-control","form-control-sm"],["formControlName","cbRemarks","id","cbRemarks",1,"form-control","form-control-sm"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["type","button",1,"btn","btn-primary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],["label","Product Detail List"],[1,"col-12"],[2,"height","400px",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridTransferDetailList",""],["type","submit",1,"btn","btn-primary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"hidden","value"],["label","Transfer List"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],["disabled","",3,"value"]],template:function(t,e){if(1&t){var r=f.EpF();f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(t){return e.tabchange(t)})("selectedIndexChange",function(t){return e.tab=t}),f.TgZ(4,"mat-tab",3),f.TgZ(5,"form",4),f.NdJ("ngSubmit",function(){return e.OnSaveTransfer(e.form)}),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"div",7),f.TgZ(9,"div",8),f.TgZ(10,"label"),f._uU(11,"Customer Name"),f.qZA(),f.TgZ(12,"select",9),f.NdJ("change",function(t){return e.GetCustomerID(t)}),f.TgZ(13,"option",10),f._uU(14,"Select "),f.qZA(),f.YNc(15,wt,2,2,"option",11),f.qZA(),f.YNc(16,Lt,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"div",8),f.TgZ(19,"label",14),f._uU(20,"Transfer Date"),f.qZA(),f._UZ(21,"input",15),f.ALo(22,"date"),f.YNc(23,St,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(24,"div",16),f.TgZ(25,"div",8),f.TgZ(26,"label",14),f._uU(27,"Transfer No"),f.qZA(),f._UZ(28,"input",17),f.YNc(29,_t,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(30,"div",18),f.TgZ(31,"div",8),f.TgZ(32,"label"),f._uU(33,"To Customer"),f.qZA(),f.TgZ(34,"select",19),f.TgZ(35,"option",10),f._uU(36,"Select "),f.qZA(),f.YNc(37,Ot,2,2,"option",11),f.qZA(),f.YNc(38,Ft,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(39,"div",13),f.TgZ(40,"div",8),f.TgZ(41,"label",14),f._uU(42,"Order Given By"),f.qZA(),f._UZ(43,"input",20),f.YNc(44,Bt,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(45,"div",13),f.TgZ(46,"div",8),f.TgZ(47,"label",14),f._uU(48,"Remarks"),f.qZA(),f._UZ(49,"input",21),f.YNc(50,Rt,2,1,"div",12),f.qZA(),f.qZA(),f.TgZ(51,"div",22),f._UZ(52,"hr"),f.TgZ(53,"p",23),f._uU(54,"Product List"),f.qZA(),f.TgZ(55,"div",24),f.TgZ(56,"ag-grid-angular",25),f.NdJ("rowDoubleClicked",function(t){return e.onProductListRowClicked(t)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(57,"div",22),f._UZ(58,"hr"),f.TgZ(59,"mat-card"),f.TgZ(60,"mat-tab-group",2),f.NdJ("selectedIndexChange",function(t){return e.TransferDetailtab=t}),f.TgZ(61,"mat-tab",26),f.TgZ(62,"div",6),f.TgZ(63,"div",27),f.TgZ(64,"div",28),f.TgZ(65,"div",18),f.TgZ(66,"div",8),f.TgZ(67,"label"),f._uU(68,"Lot No"),f.qZA(),f._UZ(69,"input",29),f.qZA(),f.qZA(),f.TgZ(70,"div",18),f.TgZ(71,"div",8),f.TgZ(72,"label"),f._uU(73,"Product Name"),f.qZA(),f.TgZ(74,"select",30),f.TgZ(75,"option",10),f._uU(76,"Select "),f.qZA(),f.YNc(77,Jt,2,2,"option",31),f.qZA(),f.qZA(),f.qZA(),f.TgZ(78,"div",18),f.TgZ(79,"div",8),f.TgZ(80,"label"),f._uU(81,"Balance Qty"),f.qZA(),f._UZ(82,"input",32),f.qZA(),f.qZA(),f.TgZ(83,"div",18),f.TgZ(84,"div",8),f.TgZ(85,"label"),f._uU(86,"Brand"),f.qZA(),f._UZ(87,"input",33),f.qZA(),f.qZA(),f.TgZ(88,"div",18),f.TgZ(89,"div",8),f.TgZ(90,"label"),f._uU(91,"Transfer Qty"),f.qZA(),f.TgZ(92,"input",34,35),f.NdJ("keyup",function(){f.CHM(r);var t=f.MAs(93);return e.onKeyTransferQty(t.value)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(94,"div",18),f.TgZ(95,"div",8),f.TgZ(96,"label"),f._uU(97,"Count"),f.qZA(),f._UZ(98,"input",36),f.qZA(),f.qZA(),f.TgZ(99,"div",18),f.TgZ(100,"div",8),f.TgZ(101,"label"),f._uU(102,"Storage Type"),f.qZA(),f.TgZ(103,"select",37),f._UZ(104,"option",38),f.YNc(105,Mt,2,2,"option",31),f.qZA(),f.qZA(),f.qZA(),f.TgZ(106,"div",18),f.TgZ(107,"div",8),f.TgZ(108,"label"),f._uU(109,"Billing Cycle"),f.qZA(),f._UZ(110,"input",39),f.qZA(),f.qZA(),f.TgZ(111,"div",18),f.TgZ(112,"div",8),f.TgZ(113,"label"),f._uU(114,"Use To Customer Area"),f.qZA(),f.TgZ(115,"input",40),f.NdJ("change",function(t){return e.OnCustomerarea(t)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(116,"div",18),f.TgZ(117,"div",8),f.TgZ(118,"label"),f._uU(119,"New Lot No"),f.qZA(),f._UZ(120,"input",41),f.qZA(),f.qZA(),f.TgZ(121,"div",18),f.TgZ(122,"div",8),f.TgZ(123,"label"),f._uU(124,"Location"),f.qZA(),f.TgZ(125,"select",42),f._UZ(126,"option",38),f.YNc(127,Et,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(128,"div",18),f.TgZ(129,"div",8),f.TgZ(130,"label"),f._uU(131,"Labour Contractor"),f.qZA(),f.TgZ(132,"select",43),f._UZ(133,"option",38),f.YNc(134,Yt,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.TgZ(135,"div",22),f.TgZ(136,"div",8),f.TgZ(137,"label"),f._uU(138,"Remarks"),f.qZA(),f.TgZ(139,"select",44),f._UZ(140,"option",38),f.YNc(141,Gt,2,2,"option",11),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(142,"div",13),f.TgZ(143,"div",45),f._UZ(144,"ag-grid-angular",46),f.qZA(),f.qZA(),f.TgZ(145,"div",27),f.TgZ(146,"div",8),f.TgZ(147,"button",47),f.NdJ("click",function(){return e.OnAddClick()}),f._uU(148,"Add"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(149,"mat-tab",48),f.TgZ(150,"div",49),f._UZ(151,"hr"),f.TgZ(152,"mtx-grid",50,51),f.NdJ("dblclick",function(t){f.CHM(r);var o=f.MAs(153);return e.onRowDblclickedTransfer(o,t)}),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(154,"div",27),f.TgZ(155,"div",8),f.TgZ(156,"button",52),f._uU(157," Save "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(158,"mat-tab",53),f.TgZ(159,"div",24),f._UZ(160,"ag-grid-angular",54),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&t&&(f.xp6(3),f.Q6J("selectedIndex",e.tab),f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(7),f.Q6J("ngClass",f.VKq(55,Wt,e.submitted&&e.f.cbCustomerID.invalid)),f.xp6(3),f.Q6J("ngForOf",e.customerList),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.cbCustomerID.invalid),f.xp6(5),f.Q6J("ngModel",f.xi3(22,52,e.todayDate,"yyyy-MM-dd hh:mm:ss")),f.xp6(2),f.Q6J("ngIf",e.submitted&&e.f.Transfer_date.invalid),f.xp6(6),f.Q6J("ngIf",e.submitted&&e.f.txtTransfeNo.invalid),f.xp6(5),f.Q6J("ngClass",f.VKq(57,Wt,e.submitted&&e.f.cbToCustomerID.invalid)),f.xp6(3),f.Q6J("ngForOf",e.customerList),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.cbToCustomerID.invalid),f.xp6(5),f.Q6J("ngClass",f.VKq(59,Wt,e.submitted&&e.form.controls.txtOrderGivenBy.errors)),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.txtOrderGivenBy.invalid),f.xp6(6),f.Q6J("ngIf",e.submitted&&e.f.txtRemarks.invalid),f.xp6(6),f.Q6J("rowData",e.ProductList)("columnDefs",e.ShiftingProductListCol)("rowSelection","single"),f.xp6(4),f.Q6J("selectedIndex",e.TransferDetailtab),f.xp6(17),f.Q6J("ngForOf",e.ProductNameList),f.xp6(27),f.Q6J("ngValue",null),f.xp6(1),f.Q6J("ngForOf",e.StorageAreaTypeList),f.xp6(21),f.Q6J("ngValue",null),f.xp6(1),f.Q6J("ngForOf",e.LocationList),f.xp6(6),f.Q6J("ngValue",null),f.xp6(1),f.Q6J("ngForOf",e.labourContractorList),f.xp6(6),f.Q6J("ngValue",null),f.xp6(1),f.Q6J("ngForOf",e.remarkList),f.xp6(3),f.Q6J("rowData",e.TransferServiceList)("columnDefs",e.serviceColumns),f.xp6(8),f.Q6J("data",e.TransferDetailsList)("columns",e.TransferDetailColumns)("loading",!1)("columnResizable",!1)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",f.DdM(61,Vt))("pageIndex",0),f.xp6(4),f.Q6J("hidden",!e.HideSaveButton)("value",e.submitted),f.xp6(4),f.Q6J("rowData",e.TransferList)("columnDefs",e.TransferListColumnDefs)("frameworkComponents",e.frameworkComponents))},directives:[D.xw,D.yH,p.a8,v.SP,v.uX,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,c.mk,I.oO,u.YN,u.Kr,c.sg,c.O5,u.Fj,y.N8,u.Wl,T.CM],pipes:[c.uU],styles:[""]}),r}();function $t(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Enter Lot No..."),f.qZA())}function zt(t,e){if(1&t&&(f.TgZ(0,"div",37),f.YNc(1,$t,2,0,"div",38),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtLotNo.errors?null:r.f.txtLotNo.errors.required)}}function Kt(t,e){if(1&t&&(f.TgZ(0,"option",39),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.BrandID),f.xp6(1),f.Oqu(r.BrandName)}}function jt(t,e){if(1&t&&(f.TgZ(0,"option",39),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.Counts),f.xp6(1),f.Oqu(r.Counts)}}function Xt(t,e){if(1&t&&(f.TgZ(0,"option",39),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.DockID),f.xp6(1),f.hij("",r.DockName," ")}}function te(t,e){if(1&t&&(f.TgZ(0,"option",39),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.UserID),f.xp6(1),f.hij("",r.UserName," ")}}function ee(t,e){if(1&t&&(f.TgZ(0,"option",40),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.StorageAreaID),f.xp6(1),f.hij(" ",r.Storage_Area_Name,"")}}var re=function(t){return{"is-invalid":t}},oe=function(){var r=function(){function r(t,o,i){e(this,r),this.fb=t,this.api=o,this.dialog=i,this.submitted=!1,this.HideSaveButton=!0,this.InwardID=0,this.InwardDID=0,this.CustomerName="",this.BalanceQuantity=0,this.OutQuantity=0,this.PendingDO=0,this.LotUpdateDataList=[],this.LotColumnDefs=[{headerName:"InwardID",field:"InwardID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardDID",field:"InwardDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BrandName",field:"BrandName",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BrandID",field:"BrandID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DockName",field:"DockName",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DockID",field:"DockID",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"UnLoadingBy",field:"UnLoadingBy",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"UserID",field:"UserID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InQuantity",field:"InQuantity",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"PendingDO",field:"PendingDO",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OutQuantity",field:"OutQuantity",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BalanceQuantity",field:"BalanceQuantity",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageArea",field:"StorageArea",hide:!1,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser()}return o(r,[{key:"ngOnInit",value:function(){this.form=this.fb.group({txtLotNo:[null,u.kI.required],txtProductid:[null,u.kI.required],lot_no:[null,u.kI.required],cbbrandid:[null,u.kI.required],txtpacketcount:[null,u.kI.required],cbDockID:[null,u.kI.required],cbUnloadingBy:[null,u.kI.required],txtTruckNo:[null,u.kI.required],txtContainerNo:[""],txtInQuantity:[null,u.kI.required],cbStorageArea:[null,u.kI.required],remarks:[""]}),this.LotDetailList=[],this.BindComboBox()}},{key:"f",get:function(){return this.form.controls}},{key:"BindComboBox",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.get("/Brands/Brand_Select").subscribe(function(t){r.BrandsList=t},function(t){console.error(t)}),this.api.get("/CountInPacket").subscribe(function(t){r.packateCountList=t},function(t){console.error(t)}),this.api.get("/dock").subscribe(function(t){r.dockList=t},function(t){console.error(t)}),this.api.get("/UnloadingBy").subscribe(function(t){r.unloadingList=t},function(t){console.error(t)}),this.api.post("/Storage/StorageArea_Select").subscribe(function(t){r.StorageAreaList=t},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"OnSearch",value:function(){var t,e=this;if(null==this.form.value.txtLotNo||""==this.form.value.txtLotNo)return null===(t=null==document?void 0:document.getElementById("txtLotNo"))||void 0===t||t.focus(),void this.dialog.alert("Select LotNo .....");this.api.post("/InwardUpdate/GetInwardByLotNo",{LotNo:this.form.value.txtLotNo,WarehouseID:this.currentUser.warehouseId}).subscribe(function(t){e.LotDetailList=t.Table},function(t){console.error(t)})}},{key:"onSubmit",value:function(t){var e=this;if(this.LotDetailList.length>0){var r={inwardDID:this.LotDetailList[0].InwardDID,brandId:Number(this.LotDetailList[0].BrandID),itemsInPacket:this.LotDetailList[0].ItemsInPacket,inQuantity:this.LotDetailList[0].InQuantity,lotno:this.LotDetailList[0].LotNo,docID:this.LotDetailList[0].DockID,unLoadingBy:this.LotDetailList[0].UserID,remarks:this.LotDetailList[0].Remarks,truckNo:this.LotDetailList[0].TruckNo,containerNo:this.LotDetailList[0].ContainerNo,inwardID:this.LotDetailList[0].InwardID,storageAreaID:this.LotDetailList[0].StorageAreaID};this.api.post("/InwardUpdate/InwardUpdate_insert",r).subscribe(function(t){e.dialog.this.dialog.alert(t),e.form.controls.txtLotNo.reset(),e.LotDetailList=[],e.onResetClick()},function(t){console.error(t)})}else this.dialog.alert("Invalid")}},{key:"OnUpdateclick",value:function(){var t=this;if(this.submitted=!0,this.form.invalid)this.dialog.alert("Invalid");else if(0!=this.LotDetailList.length){if(this.LotDetailList.length>0){var e=this.BrandsList.filter(function(e){return e.BrandID==t.form.value.cbbrandid}),r=this.dockList.filter(function(e){return e.DockID==t.form.value.cbDockID}),o=this.unloadingList.filter(function(e){return e.UserID==t.form.value.cbUnloadingBy}),i=this.StorageAreaList.filter(function(e){return e.StorageAreaID==t.form.value.cbStorageArea});this.LotDetailList.forEach(function(a){t.LotDetailList.length>0&&t.LotUpdateDataList.push({InwardID:a.InwardID,InwardDID:a.InwardDID,CustomerName:a.CustomerName,LotNo:t.form.value.lot_no,ProductName:t.form.value.txtProductid,BrandName:e[0].BrandName,BrandID:t.form.value.cbbrandid,ItemsInPacket:t.form.value.txtpacketcount,DockName:r[0].DockName,DockID:t.form.value.cbDockID,UnLoadingBy:o[0].UserName,UserID:t.form.value.cbUnloadingBy,InQuantity:a.InQuantity,PendingDO:a.PendingDO,TruckNo:t.form.value.txtTruckNo,ContainerNo:t.form.value.txtContainerNo,OutQuantity:a.OutQuantity,BalanceQuantity:a.BalanceQuantity,StorageAreaID:t.form.value.cbStorageArea,StorageArea:i[0].Storage_Area_Name,Remarks:t.form.value.remarks})})}this.LotDetailList=this.LotUpdateDataList,console.log("LotUpdateDataList",this.LotUpdateDataList),this.onResetClick()}else this.dialog.alert("Invalid")}},{key:"onResetClick",value:function(){this.submitted=!1,this.LotUpdateDataList=[],this.form.controls.txtProductid.reset(),this.form.controls.lot_no.reset(),this.form.controls.cbbrandid.reset(),this.form.controls.txtpacketcount.reset(),this.form.controls.cbDockID.reset(),this.form.controls.txtTruckNo.reset(),this.form.controls.cbUnloadingBy.reset(),this.form.controls.txtContainerNo.reset(),this.form.controls.txtInQuantity.reset(),this.form.controls.cbStorageArea.reset(),this.form.controls.remarks.reset()}},{key:"onProductListRowClicked",value:function(t){console.log("onProductListRowClicked",t.data),this.InwardID=t.data.InwardID,this.InwardDID=t.data.InwardDID,this.CustomerName=t.data.CustomerName,this.BalanceQuantity=t.data.CustomerName,this.OutQuantity=t.data.OutQuantity,this.PendingDO=t.data.PendingDO,this.form.patchValue({txtProductid:t.data.ProductName,lot_no:t.data.LotNo,cbbrandid:t.data.BrandID,txtpacketcount:t.data.ItemsInPacket,cbDockID:t.data.DockID,cbUnloadingBy:t.data.UserID,txtTruckNo:t.data.TruckNo,txtContainerNo:t.data.ContainerNo,txtInQuantity:t.data.InQuantity,cbStorageArea:t.data.StorageAreaID,remarks:t.data.Remarks})}}]),r}();return r.\u0275fac=function(t){return new(t||r)(f.Y36(u.qu),f.Y36(d.sM),f.Y36(h.cP))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-inward-update"]],decls:103,vars:49,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["for","company"],["type","text","formControlName","txtLotNo","id","txtLotNo",1,"form-control","form-control-sm",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],[1,"col-sm-12","col-md-12"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","rowDoubleClicked"],[1,"col-12"],[1,"font-weight-bold"],[1,"row"],[1,"col-sm-4","col-md-3"],["type","text","formControlName","txtProductid","id","txtProductid","placeholder","","readonly","",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","lot_no","id","lot_no","placeholder","","readonly","",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","cbbrandid","id","cbbrandid",1,"form-control","form-control-sm",3,"ngClass"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","txtpacketcount","id","txtpacketcount",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","cbDockID","id","cbDockID",1,"form-control","form-control-sm",3,"ngClass"],["disabled","",3,"ngValue"],["formControlName","cbUnloadingBy","id","cbUnloadingBy",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtTruckNo","id","txtTruckNo","autocomplete","off","placeholder","","required","",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtContainerNo","id","txtContainerNo","placeholder","","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtInQuantity","id","txtInQuantity","placeholder","","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","cbStorageArea","id","cbStorageArea",1,"form-control","form-control-sm",3,"ngClass"],["disabled","",3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","remarks","id","remarks","placeholder","","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-3"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"disabled","click"],[1,"col-sm-6","col-md-3"],["type","submit",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],["disabled","",3,"value"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"form",2),f.NdJ("ngSubmit",function(){return e.onSubmit(e.form)}),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"div",6),f.TgZ(7,"label",7),f._uU(8,"Lot No."),f.qZA(),f._UZ(9,"input",8),f.YNc(10,zt,2,1,"div",9),f.qZA(),f.qZA(),f.TgZ(11,"div",5),f.TgZ(12,"div",6),f.TgZ(13,"button",10),f.NdJ("click",function(){return e.OnSearch()}),f._uU(14," Search "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(15,"div",11),f.TgZ(16,"div",12),f.TgZ(17,"ag-grid-angular",13),f.NdJ("rowDoubleClicked",function(t){return e.onProductListRowClicked(t)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(18,"div",14),f._UZ(19,"hr"),f.TgZ(20,"p",15),f._uU(21," Product Details "),f.qZA(),f.TgZ(22,"div",16),f.TgZ(23,"div",14),f.TgZ(24,"div",16),f.TgZ(25,"div",17),f.TgZ(26,"div",6),f.TgZ(27,"label"),f._uU(28,"Product Name"),f.qZA(),f._UZ(29,"input",18),f.qZA(),f.qZA(),f.TgZ(30,"div",17),f.TgZ(31,"div",6),f.TgZ(32,"label"),f._uU(33,"Lot No"),f.qZA(),f._UZ(34,"input",19),f.qZA(),f.qZA(),f.TgZ(35,"div",17),f.TgZ(36,"div",6),f.TgZ(37,"label"),f._uU(38,"Brand Name "),f.qZA(),f.TgZ(39,"select",20),f.TgZ(40,"option",21),f._uU(41,"Select "),f.qZA(),f.YNc(42,Kt,2,2,"option",22),f.qZA(),f.qZA(),f.qZA(),f.TgZ(43,"div",17),f.TgZ(44,"div",6),f.TgZ(45,"label"),f._uU(46,"Item In Packet"),f.qZA(),f.TgZ(47,"select",23),f.TgZ(48,"option",21),f._uU(49,"Select "),f.qZA(),f.YNc(50,jt,2,2,"option",22),f.qZA(),f.qZA(),f.qZA(),f.TgZ(51,"div",17),f.TgZ(52,"div",6),f.TgZ(53,"label"),f._uU(54,"Dock Name"),f.qZA(),f.TgZ(55,"select",24),f.TgZ(56,"option",25),f._uU(57,"Select "),f.qZA(),f.YNc(58,Xt,2,2,"option",22),f.qZA(),f.qZA(),f.qZA(),f.TgZ(59,"div",17),f.TgZ(60,"div",6),f.TgZ(61,"label"),f._uU(62,"Unloading By"),f.qZA(),f.TgZ(63,"select",26),f.TgZ(64,"option",25),f._uU(65,"Select "),f.qZA(),f.YNc(66,te,2,2,"option",22),f.qZA(),f.qZA(),f.qZA(),f.TgZ(67,"div",17),f.TgZ(68,"div",6),f.TgZ(69,"label"),f._uU(70,"Truck No"),f.qZA(),f._UZ(71,"input",27),f.qZA(),f.qZA(),f.TgZ(72,"div",17),f.TgZ(73,"div",6),f.TgZ(74,"label"),f._uU(75,"Container No"),f.qZA(),f._UZ(76,"input",28),f.qZA(),f.qZA(),f.TgZ(77,"div",17),f.TgZ(78,"div",6),f.TgZ(79,"label"),f._uU(80,"In Quantity"),f.qZA(),f._UZ(81,"input",29),f.qZA(),f.qZA(),f.TgZ(82,"div",17),f.TgZ(83,"div",6),f.TgZ(84,"label"),f._uU(85,"Storage Area"),f.qZA(),f.TgZ(86,"select",30),f.TgZ(87,"option",25),f._uU(88,"Select "),f.qZA(),f.YNc(89,ee,2,2,"option",31),f.qZA(),f.qZA(),f.qZA(),f.TgZ(90,"div",17),f.TgZ(91,"div",6),f.TgZ(92,"label"),f._uU(93,"Remarks"),f.qZA(),f._UZ(94,"input",32),f.qZA(),f.qZA(),f.TgZ(95,"div",33),f.TgZ(96,"div",6),f.TgZ(97,"button",34),f.NdJ("click",function(){return e.OnUpdateclick()}),f._uU(98," Update "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(99,"div",35),f.TgZ(100,"div",6),f.TgZ(101,"button",36),f._uU(102," Save "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(7),f.Q6J("ngClass",f.VKq(25,re,e.submitted&&e.f.txtLotNo.invalid)),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.txtLotNo.invalid),f.xp6(7),f.Q6J("rowData",e.LotDetailList)("columnDefs",e.LotColumnDefs),f.xp6(12),f.Q6J("ngClass",f.VKq(27,re,e.submitted&&e.f.txtProductid.invalid)),f.xp6(5),f.Q6J("ngClass",f.VKq(29,re,e.submitted&&e.f.lot_no.invalid)),f.xp6(5),f.Q6J("ngClass",f.VKq(31,re,e.submitted&&e.f.cbbrandid.invalid)),f.xp6(3),f.Q6J("ngForOf",e.BrandsList),f.xp6(5),f.Q6J("ngClass",f.VKq(33,re,e.submitted&&e.f.txtpacketcount.invalid)),f.xp6(3),f.Q6J("ngForOf",e.packateCountList),f.xp6(5),f.Q6J("ngClass",f.VKq(35,re,e.submitted&&e.f.cbDockID.invalid)),f.xp6(1),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.dockList),f.xp6(5),f.Q6J("ngClass",f.VKq(37,re,e.submitted&&e.f.cbUnloadingBy.invalid)),f.xp6(1),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.unloadingList),f.xp6(5),f.Q6J("ngClass",f.VKq(39,re,e.submitted&&e.f.txtTruckNo.invalid)),f.xp6(5),f.Q6J("ngClass",f.VKq(41,re,e.submitted&&e.f.txtContainerNo.invalid)),f.xp6(5),f.Q6J("ngClass",f.VKq(43,re,e.submitted&&e.f.txtInQuantity.invalid)),f.xp6(5),f.Q6J("ngClass",f.VKq(45,re,e.submitted&&e.f.cbStorageArea.invalid)),f.xp6(1),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.StorageAreaList),f.xp6(5),f.Q6J("ngClass",f.VKq(47,re,e.submitted&&e.f.remarks.invalid)),f.xp6(3),f.Q6J("disabled",e.submitted))},directives:[D.xw,D.yH,u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,c.mk,I.oO,c.O5,y.N8,u.EJ,u.YN,u.Kr,c.sg,u.Q7],styles:[""]}),r}();function ie(t,e){if(1&t&&(f.TgZ(0,"option",33),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.Oqu(r.CustomerName)}}function ae(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Select Customer..."),f.qZA())}function ne(t,e){if(1&t&&(f.TgZ(0,"div",34),f.YNc(1,ae,2,0,"div",35),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.Customerid.errors?null:r.f.Customerid.errors.required)}}function le(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Enter Outward No..."),f.qZA())}function se(t,e){if(1&t&&(f.TgZ(0,"div",34),f.YNc(1,le,2,0,"div",35),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",null==r.f.txtOutwardNo.errors?null:r.f.txtOutwardNo.errors.required)}}function ue(t,e){if(1&t&&(f.TgZ(0,"option",33),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.DockID),f.xp6(1),f.hij("",r.DockName," ")}}function de(t,e){if(1&t&&(f.TgZ(0,"option",33),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.UserID),f.xp6(1),f.hij("",r.UserName," ")}}function ce(t,e){if(1&t&&(f.TgZ(0,"option",33),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.LabourContractorID),f.xp6(1),f.hij("",r.ContractorName," ")}}function me(t,e){if(1&t&&(f.TgZ(0,"option",33),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerPartyID),f.xp6(1),f.hij("",r.PartyName," ")}}var fe=function(t){return{"is-invalid":t}},he=function(){var t=function(){function t(r,o,i){e(this,t),this.fb=r,this.api=o,this.dialog=i,this.submitted=!1,this.HideSaveButton=!0,this.InwardID=0,this.InwardDID=0,this.CustomerName="",this.BalanceQuantity=0,this.OutQuantity=0,this.PendingDO=0,this.LotUpdateDataList=[],this.UserID=0,this.LotColumnDefs=[{headerName:"outWardID",field:"OutWardID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DocID",field:"DocID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DockName",field:"DockName",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"UserID",field:"UserID",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LoadingBy",field:"LoadingBy",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LabourContractorID",field:"LabourContractorID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LabourContractor",field:"ContractorName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerPartyID",field:"CustomerPartyID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser()}return o(t,[{key:"ngOnInit",value:function(){this.form=this.fb.group({Customerid:[null,u.kI.required],txtOutwardNo:[null,u.kI.required],cbDockID:[null,u.kI.required],cbLoadingBy:[null,u.kI.required],txtTruckNo:[null,u.kI.required],txtContainerNo:[null,u.kI.required],cbLabourContractor:[null,u.kI.required],cbDeliverTo:[null,u.kI.required],remarks:[""]}),this.LotDetailList=[],this.BindComboBox()}},{key:"f",get:function(){return this.form.controls}},{key:"BindComboBox",value:function(){var t=this;this.api.get("/Customer").subscribe(function(e){t.CustomerList=e},function(t){console.error(t)}),this.api.get("/dock").subscribe(function(e){t.dockList=e},function(t){console.error(t)}),this.api.get("/UnloadingBy").subscribe(function(e){t.loadingList=e,console.log(e)},function(t){console.error(t)}),this.api.get("/LabourContracter/LabourContractors_Select").subscribe(function(e){t.LabourContractorList=e},function(t){console.error(t)}),this.api.get("/CustomerParty").subscribe(function(e){t.DeliverToList=e},function(t){console.error(t)})}},{key:"OnSearch",value:function(){var t,e,r=this;return null==this.form.value.Customerid||""==this.form.value.Customerid?(null===(t=null==document?void 0:document.getElementById("Customerid"))||void 0===t||t.focus(),void this.dialog.alert("Select Customer .....")):null==this.form.value.txtOutwardNo||""==this.form.value.txtOutwardNo?(null===(e=null==document?void 0:document.getElementById("txtOutwardNo"))||void 0===e||e.focus(),void this.dialog.alert("Select OutwardNo .....")):(this.api.post("/OutWard_Update/OutwardUpdate_Search",{CustomerID:2,OutWardNo:"146"}).subscribe(function(t){r.LotDetailList=t},function(t){console.error(t)}),void console.log("LotDeatailList",this.LotDetailList))}},{key:"onSubmit",value:function(t){var e=this;if(this.LotDetailList.length>0){var r=this.CustomerList.filter(function(t){return t.CustomerName==e.LotDetailList[0].CustomerName}),o=this.loadingList.filter(function(t){return t.UserName==e.LotDetailList[0].LoadingBy});this.api.post("/OutWard_Update/OutwardUpdate_insert",{outWardID:this.LotDetailList[0].outWardID,docID:this.LotDetailList[0].DocID,truckNo:this.LotDetailList[0].TruckNo,containerNo:this.LotDetailList[0].ContainerNo,loadingBy:o[0].UserID,customerPartyID:this.LotDetailList[0].customerPartyID,remarks:this.LotDetailList[0].Remarks,labourContractorID:this.LotDetailList[0].LabourContractorID,customerID:r[0].CustomerID,createdBy:this.LotDetailList[0].createdBy}).subscribe(function(t){e.dialog.this.dialog.alert(t),e.form.controls.outWardID.reset(),e.LotDetailList=[],e.onResetClick()},function(t){console.error(t)})}else this.dialog.alert("Invalid")}},{key:"OnUpdateclick",value:function(){var t=this;if(this.submitted=!0,this.form.invalid)this.dialog.alert("Invalid");else if(0!=this.LotDetailList.length){if(this.LotDetailList.length>0){var e=this.dockList.filter(function(e){return e.DockID==t.form.value.cbDockID}),r=this.loadingList.filter(function(e){return e.UserID==t.form.value.cbLoadingBy}),o=(this.LabourContractorList.filter(function(e){return e.LabourContractorID==t.form.value.cbLabourContractor}),this.DeliverToList.filter(function(e){return e.CustomerPartyID==t.form.value.cbDeliverTo}));this.LotDetailList.forEach(function(i){t.LotDetailList.length>0&&t.LotUpdateDataList.push({outWardID:i.OutWardID,DocID:t.form.value.cbDockID,DockName:e[0].DockName,TruckNo:t.form.value.txtTruckNo,ContainerNo:t.form.value.txtContainerNo,LoadingBy:r[0].UserName,LabourContractorID:i.LabourContractorID,Remarks:t.form.value.remarks,DeliverTo:o[0].PartyName,createdBy:i.CreatedBy,customerPartyID:o[0].CustomerPartyID,CustomerName:i.CustomerName,ContractorName:i.ContractorName})})}this.LotDetailList=this.LotUpdateDataList,console.log("LotUpdateDataList",this.LotUpdateDataList),this.onResetClick()}else this.dialog.alert("Invalid")}},{key:"onResetClick",value:function(){this.submitted=!1,this.LotUpdateDataList=[],this.form.controls.cbDockID.reset(),this.form.controls.cbLoadingBy.reset(),this.form.controls.txtTruckNo.reset(),this.form.controls.txtContainerNo.reset(),this.form.controls.cbLabourContractor.reset(),this.form.controls.cbDeliverTo.reset(),this.form.controls.remarks.reset()}},{key:"onProductListRowClicked",value:function(t){this.strUserID=this.loadingList.filter(function(e){return e.UserName==t.data.LoadingBy}),this.form.patchValue({cbDockID:t.data.DocID,cbLoadingBy:this.strUserID[0].UserID,txtTruckNo:t.data.TruckNo,txtContainerNo:t.data.ContainerNo,cbLabourContractor:t.data.LabourContractorID,cbDeliverTo:t.data.CustomerPartyID,remarks:t.data.Remarks})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.Y36(u.qu),f.Y36(d.sM),f.Y36(h.cP))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-outward-update"]],decls:89,vars:42,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["formControlName","Customerid","id","Customerid",1,"form-control","form-control-sm",3,"ngClass"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","company"],["type","text","formControlName","txtOutwardNo","id","txtOutwardNo",1,"form-control","form-control-sm",3,"ngClass"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],[1,"col-sm-12","col-md-12"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","rowDoubleClicked"],[1,"col-12"],[1,"font-weight-bold"],[1,"row"],[1,"col-sm-4","col-md-3"],["formControlName","cbDockID","id","cbDockID",1,"form-control","form-control-sm",3,"ngClass"],["disabled","",3,"ngValue"],["formControlName","cbLoadingBy","id","cbLoadingBy",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtTruckNo","id","txtTruckNo","autocomplete","off","placeholder","","required","",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtContainerNo","id","txtContainerNo","placeholder","","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","cbLabourContractor","id","cbLabourContractor",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","cbDeliverTo","id","cbDeliverTo",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","remarks","id","remarks","placeholder","","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-3"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"disabled","click"],[1,"col-sm-6","col-md-3"],["type","submit",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"form",2),f.NdJ("ngSubmit",function(){return e.onSubmit(e.form)}),f.TgZ(3,"div",3),f.TgZ(4,"div",4),f.TgZ(5,"div",5),f.TgZ(6,"div",6),f.TgZ(7,"label"),f._uU(8,"Customer Name "),f.qZA(),f.TgZ(9,"select",7),f.TgZ(10,"option",8),f._uU(11,"Select "),f.qZA(),f.YNc(12,ie,2,2,"option",9),f.qZA(),f.YNc(13,ne,2,1,"div",10),f.qZA(),f.qZA(),f.TgZ(14,"div",5),f.TgZ(15,"div",6),f.TgZ(16,"label",11),f._uU(17,"Outward No"),f.qZA(),f._UZ(18,"input",12),f.YNc(19,se,2,1,"div",10),f.qZA(),f.qZA(),f.TgZ(20,"div",5),f.TgZ(21,"div",6),f.TgZ(22,"button",13),f.NdJ("click",function(){return e.OnSearch()}),f._uU(23," Search "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(24,"div",14),f.TgZ(25,"div",15),f.TgZ(26,"ag-grid-angular",16),f.NdJ("rowDoubleClicked",function(t){return e.onProductListRowClicked(t)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(27,"div",17),f._UZ(28,"hr"),f.TgZ(29,"p",18),f._uU(30," Product Details "),f.qZA(),f.TgZ(31,"div",19),f.TgZ(32,"div",17),f.TgZ(33,"div",19),f.TgZ(34,"div",20),f.TgZ(35,"div",6),f.TgZ(36,"label"),f._uU(37,"Dock Name"),f.qZA(),f.TgZ(38,"select",21),f.TgZ(39,"option",22),f._uU(40,"Select "),f.qZA(),f.YNc(41,ue,2,2,"option",9),f.qZA(),f.qZA(),f.qZA(),f.TgZ(42,"div",20),f.TgZ(43,"div",6),f.TgZ(44,"label"),f._uU(45,"Loading By"),f.qZA(),f.TgZ(46,"select",23),f.TgZ(47,"option",22),f._uU(48,"Select "),f.qZA(),f.YNc(49,de,2,2,"option",9),f.qZA(),f.qZA(),f.qZA(),f.TgZ(50,"div",20),f.TgZ(51,"div",6),f.TgZ(52,"label"),f._uU(53,"Truck No"),f.qZA(),f._UZ(54,"input",24),f.qZA(),f.qZA(),f.TgZ(55,"div",20),f.TgZ(56,"div",6),f.TgZ(57,"label"),f._uU(58,"Container No"),f.qZA(),f._UZ(59,"input",25),f.qZA(),f.qZA(),f.TgZ(60,"div",20),f.TgZ(61,"div",6),f.TgZ(62,"label"),f._uU(63,"Labour Contractor"),f.qZA(),f.TgZ(64,"select",26),f.TgZ(65,"option",22),f._uU(66,"Select "),f.qZA(),f.YNc(67,ce,2,2,"option",9),f.qZA(),f.qZA(),f.qZA(),f.TgZ(68,"div",20),f.TgZ(69,"div",6),f.TgZ(70,"label"),f._uU(71,"Deliver To"),f.qZA(),f.TgZ(72,"select",27),f.TgZ(73,"option",22),f._uU(74,"Select "),f.qZA(),f.YNc(75,me,2,2,"option",9),f.qZA(),f.qZA(),f.qZA(),f.TgZ(76,"div",20),f.TgZ(77,"div",6),f.TgZ(78,"label"),f._uU(79,"Remarks"),f.qZA(),f._UZ(80,"input",28),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(81,"div",29),f.TgZ(82,"div",6),f.TgZ(83,"button",30),f.NdJ("click",function(){return e.OnUpdateclick()}),f._uU(84," Update "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(85,"div",31),f.TgZ(86,"div",6),f.TgZ(87,"button",32),f._uU(88," Save "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(2),f.Q6J("formGroup",e.form),f.xp6(7),f.Q6J("ngClass",f.VKq(24,fe,e.submitted&&e.f.Customerid.invalid)),f.xp6(3),f.Q6J("ngForOf",e.CustomerList),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.Customerid.invalid),f.xp6(5),f.Q6J("ngClass",f.VKq(26,fe,e.submitted&&e.f.txtOutwardNo.invalid)),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.f.txtOutwardNo.invalid),f.xp6(7),f.Q6J("rowData",e.LotDetailList)("columnDefs",e.LotColumnDefs),f.xp6(12),f.Q6J("ngClass",f.VKq(28,fe,e.submitted&&e.f.cbDockID.invalid)),f.xp6(1),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.dockList),f.xp6(5),f.Q6J("ngClass",f.VKq(30,fe,e.submitted&&e.f.cbLoadingBy.invalid)),f.xp6(1),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.loadingList),f.xp6(5),f.Q6J("ngClass",f.VKq(32,fe,e.submitted&&e.f.txtTruckNo.invalid)),f.xp6(5),f.Q6J("ngClass",f.VKq(34,fe,e.submitted&&e.f.txtContainerNo.invalid)),f.xp6(5),f.Q6J("ngClass",f.VKq(36,fe,e.submitted&&e.f.cbLabourContractor.invalid)),f.xp6(1),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.LabourContractorList),f.xp6(5),f.Q6J("ngClass",f.VKq(38,fe,e.submitted&&e.f.cbDeliverTo.invalid)),f.xp6(1),f.Q6J("ngValue",null),f.xp6(2),f.Q6J("ngForOf",e.DeliverToList),f.xp6(5),f.Q6J("ngClass",f.VKq(40,fe,e.submitted&&e.f.remarks.invalid)),f.xp6(3),f.Q6J("disabled",e.submitted))},directives:[D.xw,D.yH,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,c.mk,I.oO,u.YN,u.Kr,c.sg,c.O5,u.Fj,y.N8,u.Q7],styles:[""]}),t}();function ge(t,e){if(1&t&&(f.TgZ(0,"option",28),f._uU(1),f.qZA()),2&t){var r=e.$implicit;f.s9C("value",r.CustomerID),f.xp6(1),f.hij("",r.CustomerName," ")}}function De(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Select Customer....... "),f.qZA())}function pe(t,e){if(1&t&&(f.TgZ(0,"div",29),f.YNc(1,De,2,0,"div",26),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",r.form.controls.customer_id.errors.required)}}function ve(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Select From Date....... "),f.qZA())}function Ze(t,e){if(1&t&&(f.TgZ(0,"div",29),f.YNc(1,ve,2,0,"div",26),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",r.form.controls.from_date.errors.required)}}function Ie(t,e){1&t&&(f.TgZ(0,"div"),f._uU(1,"Select To_date....... "),f.qZA())}function ye(t,e){if(1&t&&(f.TgZ(0,"div",29),f.YNc(1,Ie,2,0,"div",26),f.qZA()),2&t){var r=f.oxw();f.xp6(1),f.Q6J("ngIf",r.form.controls.To_date.errors.required)}}function Te(t,e){1&t&&(f.TgZ(0,"th"),f._uU(1,"DeliveryTo"),f.qZA())}function be(t,e){1&t&&(f.ynx(0),f.TgZ(1,"tr",30),f.TgZ(2,"td",31),f._uU(3," No data found "),f.qZA(),f.qZA(),f.BQk())}function Ce(t,e){if(1&t&&(f.TgZ(0,"td",32),f._uU(1),f.qZA()),2&t){var r=f.oxw().$implicit;f.xp6(1),f.Oqu(r.DeliveryTo)}}function Ne(t,e){if(1&t){var r=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"td",32),f._uU(3),f.qZA(),f.TgZ(4,"td",25),f._uU(5),f.qZA(),f.TgZ(6,"td",25),f._uU(7),f.qZA(),f.TgZ(8,"td",25),f._uU(9),f.qZA(),f.TgZ(10,"td",25),f._uU(11),f.qZA(),f.TgZ(12,"td",32),f._uU(13),f.qZA(),f.TgZ(14,"td",32),f._uU(15),f.qZA(),f.TgZ(16,"td",32),f._uU(17),f.qZA(),f.TgZ(18,"td",32),f._uU(19),f.qZA(),f.YNc(20,Ce,2,1,"td",33),f.TgZ(21,"td",32),f._uU(22),f.qZA(),f.TgZ(23,"td",32),f._uU(24),f.qZA(),f.TgZ(25,"td"),f.TgZ(26,"input",34),f.NdJ("ngModelChange",function(t){return f.CHM(r).$implicit.Loading=t})("change",function(){var t=f.CHM(r).$implicit;return f.oxw().onChangesRates(t)}),f.qZA(),f.qZA(),f.TgZ(27,"td"),f.TgZ(28,"input",34),f.NdJ("ngModelChange",function(t){return f.CHM(r).$implicit.Unloading=t})("change",function(){var t=f.CHM(r).$implicit;return f.oxw().onChangesRates(t)}),f.qZA(),f.qZA(),f.TgZ(29,"td"),f.TgZ(30,"input",34),f.NdJ("ngModelChange",function(t){return f.CHM(r).$implicit.Thappi=t})("change",function(){var t=f.CHM(r).$implicit;return f.oxw().onChangesRates(t)}),f.qZA(),f.qZA(),f.TgZ(31,"td"),f.TgZ(32,"input",34),f.NdJ("ngModelChange",function(t){return f.CHM(r).$implicit.Varai=t})("change",function(){var t=f.CHM(r).$implicit;return f.oxw().onChangesRates(t)}),f.qZA(),f.qZA(),f.TgZ(33,"td"),f.TgZ(34,"input",34),f.NdJ("ngModelChange",function(t){return f.CHM(r).$implicit.Shifting=t})("change",function(){var t=f.CHM(r).$implicit;return f.oxw().onChangesRates(t)}),f.qZA(),f.qZA(),f.TgZ(35,"td"),f.TgZ(36,"input",34),f.NdJ("ngModelChange",function(t){return f.CHM(r).$implicit.Dummping=t})("change",function(){var t=f.CHM(r).$implicit;return f.oxw().onChangesRates(t)}),f.qZA(),f.qZA(),f.TgZ(37,"td"),f.TgZ(38,"input",34),f.NdJ("ngModelChange",function(t){return f.CHM(r).$implicit.Weights=t})("change",function(){var t=f.CHM(r).$implicit;return f.oxw().onChangesRates(t)}),f.qZA(),f.qZA(),f.qZA(),f.BQk()}if(2&t){var o=e.$implicit,i=f.oxw();f.xp6(3),f.Oqu(o.Process),f.xp6(2),f.Oqu(o.ID),f.xp6(2),f.Oqu(o.DID),f.xp6(2),f.Oqu(o.CustomerID),f.xp6(2),f.Oqu(o.ProductID),f.xp6(2),f.Oqu(i.dateConvert(o.Date)),f.xp6(2),f.Oqu(o.CustomerName),f.xp6(2),f.Oqu(o.ProductName),f.xp6(2),f.Oqu(o.ItemsInPacket),f.xp6(1),f.Q6J("ngIf","Outward"==i.ProcessType),f.xp6(2),f.Oqu(o.lotno),f.xp6(2),f.Oqu(o.Qty),f.xp6(2),f.Q6J("ngModel",o.Loading),f.xp6(2),f.Q6J("ngModel",o.Unloading),f.xp6(2),f.Q6J("ngModel",o.Thappi),f.xp6(2),f.Q6J("ngModel",o.Varai),f.xp6(2),f.Q6J("ngModel",o.Shifting),f.xp6(2),f.Q6J("ngModel",o.Dummping),f.xp6(2),f.Q6J("ngModel",o.Weights)}}var Ae=[{path:"Inward",component:Q},{path:"DeliveryOrder",component:H},{path:"EditEntries",component:function(){var r=function(){function r(t,o,i,a){e(this,r),this.api=t,this.fb=o,this.modalService=i,this.dialog=a,this.submitted=!1,this.ProcessType="",this.EditEntriesID=0,this.datalength=1,this.GetInwardOutwardData=[],this.currentUser=this.api.getCurrentUser(),this.form=this.fb.group({customer_id:[null],from_date:[null,u.kI.required],To_date:[null,u.kI.required],chk_Inward:[null,u.kI.required],chk_Outward:[null,u.kI.required],txtLotno:[""]}),this.onReset()}return o(r,[{key:"ngOnInit",value:function(){this.BindDropdownCustomers()}},{key:"BindDropdownCustomers",value:function(){return(0,s.mG)(this,void 0,void 0,t().mark(function e(){var r=this;return t().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.api.get("/Customer").subscribe(function(t){r.customerList=t},function(t){console.error(t)});case 1:case"end":return t.stop()}},e,this)}))}},{key:"GetCustomerID",value:function(t){}},{key:"btnSerch",value:function(t){var e=this;console.log(t.value),this.submitted=!0,this.form.invalid||this.api.post("/EditEntries/GetInwardOutward_EditCharge",{CustomerID:null==t.value.customer_id?0:t.value.customer_id,FromDate:t.value.from_date,ToDate:t.value.To_date,Process:1==t.value.chk_Inward?"Inward":"Outward",lotno:t.value.txtLotno}).subscribe(function(t){e.GetInwardOutwardData=[],e.GetInwardOutwardData=t,e.datalength=0==e.GetInwardOutwardData.length?0:1,console.log("GetInwardOutwardData",e.GetInwardOutwardData)},function(t){})}},{key:"dateConvert",value:function(t){return new c.uU("en-US").transform(t,"dd-MM-yyyy")}},{key:"onbtnReset",value:function(){this.onReset()}},{key:"onReset",value:function(){this.form.reset();var t=new c.uU("en-US").transform(Date(),"yyyy-MM-dd");this.todayDate=t,this.form.controls.from_date.setValue(this.todayDate),this.form.controls.To_date.setValue(this.todayDate),this.form.controls.chk_Inward.setValue(!0),this.form.controls.chk_Outward.setValue(!1),this.form.controls.txtLotno.setValue(""),this.ProcessType="Inward"}},{key:"onCheck_Inward",value:function(t){1==t.target.checked&&(this.form.controls.chk_Inward.setValue(!0),this.form.controls.chk_Outward.setValue(!1),this.ProcessType="Inward")}},{key:"onCheck_Outward",value:function(t){1==t.target.checked&&(this.form.controls.chk_Outward.setValue(!0),this.form.controls.chk_Inward.setValue(!1),this.ProcessType="Outward")}},{key:"onChangesRates",value:function(t){this.api.post("/EditEntries/EditEntries_insert",{EditEntriesID:this.EditEntriesID,createdby:this.currentUser.userId,process:t.Process,TD_EditEntries:[{customerID:t.CustomerID,ProductID:t.ProductID,DID:t.DID,Loading:t.Loading,Unloading:t.Unloading,Thappi:t.Thappi,Varai:t.Varai,Shifting:t.Shifting,Dummping:t.Dummping,Weights:t.Weights}]}).subscribe(function(t){this.dialog.alert(t[0].message),console.log("EditEntries_insert",t[0].message)},function(t){})}}]),r}();return r.\u0275fac=function(t){return new(t||r)(f.Y36(d.sM),f.Y36(u.qu),f.Y36(g.FF),f.Y36(h.cP))},r.\u0275cmp=f.Xpm({type:r,selectors:[["app-edit-entries"]],decls:97,vars:16,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-4","col-md-4"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm",3,"change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col-sm-3","col-md-3"],["type","date","formControlName","from_date","id","from_date","placeholder","","name","from_date",1,"form-control","form-control-rounded",3,"ngModel"],["type","date","formControlName","To_date","id","To_date","placeholder","","name","To_date",1,"form-control","form-control-rounded",3,"ngModel"],[1,"col-sm-2","col-md-2"],["type","text","formControlName","txtLotno","id","txtLotno","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],[1,"col-sm-1","col-md-1"],["type","checkbox","formControlName","chk_Inward","id","chk_Inward",1,"form-control",3,"change"],["type","checkbox","formControlName","chk_Outward","id","chk_Outward",1,"form-control",3,"change"],[1,"form-group","pt-3"],["type","submit",1,"btn","btn-secondary","btn-block"],["type","button","type","button",1,"btn","btn-secondary","btn-block",3,"click"],[1,"table"],[1,"table123"],[1,"Table_Header"],[2,"display","none"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],[1,"tablerow","tablerow-underline"],["colspan","14",1,"tdhead","direct-sticky",2,"padding","4px !important","width","2px !important","text-align","center","background-color","darkgray","font-size","large"],[1,"Table_Td"],["class","Table_Td",4,"ngIf"],["type","checkbox",3,"ngModel","ngModelChange","change"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card"),f.TgZ(3,"form",2),f.NdJ("ngSubmit",function(){return e.btnSerch(e.form)}),f.TgZ(4,"div",3),f.TgZ(5,"div",4),f.TgZ(6,"div",5),f.TgZ(7,"div",6),f.TgZ(8,"label"),f._uU(9,"Customer Name"),f.qZA(),f.TgZ(10,"select",7),f.NdJ("change",function(t){return e.GetCustomerID(t)}),f.TgZ(11,"option",8),f._uU(12,"Select"),f.qZA(),f.YNc(13,ge,2,2,"option",9),f.qZA(),f.YNc(14,pe,2,1,"div",10),f.qZA(),f.qZA(),f.TgZ(15,"div",11),f.TgZ(16,"div",6),f.TgZ(17,"label"),f._uU(18,"From Date"),f.qZA(),f._UZ(19,"input",12),f.ALo(20,"date"),f.YNc(21,Ze,2,1,"div",10),f.qZA(),f.qZA(),f.TgZ(22,"div",11),f.TgZ(23,"div",6),f.TgZ(24,"label"),f._uU(25,"To Date"),f.qZA(),f._UZ(26,"input",13),f.ALo(27,"date"),f.YNc(28,ye,2,1,"div",10),f.qZA(),f.qZA(),f.TgZ(29,"div",14),f.TgZ(30,"div",6),f.TgZ(31,"label"),f._uU(32,"Lot No"),f.qZA(),f._UZ(33,"input",15),f.qZA(),f.qZA(),f.TgZ(34,"div",16),f.TgZ(35,"div",6),f.TgZ(36,"label"),f._uU(37,"Inward"),f.qZA(),f.TgZ(38,"input",17),f.NdJ("change",function(t){return e.onCheck_Inward(t)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(39,"div",16),f.TgZ(40,"div",6),f.TgZ(41,"label"),f._uU(42,"Outward"),f.qZA(),f.TgZ(43,"input",18),f.NdJ("change",function(t){return e.onCheck_Outward(t)}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(44,"div",14),f.TgZ(45,"div",19),f.TgZ(46,"button",20),f._uU(47,"Search"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(48,"div",14),f.TgZ(49,"div",19),f.TgZ(50,"button",21),f.NdJ("click",function(){return e.onbtnReset()}),f._uU(51,"Reset"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(52,"mat-card"),f.TgZ(53,"div",22),f.TgZ(54,"table",23),f.TgZ(55,"thead",24),f.TgZ(56,"tr"),f.TgZ(57,"th"),f._uU(58,"Process"),f.qZA(),f.TgZ(59,"th",25),f._uU(60,"ID"),f.qZA(),f.TgZ(61,"th",25),f._uU(62,"DID"),f.qZA(),f.TgZ(63,"th",25),f._uU(64,"CustomerID"),f.qZA(),f.TgZ(65,"th",25),f._uU(66,"ProductID"),f.qZA(),f.TgZ(67,"th"),f._uU(68,"Date"),f.qZA(),f.TgZ(69,"th"),f._uU(70,"CustomerName"),f.qZA(),f.TgZ(71,"th"),f._uU(72,"ProductName"),f.qZA(),f.TgZ(73,"th"),f._uU(74,"ItemsInPacket"),f.qZA(),f.YNc(75,Te,2,0,"th",26),f.TgZ(76,"th"),f._uU(77,"LotNo"),f.qZA(),f.TgZ(78,"th"),f._uU(79,"Qty"),f.qZA(),f.TgZ(80,"th"),f._uU(81,"Loading"),f.qZA(),f.TgZ(82,"th"),f._uU(83,"Unloading"),f.qZA(),f.TgZ(84,"th"),f._uU(85,"Thappi"),f.qZA(),f.TgZ(86,"th"),f._uU(87,"Varai"),f.qZA(),f.TgZ(88,"th"),f._uU(89,"Shifting "),f.qZA(),f.TgZ(90,"th"),f._uU(91,"Dummping"),f.qZA(),f.TgZ(92,"th"),f._uU(93,"Weights"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(94,"tbody"),f.YNc(95,be,4,0,"ng-container",26),f.YNc(96,Ne,39,19,"ng-container",27),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(3),f.Q6J("formGroup",e.form),f.xp6(10),f.Q6J("ngForOf",e.customerList),f.xp6(1),f.Q6J("ngIf",e.submitted&&e.form.controls.customer_id.errors),f.xp6(5),f.Q6J("ngModel",f.xi3(20,10,e.todayDate,"yyyy-MM-dd")),f.xp6(2),f.Q6J("ngIf",e.submitted&&e.form.controls.from_date.errors),f.xp6(5),f.Q6J("ngModel",f.xi3(27,13,e.todayDate,"yyyy-MM-dd")),f.xp6(2),f.Q6J("ngIf",e.submitted&&e.form.controls.To_date.errors),f.xp6(47),f.Q6J("ngIf","Outward"==e.ProcessType),f.xp6(20),f.Q6J("ngIf",0==e.datalength),f.xp6(1),f.Q6J("ngForOf",e.GetInwardOutwardData))},directives:[D.xw,D.yH,p.a8,u._Y,u.JL,u.sg,u.EJ,u.JJ,u.u,u.YN,u.Kr,c.sg,c.O5,u.Fj,u.Wl,u.On],pipes:[c.uU],styles:[".table123[_ngcontent-%COMP%]{display:block;overflow-y:auto;overflow-x:auto;height:200px}.Table_Header[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;top:-5px;background-color:#fff}.Table_Td[_ngcontent-%COMP%]{white-space:nowrap}.Datanotfoundcss[_ngcontent-%COMP%]{text-align:center}"]}),r}()},{path:"Dispatch",component:j},{path:"Outward",component:st},{path:"Shifting",component:Nt},{path:"Transfer",component:Ht},{path:"InwardUpdate",component:oe},{path:"OutwardUpdate",component:he}],we=function(){var t=o(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[l.Bz.forChild(Ae)],l.Bz]}),t}(),xe=function(){var t=o(function t(){e(this,t)});return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[n.m,dt.Is,we,y.sF.withComponents([])]]}),t}()}}])}();