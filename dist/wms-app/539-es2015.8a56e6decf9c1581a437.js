"use strict";(self.webpackChunkwms_app=self.webpackChunkwms_app||[]).push([[539],{96539:function(e,t,r){r.r(t),r.d(t,{ProcessModule:function(){return We}});var i=r(66269),o=r(63423),a=r(64762),n=r(3679),l=r(1527),s=r(38583),d=r(37716);let c=(()=>{class e{constructor(){this.label=""}agInit(e){this.params=e,this.label=this.params.label||null}refresh(e){return!0}onClick(e,t){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data,actions:t})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-inward-action-button"]],decls:5,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"button",1),d.NdJ("click",function(e){return t.onClick(e,"Edit")}),d._uU(2,"Edit"),d.qZA(),d.TgZ(3,"button",2),d.NdJ("click",function(e){return t.onClick(e,"Delete")}),d._uU(4,"Delete"),d.qZA(),d.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),e})();var u=r(99603),h=r(69517),m=r(35618),f=r(93738),g=r(65939),D=r(98295),p=r(88030),I=r(25239),v=r(63887);function Z(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerID),d.xp6(1),d.Oqu(e.CustomerName)}}function y(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.DockID),d.xp6(1),d.Oqu(e.DockName)}}function T(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.UserID),d.xp6(1),d.Oqu(e.UserName)}}function b(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.Remarks),d.xp6(1),d.Oqu(e.Remarks)}}function C(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.ProductID),d.xp6(1),d.Oqu(e.ProductName)}}function N(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.BrandID),d.xp6(1),d.Oqu(e.BrandName)}}function w(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.Counts),d.xp6(1),d.Oqu(e.Counts)}}function A(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.StorageAreaTypeID),d.xp6(1),d.hij("",e.ServiceName," ")}}function S(e,t){if(1&e&&(d.TgZ(0,"option",70),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.LabourContractorID),d.xp6(1),d.hij(" ",e.ContractorName,"")}}function L(e,t){if(1&e&&(d.TgZ(0,"option",71),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("ngValue",e),d.xp6(1),d.Oqu(e.Remarks)}}function x(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",72),d.TgZ(1,"h4",73),d._uU(2,"Storage Area"),d.qZA(),d.qZA(),d._UZ(3,"br"),d.TgZ(4,"div",23),d.TgZ(5,"div",74),d.TgZ(6,"label"),d._uU(7,"Quantity "),d.qZA(),d._UZ(8,"input",75),d.qZA(),d.TgZ(9,"div",74),d.TgZ(10,"label"),d._uU(11,"AllocatedQty"),d.qZA(),d._UZ(12,"input",76),d.qZA(),d.qZA(),d.TgZ(13,"div",77),d.TgZ(14,"ag-grid-angular",78,79),d.NdJ("cellValueChanged",function(t){return d.CHM(e),d.oxw().onCellKeyPress(t)}),d.qZA(),d.qZA(),d.TgZ(16,"div",80),d.TgZ(17,"button",81),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(),r=d.MAs(191);return t.onSaveStorageArea(r)}),d._uU(18,"ADD"),d.qZA(),d.TgZ(19,"button",82),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(),r=d.MAs(191);return t.oncloseStoragearea(r)}),d._uU(20,"cancel"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(14),d.Q6J("rowData",e.storageAreaList)("columnDefs",e.columnDefs)}}function q(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",72),d.TgZ(1,"h4",73),d._uU(2,"Customer Contact"),d.qZA(),d.qZA(),d.TgZ(3,"div",77),d._UZ(4,"ag-grid-angular",83),d.qZA(),d.TgZ(5,"div",80),d.TgZ(6,"button",82),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(),r=d.MAs(193);return t.onCloseCustomerContact(r)}),d._uU(7,"cancel"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(4),d.Q6J("rowData",e.customercontactList)("columnDefs",e.CustomerContactcolumnDefs)("groupIncludeTotalFooter",!0)}}function _(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",72),d.TgZ(1,"h4",73),d._uU(2,"Transporter Details"),d.qZA(),d.TgZ(3,"button",84),d.NdJ("click",function(){return d.CHM(e),d.oxw().onAddTranspoterDetailNewrow()}),d._uU(4,"+"),d.qZA(),d.qZA(),d.TgZ(5,"div",77),d.TgZ(6,"ag-grid-angular",85),d.NdJ("rowClicked",function(t){return d.CHM(e),d.oxw().onRowSelectedTransport(t)}),d.qZA(),d.qZA(),d.TgZ(7,"div",86),d.TgZ(8,"button",87),d.NdJ("click",function(){return d.CHM(e),d.oxw().onRemoveTranspoterDetailNewrow()}),d._uU(9,"-"),d.qZA(),d.TgZ(10,"button",88),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(),r=d.MAs(195);return t.onCloseTransportContact(r)}),d._uU(11,"Cancel"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(6),d.Q6J("rowData",e.TransportList)("columnDefs",e.TransperdetailcolumnDefs)}}const k=function(e){return{"is-invalid":e}},O=function(){return[10,20,50,100,500]};let F=(()=>{class e{constructor(e,t,r,i,o){this.fb=e,this.api=t,this.dialog=r,this.modalService=i,this.el=o,this.collapsed=!1,this.OnAddProductClick=!1,this.InwardID=0,this.ReceiptNo="0",this.DID=0,this.Flag=!1,this.click=!1,this.challanid=0,this.InwardTransportID=0,this.challandid=0,this.closeResult="",this.tab=0,this.config={backdrop:!1,ignoreBackdropClick:!0},this.submitted=!1,this.firstlotno="",this.StorageId=0,this.challanquantity=0,this.allocatedQty=0,this.outquantity=0,this.inprocessquantity=0,this.balancequantity=0,this.transferdid=0,this.focusedRowKey=117,this.servicesid=0,this.ProductRate=0,this.isnew=!0,this.InwardDetailList=[],this.DetailList=[],this.newDynamicInwardDetails={},this.newDynamicInwardtransfer={},this.InwardchargesList=[],this.ChargesList=[],this.InwardTransportList=[],this.TransportList=[],this.InwardshowStorageArea=[],this.InwardshowStorage=[],this.InwardValidateStorage=[],this.storageAreaList=[],this.SaveInward=[],this.SaveInwardlist=[],this.newDynamicSaveInward={},this.GetInwardListJson={},this.InData={},this.InServiceData={},this.BindDropdownData={},this.rowSelection="multiple",this.columnDefs=[{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0},{headerName:"StorageArea",field:"StorageArea",checkboxSelection:!1,filter:"agTextColumnFilter",filterParams:{applyMiniFilterWhileTyping:!0},floatingFilter:!0},{headerName:"Qty",field:"AllocatedQty",aggFunc:"sum",cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!0,cellEditorPopupPosition:"defualt",cellStyle:e=>e.value>0?{color:"white",backgroundColor:"blue"}:{color:"black",backgroundColor:"transparent"}}],this.AppliedStoragecolumnDefs=[{headerName:"InwardDID",field:"InwardDID",hide:!1},{headerName:"LotNo",field:"LotNo",filter:!0},{headerName:"TransporterName",field:"TransporterName",filter:!0},{headerName:"TruckNo",field:"TruckNo",filter:!0},{headerName:"TransporterName",field:"TransporterName",filter:!0},{headerName:"ContainerNo",field:"ContainerNo",filter:!0},{headerName:"Applied Qty",field:"Qty",filter:!0}],this.CustomerContactcolumnDefs=[{headerName:"CustomerContactID",field:"CustomerContactID",hide:!0},{headerName:"Contact Person",field:"ContactPersonName"},{headerName:"Mobile No",field:"MobileNo"},{headerName:"Email ID",field:"EmailID"},{headerName:"Send SMS",field:"SendSMS"},{headerName:"Send Email",field:"SendEmail"}],this.TransperdetailcolumnDefs=[{headerName:"InwardTransportID",field:"InwardTransportID",hide:!0},{headerName:"TransporterName",field:"TransporterName",editable:!0},{headerName:"TruckNo",field:"TruckNo",editable:!0},{headerName:"ContainerNo",field:"ContainerNo",editable:!0}],this.InwardDetailColumns=[{header:"InwardDID",field:"InwardDID",hide:!0},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo"},{header:"BrandID",field:"BrandID",hide:!0},{header:"BrandName",field:"BrandName"},{header:"ItemsInPacket",field:"ItemsInPacket"},{header:"InQuantity",field:"InQuantity"},{header:"MFD Date",field:"MFGDate",hide:!0},{header:"ExpiryDate",field:"ExpDate",hide:!0},{header:"Remarks",field:"Remarks"},{header:"LabourContractorID",field:"LabourContractorID",hide:!0},{header:"LabourContracterName",field:"LabourContracterName"},{header:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0},{header:"StorageAreaType",field:"StorageAreaType"},{header:"SelfLife",field:"SelfLife"},{header:"Country",field:"Country"}],this.serviceColumns=[{field:"Add",cellRenderer:e=>this.checkBoxCellEditRenderer(e),hide:!1,width:10},{field:"InwardDID",hide:!0},{field:"ServiceID",hide:!0,resizable:!0},{field:"ServiceName"},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.AppliedStorageArea=[{header:"Add",field:"Add",hide:!0},{header:"InwardDID",field:"InwardDID",hide:!0},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo",hide:!0},{header:"StorageArea",field:"StorageArea",hide:!0},{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"AllocatedQuantity",field:"AllocatedQuantity",hide:!0},{header:"IsCustomerArea",field:"IsCustomerArea",hide:!0}],this.StorageAreaColumns=[{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"StorageArea",field:"StorageArea",hide:!1},{header:"AllocatedQty",field:"AllocatedQty"}],this.columns=[{minWidth:100,header:"Edit",field:"Edit",pinned:"right",right:"0px",type:"button",buttons:[{type:"icon",text:"edit",icon:"edit",tooltip:"Edit",click:e=>{console.log(e),this.tab=0}}]},{header:"InwardID",field:"InwardID",hide:!1,minWidth:100},{header:"CustomerID",field:"CustomerID",hide:!0},{header:"ReceiptNo",field:"ReceiptNo",minWidth:100},{header:"CustomerName",field:"CustomerName",minWidth:200},{header:"DocID",field:"DocID",minWidth:100},{header:"UnLoadingBy",field:"UnLoadingBy",hide:!0},{header:"InwardDate",field:"InwardDate",minWidth:100},{header:"BillingStartDate",field:"BillingStartDate",minWidth:100},{header:"PersonName",field:"PersonName",minWidth:100},{header:"Remarks",field:"Remarks",minWidth:100},{header:"Status",field:"Status",minWidth:100,hide:!0},{header:"StatusName",field:"StatusName",minWidth:100}],this.columnstest=[{header:"Action",field:"Action",minWidth:105,pinned:"left",type:"button",buttons:[{type:"icon",icon:"edit",tooltip:"Edit",click:e=>this.onEditTestListRow(e)},{color:"warn",type:"icon",icon:"delete",tooltip:"delete",pop:!0,popTitle:"Do you want to delete inward ....!!",popCloseText:"No",popOkText:"Yes",popDescription:"",popCloseColor:"warn",popOkColor:"primary",click:e=>this.onDeleteTestListRow(e)}]},{header:"InwardID",field:"InwardID",hide:!0},{header:"CustomerID",field:"CustomerID",hide:!0},{header:"ReceiptNo",field:"ReceiptNo",minWidth:80},{header:"CustomerName",field:"CustomerName",minWidth:200},{header:"DocID",field:"DocID",hide:!0},{header:"UnLoadingBy",field:"UnLoadingBy",hide:!0},{header:"InwardDate",field:"InwardDate",minWidth:100,type:"date",typeParameter:{format:"dd-MM-yyyy"}},{header:"BillingStartDate",field:"BillingStartDate",minWidth:100,type:"date",typeParameter:{format:"dd-MM-yyyy"},hide:!0},{header:"PersonName",field:"PersonName",minWidth:120},{header:"Status",field:"Status",hide:!0,minWidth:120},{header:"Remarks",field:"Remarks",minWidth:200},{header:"StatusName",field:"StatusName",minWidth:120}],this.columnsInwardList=[{headerName:"Action",floatingFilter:!1,maxWidth:150,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnInwardActions.bind(this)}},{headerName:"InwardID",field:"InwardID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ReceiptNo",field:"ReceiptNo",minWidth:80,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DocID",field:"DocID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"UnLoadingBy",field:"UnLoadingBy",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardDate",field:"InwardDate",minWidth:100,type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BillingStartDate",field:"BillingStartDate",minWidth:100,type:"date",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"PersonName",field:"PersonName",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0}],this.frameworkComponents={buttonRenderer:c},this.currentUser=this.api.getCurrentUser();const a=new s.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=a,this.productdate=new Date,this.form=this.fb.group({customer_id:[null,n.kI.required],challan_no:[null,n.kI.required],dock_name:["",n.kI.required],inward_date:["",n.kI.required],unloading_by:[null,[n.kI.required]],custremarks:[null,n.kI.required],transportername:[null,n.kI.required],truckno:[null,n.kI.required],container_no:[null,n.kI.required],selflife:[null,n.kI.required],product_id:[null,n.kI.required],brand_id:[null,n.kI.required],packetcount:[null,n.kI.required],quantity:[null,n.kI.required],service_id:[null,n.kI.required],mgfdate:[null,n.kI.required],expdate:[null,n.kI.required],labourcontractor_id:[null,n.kI.required],lot_no:[null,n.kI.required],remarks:[null,n.kI.required],country:["",n.kI.required],allocatedQty:[0,n.kI.required]})}ngOnInit(){this.BindDropdownData={InwardID:0,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""},this.BindDropdown(),this.inwardservicelist=[],console.log(this.todayDate)}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/Customer").subscribe(e=>{this.customerList=e},e=>{console.error(e)}),this.api.get("/dock").subscribe(e=>{this.dockList=e},e=>{console.error(e)}),this.api.get("/UnloadingBy").subscribe(e=>{this.unloadingList=e},e=>{console.error(e)}),this.api.get("/Remarks").subscribe(e=>{this.remarkList=e.filter(e=>1==e.ProcessID)},e=>{console.error(e)}),this.api.get("/brand").subscribe(e=>{this.brandList=e},e=>{console.error(e)}),this.api.get("/CountInPacket").subscribe(e=>{this.packateCountList=e},e=>{console.error(e)}),this.api.get("/LabourContracter").subscribe(e=>{this.labourContractorList=e},e=>{console.error(e)}),this.api.get("/StorageAreaType/servieceStorageAreaType").subscribe(e=>{this.serviceTypeList=e},e=>{console.error(e)}),this.api.post("/InwardList",this.BindDropdownData).subscribe(e=>{this.InwardList=e},e=>{console.error(e)}),this.api.post("/Inward/GetLotNo",this.BindDropdownData).subscribe(e=>{this.CurrentLotNo=e[0].LotNo},e=>{console.error(e)}),this.api.get("/StorageAreaMaster",this.BindDropdownData).subscribe(e=>{this.storageAreaList=e},e=>{console.error(e)})})}get f(){return this.form.controls}GetCustomerID(e){console.log("customer_id =",this.form.value.customer_id)}GetServicedetail(){this.api.get("/StorageAreaType/servieceStorageAreaType").subscribe(e=>{this.serviceTypeList=e},e=>{console.error(e)})}printIconClick(e){}OnApplyClick(e,t){var r,i;null==this.form.value.customer_id||0==this.form.value.customer_id?(alert("Select Customers ....."),null===(r=null==document?void 0:document.getElementById("customer_id"))||void 0===r||r.focus()):(""==this.form.value.challan_no||null==this.form.value.challan_no)&&(alert("Enter challan No ....."),null===(i=null==document?void 0:document.getElementById("challan_no"))||void 0===i||i.focus())}onCustomerContact(e){var t;if(null==this.form.value.customer_id||0==this.form.value.customer_id)alert("Select Customers ....."),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus();else{const t={InwardID:0,CustomerID:Number(this.form.value.customer_id),Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""};this.api.post("/Inward/GetCustomerContact",t).subscribe(e=>{this.customercontactList=e},e=>{console.error(e)}),this.modalService.open(e)}}onCloseCustomerContact(e){this.modalService.dismissAll(e)}onCloseTransportContact(e){const t=this.TransportList.filter(e=>e.TruckNo.length>0);this.TransportList=t,this.modalService.dismissAll(e)}OnTransportAdd(e){null==this.form.value.truckno||""==this.form.value.truckno?alert("Please .... Enter Truck Number..."):(0==this.TransportList.length?(this.InwardTransportID=1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:this.form.value.transportername,TruckNo:this.form.value.truckno,ContainerNo:this.form.value.container_no}),this.TransportList.slice()):this.InwardTransportID=this.InwardTransportID+1,this.modalService.open(e))}onRowSelectedTransport(e){this.InwardTransportID=e.data.InwardTransportID}onRemoveTranspoterDetailNewrow(){const e=this.TransportList.filter(e=>e.InwardTransportID!=this.InwardTransportID);this.TransportList=e}onAddTranspoterDetailNewrow(){this.InwardTransportID=this.InwardTransportID+1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:"",TruckNo:"",ContainerNo:""});let e=this.TransportList.filter(e=>e);this.TransportList=e}OnProductSelect(e){this.api.get("/service/InwardService?productID="+this.form.value.product_id+"&customerID="+this.form.value.customer_id).subscribe(e=>{this.inwardservicelist=e,console.log(this.inwardservicelist)},e=>{console.error(e)})}OnBrandSelect(e){}OnServiceSelect(e){var t,r;return null==this.form.value.customer_id?(alert("Please .... select Customers"),this.form.controls.product_id.reset(),this.form.controls.service_id.reset(),this.inwardservicelist=[],void(null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus())):null==this.form.value.product_id?(alert("Please .... select Product"),this.form.controls.product_id.reset(),this.form.controls.service_id.reset(),this.inwardservicelist=[],void(null===(r=null==document?void 0:document.getElementById("product_id"))||void 0===r||r.focus())):(this.InServiceData={InwardID:0,CustomerID:Number(this.form.value.customer_id),Remarks:"",CreatedBy:0,serviceID:Number(this.form.value.service_id),ProductID:Number(this.form.value.product_id),CompanyId:0,WarehouseId:0,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""},this.api.post("/Inward/GetServiceId",this.InServiceData).subscribe(e=>{this.servicesid=e[0].StorageAreaTypeID},e=>{console.error(e)}),void this.api.post("/Inward/GetInwardProductRate",this.InServiceData).subscribe(e=>{var t;console.log(" mess =>"+e[0].Message),""!==e[0].Message&&(alert(""+e[0].Message),this.form.controls.product_id.reset(),this.form.controls.service_id.reset(),this.inwardservicelist=[],null===(t=null==document?void 0:document.getElementById("product_id"))||void 0===t||t.focus())},e=>{console.error(e)}))}OnLabourSelect(e){}onRowDblclicked(e,t){this.Flag=!0,this.GetServicedetail(),console.log(this.InwardTransportList),this.form.controls.product_id.reset(),this.form.controls.brand_id.reset(),this.form.controls.packetcount.reset(),this.form.controls.service_id.reset(),this.form.controls.mgfdate.reset(),this.form.controls.expdate.reset(),this.form.controls.remarks.reset(),this.form.controls.selflife.setValue("0"),this.form.controls.quantity.reset(),this.form.controls.country.setValue(""),this.CurrentLotNo=Number(this.CurrentLotNo)+1,this.form.patchValue({brand_id:e.cellSelection[0].rowData.BrandID,product_id:e.cellSelection[0].rowData.ProductID,packetcount:e.cellSelection[0].rowData.ItemsInPacket,quantity:e.cellSelection[0].rowData.InQuantity,selflife:e.cellSelection[0].rowData.SelfLife,mgfdate:e.cellSelection[0].rowData.MFGDate,expdate:e.cellSelection[0].rowData.ExpDate,lot_no:e.cellSelection[0].rowData.LotNo,country:e.cellSelection[0].rowData.Country,service_id:e.cellSelection[0].rowData.StorageAreaTypeID,labourcontractor_id:e.cellSelection[0].rowData.LabourContractorID}),this.DID=e.cellSelection[0].rowData.InwardDID,this.servicesid=e.cellSelection[0].rowData.ServiceID,this.challanid=e.cellSelection[0].rowData.ChallanID,this.challandid=e.cellSelection[0].rowData.ChallanDID,this.firstlotno=e.cellSelection[0].rowData.FirstLotNo,this.challanquantity=e.cellSelection[0].rowData.ChallanQuantity,this.outquantity=e.cellSelection[0].rowData.OutQuantity,this.inprocessquantity=e.cellSelection[0].rowData.InprocessQuantity,this.transferdid=e.cellSelection[0].rowData.TransferDID,this.isnew=e.cellSelection[0].rowData.IsNew,this.inwardservicelist=[],this.inwardservicelist=this.InwardchargesList.filter(t=>t.InwardDID==e.cellSelection[0].rowData.InwardDID),this.inwardservicelist.forEach(e=>{e.Add=!0}),this.api.get("/service/InwardService?productID="+e.cellSelection[0].rowData.ProductID+"&customerID="+this.form.value.customer_id).subscribe(e=>{this.inwardserviTest=e,this.SetServiceTo_inwardservicelist()},e=>{console.error(e)}),this.GetStorageAreaList();const r=this.InwardshowStorageArea.filter(e=>e.InwardDID==this.DID),i=this.storageAreaList;i.forEach(e=>(r.forEach(t=>{e.StorageAreaID===t.StorageAreaID&&(e.AllocatedQty=t.StorageQuantity)}),e)),this.storageAreaList=[],this.storageAreaList=i;var o=this.storageAreaList.map(e=>e.AllocatedQty).reduce((e,t)=>t+e);this.allocatedQty=o,this.form.controls.allocatedQty.setValue(this.allocatedQty)}SetServiceTo_inwardservicelist(){if(this.inwardserviTest.length>0){let e=this.inwardservicelist.concat(this.inwardserviTest.filter(e=>!this.inwardservicelist.find(t=>t.ServiceID==e.ServiceID)));this.inwardservicelist=e}}OnAddClick(){var e,t,r,i,o,a;if(this.storageAreaList.length>0&&(this.InwardValidateStorage=this.storageAreaList.filter(e=>e.AllocatedQty>0),this.allocatedQty=this.InwardValidateStorage.length>0?this.InwardValidateStorage.map(e=>e.AllocatedQty).reduce((e,t)=>t+e):0),0==this.serviceTypeList.length&&this.GetServicedetail(),0==this.TransportList.length&&(this.InwardTransportID=1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:this.form.value.transportername,TruckNo:this.form.value.truckno,ContainerNo:this.form.value.container_no}),this.TransportList.slice()),null==this.form.value.truckno||""==this.form.value.truckno)return alert("Please .... Enter Truck number"),void(null===(e=null==document?void 0:document.getElementById("truckno"))||void 0===e||e.focus());if(null==this.form.value.product_id)return alert("Please .... select Product"),void(null===(t=null==document?void 0:document.getElementById("product_id"))||void 0===t||t.focus());if(null==this.form.value.quantity)return alert("Please... Enter Quantity ..!!!"),void(null===(r=null==document?void 0:document.getElementById("quantity"))||void 0===r||r.focus());if(null==this.form.value.service_id)return alert("Please... Select Service Type ..!!!"),void(null===(i=null==document?void 0:document.getElementById("service_id"))||void 0===i||i.focus());if(null==this.form.value.labourcontractor_id)return alert("Please... Select labour contractor ..!!!"),void(null===(o=null==document?void 0:document.getElementById("labourcontractor_id"))||void 0===o||o.focus());if(this.form.value.quantity!=this.allocatedQty)return alert("Please... Add storage area quntity ..!!!"),void(null===(a=null==document?void 0:document.getElementById("BtnStorageArea"))||void 0===a||a.focus());if(1==this.Flag){if(0==this.ChargesList.length||0==this.InwardchargesList.length){this.ChargesList=[],this.inwardservicelist.forEach(e=>{1==e.Add&&this.ChargesList.push({InwardDID:this.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.ChargesList.slice();var n=this.storageAreaList.map(e=>e.AllocatedQty).reduce((e,t)=>t+e);this.allocatedQty=n}else if(0==this.ChargesList.length){const e=this.InwardchargesList.filter(e=>e.InwardDID==this.DID);this.ChargesList=e,n=this.storageAreaList.map(e=>e.AllocatedQty).reduce((e,t)=>t+e),this.allocatedQty=n}const e=this.InwardDetailList.filter(e=>e.InwardDID!=this.DID);this.InwardDetailList=e;const t=this.InwardchargesList.filter(e=>e.InwardDID!=this.DID);this.InwardchargesList=t;const r=this.InwardTransportList.filter(e=>e.InwardDID!=this.DID);this.InwardTransportList=r;const i=this.InwardshowStorageArea.filter(e=>e.InwardDID!=this.DID);this.InwardshowStorageArea=i}else 0==this.Flag&&(this.DID=this.DID+1,this.allocatedQty=0);(null==this.form.value.selflife||""==this.form.value.selflife)&&this.form.controls.selflife.setValue("0"),null==this.form.value.remarks&&(this.form.value.remarks=" "),null==this.form.value.brand_id&&(this.form.value.brand_id=" ");var l=this.brandList.filter(e=>e.BrandID==this.form.value.brand_id),s=this.productList.filter(e=>e.ProductID==this.form.value.product_id),d=this.serviceTypeList.filter(e=>e.StorageAreaTypeID==this.form.value.service_id),c=this.labourContractorList.filter(e=>e.LabourContractorID==this.form.value.labourcontractor_id);0==l.length&&l.push({BrandID:0,BrandName:""}),0==d.length&&d.push({BrandID:0,BrandName:""}),this.newDynamicInwardDetails=[],this.DetailList=[],this.newDynamicInwardtransfer=[],this.newDynamicInwardDetails={InwardDID:this.DID,ChallanID:this.challanid,ChallanDID:this.challandid,ProductID:this.form.value.product_id,ProductName:s[0].ProductName,LotNo:this.form.value.lot_no,FirstLotNo:this.firstlotno,BrandID:this.form.value.brand_id,BrandName:l[0].BrandName,ItemsInPacket:this.form.value.packetcount,InQuantity:this.form.value.quantity,ChallanQuantity:this.challanquantity,OutQuantity:this.outquantity,InprocessQuantity:this.inprocessquantity,BalanceQuantity:this.form.value.quantity,MFGDate:this.todayDate,ExpDate:this.todayDate,Remarks:this.form.value.remarks.Remarks,TransferDID:this.transferdid,LabourContractorID:this.form.value.labourcontractor_id,LabourContracterName:c[0].ContractorName,StorageAreaTypeID:this.servicesid,StorageAreaType:d[0].ServiceName,SelfLife:this.form.value.selflife,IsNew:this.isnew,Country:this.form.value.country,ServiceID:this.form.value.service_id},this.DetailList=this.InwardDetailList,this.DetailList.push(this.newDynamicInwardDetails),this.InwardDetailList=this.DetailList.slice(),console.log("this.InwardDetailList",this.InwardDetailList),0==this.ChargesList.length||0==this.InwardchargesList.length?(this.ChargesList=[],this.inwardservicelist.forEach(e=>{1==e.Add&&this.InwardchargesList.push({InwardDID:this.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.InwardchargesList.slice()):(this.ChargesList.forEach(e=>{this.InwardchargesList.push({InwardDID:this.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.InwardchargesList.slice()),this.TransportList.forEach(e=>{this.InwardTransportList.push({InwardDID:this.DID,LotNo:this.form.value.lot_no,TransporterName:null==e.TransporterName?"A":e.TransporterName,TruckNo:null==e.TruckNo?"B":e.TruckNo,ContainerNo:null==e.ContainerNo?"C":e.ContainerNo,Qty:this.form.value.quantity})}),this.InwardchargesList.slice(),this.storageAreaList.forEach(e=>{e.AllocatedQty>0&&this.InwardshowStorageArea.push({InwardDID:this.DID,StorageAreaID:e.StorageAreaID,StorageQuantity:e.AllocatedQty,LotNo:this.form.value.lot_no,IsCustomerAreaSelected:!1})}),this.InwardshowStorageArea.slice(),console.log(this.InwardDetailList),console.log(this.InwardchargesList),console.log(this.InwardTransportList),console.log(this.InwardshowStorageArea),this.form.controls.product_id.reset(),this.form.controls.brand_id.reset(),this.form.controls.packetcount.reset(),this.form.controls.service_id.reset(),this.form.controls.mgfdate.reset(),this.form.controls.expdate.reset(),this.form.controls.remarks.reset(),this.form.controls.selflife.setValue("0"),this.form.controls.quantity.reset(),this.form.controls.country.setValue(""),this.CurrentLotNo=Number(this.CurrentLotNo)+1,this.ChargesList=[],this.inwardservicelist=[],this.storageAreaList=[],this.Flag=!1,this.GetStorageAreaList()}GetStorageAreaList(){this.api.get("/StorageAreaMaster?WarehouseID="+this.currentUser.warehouseId).subscribe(e=>{this.storageAreaList=e,this.allocatedQty=0},e=>{console.error(e)})}openStorageArea(e){var t;if(this.allocatedQty=0,null==this.form.value.quantity||0==this.form.value.quantity)alert("Please .... Enter Quantity"),null===(t=null==document?void 0:document.getElementById("quantity"))||void 0===t||t.focus();else{if(1==this.Flag){const e=this.InwardshowStorageArea.filter(e=>e.InwardDID==this.DID),t=this.storageAreaList;t.forEach(t=>(e.forEach(e=>{t.StorageAreaID===e.StorageAreaID&&(t.AllocatedQty=e.StorageQuantity)}),t)),this.storageAreaList=[],this.storageAreaList=t;var r=this.storageAreaList.map(e=>e.AllocatedQty).reduce((e,t)=>t+e);this.allocatedQty=r,this.form.controls.allocatedQty.setValue(this.allocatedQty)}else this.storageAreaList.length>0&&(this.InwardValidateStorage=this.storageAreaList.filter(e=>e.AllocatedQty>0),this.InwardValidateStorage.length>0?(this.allocatedQty=this.InwardValidateStorage.map(e=>e.AllocatedQty).reduce((e,t)=>t+e),this.form.controls.allocatedQty.setValue(this.allocatedQty)):(this.allocatedQty=0,this.form.controls.allocatedQty.setValue(this.allocatedQty)));this.modalService.open(e,this.config)}}oncloseStoragearea(e){var t=this.storageAreaList.map(e=>e.AllocatedQty).reduce((e,t)=>t+e);this.form.value.quantity==t?(this.onStorageGridRefresh(),this.modalService.dismissAll(e),this.allocatedQty=0):(alert("Please, Enter correct Quantity ..."),this.onStorageGridRefresh(),this.modalService.dismissAll(e),this.allocatedQty=0),console.log(this.storageAreaList)}onSaveStorageArea(e){var t=this.storageAreaList.map(e=>e.AllocatedQty).reduce((e,t)=>t+e);this.form.value.quantity==t?(this.onStorageGridRefresh(),this.modalService.dismissAll(e)):(alert("Please, Enter correct Quantity ..."),this.onStorageGridRefresh(),this.modalService.open(e),this.allocatedQty=0),console.log(this.storageAreaList)}onCellKeyPress(e){this.allocatedQty=0,this.StorageId=e.data.StorageAreaID;var t=this.storageAreaList.map(e=>e.AllocatedQty).reduce((e,t)=>t+e);this.allocatedQty=t,this.form.value.quantity>=this.allocatedQty?(this.form.controls.allocatedQty.setValue(this.allocatedQty),this.storageAreaList.slice()):(this.storageAreaList.forEach(t=>{t.StorageAreaID==e.data.StorageAreaID&&(t.AllocatedQty=0)}),alert("Please .... enter proper quantity")),this.onStorageGridRefresh()}onStorageGridRefresh(){this.allocatedQty=0;var e=this.storageAreaList.map(e=>e.AllocatedQty).reduce((e,t)=>t+e);this.allocatedQty=e,this.form.controls.allocatedQty.setValue(this.allocatedQty);let t=this.storageAreaList.filter(e=>e);this.storageAreaList=t}Ondeleteclick(e){console.log(e)}tabInwardchange(e){this.tab=e,this.GetInwardList()}OnSaveinward(){var e,t,r,i,o;return null==this.form.value.customer_id||""==this.form.value.customer_id?(alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus())):null==this.form.value.dock_name||""==this.form.value.dock_name?(alert("Please .... select Dock name ...."),void(null===(t=null==document?void 0:document.getElementById("dock_name"))||void 0===t||t.focus())):null==this.form.value.inward_date?(alert("Please... Enter inward date ..!!!"),void(null===(r=null==document?void 0:document.getElementById("inward_date"))||void 0===r||r.focus())):null==this.form.value.unloading_by?(alert("Please... Select unloading by ..!!!"),void(null===(i=null==document?void 0:document.getElementById("unloading_by"))||void 0===i||i.focus())):null==this.form.value.truckno?(alert("Please... Select truck no ..!!!"),void(null===(o=null==document?void 0:document.getElementById("truckno"))||void 0===o||o.focus())):void(0!=this.InwardDetailList.length?0!=this.InwardshowStorageArea.length?0!=this.InwardTransportList.length?(this.click=!0,this.newDynamicSaveInward={InwardID:this.InwardID,CustomerID:this.form.value.customer_id,CompanyID:this.currentUser.companyId,WarehouseID:this.currentUser.warehouseId,InwardDate:this.form.value.inward_date,Remarks:null==this.form.value.custremarks?"":this.form.value.custremarks,FinancialYearID:this.currentUser.FinantialYearId,UserID:this.currentUser.userId,ReceiptNo:this.ReceiptNo,dockID:this.form.value.dock_name,UnLoadingBy:this.form.value.unloading_by,StorageAreaMasterID:1,InwardDetailModel:this.InwardDetailList,InwardChargesModel:this.InwardchargesList,InwardLocationModel:this.InwardshowStorageArea,InwardTransperModel:this.InwardTransportList},this.api.post("/Inward/SaveInward",this.newDynamicSaveInward).subscribe(e=>{this.dialog.alert(e.Table[0].Column1),this.OnResetInward()},e=>{console.error(e)}),this.GetInwardList(),console.log(this.newDynamicSaveInward)):alert("Please... Add transport Details..!!!"):alert("Please... Add Storage Details ..!!!"):alert("Please... Add Product Details ..!!!"))}GetInwardList(){this.GetInwardListJson={CompanyId:this.currentUser.companyId,WarehouseId:this.currentUser.warehouseId,FinantialYearId:this.currentUser.FinantialYearId},this.api.post("/InwardList",this.GetInwardListJson).subscribe(e=>{this.InwardList=e},e=>{console.error(e)})}onKeyfilter(e){this.GetInwardListJson={CompanyId:this.currentUser.companyId,WarehouseId:this.currentUser.warehouseId,FinantialYearId:this.currentUser.FinantialYearId},this.api.post("/InwardList",this.GetInwardListJson).subscribe(t=>{this.InwardList=t;var r=e;let i=this.InwardList.filter(e=>e.CustomerName.toLowerCase().indexOf(r.toLowerCase())>=0||e.BillingStartDate.toLowerCase().indexOf(r.toLowerCase())>=0||e.InwardDate.toLowerCase().indexOf(r.toLowerCase())>=0||e.PersonName.toLowerCase().indexOf(r.toLowerCase())>=0||e.ReceiptNo.toLowerCase().indexOf(r.toLowerCase())>=0||e.StatusName.toLowerCase().indexOf(r.toLowerCase())>=0);this.InwardList=i,console.log(this.InwardList)},e=>{console.error(e)})}SetDataTo_Inwardlist(){this.api.get("/InwardList?companyId="+this.currentUser.companyId+"&warehouseId="+this.currentUser.warehouseId+"&finantialYearId="+this.currentUser.FinantialYearId).subscribe(e=>{this.InwardList=[],this.InwardList=e},e=>{console.error(e)})}onDeleteTestListRow(e){if(console.log(e),51==e.Status){const t={InwardID:e.InwardID,CustomerID:Number(e.CustomerID),Remarks:0,CreatedBy:Number(this.currentUser.userId),serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""};console.log(t)}else 52==e.Status||0==e.Status?(console.log("Sorry,Inward is under process. You can't Delete ....!!!"),alert("Sorry,Inward is under process. You can't Delete....!!!")):53==e.Status?(console.log("Sorry,Outward already generated.You can't Delete....!!!"),alert("Sorry,Outward already generated.You can't Delete....!!!")):54==e.Status&&(console.log("Sorry,Inward is already cancelled ....!!!"),alert("Sorry,Inward is already cancelled ....!!!"))}OnResetInward(){this.click=!1,this.form.reset(),this.BindDropdown(),this.InwardTransportID=0;const e=new s.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=e,this.form.controls.inward_date.setValue(this.todayDate),this.InwardDetailList=[],this.customercontactList=[],this.inwardservicelist=[],this.storageAreaList=[],this.TransportList=[],this.GetStorageAreaList(),this.DID=0,this.InwardID=0,this.ReceiptNo="0"}onEditTestListRow(e){const t=new s.uU("en-US").transform(e.InwardDate,"yyyy-MM-dd hh:mm:ss");51==e.Status?(this.api.post("/Inward/GetCustomerProducts?customerid="+e.CustomerID+"&warehouseid="+this.currentUser.warehouseId).subscribe(e=>{this.productList=e},e=>{console.error(e)}),this.GetStorageAreaList(),this.InData={InwardID:e.InwardID,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:0,WarehouseId:0,FinantialYearId:0,challan:0,StorageAreaMasterID:0,FinancialYear:""},this.api.post("/Inward/GetInwardDetailsByID",this.InData).subscribe(r=>{this.InwardDetailList=r.Table,this.InwardshowStorageArea=r.Table1,this.InwardTransportList=r.Table2,this.InwardchargesList=r.Table3,this.InwardID=e.InwardID,this.InwardTransportID=0,this.ReceiptNo=e.ReceiptNo,this.InwardTransportList.filter((e,t,r)=>r.findIndex(t=>t.TruckNo===e.TruckNo)===t).forEach(e=>{this.InwardTransportID=this.InwardTransportID+1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:null==e.TransporterName?"A":e.TransporterName,TruckNo:null==e.TruckNo?"B":e.TruckNo,ContainerNo:null==e.ContainerNo?"C":e.ContainerNo})}),this.TransportList.slice(),this.form.setValue({customer_id:null==e.CustomerID?"":e.CustomerID,dock_name:e.DocID,challan_no:0,inward_date:t,unloading_by:e.UnLoadingBy,custremarks:e.Remarks,transportername:null==this.InwardTransportList[0].TransporterName?"":this.InwardTransportList[0].TransporterName,truckno:null==this.InwardTransportList[0].TruckNo?"":this.InwardTransportList[0].TruckNo,container_no:null==this.InwardTransportList[0].TruckNo?"":this.InwardTransportList[0].TruckNo,selflife:"0",product_id:0,brand_id:0,packetcount:0,quantity:0,service_id:0,mgfdate:null,expdate:null,labourcontractor_id:0,lot_no:this.CurrentLotNo,remarks:"",country:"",allocatedQty:0})},e=>{console.log(e)}),this.tab=0,console.log(this.InwardTransportList),console.log(this.TransportList)):52==e.Status||0==e.Status?(console.log("Sorry,Inward is under process. You can't edit ....!!!"),alert("Sorry,Inward is under process. You can't edit ....!!!")):53==e.Status?(console.log("Sorry,Outward already generated.You can't edit ....!!!"),alert("Sorry,Outward already generated.You can't edit ....!!!")):54==e.Status&&(console.log("Sorry,Inward is already cancelled ....!!!"),alert("Sorry,Inward is already cancelled ....!!!"))}contentReady(e){this.collapsed||(this.collapsed=!0,e.component.expandRow(["EnviroCare"]))}checkBoxCellEditRenderer(e){const t=document.createElement("input");return t.type="checkbox",t.value="false",t.checked=e.value,t.addEventListener("click",t=>{e.setValue(1!=e.value),this.ChargesList=[],this.inwardservicelist.forEach(e=>{1==e.Add&&this.ChargesList.push({InwardDID:this.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.ChargesList.slice(),console.log(this.ChargesList)}),t}OnInwardActions(e){if("Delete"==String(e.actions))if(51==e.rowData.Status){const t={InwardID:e.rowData.InwardID,CustomerID:Number(e.rowData.CustomerID),Remarks:0,CreatedBy:Number(this.currentUser.userId),serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""};console.log(t),this.api.post("/Inward/DeleteInward",t).subscribe(e=>{this.dialog.alert(e.Table[0].message),this.SetDataTo_Inwardlist()},e=>{console.error(e)})}else 52==e.rowData.Status||0==e.rowData.Status?this.dialog.alert("Sorry,Inward is under process. You can't Delete....!!!"):53==e.rowData.Status?this.dialog.alert("Sorry,Outward already generated.You can't Delete....!!!"):54==e.rowData.Status&&this.dialog.alert("Sorry,Inward is already cancelled ....!!!");else if("Edit"==String(e.actions)){const t=new s.uU("en-US").transform(e.rowData.InwardDate,"yyyy-MM-dd hh:mm:ss");51==e.rowData.Status?(this.api.post("/Inward/GetCustomerProducts?customerid="+e.rowData.CustomerID+"&warehouseid="+this.currentUser.warehouseId).subscribe(e=>{this.productList=e},e=>{console.error(e)}),this.GetStorageAreaList(),this.InData={InwardID:e.rowData.InwardID,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:0,WarehouseId:0,FinantialYearId:0,challan:0,StorageAreaMasterID:0,FinancialYear:""},this.api.post("/Inward/GetInwardDetailsByID",this.InData).subscribe(r=>{this.InwardDetailList=r.Table,this.InwardshowStorageArea=r.Table1,this.InwardTransportList=r.Table2,this.InwardchargesList=r.Table3,this.InwardID=e.rowData.InwardID,this.InwardTransportID=0,this.ReceiptNo=e.rowData.ReceiptNo,this.InwardTransportList.filter((e,t,r)=>r.findIndex(t=>t.TruckNo===e.TruckNo)===t).forEach(e=>{this.InwardTransportID=this.InwardTransportID+1,this.TransportList.push({InwardTransportID:this.InwardTransportID,TransporterName:null==e.TransporterName?"A":e.TransporterName,TruckNo:null==e.TruckNo?"B":e.TruckNo,ContainerNo:null==e.ContainerNo?"C":e.ContainerNo})}),this.TransportList.slice(),this.form.setValue({customer_id:null==e.rowData.CustomerID?"":e.rowData.CustomerID,dock_name:e.rowData.DocID,challan_no:0,inward_date:t,unloading_by:e.rowData.UnLoadingBy,custremarks:e.rowData.Remarks,transportername:null==this.InwardTransportList[0].TransporterName?"":this.InwardTransportList[0].TransporterName,truckno:null==this.InwardTransportList[0].TruckNo?"":this.InwardTransportList[0].TruckNo,container_no:null==this.InwardTransportList[0].TruckNo?"":this.InwardTransportList[0].TruckNo,selflife:"0",product_id:0,brand_id:0,packetcount:0,quantity:0,service_id:0,mgfdate:null,expdate:null,labourcontractor_id:0,lot_no:this.CurrentLotNo,remarks:"",country:"",allocatedQty:0})},e=>{console.log(e)}),this.tab=0):52==e.rowData.Status||0==e.rowData.Status?this.dialog.alert("Sorry,Inward is under process. You can't edit ....!!!"):53==e.rowData.Status?this.dialog.alert("Sorry,Outward already generated.You can't edit ....!!!"):54==e.rowData.Status&&this.dialog.alert("Sorry,Inward is already cancelled ....!!!")}}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(n.qu),d.Y36(l.sM),d.Y36(u.cP),d.Y36(h.FF),d.Y36(d.SBq))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-inward"]],decls:222,vars:67,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Inward"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm",3,"change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-2","col-md-2"],["type","text","formControlName","challan_no","id","challan_no","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],[1,"btn","btn-secondary","btn-sm",2,"width","100% !important","margin-top","20px !important",3,"click"],[1,"col-sm-6","col-md-3"],["formControlName","dock_name","id","dock_name",1,"form-control","form-control-sm"],["type","datetime-local","formControlName","inward_date","id","inward_date","placeholder","yyyy-MM-dd","name","inward_date",1,"form-control","form-control-rounded",3,"ngModel"],["formControlName","unloading_by","id","unloading_by",1,"form-control","form-control-sm"],["formControlName","custremarks","id","custremarks",1,"form-control","form-control-sm"],[1,"col-12"],[1,"font-weight-bold"],[1,"row"],[1,"col"],["type","text","formControlName","transportername","id","transportername","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],["type","text","formControlName","truckno","id","truckno","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],["type","text","formControlName","container_no","id","container_no","placeholder","","autocomplete","on",1,"form-control","form-control-sm"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],[1,"col-9"],[1,"col-sm-6","col-md-4"],["formControlName","product_id","id","product_id",1,"form-control","form-control-sm",3,"change"],["formControlName","brand_id","id","brand_id",1,"form-control","form-control-sm",3,"change"],["formControlName","packetcount","id","packetcount",1,"form-control","form-control-sm"],["type","text","formControlName","quantity","id","quantity","autocomplete","off","placeholder","","required","",1,"form-control","form-control-sm"],["formControlName","service_id","id","service_id",1,"form-control","form-control-sm",3,"change"],["disabled","",3,"ngValue"],["type","text","formControlName","selflife","id","selflife","placeholder","",1,"form-control","form-control-sm"],["type","date","formControlName","mgfdate","id","mgfdate","placeholder","",1,"form-control","form-control-sm"],["type","date","formControlName","expdate","id","expdate","placeholder","",1,"form-control","form-control-sm"],["formControlName","labourcontractor_id","id","labourcontractor_id",1,"form-control","form-control-sm",3,"change"],["type","text","formControlName","lot_no","id","lot_no","placeholder","","readonly","",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["formControlName","remarks","id","remarks",1,"form-control","form-control-sm"],[3,"ngValue",4,"ngFor","ngForOf"],["type","text","formControlName","country","id","country","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],[1,"col-3"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"id","disabled","click"],["id","BtnStorageArea",1,"btn","btn-secondary","btn-sm",2,"width","100px !important","margin-top","20px !important",3,"click"],[1,"btn","btn-secondary","btn-sm",2,"width","100px !important","margin-top","20px !important"],[1,"btn","btn-secondary","btn-sm",2,"width","105px !important","margin-top","20px !important"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["StorageAreacontent",""],["CustomerContactcontent",""],["style","width:620px;"],["TranspoterDetailcontent",""],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridlist",""],[1,"col-md-6"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"click"],["label","Inward List"],[1,"form-control-sm"],["type","text","id","filtertext",1,"form-control-sm",3,"keyup"],["filtertext",""],[2,"height","800px"],[2,"height","790px",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSize"],["label","Delivery Order List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[3,"ngValue"],[1,"modal-header"],["id","modal-basic-title"],[1,"col-6"],["formControlName","quantity","id","quantity","readonly","",2,"width","50%"],["formControlName","allocatedQty","id","allocatedQty","readonly","",2,"width","50%"],[1,"modal-body"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","cellValueChanged"],["LocationGrid",""],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-info",3,"click"],["rowSelection","multiple",1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","groupIncludeTotalFooter"],["type","button",1,"btn","btn-secondary","btn-lg",3,"click"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","rowClicked"],[1,"modalfooter"],["type","button",1,"btn","btn-danger",2,"float","left","width","60px",3,"click"],["type","button",1,"btn","btn-info",2,"float","right","width","100px",3,"click"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"mat-card"),d.TgZ(3,"mat-tab-group",2),d.NdJ("selectedIndexChange",function(e){return t.tabInwardchange(e)})("selectedIndexChange",function(e){return t.tab=e}),d.TgZ(4,"mat-tab",3),d.TgZ(5,"form",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"label"),d._uU(11,"Customer Name"),d.qZA(),d.TgZ(12,"select",9),d.NdJ("change",function(e){return t.GetCustomerID(e)}),d.TgZ(13,"option",10),d._uU(14,"Select"),d.qZA(),d.YNc(15,Z,2,2,"option",11),d.qZA(),d._UZ(16,"mat-error",12),d.qZA(),d.qZA(),d.TgZ(17,"div",13),d.TgZ(18,"div",8),d.TgZ(19,"label"),d._uU(20,"Challan No."),d.qZA(),d._UZ(21,"input",14),d.qZA(),d.qZA(),d.TgZ(22,"div",13),d.TgZ(23,"div",8),d.TgZ(24,"button",15),d.NdJ("click",function(){return t.OnApplyClick(t.f.customer_id.value,t.f.challan_no.value)}),d._uU(25," Apply "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(26,"div",13),d.TgZ(27,"div",8),d.TgZ(28,"button",15),d.NdJ("click",function(){d.CHM(e);const r=d.MAs(193);return t.onCustomerContact(r)}),d._uU(29," Contact "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(30,"div",16),d.TgZ(31,"div",8),d.TgZ(32,"label"),d._uU(33,"Dock Name"),d.qZA(),d.TgZ(34,"select",17),d.TgZ(35,"option",10),d._uU(36,"Select "),d.qZA(),d.YNc(37,y,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(38,"div",16),d.TgZ(39,"div",8),d.TgZ(40,"label"),d._uU(41,"Inward Date"),d.qZA(),d._UZ(42,"input",18),d.ALo(43,"date"),d.qZA(),d.qZA(),d.TgZ(44,"div",16),d.TgZ(45,"div",8),d.TgZ(46,"label"),d._uU(47,"Unloading By"),d.qZA(),d.TgZ(48,"select",19),d.TgZ(49,"option",10),d._uU(50,"Select "),d.qZA(),d.YNc(51,T,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(52,"div",16),d.TgZ(53,"div",8),d.TgZ(54,"label"),d._uU(55,"Remarks"),d.qZA(),d.TgZ(56,"select",20),d.TgZ(57,"option",10),d._uU(58,"Select "),d.qZA(),d.YNc(59,b,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(60,"hr"),d.TgZ(61,"div",21),d.TgZ(62,"p",22),d._uU(63,"Transporter Details "),d.qZA(),d.TgZ(64,"div",23),d.TgZ(65,"div",24),d.TgZ(66,"div",23),d.TgZ(67,"div",16),d.TgZ(68,"div",8),d.TgZ(69,"label"),d._uU(70,"Transporter Name"),d.qZA(),d._UZ(71,"input",25),d.qZA(),d.qZA(),d.TgZ(72,"div",16),d.TgZ(73,"div",8),d.TgZ(74,"label"),d._uU(75,"Truck No"),d.qZA(),d._UZ(76,"input",26),d.qZA(),d.qZA(),d.TgZ(77,"div",16),d.TgZ(78,"div",8),d.TgZ(79,"label"),d._uU(80,"Container No"),d.qZA(),d._UZ(81,"input",27),d.qZA(),d.qZA(),d.TgZ(82,"div",16),d.TgZ(83,"div",8),d.TgZ(84,"button",28),d.NdJ("click",function(){d.CHM(e);const r=d.MAs(195);return t.OnTransportAdd(r)}),d._uU(85," Add "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(86,"hr"),d.TgZ(87,"div",21),d.TgZ(88,"p",22),d._uU(89," Inward Details "),d.qZA(),d.TgZ(90,"div",23),d.TgZ(91,"div",29),d.TgZ(92,"div",23),d.TgZ(93,"div",30),d.TgZ(94,"div",8),d.TgZ(95,"label"),d._uU(96,"Product Name"),d.qZA(),d.TgZ(97,"select",31),d.NdJ("change",function(e){return t.OnProductSelect(e)}),d.TgZ(98,"option",10),d._uU(99,"Select "),d.qZA(),d.YNc(100,C,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(101,"div",30),d.TgZ(102,"div",8),d.TgZ(103,"label"),d._uU(104,"Brand Name "),d.qZA(),d.TgZ(105,"select",32),d.NdJ("change",function(e){return t.OnBrandSelect(e)}),d.TgZ(106,"option",10),d._uU(107,"Select "),d.qZA(),d.YNc(108,N,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(109,"div",30),d.TgZ(110,"div",8),d.TgZ(111,"label"),d._uU(112,"Count In Packet"),d.qZA(),d.TgZ(113,"select",33),d.TgZ(114,"option",10),d._uU(115,"Select "),d.qZA(),d.YNc(116,w,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(117,"div",30),d.TgZ(118,"div",8),d.TgZ(119,"label"),d._uU(120,"Quantity"),d.qZA(),d._UZ(121,"input",34),d.qZA(),d.qZA(),d.TgZ(122,"div",30),d.TgZ(123,"div",8),d.TgZ(124,"label"),d._uU(125,"Service Type"),d.qZA(),d.TgZ(126,"select",35),d.NdJ("change",function(e){return t.OnServiceSelect(e)}),d.TgZ(127,"option",36),d._uU(128,"Select "),d.qZA(),d.YNc(129,A,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(130,"div",30),d.TgZ(131,"div",8),d.TgZ(132,"label"),d._uU(133,"Self Life"),d.qZA(),d._UZ(134,"input",37),d.qZA(),d.qZA(),d.TgZ(135,"div",30),d.TgZ(136,"div",8),d.TgZ(137,"label"),d._uU(138,"Mfg Date"),d.qZA(),d._UZ(139,"input",38),d.qZA(),d.qZA(),d.TgZ(140,"div",30),d.TgZ(141,"div",8),d.TgZ(142,"label"),d._uU(143,"Expiry Date"),d.qZA(),d._UZ(144,"input",39),d.qZA(),d.qZA(),d.TgZ(145,"div",30),d.TgZ(146,"div",8),d.TgZ(147,"label"),d._uU(148,"Labour Contracter"),d.qZA(),d.TgZ(149,"select",40),d.NdJ("change",function(e){return t.OnLabourSelect(e)}),d.TgZ(150,"option",36),d._uU(151,"Select "),d.qZA(),d.YNc(152,S,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(153,"div",30),d.TgZ(154,"div",8),d.TgZ(155,"label"),d._uU(156,"Lot No"),d.qZA(),d.TgZ(157,"input",41),d.NdJ("ngModelChange",function(e){return t.CurrentLotNo=e}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(158,"div",30),d.TgZ(159,"div",8),d.TgZ(160,"label"),d._uU(161,"Remarks"),d.qZA(),d.TgZ(162,"select",42),d.TgZ(163,"option",36),d._uU(164,"Select "),d.qZA(),d.YNc(165,L,2,2,"option",43),d.qZA(),d.qZA(),d.qZA(),d.TgZ(166,"div",30),d.TgZ(167,"div",8),d.TgZ(168,"label"),d._uU(169,"Country"),d.qZA(),d._UZ(170,"input",44),d.qZA(),d.qZA(),d.TgZ(171,"div",45),d.TgZ(172,"div",8),d.TgZ(173,"button",46),d.NdJ("click",function(){return t.OnAddClick()}),d._uU(174," Add "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(175,"div",45),d.TgZ(176,"div",8),d.TgZ(177,"button",47),d.NdJ("click",function(){d.CHM(e);const r=d.MAs(191);return t.openStorageArea(r)}),d._uU(178," Storage Area "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(179,"div",45),d.TgZ(180,"div",8),d.TgZ(181,"button",48),d._uU(182," Label Print "),d.qZA(),d.qZA(),d.qZA(),d.TgZ(183,"div",45),d.TgZ(184,"div",8),d.TgZ(185,"button",49),d._uU(186," Receipt Print "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(187,"div",45),d.TgZ(188,"div",50),d._UZ(189,"ag-grid-angular",51),d.qZA(),d.qZA(),d.qZA(),d.YNc(190,x,21,2,"ng-template",null,52,d.W1O),d.YNc(192,q,8,3,"ng-template",null,53,d.W1O),d.YNc(194,_,12,2,"ng-template",54,55,d.W1O),d.qZA(),d._UZ(196,"hr"),d.TgZ(197,"div",21),d.TgZ(198,"p",22),d._uU(199," Inward Details List "),d.qZA(),d.TgZ(200,"mtx-grid",56,57),d.NdJ("dblclick",function(r){d.CHM(e);const i=d.MAs(201);return t.onRowDblclicked(i,r)}),d.qZA(),d.qZA(),d._UZ(202,"hr"),d.TgZ(203,"div",23),d.TgZ(204,"div",58),d.TgZ(205,"button",59),d.NdJ("click",function(){return t.OnSaveinward()}),d._uU(206,"Save"),d.qZA(),d.qZA(),d.TgZ(207,"div",58),d.TgZ(208,"button",60),d.NdJ("click",function(){return t.OnResetInward()}),d._uU(209,"Reset"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(210,"mat-tab",61),d.TgZ(211,"div",62),d.TgZ(212,"label",62),d._uU(213,"Filter "),d.qZA(),d.TgZ(214,"input",63,64),d.NdJ("keyup",function(){d.CHM(e);const r=d.MAs(215);return t.onKeyfilter(r.value)}),d.qZA(),d.qZA(),d._UZ(216,"br"),d.TgZ(217,"div",65),d._UZ(218,"mtx-grid",66),d.qZA(),d.qZA(),d.TgZ(219,"mat-tab",67),d.TgZ(220,"div",68),d._UZ(221,"ag-grid-angular",69),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(3),d.Q6J("selectedIndex",t.tab),d.xp6(2),d.Q6J("formGroup",t.form),d.xp6(10),d.Q6J("ngForOf",t.customerList),d.xp6(6),d.Q6J("ngClass",d.VKq(64,k,t.submitted&&t.f.challan_no.errors)),d.xp6(16),d.Q6J("ngForOf",t.dockList),d.xp6(5),d.Q6J("ngModel",d.xi3(43,61,t.todayDate,"yyyy-MM-dd hh:mm:ss")),d.xp6(9),d.Q6J("ngForOf",t.unloadingList),d.xp6(8),d.Q6J("ngForOf",t.remarkList),d.xp6(41),d.Q6J("ngForOf",t.productList),d.xp6(8),d.Q6J("ngForOf",t.brandList),d.xp6(8),d.Q6J("ngForOf",t.packateCountList),d.xp6(11),d.Q6J("ngValue",null),d.xp6(2),d.Q6J("ngForOf",t.serviceTypeList),d.xp6(21),d.Q6J("ngValue",null),d.xp6(2),d.Q6J("ngForOf",t.labourContractorList),d.xp6(5),d.Q6J("ngModel",t.CurrentLotNo),d.xp6(6),d.Q6J("ngValue",null),d.xp6(2),d.Q6J("ngForOf",t.remarkList),d.xp6(8),d.Q6J("id",t.OnAddClick)("disabled",t.OnAddProductClick),d.xp6(16),d.Q6J("rowData",t.inwardservicelist)("columnDefs",t.serviceColumns),d.xp6(11),d.Q6J("data",t.InwardDetailList)("columns",t.InwardDetailColumns)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",d.DdM(66,O))("pageIndex",0),d.xp6(5),d.Q6J("disabled",t.click),d.xp6(13),d.Q6J("data",t.InwardList)("columns",t.columnstest)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Item List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!1)("showPaginator",!1)("pageSize",1e7),d.xp6(3),d.Q6J("rowData",t.InwardList)("columnDefs",t.columnsInwardList)("frameworkComponents",t.frameworkComponents))},directives:[m.xw,m.yH,f.a8,g.SP,g.uX,n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,n.YN,n.Kr,s.sg,D.TO,n.Fj,s.mk,p.oO,n.Q7,I.N8,v.CM],pipes:[s.uU],styles:[".mtx-grid[_ngcontent-%COMP%]{height:280px}input.ng-invalid[_ngcontent-%COMP%]:focus{outline-color:red}.ng-deep[_ngcontent-%COMP%]   #gridContainer[_ngcontent-%COMP%]{height:440px}.ng-deep[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{padding:20px;margin-top:20px;background-color:rgba(191,191,191,.15)}.ng-deep[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{margin-top:10px}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-right:10px}.ng-deep[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%] > .dx-selectbox[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle}.modalfooter[_ngcontent-%COMP%]{flex-wrap:wrap;padding:.75rem;border-top:1px solid #dee2e6;border-bottom-right-radius:calc(.3rem - 1px);border-bottom-left-radius:calc(.3rem - 1px)}"]}),e})();r(52107);let U=(()=>{class e{constructor(){this.label=""}agInit(e){this.params=e,this.label=this.params.label||null}refresh(e){return!0}onClick(e,t){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data,actions:t})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-deliveryorderaction-buttons"]],decls:5,vars:0,consts:[[1,"input-group"],["type","button",1,"btn","btn-secondary","btn-sm","btn-space",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"button",1),d.NdJ("click",function(e){return t.onClick(e,"Edit")}),d._uU(2,"Edit"),d.qZA(),d.TgZ(3,"button",2),d.NdJ("click",function(e){return t.onClick(e,"Delete")}),d._uU(4,"Delete"),d.qZA(),d.qZA())},styles:[".btn-space[_ngcontent-%COMP%]{margin-right:5%}"]}),e})();function P(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerID),d.xp6(1),d.Oqu(e.CustomerName)}}function B(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.PartyName),d.xp6(1),d.Oqu(e.PartyName)}}function Q(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerPartyID),d.xp6(1),d.Oqu(e.PartyName)}}function R(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerContactID),d.xp6(1),d.Oqu(e.ContactPersonName)}}function J(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.Remarks),d.xp6(1),d.Oqu(e.Remarks)}}function M(e,t){if(1&e&&(d.TgZ(0,"option",60),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerID),d.xp6(1),d.Oqu(e.CustomerName)}}function Y(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",47),d.TgZ(1,"h4",48),d._uU(2,"Customer Parties"),d.qZA(),d.qZA(),d.TgZ(3,"div",49),d.TgZ(4,"div",39),d.TgZ(5,"div",50),d.TgZ(6,"div",8),d.TgZ(7,"label"),d._uU(8,"Customer Name"),d.qZA(),d.TgZ(9,"select",51),d.YNc(10,M,2,2,"option",52),d.qZA(),d.qZA(),d.TgZ(11,"div",50),d.TgZ(12,"div",8),d.TgZ(13,"label"),d._uU(14,"Party Name"),d.qZA(),d._UZ(15,"input",53),d.qZA(),d.qZA(),d.TgZ(16,"div",50),d.TgZ(17,"div",8),d.TgZ(18,"label"),d._uU(19,"Shipping Address"),d.qZA(),d._UZ(20,"input",54),d.qZA(),d.qZA(),d.TgZ(21,"div",50),d.TgZ(22,"div",8),d.TgZ(23,"label"),d._uU(24,"Shipping Address2"),d.qZA(),d._UZ(25,"input",55),d.qZA(),d.qZA(),d.TgZ(26,"div",50),d.TgZ(27,"div",8),d.TgZ(28,"label"),d._uU(29,"Pin Code"),d.qZA(),d._UZ(30,"input",56),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(31,"div",57),d.TgZ(32,"button",58),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(),r=d.MAs(95);return t.onAddCustomerParty(r)}),d._uU(33,"ADD"),d.qZA(),d.TgZ(34,"button",59),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(),r=d.MAs(95);return t.onCloseCustpmerParty(r)}),d._uU(35,"Cancel"),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(10),d.Q6J("ngForOf",e.customerList)}}let E=(()=>{class e{constructor(e,t,r,i){this.api=e,this.fb=t,this.modalService=r,this.dialog=i,this.OrderGivenByList=[],this.DeliveryOrdersearchList=[],this.DO_Detail=[],this.checkCust=!1,this.SaveCustomerParty={},this.SaveDeliveryOrder={},this.clickSave=!1,this.DeliveryOrderID=0,this.config={backdrop:!1,ignoreBackdropClick:!0},this.tab=0,this.DeliveryOrdercolumnDefs=[{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{headerName:"InwardDID",field:"InwardDID",hide:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0},{headerName:"ProductID",field:"ProductID",hide:!0},{headerName:"ProductName",field:"ProductName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"LotNo",field:"LotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},resizable:!0},{headerName:"FirstLotNo",field:"FirstLotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"StorageAreaName",field:"StorageAreaName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"InQuantity",field:"InQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"PendingDO",field:"PendingDO",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"OutQuantity",field:"OutQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agNumberColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"DOQuantity",field:"DOQuantity",hide:!1,cellEditorPopup:!0,sort:"desc",filter:"agNumberColumnFilter",floatingFilter:!0,valueParser:"Number(newValue)",editable:!0,cellStyle:e=>e.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}},{headerName:"BrandID",field:"BrandID",hide:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"BrandName",field:"BrandName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"ItemsInPacket",field:"ItemsInPacket",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0,cellStyle:{fontSize:"12px"},width:200}],this.columnsDeliveryOrderList=[{headerName:"Action",floatingFilter:!1,maxWidth:150,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnDeliveryOrderActions.bind(this)}},{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DO No",maxWidth:100,field:"DeliveryOrderNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DO Date",resizable:!0,field:"DeliveryOrderDate",type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedBy",field:"CreatedBy",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Process",field:"Process",resizable:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerPartyID",field:"CustomerPartyID",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",resizable:!0,hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",resizable:!0,hide:!0,filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser(),this.form=this.fb.group({customer_id:[null,n.kI.required],chk_Do_Disptch:[null,n.kI.required],deliveryorder_date:[null,n.kI.required],customerParty_id:[null,n.kI.required],DeliveryParty_id:[null,n.kI.required],txtDO_No:[null,n.kI.required],txtShipping_Address:[null,n.kI.required],txtTruckNo:[null,n.kI.required],txtContainerNo:[null,n.kI.required],OrderGivenBy_id:[null,n.kI.required],DORemarks:[null,n.kI.required],Party_customer_id:[null,n.kI.required],txtPartyName:[null,n.kI.required],txtshiffadd1:[null,n.kI.required],txtshiffadd2:[null,n.kI.required],txtPinCode:[null,n.kI.required],txtMobileNo:[null,n.kI.required],txtTotalDOQty:[null,n.kI.required]});const o=new s.uU("en-US").transform(Date(),"yyyy-MM-dd");this.todayDate=o,this.frameworkComponents={buttonRenderer:U}}ngOnInit(){this.BindDropdown()}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/Customer").subscribe(e=>{this.customerList=e},e=>{console.error(e)}),this.api.get("/CustomerParty").subscribe(e=>{this.customePartyList=e},e=>{console.error(e)}),this.api.get("/Remarks").subscribe(e=>{this.remarkList=e.filter(e=>2==e.ProcessID)},e=>{console.error(e)}),this.BindDeliveryOrderList()})}getRowStyle(e){if(13==e.data.StatusID)return{"background-color":"pink"}}BindDeliveryOrderList(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/DeliveryOrder/DOList?FinancialYearID="+this.currentUser.FinantialYearId+"&WareHouseID="+this.currentUser.warehouseId+"&UserID="+this.currentUser.userId).subscribe(e=>{this.DeliveryOrderList=e},e=>{console.error(e)})})}tabDeliveryOrderchange(e){this.tab=e,this.BindDeliveryOrderList()}BindOrderGIvenBy(e=0){this.api.get("/CustomerContacts/GetCustomerContactsList?CustomerID="+e).subscribe(e=>{this.OrderGivenByList=[],this.OrderGivenByList=e},e=>{console.error(e)})}GetCustomerID(e){this.checkCust=!1,this.BindOrderGIvenBy(this.form.value.customer_id),this.api.get("/DeliveryOrder/DOValidation?CustomerID="+this.form.value.customer_id+"&WaherhouseID="+this.currentUser.warehouseId).subscribe(e=>{e.Table.length>0&&(this.checkCust=!0,alert("Order is stopped for some reason .... !!!"))},e=>{console.error(e)})}OnSearchClick(){var e;null==this.form.value.customer_id?(alert("Select Customers ....."),null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus()):this.api.post("/DeliveryOrder/DOSearch?CustomerID="+this.form.value.customer_id+"&WarehouseID="+this.currentUser.warehouseId).subscribe(e=>{this.DeliveryOrdersearchList=e,0==e.length&&alert("Data not found ..... !!!")},e=>{console.error(e)})}onDOCellKeyPress(e){e.data.BalanceQuantity>e.data.DOQuantity?this.onDOSearchGridRefresh():e.data.BalanceQuantity==e.data.DOQuantity?(alert(e.data.ProductName+" And Lot no "+e.data.LotNo+", Stock will be null or zero ...!!!"),this.onDOSearchGridRefresh()):e.data.BalanceQuantity<e.data.DOQuantity&&(this.DeliveryOrdersearchList.forEach(t=>{t.InwardLocationID==e.data.InwardLocationID&&(t.DOQuantity=0)}),alert("DO Quantity must be less than or equal to balance quantity ..!!!"),this.onDOSearchGridRefresh())}onDOSearchGridRefresh(){let e=this.DeliveryOrdersearchList.filter(e=>e);this.DeliveryOrdersearchList=e;var t=this.DeliveryOrdersearchList.map(e=>e.DOQuantity).reduce((e,t)=>t+e);this.form.controls.txtTotalDOQty.setValue(t)}onCustomerPartyContact(e){var t;null==this.form.value.customer_id||0==this.form.value.customer_id?(alert("Select Customers ....."),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus()):(this.form.controls.Party_customer_id.setValue(this.form.value.customer_id),this.modalService.open(e,this.config))}onCloseCustpmerParty(e){this.modalService.dismissAll(e)}onAddCustomerParty(e){var t,r;null==this.form.value.Party_customer_id||0==this.form.value.Party_customer_id?(alert("Select Customers ....."),null===(t=null==document?void 0:document.getElementById("Party_customer_id"))||void 0===t||t.focus()):null==this.form.value.txtPartyName||0==this.form.value.txtPartyName?(alert("Enter Customer Party Name ..... !!!"),null===(r=null==document?void 0:document.getElementById("txtPartyName"))||void 0===r||r.focus()):(this.SaveCustomerParty={CustomerID:this.form.value.customer_id,PartyName:null==this.form.value.txtPartyName?"":this.form.value.txtPartyName,ShippingAddress:null==this.form.value.txtshiffadd1?"":this.form.value.txtshiffadd1,ShippingAddress1:null==this.form.value.txtshiffadd2?"":this.form.value.txtshiffadd2,PinCode:null==this.form.value.txtPinCode?"":this.form.value.txtPinCode,CreatedBy:this.currentUser.userId},console.log(this.SaveCustomerParty),this.api.post("/DeliveryOrder/AddParty",this.SaveCustomerParty).subscribe(t=>{alert(t.Table[0].Message),this.form.controls.txtPartyName.reset(),this.form.controls.txtshiffadd1.reset(),this.form.controls.txtshiffadd2.reset(),this.form.controls.txtPinCode.reset(),this.modalService.dismissAll(e)},e=>{console.error(e)}),this.api.get("/CustomerParty").subscribe(e=>{this.customePartyList=e},e=>{console.error(e)}))}GetMobileNo(e){const t=this.OrderGivenByList.filter(e=>e.CustomerContactID==this.form.value.OrderGivenBy_id);this.form.controls.txtMobileNo.setValue(t[0].MobileNo),console.log(t[0].MobileNo)}onSaveDeliveryOrder(){var e,t;if(null==this.form.value.customer_id||""==this.form.value.customer_id)return alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus());this.api.get("/DeliveryOrder/DOValidation?CustomerID="+this.form.value.customer_id+"&WaherhouseID="+this.currentUser.warehouseId).subscribe(e=>{var r,i;if(e.Table.length>0)this.checkCust=!0,alert("Order is stopped for some reason .... !!!");else{if(t=this.DeliveryOrdersearchList.length>0?this.DeliveryOrdersearchList.map(e=>e.DOQuantity).reduce((e,t)=>t+e):0,null==this.form.value.customerParty_id||""==this.form.value.customerParty_id)return alert("Please .... Select customer Party"),void(null===(r=null==document?void 0:document.getElementById("customerParty_id"))||void 0===r||r.focus());if(null==this.form.value.OrderGivenBy_id||""==this.form.value.OrderGivenBy_id)return alert("Please .... Select Order Given By"),void(null===(i=null==document?void 0:document.getElementById("OrderGivenBy_id"))||void 0===i||i.focus());if(t<=0)return void alert("Please .... Add DO quantity In delivery order detail ");{this.clickSave=!0;const e=this.OrderGivenByList.filter(e=>e.CustomerContactID==this.form.value.OrderGivenBy_id);let t;t=e.length>0?e[0].ContactPersonName:"",this.DeliveryOrdersearchList.filter(e=>e.DOQuantity>0).forEach(e=>{this.DO_Detail.push({DeliveryOrderID:this.DeliveryOrderID,ProductID:e.ProductID,InwardDID:e.InwardDID,LotNo:e.LotNo,DOQuantity:e.DOQuantity,InwardLocationID:e.InwardLocationID,StorageAreaID:e.StorageAreaID})}),this.DO_Detail.slice(),this.SaveDeliveryOrder={DeliveryOrderID:this.DeliveryOrderID,DeliveryOrderDate:this.form.value.deliveryorder_date,CustomerID:this.form.value.customer_id,WareHouseID:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId,DeliverTo:this.form.value.customerParty_id,CustomerPartyID:null==this.form.value.DeliveryParty_id?0:this.form.value.DeliveryParty_id,ShippingAddress:null==this.form.value.txtShipping_Address?"":this.form.value.txtShipping_Address,OrderGivenBy:t,Remarks:null==this.form.value.DORemarks?"":this.form.value.DORemarks,CreatedBy:this.currentUser.userId,ByCustomer:0,IsDoDispatch:null!=this.form.value.chk_Do_Disptch&&this.form.value.chk_Do_Disptch,TruckNo:null==this.form.value.txtTruckNo?"":this.form.value.txtTruckNo,ContainerNo:null==this.form.value.txtContainerNo?"":this.form.value.txtContainerNo,DeliveryOrderDetailModel:this.DO_Detail},this.api.post("/DeliveryOrder/SaveDO",this.SaveDeliveryOrder).subscribe(e=>{alert(e.Table[0].Message)},e=>{console.error(e),this.clickSave=!1}),console.log(this.SaveDeliveryOrder)}}},e=>{console.error(e)})}onResetDeliveryOrder(){this.clickSave=!1,this.checkCust=!1,this.form.reset(),this.BindDropdown(),this.DeliveryOrderID=0;const e=new s.uU("en-US").transform(Date(),"yyyy-MM-dd");this.todayDate=e,this.form.controls.deliveryorder_date.setValue(this.todayDate),this.DeliveryOrdersearchList=[],this.DO_Detail=[],this.SaveDeliveryOrder={}}OnDeliveryOrderActions(e){"Delete"==String(e.actions)?this.api.get("/DeliveryOrder/DOValidation?CustomerID="+e.rowData.CustomerID+"&WaherhouseID="+e.rowData.WareHouseID).subscribe(t=>{if(t.Table.length>0)this.checkCust=!0,this.dialog.alert("Order is stopped for some reason .... !!!");else if(11==e.rowData.StatusID)this.dialog.alert("Sorry,Outward already generated ....!!!");else if(15==e.rowData.StatusID)this.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!");else if(13==e.rowData.StatusID)this.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!");else if(12==e.rowData.StatusID){if(1==confirm("Sorry,this translation have dispatch. Do you want to deleted or deactivate your translation ...")){let t=prompt("Remarks ");this.api.post("/DeliveryOrder/PartiallyCancelled?DeliveryOrderID="+e.rowData.DeliveryOrderID+"&CustomerId="+e.rowData.CustomerID+"&Remarks="+t+"&CreatedBy="+this.currentUser.userId).subscribe(e=>{this.dialog.alert(e),this.BindDeliveryOrderList()},e=>{console.error(e)})}}else 1==confirm("Do you want to deleted or deactivate your Delivery Order ...??")&&(prompt("Remarks"),this.api.post("/DeliveryOrder/CancelledDO?DeliveryOrderID="+e.rowData.DeliveryOrderID+"&CustomerId="+e.rowData.CustomerID+"&Remarks=test&CreatedBy="+this.currentUser.userId).subscribe(e=>{this.dialog.alert(e),this.BindDeliveryOrderList()},e=>{console.error(e)}))},e=>{console.error(e)}):"Edit"==String(e.actions)&&(this.onResetDeliveryOrder(),this.api.get("/DeliveryOrder/DOValidation?CustomerID="+e.rowData.CustomerID+"&WaherhouseID="+e.rowData.WareHouseID).subscribe(t=>{t.Table.length>0?(this.checkCust=!0,this.dialog.alert("Order is stopped for some reason .... !!!")):11==e.rowData.StatusID?this.dialog.alert("Sorry,Outward already generated ....!!!"):12==e.rowData.StatusID?this.dialog.alert("Sorry,Dispatch already generated ....!!!"):13==e.rowData.StatusID?this.dialog.alert("Sorry,You can't edit this transaction ,because it's already Cancelled or deactivate ....!!!"):15==e.rowData.StatusID?this.dialog.alert("Sorry,You already Cancelled this Delivery Order ....!!!"):"Online"==e.rowData.Process?this.dialog.alert("Sorry,You can't edit because its generated by customer....!!!"):this.api.get("/DeliveryOrder/GetEditDelivryOrder?DeliveryOrderID="+e.rowData.DeliveryOrderID).subscribe(t=>{this.tab=0,this.DeliveryOrdersearchList=t.Table1,this.DeliveryOrderID=e.rowData.DeliveryOrderID,this.onDOSearchGridRefresh();const r=new s.uU("en-US").transform(e.rowData.DeliveryOrderDate,"yyyy-MM-dd");this.BindOrderGIvenBy(e.rowData.CustomerID);var i=this.DeliveryOrdersearchList.map(e=>e.DOQuantity).reduce((e,t)=>t+e);const o=this.OrderGivenByList.filter(t=>t.ContactPersonName==e.rowData.OrderGivenBy);let a,n;o.length>0?(a=o[0].CustomerContactID,n=o[0].MobileNo,this.form.controls.txtMobileNo.setValue(o[0].MobileNo)):(a=0,n="",this.form.controls.txtMobileNo.setValue("")),this.form.setValue({customer_id:e.rowData.CustomerID,deliveryorder_date:r,chk_Do_Disptch:!1,customerParty_id:e.rowData.DeliverTo,DeliveryParty_id:e.rowData.CustomerPartyID,txtDO_No:e.rowData.DeliveryOrderNo,txtShipping_Address:e.rowData.ShippingAddress,txtTruckNo:e.rowData.TruckNo,txtContainerNo:e.rowData.ContainerNo,OrderGivenBy_id:a,DORemarks:e.rowData.Remarks,Party_customer_id:e.rowData.CustomerID,txtPartyName:"",txtshiffadd1:"",txtshiffadd2:"",txtPinCode:"",txtMobileNo:n,txtTotalDOQty:i})},e=>{console.error(e)})},e=>{console.error(e)}))}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.sM),d.Y36(n.qu),d.Y36(h.FF),d.Y36(u.cP))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-deliveryorder"]],decls:118,vars:19,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Delivery Order"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-4","col-md-4"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm",3,"change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-3","col-md-3"],["type","date","formControlName","deliveryorder_date","id","deliveryorder_date","placeholder","","name","deliveryorder_date",1,"form-control","form-control-rounded",3,"ngModel"],[1,"form-group","pt-4"],["type","button",1,"btn","btn-secondary","btn-block",3,"disabled","click"],[1,"col-sm-2","col-md-2"],["type","checkbox","formControlName","chk_Do_Disptch","id","chk_Do_Disptch",1,"form-control"],["formControlName","customerParty_id","id","customerParty_id",1,"form-control","form-control-sm"],["formControlName","DeliveryParty_id","id","DeliveryParty_id",1,"form-control","form-control-sm"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],["type","text","formControlName","txtDO_No","id","txtDO_No","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShipping_Address","id","txtShipping_Address","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["type","text","formControlName","txtTruckNo","id","txtTruckNo","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainerNo","id","txtContainerNo","placeholder","","autocomplete","off",1,"form-control","form-control-sm"],["formControlName","OrderGivenBy_id","id","OrderGivenBy_id",1,"form-control","form-control-sm",3,"change"],["type","text","formControlName","txtMobileNo","id","txtMobileNo","readonly","","placeholder","",1,"form-control","form-control-sm"],["formControlName","DORemarks","id","DORemarks",1,"form-control","form-control-sm"],["style","width:620px;"],["CustomerPartycontent",""],[1,"col-12"],[1,"font-weight-bold"],[1,"ag-theme-alpine",2,"height","500px","font-size","12px!important",3,"rowData","columnDefs","cellValueChanged"],[1,"row","mt-2"],[1,"col-sm-12"],[1,"form-group","float-right",2,"display","flex"],["type","text","formControlName","txtTotalDOQty","id","txtTotalDOQty","readonly","","placeholder","",1,"form-control","form-control-sm"],[1,"row"],[1,"col-sm-3","mt-1","mb-1"],["type","button",1,"btn","btn-secondary",2,"width","100%",3,"disabled","click"],["type","button",1,"btn","btn-secondary",2,"width","100%",3,"click"],["label","Delivery Order List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents","getRowStyle"],[3,"value"],[1,"modal-header"],["id","modal-basic-title"],[1,"modal-body"],[1,"col-sm-12","col-md-12"],["formControlName","Party_customer_id","id","Party_customer_id",1,"form-control","form-control-sm"],["disabled","",3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","txtPartyName","id","txtPartyName","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtshiffadd1","id","txtshiffadd1","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtshiffadd2","id","txtshiffadd2","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtPinCode","id","txtPinCode","placeholder","",1,"form-control","form-control-sm"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-info",3,"click"],["disabled","",3,"value"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"mat-card"),d.TgZ(3,"mat-tab-group",2),d.NdJ("selectedIndexChange",function(e){return t.tabDeliveryOrderchange(e)})("selectedIndexChange",function(e){return t.tab=e}),d.TgZ(4,"mat-tab",3),d.TgZ(5,"form",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"label"),d._uU(11,"Customer Name"),d.qZA(),d.TgZ(12,"select",9),d.NdJ("change",function(e){return t.GetCustomerID(e)}),d.TgZ(13,"option",10),d._uU(14,"Select"),d.qZA(),d.YNc(15,P,2,2,"option",11),d.qZA(),d._UZ(16,"mat-error",12),d.qZA(),d.qZA(),d.TgZ(17,"div",13),d.TgZ(18,"div",8),d.TgZ(19,"label"),d._uU(20,"Delivery Order Date"),d.qZA(),d._UZ(21,"input",14),d.ALo(22,"date"),d.qZA(),d.qZA(),d.TgZ(23,"div",13),d.TgZ(24,"div",15),d.TgZ(25,"button",16),d.NdJ("click",function(){return t.OnSearchClick()}),d._uU(26,"Search"),d.qZA(),d._UZ(27,"mat-error",12),d.qZA(),d.qZA(),d.TgZ(28,"div",17),d.TgZ(29,"div",8),d.TgZ(30,"label"),d._uU(31,"Do & Dispatch"),d.qZA(),d._UZ(32,"input",18),d.qZA(),d.qZA(),d.TgZ(33,"div",7),d.TgZ(34,"div",8),d.TgZ(35,"label"),d._uU(36,"Customer Party"),d.qZA(),d.TgZ(37,"select",19),d.TgZ(38,"option",10),d._uU(39,"Select"),d.qZA(),d.YNc(40,B,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(41,"div",13),d.TgZ(42,"div",8),d.TgZ(43,"label"),d._uU(44,"Delivery Party"),d.qZA(),d.TgZ(45,"select",20),d.TgZ(46,"option",10),d._uU(47,"Select"),d.qZA(),d.YNc(48,Q,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(49,"div",13),d.TgZ(50,"div",21),d.TgZ(51,"button",22),d.NdJ("click",function(){d.CHM(e);const r=d.MAs(95);return t.onCustomerPartyContact(r)}),d._uU(52,"ADD Party"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(53,"div",17),d.TgZ(54,"div",8),d.TgZ(55,"label"),d._uU(56,"DO No"),d.qZA(),d._UZ(57,"input",23),d.qZA(),d.qZA(),d.TgZ(58,"div",7),d.TgZ(59,"div",8),d.TgZ(60,"label"),d._uU(61,"Shipping Address"),d.qZA(),d._UZ(62,"input",24),d.qZA(),d.qZA(),d.TgZ(63,"div",7),d.TgZ(64,"div",8),d.TgZ(65,"label"),d._uU(66,"Truck No"),d.qZA(),d._UZ(67,"input",25),d.qZA(),d.qZA(),d.TgZ(68,"div",7),d.TgZ(69,"div",8),d.TgZ(70,"label"),d._uU(71,"Container No"),d.qZA(),d._UZ(72,"input",26),d.qZA(),d.qZA(),d.TgZ(73,"div",7),d.TgZ(74,"div",8),d.TgZ(75,"label"),d._uU(76,"OrderGivenBy"),d.qZA(),d.TgZ(77,"select",27),d.NdJ("change",function(e){return t.GetMobileNo(e)}),d.TgZ(78,"option",10),d._uU(79,"Select"),d.qZA(),d.YNc(80,R,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(81,"div",7),d.TgZ(82,"div",8),d.TgZ(83,"label"),d._uU(84,"Mobile No"),d.qZA(),d._UZ(85,"input",28),d.qZA(),d.qZA(),d.TgZ(86,"div",7),d.TgZ(87,"div",8),d.TgZ(88,"label"),d._uU(89,"Remarks"),d.qZA(),d.TgZ(90,"select",29),d.TgZ(91,"option",10),d._uU(92,"Select "),d.qZA(),d.YNc(93,J,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(94,Y,36,1,"ng-template",30,31,d.W1O),d._UZ(96,"hr"),d.qZA(),d.TgZ(97,"div",32),d.TgZ(98,"p",33),d._uU(99," Delivery Order Details"),d.qZA(),d.TgZ(100,"div"),d.TgZ(101,"ag-grid-angular",34),d.NdJ("cellValueChanged",function(e){return t.onDOCellKeyPress(e)}),d.qZA(),d.qZA(),d.TgZ(102,"div",35),d.TgZ(103,"div",36),d.TgZ(104,"div",37),d.TgZ(105,"label"),d._uU(106,"Total DO Quantity"),d.qZA(),d._UZ(107,"input",38),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(108,"div",39),d.TgZ(109,"div",40),d.TgZ(110,"button",41),d.NdJ("click",function(){return t.onSaveDeliveryOrder()}),d._uU(111,"Save"),d.qZA(),d.qZA(),d.TgZ(112,"div",40),d.TgZ(113,"button",42),d.NdJ("click",function(){return t.onResetDeliveryOrder()}),d._uU(114,"Reset"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(115,"mat-tab",43),d.TgZ(116,"div",44),d._UZ(117,"ag-grid-angular",45),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(3),d.Q6J("selectedIndex",t.tab),d.xp6(2),d.Q6J("formGroup",t.form),d.xp6(10),d.Q6J("ngForOf",t.customerList),d.xp6(6),d.Q6J("ngModel",d.xi3(22,16,t.todayDate,"yyyy-MM-dd")),d.xp6(4),d.Q6J("disabled",t.checkCust),d.xp6(15),d.Q6J("ngForOf",t.customePartyList),d.xp6(8),d.Q6J("ngForOf",t.customePartyList),d.xp6(32),d.Q6J("ngForOf",t.OrderGivenByList),d.xp6(13),d.Q6J("ngForOf",t.remarkList),d.xp6(8),d.Q6J("rowData",t.DeliveryOrdersearchList)("columnDefs",t.DeliveryOrdercolumnDefs),d.xp6(9),d.Q6J("disabled",t.clickSave),d.xp6(7),d.Q6J("rowData",t.DeliveryOrderList)("columnDefs",t.columnsDeliveryOrderList)("frameworkComponents",t.frameworkComponents)("getRowStyle",t.getRowStyle))},directives:[m.xw,m.yH,f.a8,g.SP,g.uX,n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,n.YN,n.Kr,s.sg,D.TO,n.Fj,n.Wl,I.N8],pipes:[s.uU],styles:[".rag-red[_ngcontent-%COMP%]{background-color:red!important}"]}),e})(),G=(()=>{class e{constructor(){this.label=""}agInit(e){this.params=e,this.label=this.params.label||null}refresh(e){return!0}onClick(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-dispatchdeletebutton"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"button",0),d.NdJ("click",function(e){return t.onClick(e)}),d._uU(1,"Delete"),d.qZA())},styles:[""]}),e})();function W(e,t){if(1&e&&(d.TgZ(0,"option",37),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerID),d.xp6(1),d.Oqu(e.CustomerName)}}function H(e,t){if(1&e&&(d.TgZ(0,"option",37),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerPartyID),d.xp6(1),d.Oqu(e.PartyName)}}let V=(()=>{class e{constructor(e,t,r){this.api=e,this.fb=t,this.dialog=r,this.SaveDispatch={},this.tab=0,this.clickSave=!1,this.DeliveryOrderID=0,this.DispatchDetailList=[],this.DispatchDetail=[],this.DispatchDetailcolumnDefs=[{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderDID",field:"DeliveryOrderDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductID",field:"ProductID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageArea",field:"StorageArea",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardDID",field:"InwardDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DOQuantity",field:"DOQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchQuantity",field:"DispatchQuantity",hide:!1,filter:"agNumberColumnFilter",valueParser:"Number(newValue)",floatingFilter:!0,cellEditorPopup:!0,sort:"desc",editable:!0,cellStyle:e=>e.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}},{headerName:"BrandName",field:"BrandName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ItemsInPacket",field:"ItemsInPacket",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.DispatchSearchcolumnDefs=[{headerName:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderDate",field:"DeliveryOrderDate",hide:!1,type:"date",cellRenderer:"dateTimeRenderer",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.DispatchsListColumnDefs=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnCancelledDispatch.bind(this),label:"Click 1"}},{headerName:"DispatchID",field:"DispatchID",minWidth:100,hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchNo",field:"DispatchNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerID",field:"CustomerID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerPartyID",field:"CustomerPartyID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"PartyName",field:"PartyName",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShippingAddress",field:"ShippingAddress",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchDate",field:"DispatchDate",hide:!1,minWidth:100,type:"date",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!0,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CeatedBy",field:"CeatedBy",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",hide:!1,minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser(),this.form=this.fb.group({customer_id:[null,n.kI.required],DeliveryTo_ID:[null,n.kI.required],txtShipping_Address:[null,n.kI.required],OrderGivenBy_id:[null,n.kI.required],txtTruckNo:[null,n.kI.required],txtContainerNo:[null,n.kI.required],DispatchRemarks:[null,n.kI.required],txtTotalDispatchQty:[null,n.kI.required]}),this.frameworkComponents={buttonRenderer:G}}ngOnInit(){this.BindDropdown(),this.onDispatchList(),this.DispatchSearchList=[],this.DispatchDetailList=[]}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/Customer").subscribe(e=>{this.customerList=e},e=>{console.error(e)}),this.api.get("/CustomerParty").subscribe(e=>{this.customePartyList=e},e=>{console.error(e)}),this.api.get("/Remarks").subscribe(e=>{this.remarkList=e.filter(e=>2==e.ProcessID)},e=>{console.error(e)})})}tabDeliveryOrderchange(e){this.tab=e,this.onDispatchList()}OnSearchClick(){var e;if(null==this.form.value.customer_id||""==this.form.value.customer_id)return alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus());this.api.get("/Dispatch/DispatchSearch?CustomerID="+this.form.value.customer_id+"&WarehouseId="+this.currentUser.warehouseId+"&CompanyID="+this.currentUser.companyId).subscribe(e=>{this.DispatchSearchList=e},e=>{console.error(e)})}rowDODoubleClicked(e){const t=this.customePartyList.filter(t=>t.PartyName==e.data.DeliverTo);this.form.setValue(t.length>0?{customer_id:this.form.value.customer_id,DeliveryTo_ID:t[0].CustomerPartyID,txtShipping_Address:e.data.ShippingAddress,OrderGivenBy_id:e.data.OrderGivenBy,txtTruckNo:e.data.TruckNo,txtContainerNo:e.data.ContainerNo,DispatchRemarks:e.data.Remarks,txtTotalDispatchQty:0}:{customer_id:this.form.value.customer_id,DeliveryTo_ID:0,txtShipping_Address:e.data.ShippingAddress,OrderGivenBy_id:e.data.OrderGivenBy,txtTruckNo:e.data.TruckNo,txtContainerNo:e.data.ContainerNo,DispatchRemarks:e.data.Remarks,txtTotalDispatchQty:0}),this.DeliveryOrderID=e.data.DeliveryOrderID,this.api.get("/Dispatch/GetDispatchDetails?DeliveryOrderID="+e.data.DeliveryOrderID+"&DeliveryOrderNo="+e.data.DeliveryOrderNo).subscribe(e=>{this.DispatchDetailList=e},e=>{console.error(e)})}onDispatchCellKeyPress(e){console.log(this.DispatchDetailList),e.data.BalanceQuantity>e.data.DispatchQuantity||e.data.BalanceQuantity==e.data.DispatchQuantity?this.onDispatchDetailGridRefresh():e.data.BalanceQuantity<e.data.DispatchQuantity&&(this.DispatchDetailList.forEach(t=>{t.InwardLocationID==e.data.InwardLocationID&&(t.DispatchQuantity=0)}),alert("DispatchQuantity Must be less than or equal to BalanceQuantity.....!!!"),this.onDispatchDetailGridRefresh())}onDispatchDetailGridRefresh(){let e=this.DispatchDetailList.filter(e=>e);this.DispatchDetailList=e;var t=this.DispatchDetailList.map(e=>e.DispatchQuantity).reduce((e,t)=>t+e);console.log(t),this.form.controls.txtTotalDispatchQty.setValue(t)}onDispatchList(){this.api.get("/Dispatch/Dispatch_Select").subscribe(e=>{this.DispatchList=e},e=>{console.error(e)})}OnCancelledDispatch(e){if(console.log(e.rowData),41==e.rowData.StatusID)this.dialog.alert("This transaction already generated Outward, You can't delete it....!!!");else if(43==e.rowData.StatusID)this.dialog.alert("This transaction already generated Cancelled, You can't delete it....!!!");else if(1==confirm("Do you want to deleted or deactivate your dispatch...")){let t=prompt("Remarks ");this.api.post("/Dispatch/Dispatch_Cancelled?DispatchID="+e.rowData.DispatchID+"&Remark="+t+"&CreatedBy="+this.currentUser.userId).subscribe(e=>{this.dialog.alert(e),this.onDispatchList()},e=>{console.error(e)})}}onDeleteDORow(e){if(console.log(e),41==e.StatusID)alert("This transaction already generated Outward, You can't delete it....!!!");else if(43==e.StatusID)alert("This transaction already generated Cancelled, You can't delete it....!!!");else if(1==confirm("Do you want to deleted or deactivate your dispatch...")){let t=prompt("Remarks ");this.api.post("/Dispatch/Dispatch_Cancelled?DispatchID="+e.DispatchID+"&Remark="+t+"&CreatedBy="+this.currentUser.userId).subscribe(e=>{alert(e),this.onDispatchList()},e=>{console.error(e)})}}onSaveDispatch(){var e,t,r,i;return i=this.DispatchDetailList.length>0?this.DispatchDetailList.map(e=>e.DispatchQuantity).reduce((e,t)=>t+e):0,null==this.form.value.customer_id||""==this.form.value.customer_id?(alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus())):null==this.form.value.DeliveryTo_ID||""==this.form.value.DeliveryTo_ID?(alert("Please.... Select Deliver To..!!!"),void(null===(t=null==document?void 0:document.getElementById("DeliveryTo_ID"))||void 0===t||t.focus())):null==this.form.value.OrderGivenBy_id||""==this.form.value.OrderGivenBy_id?(alert("Please Enter Order Given By..!!!"),void(null===(r=null==document?void 0:document.getElementById("OrderGivenBy_id"))||void 0===r||r.focus())):void(i<=0?alert("Please .... Add Dispatch quantity In delivery order detail "):(console.log(i),this.clickSave=!0,this.DispatchDetail=[],this.DispatchDetailList.filter(e=>e.DispatchQuantity>0).forEach(e=>{this.DispatchDetail.push({DeliveryOrderDID:e.DeliveryOrderDID,ProductID:e.ProductID,InwardDID:e.InwardDID,LotNo:e.LotNo,DispatchQuantity:e.DispatchQuantity,InwardLocationID:e.InwardLocationID,StorageAreaID:e.StorageAreaID})}),this.DispatchDetail.slice(),console.log(this.DispatchDetail),this.SaveDispatch={DispatchID:0,CustomerID:this.form.value.customer_id,CustomerPartyID:this.form.value.DeliveryTo_ID,WareHouseID:this.currentUser.warehouseId,ShippingAddress:this.form.value.txtShipping_Address,OrderGivenBy:this.form.value.OrderGivenBy_id,Remarks:this.form.value.DispatchRemarks,CreatedBy:this.currentUser.userId,DeliveryOrderID:this.DeliveryOrderID,TruckNo:this.form.value.txtTruckNo,ContainerNo:this.form.value.txtContainerNo,DispatchDetailModel:this.DispatchDetail},console.log(this.SaveDispatch),this.api.post("/Dispatch/SaveDispatch",this.SaveDispatch).subscribe(e=>{console.log(e),alert(e.Table[0].Message)},e=>{console.error(e),this.clickSave=!1})))}onResetDispatch(){this.form.reset(),this.BindDropdown(),this.DispatchSearchList=[],this.DispatchDetailList=[],this.clickSave=!1}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.sM),d.Y36(n.qu),d.Y36(u.cP))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-dispatch"]],decls:80,vars:12,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Dispatch"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-5","col-md-5"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-2","col-md-2"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],["formControlName","DeliveryTo_ID","id","DeliveryTo_ID",1,"form-control","form-control-sm"],[1,"col-sm-6","col-md-6"],["type","text","formControlName","txtShipping_Address","id","txtShipping_Address","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","OrderGivenBy_id","id","OrderGivenBy_id","placeholder","",1,"form-control","form-control-sm"],[1,"col-sm-4","col-md-4"],["type","text","formControlName","txtTruckNo","id","txtTruckNo","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainerNo","id","txtContainerNo","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","DispatchRemarks","id","DispatchRemarks","placeholder","",1,"form-control","form-control-sm"],[1,"col-12"],[1,"font-weight-bold"],[1,"ag-theme-alpine",2,"height","250px",3,"rowData","columnDefs","rowDoubleClicked"],[1,"ag-theme-alpine",2,"height","250px",3,"rowData","columnDefs","cellValueChanged"],[1,"row","mt-2"],[1,"col-sm-12"],[1,"form-group","float-right",2,"display","flex"],["type","text","formControlName","txtTotalDispatchQty","id","txtTotalDispatchQty","readonly","","placeholder","",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-secondary",2,"width","20%",3,"disabled","click"],["type","button",1,"btn","btn-secondary","ml-3",2,"width","20%",3,"click"],["label","Dispatch List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","500px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"mat-card"),d.TgZ(3,"mat-tab-group",2),d.NdJ("selectedIndexChange",function(e){return t.tabDeliveryOrderchange(e)})("selectedIndexChange",function(e){return t.tab=e}),d.TgZ(4,"mat-tab",3),d.TgZ(5,"form",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"label"),d._uU(11,"Customer Name"),d.qZA(),d.TgZ(12,"select",9),d.TgZ(13,"option",10),d._uU(14,"Select"),d.qZA(),d.YNc(15,W,2,2,"option",11),d.qZA(),d._UZ(16,"mat-error",12),d.qZA(),d.qZA(),d.TgZ(17,"div",13),d.TgZ(18,"div",14),d.TgZ(19,"button",15),d.NdJ("click",function(){return t.OnSearchClick()}),d._uU(20,"Search"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",7),d.TgZ(22,"div",8),d.TgZ(23,"label"),d._uU(24,"DeliveryTo"),d.qZA(),d.TgZ(25,"select",16),d.TgZ(26,"option",10),d._uU(27,"Select"),d.qZA(),d.YNc(28,H,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(29,"div",17),d.TgZ(30,"div",8),d.TgZ(31,"label"),d._uU(32,"Shipping Address"),d.qZA(),d._UZ(33,"input",18),d.qZA(),d.qZA(),d.TgZ(34,"div",17),d.TgZ(35,"div",8),d.TgZ(36,"label"),d._uU(37,"OrderGivenBy"),d.qZA(),d._UZ(38,"input",19),d.qZA(),d.qZA(),d.TgZ(39,"div",20),d.TgZ(40,"div",8),d.TgZ(41,"label"),d._uU(42,"Truck No"),d.qZA(),d._UZ(43,"input",21),d.qZA(),d.qZA(),d.TgZ(44,"div",20),d.TgZ(45,"div",8),d.TgZ(46,"label"),d._uU(47,"Container No"),d.qZA(),d._UZ(48,"input",22),d.qZA(),d.qZA(),d.TgZ(49,"div",20),d.TgZ(50,"div",8),d.TgZ(51,"label"),d._uU(52,"Remarks"),d.qZA(),d._UZ(53,"input",23),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(54,"hr"),d.TgZ(55,"div",24),d.TgZ(56,"p",25),d._uU(57," Delivery Order List"),d.qZA(),d.TgZ(58,"div"),d.TgZ(59,"ag-grid-angular",26),d.NdJ("rowDoubleClicked",function(e){return t.rowDODoubleClicked(e)}),d.qZA(),d.qZA(),d.qZA(),d._UZ(60,"hr"),d.TgZ(61,"div",24),d.TgZ(62,"p",25),d._uU(63,"Dispatch Details"),d.qZA(),d.TgZ(64,"div"),d.TgZ(65,"ag-grid-angular",27),d.NdJ("cellValueChanged",function(e){return t.onDispatchCellKeyPress(e)}),d.qZA(),d.qZA(),d.TgZ(66,"div",28),d.TgZ(67,"div",29),d.TgZ(68,"div",30),d.TgZ(69,"label"),d._uU(70,"Total Dispatch Qty"),d.qZA(),d._UZ(71,"input",31),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(72,"br"),d.TgZ(73,"button",32),d.NdJ("click",function(){return t.onSaveDispatch()}),d._uU(74,"Save"),d.qZA(),d.TgZ(75,"button",33),d.NdJ("click",function(){return t.onResetDispatch()}),d._uU(76,"Reset"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(77,"mat-tab",34),d.TgZ(78,"div",35),d._UZ(79,"ag-grid-angular",36),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(3),d.Q6J("selectedIndex",t.tab),d.xp6(2),d.Q6J("formGroup",t.form),d.xp6(10),d.Q6J("ngForOf",t.customerList),d.xp6(13),d.Q6J("ngForOf",t.customePartyList),d.xp6(31),d.Q6J("rowData",t.DispatchSearchList)("columnDefs",t.DispatchSearchcolumnDefs),d.xp6(6),d.Q6J("rowData",t.DispatchDetailList)("columnDefs",t.DispatchDetailcolumnDefs),d.xp6(8),d.Q6J("disabled",t.clickSave),d.xp6(6),d.Q6J("rowData",t.DispatchList)("columnDefs",t.DispatchsListColumnDefs)("frameworkComponents",t.frameworkComponents))},directives:[m.xw,m.yH,f.a8,g.SP,g.uX,n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,n.YN,n.Kr,s.sg,D.TO,n.Fj,I.N8],styles:[""]}),e})(),z=(()=>{class e{constructor(){this.label=""}agInit(e){this.params=e,this.label=this.params.label||null}refresh(e){return!0}onClick(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-outwarddeletebutton"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"button",0),d.NdJ("click",function(e){return t.onClick(e)}),d._uU(1,"Delete"),d.qZA())},styles:[""]}),e})();function $(e,t){if(1&e&&(d.TgZ(0,"option",43),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerID),d.xp6(1),d.Oqu(e.CustomerName)}}function K(e,t){if(1&e&&(d.TgZ(0,"option",43),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerPartyID),d.xp6(1),d.Oqu(e.PartyName)}}function X(e,t){if(1&e&&(d.TgZ(0,"option",43),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.Remarks),d.xp6(1),d.Oqu(e.Remarks)}}function j(e,t){if(1&e&&(d.TgZ(0,"option",43),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.DockID),d.xp6(1),d.Oqu(e.DockName)}}function ee(e,t){if(1&e&&(d.TgZ(0,"option",43),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.UserID),d.xp6(1),d.Oqu(e.UserName)}}function te(e,t){if(1&e&&(d.TgZ(0,"option",43),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.LabourContractorID),d.xp6(1),d.Oqu(e.ContractorName)}}function re(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"div",44),d.TgZ(2,"h5",45),d._uU(3,"Customer Party"),d.qZA(),d.qZA(),d._UZ(4,"br"),d.TgZ(5,"form",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",46),d.TgZ(9,"div",8),d.TgZ(10,"label"),d._uU(11,"Party Name"),d.qZA(),d._UZ(12,"input",47),d.qZA(),d.qZA(),d.TgZ(13,"div",46),d.TgZ(14,"div",8),d.TgZ(15,"label",48),d._uU(16,"Shipping Address1"),d.qZA(),d._UZ(17,"input",49),d.qZA(),d.qZA(),d.TgZ(18,"div",46),d.TgZ(19,"div",8),d.TgZ(20,"label",48),d._uU(21,"Shipping Address2"),d.qZA(),d._UZ(22,"input",50),d.qZA(),d.qZA(),d.TgZ(23,"div",46),d.TgZ(24,"div",8),d.TgZ(25,"label",48),d._uU(26,"Pin Code"),d.qZA(),d._UZ(27,"input",51),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(28,"div",52),d.TgZ(29,"button",53),d.NdJ("click",function(){return d.CHM(e),d.oxw().onAddParty()}),d._uU(30,"OK"),d.qZA(),d.TgZ(31,"button",54),d.NdJ("click",function(){d.CHM(e);const t=d.oxw(),r=d.MAs(125);return t.onCloseAddParty(r)}),d._uU(32,"cancel"),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.xp6(5),d.Q6J("formGroup",e.formParty)}}const ie=function(){return[10,20,50,100,500]};let oe=(()=>{class e{constructor(e,t,r,i,o){this.api=e,this.fb=t,this.fbParty=r,this.dialogs=i,this.modalService=o,this.outID=0,this.DOID=0,this.DisptID=0,this.tab=0,this.DID=0,this.Out_Count=0,this.OutwardDetailsData={},this.ChargesListData=[],this.OutwardDetailList=[],this.config={backdrop:!1,ignoreBackdropClick:!0},this.SaveCustomerParty={},this.GetPendingDO={},this.newArr=[],this.Saveclick=!1,this.PendingDOListColum=[{header:"DispatchID",field:"DispatchID",hide:!0},{header:"DeliveryOrderID",field:"DeliveryOrderID",hide:!0},{header:"DeliveryOrderNo",field:"DeliveryOrderNo"},{header:"DispatchNo",field:"DispatchNo"},{header:"CreatedDate",field:"CreatedDate",hide:!0},{header:"OrderGivenBy",field:"OrderGivenBy"},{header:"DeliverTo",field:"DeliverTo"},{header:"ShippingAddress",field:"ShippingAddress"},{header:"Remarks",field:"Remarks",hide:!1},{header:"TruckNo",field:"TruckNo",hide:!1},{header:"ContainerNo",field:"ContainerNo"}],this.DeliveryOrderDetailColumns=[{field:"Outward",hide:!1,cellRenderer:e=>this.DeliveryOrderDetailCellRenderer(e),width:10},{field:"ProductName",hide:!1},{field:"LotNo",hide:!1,resizable:!0},{field:"BrandName"},{field:"CountInPacket",hide:!0},{field:"StorageArea",hide:!0},{field:"DispatchQuantity"},{field:"FirstLotNo",hide:!1},{field:"DeliveryOrderDID",hide:!1},{field:"DispatchDID"},{field:"ProductID",hide:!1}],this.DeliveryOrderDetailChargeColumns=[{field:"Add",width:10,hide:!1,cellRenderer:e=>this.DeliveryOrderChargeCellEditRenderer(e)},{field:"ServiceID",hide:!0},{field:"ServiceName",hide:!1,resizable:!0},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.Columnsdata=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnCancelledOutward.bind(this),label:"Click 1"}},{headerName:"OutWardID",field:"OutWardID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OutWardNo",field:"OutWardNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WarehouseID",field:"WarehouseID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseName",field:"WareHouseName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OutWardDate",field:"OutWardDate",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliveryOrderNo",field:"DeliveryOrderNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DispatchNo",field:"DispatchNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DeliverTo",field:"DeliverTo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TruckNo",field:"TruckNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ContainerNo",field:"ContainerNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransporterName",field:"TransporterName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"IsCancelled",field:"IsCancelled",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DriverName",field:"DriverName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"DocID",field:"DocID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LoadingBy",field:"LoadingBy",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",filter:"agTextColumnFilter",floatingFilter:!0}],this.currentUser=this.api.getCurrentUser();const a=new s.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=a,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:z},this.form=this.fb.group({customer_id:[null,n.kI.required],Outward_Date:[null,n.kI.required],txtTruck_No:[null,n.kI.required],txtContainer_No:[null,n.kI.required],cbCustomer_Party:[null,n.kI.required],cbRemarks:["",n.kI.required],txtDriver_Name:[null,n.kI.required],txtDriver_MobileNo:[null,n.kI.required],cbDock_Name:[null,n.kI.required],cbLodingBy_Name:[null,n.kI.required],cbLabourContractor:[null,n.kI.required]}),this.formParty=this.fbParty.group({txtPartyName:["",n.kI.required],txtShippingAddress1:["",n.kI.required],txtShippingAddress2:["",n.kI.required],txtPinCode:["",n.kI.required]})}ngOnInit(){this.BindDropdown(),this.BindCustomerParty(),this.BindOutwardList(),this.DeliveryOrderDetailList=[],this.DeliveryOrderDetailChargeList=[]}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/Customer").subscribe(e=>{this.customerList=e},e=>{console.error(e)}),this.api.get("/Remarks").subscribe(e=>{this.remarkList=e.filter(e=>3==e.ProcessID)},e=>{console.error(e)}),this.api.get("/dock").subscribe(e=>{this.dockList=e},e=>{console.error(e)}),this.api.get("/UnloadingBy").subscribe(e=>{this.unloadingList=e},e=>{console.error(e)}),this.api.get("/LabourContracter").subscribe(e=>{this.labourContractorList=e},e=>{console.error(e)})})}BindCustomerParty(){this.api.get("/CustomerParty").subscribe(e=>{this.customePartyList=e},e=>{console.error(e)})}BindOutwardList(){this.api.post("/Outward/GetOutwardList",{outwardID:0,warehouseID:1,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"",createdBy:0,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:0}).subscribe(e=>{this.OutwardList12=e},e=>{console.error(e)})}tabOutward(e){this.tab=e}OnSearchPendingDO(){var e;null==this.form.value.customer_id||""==this.form.value.customer_id?(alert("Please .... Select Customer Name"),null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus()):(this.GetPendingDO={CustomerID:this.form.value.customer_id,WarehouseId:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId},this.api.post("/Outward/GetDeliveryOrderByID",this.GetPendingDO).subscribe(e=>{e.length>0?this.PendingDOList=e:alert("No Pending DO .....")},e=>{console.error(e)}))}openPartyWindow(e){var t;null==this.form.value.customer_id||""==this.form.value.customer_id?(alert("Please .... Select Customer Name"),null===(t=null==document?void 0:document.getElementById("customer_id"))||void 0===t||t.focus()):this.modalService.open(e)}onCloseAddParty(e){this.modalService.dismissAll(e)}onAddParty(){var e;null==this.formParty.value.txtPartyName||""==this.formParty.value.txtPartyName?(alert("Please .... Enter Party Name"),null===(e=null==document?void 0:document.getElementById("txtPartyName"))||void 0===e||e.focus()):(this.SaveCustomerParty={CustomerPartyID:0,CustomerID:this.form.value.customer_id,PartyName:this.formParty.value.txtPartyName,ShippingAddress:this.formParty.value.txtShippingAddress1,ShippingAddress1:this.formParty.value.txtShippingAddress2,PinCode:this.formParty.value.txtPinCode,CreatedBy:this.currentUser.userId},this.api.post("/CustomerParty/CustomerPartysave",this.SaveCustomerParty).subscribe(e=>{alert(e),this.formParty.reset(),this.BindCustomerParty()},e=>{console.error(e)}))}onRowDblclicked(e,t){var r;if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)alert("Please .... Select Labour Contractor"),null===(r=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===r||r.focus();else{this.DOID=Number(e.cellSelection[0].rowData.DeliveryOrderID),this.DisptID=Number(e.cellSelection[0].rowData.DispatchID);const t=this.customePartyList.filter(t=>t.PartyName==e.cellSelection[0].rowData.DeliverTo);this.form.patchValue({txtTruck_No:e.cellSelection[0].rowData.TruckNo,txtContainer_No:e.cellSelection[0].rowData.ContainerNo,cbCustomer_Party:t[0].CustomerPartyID}),this.api.post("/Outward/GetDeliveryOrderDetail",{outwardID:0,warehouseID:0,outWardDate:0,billStartDate:0,deliveryOrderID:0,customerPartyID:0,truckNo:0,containerNo:0,transporterName:0,remarks:0,createdBy:0,customerID:0,driverName:0,driverNo:0,docID:0,loadingBy:0,transferID:0,dispatchID:e.cellSelection[0].rowData.DispatchID,StatusID:0}).subscribe(e=>{this.DeliveryOrderDetailList=e},e=>{console.error(e)})}}DeliveryOrderDetailCellRenderer(e){const t=document.createElement("input");t.type="checkbox",t.value="true",t.checked=e.value;const r={CustomerID:this.form.value.customer_id,WarehouseId:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId,ProductID:e.data.ProductID};if(t.addEventListener("click",t=>{e.setValue(1!=e.value)}),"true"==e.value.toString())this.api.post("/Outward/GetOutwardServices",r).subscribe(t=>{if(this.DeliveryOrderDetailChargeList=[],this.DeliveryOrderDetailChargeList=t,this.DID=this.DID+1,this.OutwardDetailsData={OutwardDID:this.DID,DeliveryOrderDID:e.data.DeliveryOrderDID,DispatchDID:e.data.DispatchDID,OutQuantity:e.data.DispatchQuantity,LabourContractorID:this.form.value.cbLabourContractor},this.OutwardDetailList.length>0){const t=this.OutwardDetailList.filter(t=>t.DeliveryOrderDID!=e.data.DeliveryOrderDID);this.OutwardDetailList=t}this.OutwardDetailList.push(this.OutwardDetailsData),this.DeliveryOrderDetailChargeList.forEach(e=>{1==e.Add&&this.ChargesListData.push({OutwardDID:this.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.ChargesListData.slice()},e=>{console.error(e)});else if(this.DeliveryOrderDetailChargeList=[],this.OutwardDetailList.length>0){const t=this.OutwardDetailList.filter(t=>t.DeliveryOrderDID==e.data.DeliveryOrderDID),r=this.ChargesListData.filter(e=>e.OutwardDID!=t[0].OutwardDID);this.ChargesListData=r}return t}DeliveryOrderChargeCellEditRenderer(e){const t=document.createElement("input");return t.type="checkbox",t.value="true",t.checked=e.value,t.addEventListener("click",t=>{e.setValue(1!=e.value);const r=this.ChargesListData.filter(e=>e.OutwardDID!=this.DID);this.ChargesListData=r,this.DeliveryOrderDetailChargeList.forEach(e=>{1==e.Add&&this.ChargesListData.push({OutwardDID:this.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.ChargesListData.slice()}),t}OnSaveOutward(){var e,t,r,i,o,a;if(this.DeliveryOrderDetailList.length>0){const e=this.DeliveryOrderDetailList.filter(e=>0==e.Outward);this.Out_Count=e.length}if(console.log("Save"),null==this.form.value.customer_id||""==this.form.value.customer_id)return alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("customer_id"))||void 0===e||e.focus());if(null==this.form.value.Outward_Date)return alert("Please... Select Outward Date ..!!!"),void(null===(t=null==document?void 0:document.getElementById("Outward_Date"))||void 0===t||t.focus());if(null==this.form.value.txtTruck_No||""==this.form.value.txtTruck_No)return alert("Please .... Enter Truck No ...."),void(null===(r=null==document?void 0:document.getElementById("txtTruck_No"))||void 0===r||r.focus());if(null==this.form.value.cbDock_Name||""==this.form.value.cbDock_Name)return alert("Please .... select Dock name ...."),void(null===(i=null==document?void 0:document.getElementById("cbDock_Name"))||void 0===i||i.focus());if(null==this.form.value.cbLodingBy_Name)return alert("Please... Select unloading by ..!!!"),void(null===(o=null==document?void 0:document.getElementById("cbLodingBy_Name"))||void 0===o||o.focus());if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)return alert("Please .... select Labour Contractor ...."),void(null===(a=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===a||a.focus());if(0!=this.DeliveryOrderDetailList.length)if(this.Out_Count>0)alert("Please... Select Outward Product ..!!!");else{this.Saveclick=!0,this.newArr=[],this.OutwardDetailList.forEach(e=>{this.ChargesListData.forEach(t=>{e.OutwardDID==t.OutwardDID&&this.newArr.push({OutwardDID:e.DeliveryOrderDID,ServiceID:t.ServiceID,ServiceName:t.ServiceName,Rate:t.Rate,L_Rate:t.L_Rate})})}),this.ChargesListData=this.newArr;const e={OutwardID:this.outID,WarehouseID:this.currentUser.warehouseId,OutWardDate:this.form.value.Outward_Date,BillStartDate:this.form.value.Outward_Date,DeliveryOrderID:this.DOID,CustomerPartyID:this.form.value.cbCustomer_Party,TruckNo:this.form.value.txtTruck_No,ContainerNo:this.form.value.txtContainer_No,TransporterName:"",Remarks:this.form.value.cbRemarks,CreatedBy:this.currentUser.userId,CustomerID:Number(this.form.value.customer_id),OutwardDetailModel:this.OutwardDetailList,OutwardChargeModel:this.ChargesListData,DriverName:this.form.value.txtDriver_Name,DriverNo:this.form.value.txtDriver_MobileNo,DocID:Number(this.form.value.cbDock_Name),LoadingBy:Number(this.form.value.cbLodingBy_Name),TransferID:0,DispatchID:this.DisptID};this.api.post("/Outward/Outward_Insert",e).subscribe(e=>{this.BindOutwardList()},e=>{console.error(e)})}else alert("Please... Add Outward Details ..!!!")}OnResetOuward(){this.form.reset(),this.Saveclick=!1,this.BindOutwardList();const e=new s.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=e,this.outID=0,this.DOID=0,this.DisptID=0,this.BindCustomerParty(),this.DeliveryOrderDetailList=[],this.DeliveryOrderDetailChargeList=[],this.PendingDOList=[],this.SaveCustomerParty=[],this.DeliveryOrderDetailList=[],this.OutwardDetailList=[],this.ChargesListData=[],this.Out_Count=0,this.newArr=[]}onDeleteOutward(e){console.log("0",e);const t={outwardID:e.OutWardID,warehouseID:e.WarehouseID,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"BY test",createdBy:this.currentUser.userId,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:e.StatusID};console.log("Delete ",t),this.api.post("/Outward/OutwardStatus_validation",t).subscribe(r=>{console.log("process ",r[0].Count),0==r[0].Count?(alert("Some data is updated. So Please, reperform your cancelled operation"),this.BindOutwardList()):(e.StatusID=82)?alert("Sorry,Outward already deactivated or deleted ....!!!"):this.api.post("/Outward/OutWard_Cancelled",t).subscribe(e=>{alert(e),this.BindOutwardList()},e=>{console.error(e)})},e=>{console.error(e)})}OnCancelledOutward(e){if(window.confirm("Do you want to cancel your Outward...!!!")){const t={outwardID:e.rowData.OutWardID,warehouseID:e.rowData.WarehouseID,outWardDate:"",billStartDate:"",deliveryOrderID:0,customerPartyID:0,truckNo:"",containerNo:"",transporterName:"",remarks:"BY test",createdBy:this.currentUser.userId,customerID:0,driverName:"",driverNo:"",docID:0,loadingBy:0,transferID:0,dispatchID:0,StatusID:e.rowData.StatusID};this.api.post("/Outward/OutwardStatus_validation",t).subscribe(r=>{0==r[0].Count?(alert("Some data is updated. So Please, reperform your cancelled operation"),this.BindOutwardList()):(e.rowData.StatusID=82)?alert("Sorry,Outward already deactivated or deleted ....!!!"):this.api.post("/Outward/OutWard_Cancelled",t).subscribe(e=>{alert(e),this.BindOutwardList()},e=>{console.error(e)})},e=>{console.error(e)})}else console.log("Cancel")}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.sM),d.Y36(n.qu),d.Y36(n.qu),d.Y36(u.cP),d.Y36(h.FF))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-outward"]],decls:126,vars:39,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Outward"],[3,"formGroup"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-5","col-md-5"],[1,"form-group"],["formControlName","customer_id","id","customer_id",1,"form-control","form-control-sm"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","customer_id_error"],[1,"col-sm-3","col-md-3"],[1,"form-group","pt-3"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"],[1,"col-sm-4","col-md-4"],["type","datetime-local","formControlName","Outward_Date","id","Outward_Date","placeholder","","name","deliveryorder_date",1,"form-control","form-control-rounded",3,"ngModel"],[1,"col-sm-6","col-md-6"],["type","text","formControlName","txtTruck_No","id","txtTruck_No","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtContainer_No","id","txtContainer_No","placeholder","",1,"form-control","form-control-sm"],["formControlName","cbCustomer_Party","id","cbCustomer_Party",1,"form-control","form-control-sm"],["formControlName","cbRemarks","id","cbRemarks",1,"form-control","form-control-sm"],["type","text","formControlName","txtDriver_Name","id","txtDriver_Name","placeholder","",1,"form-control","form-control-sm"],["type","text","formControlName","txtDriver_MobileNo","id","txtDriver_MobileNo","placeholder","",1,"form-control","form-control-sm"],["formControlName","cbDock_Name","id","cbDock_Name",1,"form-control","form-control-sm"],["formControlName","cbLodingBy_Name","id","cbLodingBy_Name",1,"form-control","form-control-sm"],["formControlName","cbLabourContractor","id","cbLabourContractor",1,"form-control","form-control-sm"],[1,"row"],[1,"col-12"],[1,"font-weight-bold"],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridPendingDOdList",""],[1,"col-8"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],[1,"col-4"],[1,"col-sm-4"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",2,"width","85px !important",3,"click"],["label","Outward List"],[1,"ag-theme-alpine",2,"height","400px",3,"rowData","columnDefs","frameworkComponents"],["AddPartyContent",""],[3,"value"],[1,"modal-header"],["id","modal-basic-title"],[1,"col-sm-6"],["type","text","formControlName","txtPartyName","id","txtPartyName","autocomplete","off",1,"form-control","form-control-sm"],["for","company"],["type","text","formControlName","txtShippingAddress1","id","txtShippingAddress1",1,"form-control","form-control-sm"],["type","text","formControlName","txtShippingAddress2","id","txtShippingAddress2",1,"form-control","form-control-sm"],["type","text","formControlName","txtPinCode","id","txtPinCode",1,"form-control","form-control-sm"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-info",3,"click"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"mat-card"),d.TgZ(3,"mat-tab-group",2),d.NdJ("selectedIndexChange",function(e){return t.tabOutward(e)})("selectedIndexChange",function(e){return t.tab=e}),d.TgZ(4,"mat-tab",3),d.TgZ(5,"form",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"label"),d._uU(11,"Customer Name"),d.qZA(),d.TgZ(12,"select",9),d.TgZ(13,"option",10),d._uU(14,"Select"),d.qZA(),d.YNc(15,$,2,2,"option",11),d.qZA(),d._UZ(16,"mat-error",12),d.qZA(),d.qZA(),d.TgZ(17,"div",13),d.TgZ(18,"div",14),d.TgZ(19,"button",15),d.NdJ("click",function(){return t.OnSearchPendingDO()}),d._uU(20,"Pending DO"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",16),d.TgZ(22,"div",8),d.TgZ(23,"label"),d._uU(24,"Outward Date"),d.qZA(),d._UZ(25,"input",17),d.ALo(26,"date"),d.qZA(),d.qZA(),d.TgZ(27,"div",18),d.TgZ(28,"div",8),d.TgZ(29,"label"),d._uU(30,"Truck No"),d.qZA(),d._UZ(31,"input",19),d.qZA(),d.qZA(),d.TgZ(32,"div",18),d.TgZ(33,"div",8),d.TgZ(34,"label"),d._uU(35,"Container No"),d.qZA(),d._UZ(36,"input",20),d.qZA(),d.qZA(),d.TgZ(37,"div",16),d.TgZ(38,"div",8),d.TgZ(39,"label"),d._uU(40,"Customer Party"),d.qZA(),d.TgZ(41,"select",21),d.TgZ(42,"option",10),d._uU(43,"Select"),d.qZA(),d.YNc(44,K,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(45,"div",13),d.TgZ(46,"div",14),d.TgZ(47,"button",15),d.NdJ("click",function(){d.CHM(e);const r=d.MAs(125);return t.openPartyWindow(r)}),d._uU(48,"ADD Party"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(49,"div",7),d.TgZ(50,"div",8),d.TgZ(51,"label"),d._uU(52,"Remarks"),d.qZA(),d.TgZ(53,"select",22),d.TgZ(54,"option",10),d._uU(55,"Select"),d.qZA(),d.YNc(56,X,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(57,"div",18),d.TgZ(58,"div",8),d.TgZ(59,"label"),d._uU(60,"Driver Name"),d.qZA(),d._UZ(61,"input",23),d.qZA(),d.qZA(),d.TgZ(62,"div",18),d.TgZ(63,"div",8),d.TgZ(64,"label"),d._uU(65,"Driver Mobile No"),d.qZA(),d._UZ(66,"input",24),d.qZA(),d.qZA(),d.TgZ(67,"div",16),d.TgZ(68,"div",8),d.TgZ(69,"label"),d._uU(70,"Dock Name"),d.qZA(),d.TgZ(71,"select",25),d.TgZ(72,"option",10),d._uU(73,"Select"),d.qZA(),d.YNc(74,j,2,2,"option",11),d.qZA(),d._UZ(75,"mat-error",12),d.qZA(),d.qZA(),d.TgZ(76,"div",16),d.TgZ(77,"div",8),d.TgZ(78,"label"),d._uU(79,"LodingBy Name"),d.qZA(),d.TgZ(80,"select",26),d.TgZ(81,"option",10),d._uU(82,"Select"),d.qZA(),d.YNc(83,ee,2,2,"option",11),d.qZA(),d._UZ(84,"mat-error",12),d.qZA(),d.qZA(),d.TgZ(85,"div",16),d.TgZ(86,"div",8),d.TgZ(87,"label"),d._uU(88,"Labour Contractor"),d.qZA(),d.TgZ(89,"select",27),d.TgZ(90,"option",10),d._uU(91,"Select"),d.qZA(),d.YNc(92,te,2,2,"option",11),d.qZA(),d._UZ(93,"mat-error",12),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(94,"hr"),d.TgZ(95,"div",28),d.TgZ(96,"div",29),d.TgZ(97,"p",30),d._uU(98,"Pending DO"),d.qZA(),d.TgZ(99,"mtx-grid",31,32),d.NdJ("dblclick",function(r){d.CHM(e);const i=d.MAs(100);return t.onRowDblclicked(i,r)}),d.qZA(),d.qZA(),d.qZA(),d._UZ(101,"hr"),d.TgZ(102,"div",28),d.TgZ(103,"div",33),d.TgZ(104,"p",30),d._uU(105,"Product List"),d.qZA(),d.TgZ(106,"div",34),d._UZ(107,"ag-grid-angular",35),d.qZA(),d.qZA(),d.TgZ(108,"div",36),d.TgZ(109,"p",30),d._uU(110,"Product Charges"),d.qZA(),d.TgZ(111,"div",34),d._UZ(112,"ag-grid-angular",35),d.qZA(),d.qZA(),d.qZA(),d._UZ(113,"hr"),d.TgZ(114,"div",28),d.TgZ(115,"div",37),d.TgZ(116,"button",38),d.NdJ("click",function(){return t.OnSaveOutward()}),d._uU(117,"Save"),d.qZA(),d.qZA(),d.TgZ(118,"div",37),d.TgZ(119,"button",39),d.NdJ("click",function(){return t.OnResetOuward()}),d._uU(120,"Reset"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(121,"mat-tab",40),d.TgZ(122,"div",29),d._UZ(123,"ag-grid-angular",41),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(124,re,33,1,"ng-template",null,42,d.W1O)}2&e&&(d.xp6(3),d.Q6J("selectedIndex",t.tab),d.xp6(2),d.Q6J("formGroup",t.form),d.xp6(10),d.Q6J("ngForOf",t.customerList),d.xp6(10),d.Q6J("ngModel",d.xi3(26,35,t.todayDate,"yyyy-MM-dd hh:mm:ss")),d.xp6(19),d.Q6J("ngForOf",t.customePartyList),d.xp6(12),d.Q6J("ngForOf",t.remarkList),d.xp6(18),d.Q6J("ngForOf",t.dockList),d.xp6(9),d.Q6J("ngForOf",t.unloadingList),d.xp6(9),d.Q6J("ngForOf",t.labourContractorList),d.xp6(7),d.Q6J("data",t.PendingDOList)("columns",t.PendingDOListColum)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!0)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",d.DdM(38,ie))("pageIndex",0),d.xp6(8),d.Q6J("rowData",t.DeliveryOrderDetailList)("columnDefs",t.DeliveryOrderDetailColumns),d.xp6(5),d.Q6J("rowData",t.DeliveryOrderDetailChargeList)("columnDefs",t.DeliveryOrderDetailChargeColumns),d.xp6(4),d.Q6J("disabled",t.Saveclick),d.xp6(7),d.Q6J("rowData",t.OutwardList12)("columnDefs",t.Columnsdata)("frameworkComponents",t.frameworkComponents))},directives:[m.xw,m.yH,f.a8,g.SP,g.uX,n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,n.YN,n.Kr,s.sg,D.TO,n.Fj,v.CM,I.N8],pipes:[s.uU],styles:[""]}),e})(),ae=(()=>{class e{constructor(){this.label=""}agInit(e){this.params=e,this.label=this.params.label||null}refresh(e){return!0}onClick(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-shiftingedit-button"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"button",0),d.NdJ("click",function(e){return t.onClick(e)}),d._uU(1,"Delete"),d.qZA())},styles:[""]}),e})();var ne=r(22238);function le(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerID),d.xp6(1),d.Oqu(e.CustomerName)}}function se(e,t){1&e&&(d.TgZ(0,"span"),d._uU(1,"Customer Name"),d.qZA())}function de(e,t){if(1&e&&(d.TgZ(0,"div",47),d.YNc(1,se,2,0,"span",48),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.cbCustomerID||null==e.f.cbCustomerID.errors?null:e.f.cbCustomerID.errors.required)}}function ce(e,t){1&e&&(d.TgZ(0,"div"),d._uU(1,"Enter Lot No"),d.qZA())}function ue(e,t){if(1&e&&(d.TgZ(0,"div",47),d.YNc(1,ce,2,0,"div",48),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.txtLotNo||null==e.f.txtLotNo.errors?null:e.f.txtLotNo.errors.required)}}function he(e,t){1&e&&(d.TgZ(0,"div"),d._uU(1,"Enter inward date"),d.qZA())}function me(e,t){if(1&e&&(d.TgZ(0,"div",47),d.YNc(1,he,2,0,"div",48),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.shift_date||null==e.f.shift_date.errors?null:e.f.shift_date.errors.required)}}function fe(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.UserID),d.xp6(1),d.Oqu(e.UserName)}}function ge(e,t){1&e&&(d.TgZ(0,"div"),d._uU(1,"Select Item Type"),d.qZA())}function De(e,t){if(1&e&&(d.TgZ(0,"div",47),d.YNc(1,ge,2,0,"div",48),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.cbloadingByID.errors?null:e.f.cbloadingByID.errors.required)}}function pe(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.StorageAreaID),d.xp6(1),d.hij("",e.Storage_Area_Name," ")}}function Ie(e,t){if(1&e&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.LabourContractorID),d.xp6(1),d.hij(" ",e.ContractorName,"")}}const ve=function(e){return{"is-invalid":e}},Ze=function(){return[10,20,50,100,500]};let ye=(()=>{class e{constructor(e,t,r,i,o){this.fb=e,this.fbAdd=t,this.api=r,this.dialog=i,this.dialogBox=o,this.submitted=!1,this.HideSaveButton=!0,this.tab=0,this.UserID=0,this.ServiceList=[],this.ShiftingDetailList=[],this.SDetailSaveList=[],this.SChargeSaveList=[],this.DetailList=[],this.ShiftDetail={},this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.shiftingsDID=0,this.Flag=!1,this.ShiftingID=0,this.BalanceStockColumn=[{header:"InwardDID",field:"InwardDID",hide:!1},{header:"WareHouseID",field:"WareHouseID",hide:!1},{header:"InwardLocationID",field:"InwardLocationID"},{header:"StorageAreaID",field:"StorageAreaID"},{header:"Location",field:"Location",hide:!1},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo"},{header:"BrandName",field:"BrandName"},{header:"ItemsInPacket",field:"ItemsInPacket",hide:!1},{header:"InQuantity",field:"InQuantity",hide:!1},{header:"OutQuantity",field:"OutQuantity"},{header:"InprocessQuantity",field:"InprocessQuantity"},{header:"BalanceQuantity",field:"BalanceQuantity"}],this.serviceColumns=[{field:"ShiftingID",hide:!0},{field:"ServiceID",hide:!0},{field:"ServiceName",hide:!1,resizable:!0,width:120},{field:"Rate",hide:!1,width:70,cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",cellStyle:e=>e.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}},{field:"Rate_L",hide:!1,width:80,cellEditorPopup:!0,editable:!0,valueParser:"Number(newValue)",cellStyle:e=>e.value>0?{color:"white",backgroundColor:"#FF0000"}:{color:"black",backgroundColor:"#98FB98"}}],this.ShiftingDetailColumns=[{header:"ShiftingDID",field:"ShiftingDID",hide:!1},{header:"InwardLocationID",field:"InwardLocationID",hide:!1},{header:"InwardDID",field:"InwardDID"},{header:"ProductName",field:"ProductName"},{header:"LotNo",field:"LotNo",hide:!1},{header:"BrandName",field:"BrandName"},{header:"ItemInPackets",field:"ItemInPackets"},{header:"BalanceQuantity",field:"BalanceQuantity"},{header:"ShiftingQuantity",field:"ShiftingQuantity",hide:!1},{header:"FromLocation",field:"FromLocation",hide:!1},{header:"ToLocation",field:"ToLocation"},{header:"LabourContractor",field:"LabourContractor",hide:!1},{header:"FromLocationID",field:"FromLocationID"},{header:"ToLocationID",field:"ToLocationID",hide:!1},{header:"LabourContractorID",field:"LabourContractorID"}],this.ShiftingListColumnDefs=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnCancelledShifting.bind(this),label:"Click 1"}},{headerName:"ShiftingDID",field:"ShiftingDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ShiftingID",field:"ShiftingID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CustomerName",field:"CustomerName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromLocation",field:"FromLocation",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToLocation",field:"ToLocation",minWidth:100,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Quantity",field:"Quantity",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LabourContractorName",field:"LabourContractorName",hide:!0,minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LoadingBy",field:"LoadingBy",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedBy",field:"CreatedBy",minWidth:120,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CreatedDate",field:"CreatedDate",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WarehouseID",field:"WarehouseID",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusName",field:"StatusName",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",minWidth:200,filter:"agTextColumnFilter",floatingFilter:!0}];const a=new s.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=a,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:ae}}ngOnInit(){this.form=this.fb.group({cbCustomerID:["",n.kI.required],txtLotNo:[""],shift_date:["",n.kI.required],cbloadingByID:[null,n.kI.required],txtProductName:[""],txtShiftDetailLotNo:[""],txtBrandName:[""],txtpacketcount:[""],txtBalquantity:[""],txtShiftingQty:[""],txtLocation:[""],cbToLocation:[""],cblabourcontractor_id:[""]}),this.ShiftingServiceList=[],this.BindDropdown(),this.BindShiftingList()}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){const e={warehouseID:this.currentUser.warehouseId,StorageAreaID:0,LTD_StorageAreaS:null,createdBy:0,BlockID:0};this.api.get("/Customer").subscribe(e=>{this.customerList=e},e=>{console.error(e)}),this.api.get("/UnloadingBy").subscribe(e=>{this.loadingByList=e},e=>{console.error(e)}),this.api.get("/LabourContracter").subscribe(e=>{this.labourContractorList=e},e=>{console.error(e)}),this.api.post("/Storage/StorageArea_Select",e).subscribe(e=>{this.StorageAreas=e},e=>{console.error(e)})})}BindShiftingList(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.post("/Shifting/Shifting_List",{warehouseID:this.currentUser.warehouseId,StorageAreaID:0,LTD_StorageAreaS:null,createdBy:0,BlockID:0}).subscribe(e=>{this.ShiftingList=e},e=>{console.error(e)})})}get f(){return this.form.controls}OnSearchClick(){var e,t;return null==this.form.value.cbCustomerID||""==this.form.value.cbCustomerID?(alert("Please .... Select Customer Name"),void(null===(e=null==document?void 0:document.getElementById("cbCustomerID"))||void 0===e||e.focus())):null==this.form.value.txtLotNo||""==this.form.value.txtLotNo?(alert("Please .... Enter Lot No "),void(null===(t=null==document?void 0:document.getElementById("txtLotNo"))||void 0===t||t.focus())):void this.api.post("/Shifting/GetInwardDetails",{remarks:"",shiftingDID:0,shiftingID:0,warehouseID:0,customerID:this.form.value.cbCustomerID,createdBy:0,shiftingDate:0,loadingBy:0,LotNo:this.form.value.txtLotNo}).subscribe(e=>{this.BalanceStockList=e},e=>{console.error(e)})}onRowDblclicked(e,t){this.api.get("/Shifting/Shifting_services").subscribe(t=>{var r;this.ShiftingServiceList=t,this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.form.controls.txtProductName.reset(),this.form.controls.txtShiftDetailLotNo.reset(),this.form.controls.txtBrandName.reset(),this.form.controls.txtpacketcount.reset(),this.form.controls.txtBalquantity.reset(),this.form.controls.txtShiftingQty.reset(),this.form.controls.txtLocation.reset(),this.form.controls.cbToLocation.reset(),this.InwardDID=e.cellSelection[0].rowData.InwardDID,this.InwardLocationID=e.cellSelection[0].rowData.InwardLocationID,this.WareHousesID=e.cellSelection[0].rowData.WareHouseID,this.FromLocationID=e.cellSelection[0].rowData.StorageAreaID,this.form.patchValue({txtProductName:e.cellSelection[0].rowData.ProductName,txtShiftDetailLotNo:e.cellSelection[0].rowData.LotNo,txtBrandName:e.cellSelection[0].rowData.BrandName,txtpacketcount:e.cellSelection[0].rowData.ItemsInPacket,txtBalquantity:e.cellSelection[0].rowData.BalanceQuantity,txtShiftingQty:"",txtLocation:e.cellSelection[0].rowData.Location}),null===(r=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===r||r.focus()},e=>{console.error(e)})}onKeyfilter(e){Number(this.form.value.txtBalquantity)>0&&Number(this.form.value.txtBalquantity)<Number(e)&&(alert("Shifting Quantity greater than the Balance Quantity ....!!!"),this.form.controls.txtShiftingQty.setValue(""))}OnToLocationSelect(e){const t=this.StorageAreas.filter(e=>e.StorageAreaID==this.form.value.cbToLocation);(""!=this.form.value.txtLocation||null!=this.form.value.txtLocation)&&this.form.value.txtLocation==t[0].Storage_Area_Name&&(alert("Please Select other location"),this.form.controls.cbToLocation.reset())}OnAddClick(){var e,t,r,i;if(null==this.form.value.txtShiftingQty||""==this.form.value.txtShiftingQty)return alert("Please .... Enter Shifting Quantity...!!"),void(null===(e=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===e||e.focus());if(Number(this.form.value.txtBalquantity)<Number(this.form.value.txtShiftingQty))return alert("Shifting Quantity greater than the Balance Quantity ....!!!"),void(null===(t=null==document?void 0:document.getElementById("txtShiftingQty"))||void 0===t||t.focus());if(null==this.form.value.cbToLocation||0==this.form.value.cbToLocation)return alert("Please .... Select To Location...!!"),void(null===(r=null==document?void 0:document.getElementById("cbToLocation"))||void 0===r||r.focus());if(null==this.form.value.cblabourcontractor_id||0==this.form.value.cblabourcontractor_id)return alert("Please .... Select Labour Contractor...!!"),void(null===(i=null==document?void 0:document.getElementById("cblabourcontractor_id"))||void 0===i||i.focus());{const e=this.StorageAreas.filter(e=>e.StorageAreaID==this.form.value.cbToLocation),t=this.StorageAreas.filter(e=>e.StorageAreaID==this.FromLocationID),r=this.labourContractorList.filter(e=>e.LabourContractorID==this.form.value.cblabourcontractor_id);0==this.Flag&&(this.shiftingsDID=this.shiftingsDID+1);const i=this.ShiftingDetailList.filter(e=>e.ShiftingDID!=this.shiftingsDID);this.ShiftingDetailList=i;const o=this.ServiceList.filter(e=>e.ShiftingDID!=this.shiftingsDID);this.ServiceList=o,this.ShiftDetail=[],this.ShiftDetail={ShiftingDID:this.shiftingsDID,InwardLocationID:this.InwardLocationID,InwardDID:this.InwardDID,ProductName:this.form.value.txtProductName,LotNo:this.form.value.txtShiftDetailLotNo,BrandName:this.form.value.txtBrandName,ItemInPacket:this.form.value.txtpacketcount,BalanceQuantity:this.form.value.txtBalquantity,ShiftingQuantity:Number(this.form.value.txtShiftingQty),FromLocation:t[0].Storage_Area_Name,ToLocation:e[0].Storage_Area_Name,LabourContractor:r[0].ContractorName,FromLocationID:this.FromLocationID,ToLocationID:Number(this.form.value.cbToLocation),LabourContractorID:Number(this.form.value.cblabourcontractor_id)},this.DetailList=this.ShiftingDetailList,this.DetailList.push(this.ShiftDetail),this.ShiftingDetailList=this.DetailList.slice(),this.ShiftingServiceList.forEach(e=>{e.Rate>=0&&this.ServiceList.push({ShiftingDID:this.shiftingsDID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,Rate:e.Rate,Rate_L:e.Rate_L})}),this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.form.controls.txtProductName.reset(),this.form.controls.txtShiftDetailLotNo.reset(),this.form.controls.txtBrandName.reset(),this.form.controls.txtpacketcount.reset(),this.form.controls.txtBalquantity.reset(),this.form.controls.txtShiftingQty.reset(),this.form.controls.txtLocation.reset(),this.form.controls.cbToLocation.reset(),this.form.controls.txtLotNo.reset(),this.BalanceStockList=[],this.ShiftingServiceList=[]}}onSubmit(e){this.submitted=!0,console.log(e),this.form.invalid?alert("invalid"):0==this.ShiftingDetailList.length?alert("Enter Shifting Detail ..."):(this.HideSaveButton=!1,alert("Save"),this.ShiftingDetailList.forEach(e=>{e.ShiftingDID>0&&this.SDetailSaveList.push({ShiftingDID:e.ShiftingDID,InwardLocationID:e.InwardLocationID,LotNo:e.LotNo,InwardDID:e.InwardDID,FromLocationID:e.FromLocationID,ToLocationID:e.ToLocationID,Quantity:e.ShiftingQuantity,LabourContractorID:e.LabourContractorID})}),this.ServiceList.forEach(e=>{(e.Rate>0||e.Rate_L>0)&&this.SChargeSaveList.push({ShiftingDID:e.ShiftingDID,ServiceID:e.ServiceID,Rate:e.Rate,Rate_L:e.Rate_L})}),this.api.post("/Shifting/Shifting_insert",{ShiftingID:this.ShiftingID,WarehouseID:this.currentUser.warehouseId,CustomerID:this.form.value.cbCustomerID,CreatedBy:this.currentUser.userId,TD_ShiftingDetails:this.SDetailSaveList,TD_ShiftingCharges:this.SChargeSaveList,ShiftingDate:this.form.value.shift_date,LoadingBy:this.form.value.cbloadingByID}).subscribe(e=>{this.dialog.alert(e.Table[0].Column1)},e=>{console.error(e)}))}tabchange(e){this.tab=e}onReset(){this.submitted=!1,this.HideSaveButton=!0}onShiftDetailRowDblclick(e,t){this.Flag=!0,this.InwardDID=0,this.InwardLocationID=0,this.WareHousesID=0,this.FromLocationID=0,this.form.controls.txtProductName.reset(),this.form.controls.txtShiftDetailLotNo.reset(),this.form.controls.txtBrandName.reset(),this.form.controls.txtpacketcount.reset(),this.form.controls.txtBalquantity.reset(),this.form.controls.txtShiftingQty.reset(),this.form.controls.txtLocation.reset(),this.form.controls.cbToLocation.reset(),this.form.controls.cblabourcontractor_id.reset(),this.form.patchValue({txtProductName:e.cellSelection[0].rowData.ProductName,txtShiftDetailLotNo:e.cellSelection[0].rowData.LotNo,txtBrandName:e.cellSelection[0].rowData.BrandName,txtpacketcount:e.cellSelection[0].rowData.ItemsInPacket,txtBalquantity:e.cellSelection[0].rowData.BalanceQuantity,txtShiftingQty:e.cellSelection[0].rowData.ShiftingQuantity,txtLocation:e.cellSelection[0].rowData.FromLocation,cbToLocation:e.cellSelection[0].rowData.ToLocationID,cblabourcontractor_id:e.cellSelection[0].rowData.LabourContractorID}),this.InwardDID=e.cellSelection[0].rowData.InwardDID,this.InwardLocationID=e.cellSelection[0].rowData.InwardLocationID,this.WareHousesID=this.currentUser.warehouseId,this.FromLocationID=e.cellSelection[0].rowData.FromLocationID,this.shiftingsDID=e.cellSelection[0].rowData.ShiftingDID;const r=this.ServiceList.filter(e=>e.ShiftingDID==this.shiftingsDID);this.ShiftingServiceList=r}OnCancelledShifting(e){if(window.confirm("Do you want to cancel your Shifting...!!!")){const t={remarks:"",shiftingDID:0,shiftingID:e.rowData.ShiftingID,warehouseID:this.currentUser.warehouseId,customerID:this.form.value.cbCustomerID,createdBy:0,shiftingDate:0,loadingBy:0,LotNo:this.form.value.txtLotNo,StatusID:e.rowData.StatusID};console.log(t),this.api.post("/Shifting/ShiftingStatus_validation",t).subscribe(t=>{console.log(t),Number(t[0])>0?62==Number(e.rowData.StatusID)?this.dialog.alert("Sorry,this transaction has already cancelled ....!!!"):61==Number(e.rowData.StatusID)&&this.api.post("/Shifting/Shifting_Cancelled",{warehouseID:this.currentUser.warehouseId,StorageAreaID:0,shiftingDID:e.rowData.ShiftingDID,shiftingID:e.rowData.ShiftingID,LTD_StorageAreaS:null,BlockID:0,remarks:"text",createdBy:this.currentUser.userId}).subscribe(e=>{this.dialog.alert(e),this.BindShiftingList()},e=>{console.error(e)}):this.dialog.alert("Some data is updated. So Please reperform your delete operation...!!!")},e=>{console.error(e)})}}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(n.qu),d.Y36(n.qu),d.Y36(l.sM),d.Y36(u.cP),d.Y36(ne.uw))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-shifting"]],decls:129,vars:67,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Shifting"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-6"],[1,"form-group"],["formControlName","cbCustomerID","id","cbCustomerID",1,"form-control","form-control-sm",3,"ngClass"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-4"],["for","company"],["type","text","formControlName","txtLotNo","id","txtLotNo",1,"form-control","form-control-sm"],[1,"col-sm-2"],[1,"row"],[1,"form-group","pl-2"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],["type","datetime-local","formControlName","shift_date","id","shift_date","placeholder","yyyy-MM-dd","name","shift_date",1,"form-control","form-control-sm",3,"ngModel"],[1,"col-sm-8"],["formControlName","cbloadingByID","id","cbloadingByID",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-sm-12"],[1,"font-weight-bold"],[3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridPendingDOdList",""],[1,"col-12"],["type","text","formControlName","txtProductName","id","txtProductName","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShiftDetailLotNo","id","txtShiftDetailLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBrandName","id","txtBrandName","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtpacketcount","id","txtpacketcount","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBalquantity","id","txtBalquantity","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtShiftingQty","id","txtShiftingQty","autocomplete","off","placeholder","",1,"form-control","form-control-sm",3,"keyup"],["txtShiftingQty",""],["type","text","formControlName","txtLocation","id","txtLocation","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbToLocation","id","cbToLocation",1,"form-control","form-control-sm",3,"change"],["disabled","",3,"ngValue"],["formControlName","cblabourcontractor_id","id","cblabourcontractor_id",1,"form-control","form-control-sm"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["gridShiftDetailList",""],["type","submit",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"hidden","value"],["label","Shifting List"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"mat-card"),d.TgZ(3,"mat-tab-group",2),d.NdJ("selectedIndexChange",function(e){return t.tabchange(e)})("selectedIndexChange",function(e){return t.tab=e}),d.TgZ(4,"mat-tab",3),d.TgZ(5,"form",4),d.NdJ("ngSubmit",function(){return t.onSubmit(t.form)}),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"label"),d._uU(11,"Customer Name"),d.qZA(),d.TgZ(12,"select",9),d.TgZ(13,"option",10),d._uU(14,"Select "),d.qZA(),d.YNc(15,le,2,2,"option",11),d.qZA(),d.YNc(16,de,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(17,"div",13),d.TgZ(18,"div",8),d.TgZ(19,"label",14),d._uU(20,"LotNo"),d.qZA(),d._UZ(21,"input",15),d.YNc(22,ue,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(23,"div",16),d.TgZ(24,"div",17),d.TgZ(25,"div",18),d.TgZ(26,"button",19),d.NdJ("click",function(){return t.OnSearchClick()}),d._uU(27,"Apply "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(28,"div",13),d.TgZ(29,"div",8),d.TgZ(30,"label",14),d._uU(31,"Shifting Date"),d.qZA(),d._UZ(32,"input",20),d.ALo(33,"date"),d.YNc(34,me,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(35,"div",21),d.TgZ(36,"div",8),d.TgZ(37,"label"),d._uU(38,"Loading By"),d.qZA(),d.TgZ(39,"select",22),d.TgZ(40,"option",10),d._uU(41,"Select "),d.qZA(),d.YNc(42,fe,2,2,"option",11),d.qZA(),d.YNc(43,De,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(44,"div",23),d._UZ(45,"hr"),d.TgZ(46,"p",24),d._uU(47,"Pending DO"),d.qZA(),d.TgZ(48,"mtx-grid",25,26),d.NdJ("dblclick",function(r){d.CHM(e);const i=d.MAs(49);return t.onRowDblclicked(i,r)}),d.qZA(),d.qZA(),d.TgZ(50,"div",27),d._UZ(51,"hr"),d.TgZ(52,"p",24),d._uU(53,"Shifting Details"),d.qZA(),d.TgZ(54,"div",17),d.TgZ(55,"div",21),d.TgZ(56,"div",17),d.TgZ(57,"div",7),d.TgZ(58,"div",8),d.TgZ(59,"label"),d._uU(60,"Product Name"),d.qZA(),d._UZ(61,"input",28),d.qZA(),d.qZA(),d.TgZ(62,"div",7),d.TgZ(63,"div",8),d.TgZ(64,"label"),d._uU(65,"Lot No"),d.qZA(),d._UZ(66,"input",29),d.qZA(),d.qZA(),d.TgZ(67,"div",7),d.TgZ(68,"div",8),d.TgZ(69,"label"),d._uU(70,"Brand Name "),d.qZA(),d._UZ(71,"input",30),d.qZA(),d.qZA(),d.TgZ(72,"div",7),d.TgZ(73,"div",8),d.TgZ(74,"label"),d._uU(75,"Count In Packet"),d.qZA(),d._UZ(76,"input",31),d.qZA(),d.qZA(),d.TgZ(77,"div",7),d.TgZ(78,"div",8),d.TgZ(79,"label"),d._uU(80,"Balance Quantity"),d.qZA(),d._UZ(81,"input",32),d.qZA(),d.qZA(),d.TgZ(82,"div",7),d.TgZ(83,"div",8),d.TgZ(84,"label"),d._uU(85,"Shifting Quantity"),d.qZA(),d.TgZ(86,"input",33,34),d.NdJ("keyup",function(){d.CHM(e);const r=d.MAs(87);return t.onKeyfilter(r.value)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(88,"div",7),d.TgZ(89,"div",8),d.TgZ(90,"label"),d._uU(91,"Location"),d.qZA(),d._UZ(92,"input",35),d.qZA(),d.qZA(),d.TgZ(93,"div",7),d.TgZ(94,"div",8),d.TgZ(95,"label"),d._uU(96,"To Location"),d.qZA(),d.TgZ(97,"select",36),d.NdJ("change",function(e){return t.OnToLocationSelect(e)}),d.TgZ(98,"option",37),d._uU(99,"Select "),d.qZA(),d.YNc(100,pe,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(101,"div",7),d.TgZ(102,"div",8),d.TgZ(103,"label"),d._uU(104,"Labour Contracter"),d.qZA(),d.TgZ(105,"select",38),d.TgZ(106,"option",37),d._uU(107,"Select "),d.qZA(),d.YNc(108,Ie,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(109,"div",7),d.TgZ(110,"div",8),d.TgZ(111,"button",19),d.NdJ("click",function(){return t.OnAddClick()}),d._uU(112," Add "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(113,"div",13),d.TgZ(114,"div",39),d._UZ(115,"ag-grid-angular",40),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(116,"div",27),d._UZ(117,"hr"),d.TgZ(118,"p",24),d._uU(119," Shifting Detail List "),d.qZA(),d.TgZ(120,"mtx-grid",25,41),d.NdJ("dblclick",function(r){d.CHM(e);const i=d.MAs(121);return t.onShiftDetailRowDblclick(i,r)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(122,"div",23),d.TgZ(123,"div",8),d.TgZ(124,"button",42),d._uU(125," Save "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(126,"mat-tab",43),d.TgZ(127,"div",44),d._UZ(128,"ag-grid-angular",45),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(3),d.Q6J("selectedIndex",t.tab),d.xp6(2),d.Q6J("formGroup",t.form),d.xp6(7),d.Q6J("ngClass",d.VKq(61,ve,t.submitted&&t.f.cbCustomerID.invalid)),d.xp6(3),d.Q6J("ngForOf",t.customerList),d.xp6(1),d.Q6J("ngIf",t.submitted&&t.f.cbCustomerID.invalid),d.xp6(6),d.Q6J("ngIf",t.submitted&&t.f.txtLotNo.invalid),d.xp6(10),d.Q6J("ngModel",d.xi3(33,58,t.todayDate,"yyyy-MM-dd hh:mm:ss")),d.xp6(2),d.Q6J("ngIf",t.submitted&&t.f.shift_date.invalid),d.xp6(5),d.Q6J("ngClass",d.VKq(63,ve,t.submitted&&t.f.cbloadingByID.invalid)),d.xp6(3),d.Q6J("ngForOf",t.loadingByList),d.xp6(1),d.Q6J("ngIf",t.submitted&&t.f.cbloadingByID.invalid),d.xp6(5),d.Q6J("data",t.BalanceStockList)("columns",t.BalanceStockColumn)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!0)("hideRowSelectionCheckbox",!0)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",d.DdM(65,Ze))("pageIndex",0),d.xp6(50),d.Q6J("ngValue",null),d.xp6(2),d.Q6J("ngForOf",t.StorageAreas),d.xp6(6),d.Q6J("ngValue",null),d.xp6(2),d.Q6J("ngForOf",t.labourContractorList),d.xp6(7),d.Q6J("rowData",t.ShiftingServiceList)("columnDefs",t.serviceColumns),d.xp6(5),d.Q6J("data",t.ShiftingDetailList)("columns",t.ShiftingDetailColumns)("loading",!1)("columnResizable",!0)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",d.DdM(66,Ze))("pageIndex",0),d.xp6(4),d.Q6J("hidden",!t.HideSaveButton)("value",t.submitted),d.xp6(4),d.Q6J("rowData",t.ShiftingList)("columnDefs",t.ShiftingListColumnDefs)("frameworkComponents",t.frameworkComponents))},directives:[m.xw,m.yH,f.a8,g.SP,g.uX,n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,s.mk,p.oO,n.YN,n.Kr,s.sg,s.O5,n.Fj,v.CM,I.N8],pipes:[s.uU],styles:[""]}),e})(),Te=(()=>{class e{constructor(){this.label=""}agInit(e){this.params=e,this.label=this.params.label||null}refresh(e){return!0}onClick(e){this.params.onClick instanceof Function&&this.params.onClick({event:e,rowData:this.params.node.data})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-transferdeletebutton"]],decls:2,vars:0,consts:[["type","button",1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(e,t){1&e&&(d.TgZ(0,"button",0),d.NdJ("click",function(e){return t.onClick(e)}),d._uU(1,"Delete"),d.qZA())},styles:[""]}),e})();function be(e,t){if(1&e&&(d.TgZ(0,"option",55),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerID),d.xp6(1),d.Oqu(e.CustomerName)}}function Ce(e,t){1&e&&(d.TgZ(0,"span"),d._uU(1,"Select Customer"),d.qZA())}function Ne(e,t){if(1&e&&(d.TgZ(0,"div",56),d.YNc(1,Ce,2,0,"span",57),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.cbCustomerID||null==e.f.cbCustomerID.errors?null:e.f.cbCustomerID.errors.required)}}function we(e,t){1&e&&(d.TgZ(0,"div"),d._uU(1,"select Transfer date"),d.qZA())}function Ae(e,t){if(1&e&&(d.TgZ(0,"div",56),d.YNc(1,we,2,0,"div",57),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.Transfer_date||null==e.f.Transfer_date.errors?null:e.f.Transfer_date.errors.required)}}function Se(e,t){1&e&&(d.TgZ(0,"div"),d._uU(1,"Enter Lot No"),d.qZA())}function Le(e,t){if(1&e&&(d.TgZ(0,"div",56),d.YNc(1,Se,2,0,"div",57),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.txtTransfeNo||null==e.f.txtTransfeNo.errors?null:e.f.txtTransfeNo.errors.required)}}function xe(e,t){if(1&e&&(d.TgZ(0,"option",55),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.CustomerID),d.xp6(1),d.Oqu(e.CustomerName)}}function qe(e,t){1&e&&(d.TgZ(0,"span"),d._uU(1,"Select To Customer"),d.qZA())}function _e(e,t){if(1&e&&(d.TgZ(0,"div",56),d.YNc(1,qe,2,0,"span",57),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.cbToCustomerID||null==e.f.cbToCustomerID.errors?null:e.f.cbToCustomerID.errors.required)}}function ke(e,t){1&e&&(d.TgZ(0,"div"),d._uU(1,"Order Given By"),d.qZA())}function Oe(e,t){if(1&e&&(d.TgZ(0,"div",56),d.YNc(1,ke,2,0,"div",57),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.txtOrderGivenBy||null==e.f.txtOrderGivenBy.errors?null:e.f.txtOrderGivenBy.errors.required)}}function Fe(e,t){1&e&&(d.TgZ(0,"div"),d._uU(1,"Enter Lot No"),d.qZA())}function Ue(e,t){if(1&e&&(d.TgZ(0,"div",56),d.YNc(1,Fe,2,0,"div",57),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",null==e.f.txtRemarks||null==e.f.txtRemarks.errors?null:e.f.txtRemarks.errors.required)}}function Pe(e,t){if(1&e&&(d.TgZ(0,"option",58),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.ProductID),d.xp6(1),d.Oqu(e.ProductName)}}function Be(e,t){if(1&e&&(d.TgZ(0,"option",58),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.StorageAreaTypeID),d.xp6(1),d.hij("",e.ServiceName," ")}}function Qe(e,t){if(1&e&&(d.TgZ(0,"option",55),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.StorageAreaID),d.xp6(1),d.hij("",e.StorageArea," ")}}function Re(e,t){if(1&e&&(d.TgZ(0,"option",55),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.LabourContractorID),d.xp6(1),d.hij("",e.ContractorName," ")}}function Je(e,t){if(1&e&&(d.TgZ(0,"option",55),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.s9C("value",e.Remarks),d.xp6(1),d.hij("",e.Remarks," ")}}const Me=function(e){return{"is-invalid":e}},Ye=function(){return[10,20,50,100,500]};const Ee=[{path:"Inward",component:F},{path:"DeliveryOrder",component:E},{path:"Dispatch",component:V},{path:"Outward",component:oe},{path:"Shifting",component:ye},{path:"Transfer",component:(()=>{class e{constructor(e,t,r,i,o){this.fb=e,this.fbAdd=t,this.api=r,this.dialog=i,this.dialogBox=o,this.tab=0,this.submitted=!1,this.HideSaveButton=!0,this.DID=0,this.TransfersID=0,this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.NewLotNo="",this.NewLotNoID=0,this.TransferDetailsList=[],this.DetailList=[],this.ChargesList=[],this.TransferchargesList=[],this.TrnsNewLotList=[],this.flag=!1,this.TransferDetailtab=0,this.TransferDetailsListSave=[],this.TransferChargesListSave=[],this.ShiftingProductListCol=[{headerName:"InwardDID",field:"InwardDID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductID",field:"ProductID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductName",field:"ProductName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"LotNo",field:"LotNo",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FirstLotNo",field:"FirstLotNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BrandName",field:"BrandName",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"CountInPacket",field:"CountInPacket",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"InwardLocationID",field:"InwardLocationID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaID",field:"StorageAreaID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Location",field:"Location",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StorageAreaType",field:"StorageAreaType",filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"BalanceQuantity",field:"BalanceQuantity",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ProductRemarks",field:"ProductRemarks",filter:"agTextColumnFilter",floatingFilter:!0}],this.serviceColumns=[{field:"Add",cellRenderer:e=>this.checkBoxCellEditRenderer(e),hide:!1,width:10},{field:"TransferDID",hide:!0},{field:"ServiceID",hide:!0,resizable:!1},{field:"ServiceName"},{field:"C_Rate",hide:!0},{field:"L_Rate",hide:!0}],this.TransferListColumnDefs=[{headerName:"Action",width:100,floatingFilter:!1,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnCancelledTransfer.bind(this),label:"Click 1"}},{headerName:"TransferID",field:"TransferID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransferNo",field:"TransferNo",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseID",field:"WareHouseID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromCustomerID",field:"FromCustomerID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"FromCustomer",field:"FromCustomer",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToCustomerID",field:"ToCustomerID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"ToCustomer",field:"ToCustomer",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"TransferDate",field:"TransferDate",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"OrderGivenBy",field:"OrderGivenBy",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"WareHouseName",field:"WareHouseName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Remarks",field:"Remarks",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"StatusID",field:"StatusID",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{headerName:"Status",field:"Status",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0}],this.TransferDetailColumns=[{header:"TransferDID",field:"TransferDID",hide:!0},{header:"InwardDID",field:"InwardDID",hide:!0},{header:"LotNo",field:"LotNo",hide:!1},{header:"NewLotNo",field:"NewLotNo"},{header:"ProductID",field:"ProductID",hide:!0},{header:"ProductName",field:"ProductName"},{header:"BrandName",field:"BrandName"},{header:"InwardLocationID",field:"InwardLocationID",hide:!0},{header:"StorageAreaID",field:"StorageAreaID",hide:!0},{header:"ToStorageAreaID",field:"ToStorageAreaID",hide:!0},{header:"Location",field:"Location"},{header:"BalanceQty",field:"BalanceQty"},{header:"TransferQty",field:"TransferQty"},{header:"StorageAreaTypeID",field:"StorageAreaTypeID",hide:!0},{header:"StorageAreaType",field:"StorageAreaType"},{header:"LabourContractorID",field:"LabourContractorID",hide:!0},{header:"LabourContractorName",field:"LabourContractorName"},{header:"countInPacket",field:"countInPacket"},{header:"ProductRemarks",field:"ProductRemarks"}];const a=new s.uU("en-US").transform(Date(),"yyyy-MM-dd hh:mm:ss");this.todayDate=a,this.currentUser=this.api.getCurrentUser(),this.frameworkComponents={buttonRenderer:Te}}ngOnInit(){this.ProductList=[],this.TransferServiceList=[],this.form=this.fb.group({cbCustomerID:["",n.kI.required],Transfer_date:["",n.kI.required],txtTransfeNo:["",n.kI.required],cbToCustomerID:["",n.kI.required],txtOrderGivenBy:[null,n.kI.required],txtRemarks:[""],txtLotNo:[""],cbproduct_id:[""],txtBalanceQty:[""],txtBrand:[""],txtCount:[""],txtTransferQty:[""],cbStorageAreaType:[""],txtBillingCycle:[""],ckCustomerarea:[""],cbRemarks:[""],txtNewLotNo:[""],cbLocation:[""],cbLabourContractor:[""]}),this.BindDropdown(),this.BindTransferList(),this.BindTransferNewLotList()}get f(){return this.form.controls}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){const e={wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0};this.api.get("/Customer").subscribe(e=>{this.customerList=e},e=>{console.error(e)}),this.api.get("/StorageAreaType/ServieceStorageAreaType").subscribe(e=>{this.StorageAreaTypeList=e},e=>{console.error(e)}),this.api.post("/Transfer/GetStorageArea",e).subscribe(e=>{this.LocationList=e},e=>{console.error(e)}),this.api.get("/LabourContracter").subscribe(e=>{this.labourContractorList=e},e=>{console.error(e)}),this.api.get("/Remarks").subscribe(e=>{this.remarkList=e.filter(e=>6==e.ProcessID)},e=>{console.error(e)})})}BindTransferNewLotList(){return(0,a.mG)(this,void 0,void 0,function*(){this.TrnsNewLotList=[],this.NewLotNolist=[],this.BindNewLotNoData={InwardID:0,CustomerID:0,Remarks:0,CreatedBy:0,serviceID:0,ProductID:0,CompanyId:Number(this.currentUser.companyId),WarehouseId:Number(this.currentUser.warehouseId),FinantialYearId:Number(this.currentUser.FinantialYearId),challan:0,StorageAreaMasterID:1,FinancialYear:""},this.api.post("/Inward/GetLotNo",this.BindNewLotNoData).subscribe(e=>{this.NewLotNolist=e,this.NewLotNo=this.NewLotNolist[0].Prefix+this.NewLotNolist[0].LotNo+this.NewLotNolist[0].Sufix,this.NewLotNoID=Number(this.NewLotNolist[0].LotNo),this.form.controls.txtNewLotNo.setValue(this.NewLotNo)},e=>{console.error(e)})})}BindTransferList(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.post("/Transfer/Transfer_List",{transferID:0,wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:"",createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(e=>{this.TransferList=e},e=>{console.error(e)})})}tabchange(e){this.tab=e}OnSaveTransfer(e){this.submitted=!0,console.log(e),this.TransferDetailsList.forEach(e=>{this.TransferDetailsList.length>0&&this.TransferDetailsListSave.push({TransferDID:e.TransferDID,InwardDID:e.InwardDID,ProductID:e.ProductID,LotNo:e.LotNo,InwardLocationID:e.InwardLocationID,StorageAreaID:e.StorageAreaID,TransferQuantity:e.TransferQty,ToStorageAreaID:e.ToStorageAreaID,LabourContractorID:e.LabourContractorID,Remarks:e.ProductRemarks,StorageAreaTypeID:e.StorageAreaTypeID,NewLotNo:e.NewLotNo})}),this.TransferDetailsListSave.slice(),this.TransferchargesList.forEach(e=>{this.TransferchargesList.length>0&&this.TransferChargesListSave.push({Add:e.Add,TransferDID:e.TransferDID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.TransferChargesListSave.slice(),this.SaveTransferData={TransferID:this.TransfersID,WareHouseID:this.currentUser.warehouseId,CompanyID:this.currentUser.companyId,FromCustomerID:this.form.value.cbCustomerID,ToCustomerID:this.form.value.cbToCustomerID,TransferDate:this.form.value.Transfer_date,OrderGivenBy:this.form.value.txtOrderGivenBy,Remarks:this.form.value.txtRemarks,CreatedBy:this.currentUser.userId,TDTransferDetail:this.TransferDetailsListSave,TDTransferCharges:this.TransferChargesListSave,FinancialYearID:this.currentUser.FinantialYearId,StorageAreaMasterID:1},console.log(this.SaveTransferData),this.api.post("/Transfer/Transfer_Insert",this.SaveTransferData).subscribe(e=>{this.dialog.alert(e.Table[0].Message),this.BindTransferList()},e=>{console.error(e)})}GetCustomerID(e){this.api.post("/Transfer/GetTransferProductList",{transferID:0,wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:this.form.value.cbCustomerID,toCustomerID:0,transferDate:0,orderGivenBy:"",remarks:"",createdBy:0,financialYearID:this.currentUser.FinantialYearId,storageAreaMasterID:0}).subscribe(e=>{this.ProductList=e},e=>{console.error(e)}),this.api.post("/Inward/GetCustomerProducts?customerid="+this.form.value.cbCustomerID+"&warehouseid="+this.currentUser.warehouseId).subscribe(e=>{this.ProductNameList=e},e=>{console.error(e)})}checkBoxCellEditRenderer(e){const t=document.createElement("input");return t.type="checkbox",t.value="false",t.checked=e.value,t.addEventListener("click",t=>{e.setValue(1!=e.value),this.ChargesList=[],this.TransferServiceList.forEach(e=>{1==e.Add&&this.ChargesList.push({Add:!0,TransferDID:this.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.ChargesList.slice()}),t}OnCustomerarea(e){var t;1==this.form.value.ckCustomerarea?null==this.form.value.cbToCustomerID||""==this.form.value.cbToCustomerID?(alert("Please... Select To CustomerID ..!!!"),null===(t=null==document?void 0:document.getElementById("cbToCustomerID"))||void 0===t||t.focus(),this.form.controls.ckCustomerarea.setValue(!1)):this.api.post("/Transfer/GetStorageArea",{wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:this.form.value.cbToCustomerID,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(e=>{this.LocationList=e},e=>{console.error(e)}):this.api.post("/Transfer/GetStorageArea",{wareHouseID:this.currentUser.warehouseId,companyID:0,fromCustomerID:0,toCustomerID:0,transferDate:0,orderGivenBy:0,remarks:0,createdBy:0,financialYearID:0,storageAreaMasterID:0}).subscribe(e=>{this.LocationList=e},e=>{console.error(e)})}onProductListRowClicked(e){var t;const r={InwardID:0,CustomerID:Number(this.form.value.cbCustomerID),Remarks:"",CreatedBy:0,serviceID:0,ProductID:Number(e.data.ProductID),CompanyId:0,WarehouseId:this.currentUser.warehouseId,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""};this.api.post("/Transfer/GetTransferServices",r).subscribe(e=>{this.TransferServiceList=e},e=>{console.error(e)}),this.form.patchValue({txtLotNo:e.data.LotNo,cbproduct_id:e.data.ProductID,txtBrand:e.data.BrandName,txtBalanceQty:e.data.BalanceQuantity,txtCount:e.data.CountInPacket,cbStorageAreaType:e.data.StorageAreaTypeID,cbLocation:e.data.StorageAreaID}),this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.InwardDID=e.data.InwardDID,this.InwardLocationID=e.data.InwardLocationID,this.StorageAreaID=e.data.StorageAreaID,null===(t=null==document?void 0:document.getElementById("txtTransferQty"))||void 0===t||t.focus()}onKeyTransferQty(e){Number(this.form.value.txtTransferQty)>0&&Number(this.form.value.txtBalanceQty)<Number(e)&&(this.dialog.alert("Transfer Quantity is less than equal to balance quantity ....!!!"),this.form.controls.txtTransferQty.setValue(""))}OnAddClick(){var e,t;if(null==this.form.value.txtTransferQty||""==this.form.value.txtTransferQty||"0"==this.form.value.txtTransferQty)return null===(e=null==document?void 0:document.getElementById("txtTransferQty"))||void 0===e||e.focus(),void this.dialog.alert("Please .... Enter Transfer Quantity...");if(null==this.form.value.cbLabourContractor||""==this.form.value.cbLabourContractor)return null===(t=null==document?void 0:document.getElementById("cbLabourContractor"))||void 0===t||t.focus(),void this.dialog.alert("Please .... Enter Labour Contractor....");{if(1==this.flag){const e=this.DetailList.filter(e=>e.TransferDID!=this.DID);this.DetailList=e;const t=this.TransferchargesList.filter(e=>e.TransferDID!=this.DID);this.TransferchargesList=t}const e=this.ProductNameList.filter(e=>e.ProductID==this.form.value.cbproduct_id),t=this.LocationList.filter(e=>e.StorageAreaID==this.form.value.cbLocation),r=this.StorageAreaTypeList.filter(e=>e.StorageAreaTypeID==this.form.value.cbStorageAreaType),i=this.labourContractorList.filter(e=>e.LabourContractorID==this.form.value.cbLabourContractor);0==this.flag&&(this.DID=this.DID+1,this.TrnsNewLotList.push({LotNo:String(this.NewLotNoID),Prefix:"",Sufix:""}),this.NewLotNoID=this.NewLotNoID+1),this.newTransferDetail=[],this.newTransferDetail={TransferDID:this.DID,InwardDID:this.InwardDID,LotNo:this.form.value.txtLotNo,NewLotNo:this.form.value.txtNewLotNo,ProductID:this.form.value.cbproduct_id,ProductName:e[0].ProductName,BrandName:this.form.value.txtBrand,InwardLocationID:this.InwardLocationID,StorageAreaID:this.StorageAreaID,ToStorageAreaID:Number(this.form.value.cbLocation),Location:t[0].StorageArea,BalanceQty:this.form.value.txtBalanceQty,TransferQty:Number(this.form.value.txtTransferQty),StorageAreaTypeID:this.form.value.cbStorageAreaType,StorageAreaType:r[0].ServiceName,LabourContractorID:this.form.value.cbLabourContractor,LabourContractorName:i[0].ContractorName,countInPacket:this.form.value.txtCount,ProductRemarks:this.form.value.cbRemarks},this.DetailList.push(this.newTransferDetail),this.TransferDetailsList=this.DetailList.slice(),this.TransferServiceList.forEach(e=>{1==e.Add&&this.TransferchargesList.push({Add:!0,TransferDID:this.DID,ServiceID:e.ServiceID,ServiceName:e.ServiceName,C_Rate:e.C_Rate,L_Rate:e.L_Rate})}),this.NewLotNo=this.NewLotNolist[0].Prefix+this.NewLotNoID+this.NewLotNolist[0].Sufix,this.form.controls.txtNewLotNo.setValue(this.NewLotNo),this.form.controls.txtLotNo.reset(),this.form.controls.cbproduct_id.reset(),this.form.controls.txtBalanceQty.reset(),this.form.controls.txtBrand.reset(),this.form.controls.txtCount.reset(),this.form.controls.txtTransferQty.reset(),this.form.controls.cbStorageAreaType.reset(),this.form.controls.txtBillingCycle.reset(),this.form.controls.ckCustomerarea.reset(),this.form.controls.cbRemarks.reset(),this.form.controls.cbLocation.reset(),this.TransferServiceList=[]}console.log("Add_detail",this.TransferDetailsList),console.log("Add_charges",this.TransferchargesList)}onRowDblclickedTransfer(e,t){this.flag=!0,this.InwardDID=0,this.InwardLocationID=0,this.StorageAreaID=0,this.DID=e.cellSelection[0].rowData.TransferDID,this.InwardDID=e.cellSelection[0].rowData.InwardDID,this.InwardLocationID=e.cellSelection[0].rowData.InwardLocationID,this.StorageAreaID=e.cellSelection[0].rowData.StorageAreaID,this.form.patchValue({txtLotNo:e.cellSelection[0].rowData.LotNo,cbproduct_id:e.cellSelection[0].rowData.ProductID,txtBalanceQty:e.cellSelection[0].rowData.BalanceQty,txtBrand:e.cellSelection[0].rowData.BrandName,txtCount:e.cellSelection[0].rowData.countInPacket,txtTransferQty:e.cellSelection[0].rowData.TransferQty,cbStorageAreaType:e.cellSelection[0].rowData.StorageAreaTypeID,txtBillingCycle:"",ckCustomerarea:!1,cbRemarks:e.cellSelection[0].rowData.ProductRemarks,txtNewLotNo:e.cellSelection[0].rowData.NewLotNo,cbLocation:e.cellSelection[0].rowData.ToStorageAreaID,cbLabourContractor:e.cellSelection[0].rowData.LabourContractorID}),this.TransferDetailtab=0;const r={InwardID:0,CustomerID:Number(this.form.value.cbCustomerID),Remarks:"",CreatedBy:0,serviceID:0,ProductID:Number(e.cellSelection[0].rowData.ProductID),CompanyId:0,WarehouseId:this.currentUser.warehouseId,FinantialYearId:0,challan:"",StorageAreaMasterID:0,FinancialYear:""};this.api.post("/Transfer/GetTransferServices",r).subscribe(e=>{this.TransferServiceList=e,this.serviceListEditBind()},e=>{console.error(e)})}serviceListEditBind(){const e=this.TransferchargesList.filter(e=>e.TransferDID==this.DID);this.TransferServiceTest=e;let t=this.TransferServiceTest.concat(this.TransferServiceList.filter(e=>!this.TransferServiceTest.find(t=>t.ServiceID==e.ServiceID)));this.TransferServiceList=t,this.TransferServiceList.forEach(e=>{e.ServiceID>0&&(e.TransferDID=this.DID)})}OnCancelledTransfer(e){if(console.log(e.rowData),window.confirm("Do you want to cancel your Transfer...!!!")){const t={transferID:Number(e.rowData.TransferID),wareHouseID:Number(e.rowData.WareHouseID),companyID:0,fromCustomerID:Number(e.rowData.FromCustomerID),toCustomerID:0,transferDate:"",orderGivenBy:"",remarks:"",createdBy:0,financialYearID:0,storageAreaMasterID:0,StatusID:Number(e.rowData.StatusID)};console.log(t),this.api.post("/Transfer/TransferStatus_validation",t).subscribe(t=>{if(Number(t[0])>0)if(72==Number(e.rowData.StatusID))this.dialog.alert("Sorry,Transfer already deactivated or deleted ....!!!");else{const t={transferID:Number(e.rowData.TransferID),wareHouseID:Number(e.rowData.WareHouseID),companyID:0,fromCustomerID:Number(e.rowData.FromCustomerID),toCustomerID:Number(e.rowData.ToCustomerID),transferDate:"",orderGivenBy:"",remarks:"",createdBy:this.currentUser.userId,financialYearID:0,storageAreaMasterID:0,StatusID:Number(e.rowData.StatusID)};this.api.post("/Transfer/Transfer_Cancelled",t).subscribe(e=>{this.dialog.alert(e),this.BindTransferList()},e=>{console.error(e)})}else this.dialog.alert("Please re-perform your delete operation...!!!")},e=>{console.error(e)})}}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(n.qu),d.Y36(n.qu),d.Y36(l.sM),d.Y36(u.cP),d.Y36(ne.uw))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-transfer"]],decls:161,vars:62,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","0ms",3,"selectedIndex","selectedIndexChange"],["label","Transfer"],[3,"formGroup","ngSubmit"],[1,"col-md-12"],[1,"row","pt-2"],[1,"col-sm-7"],[1,"form-group"],["formControlName","cbCustomerID","id","cbCustomerID",1,"form-control","form-control-sm",3,"ngClass","change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-3"],["for","company"],["type","datetime-local","formControlName","Transfer_date","id","Transfer_date","placeholder","yyyy-MM-dd","name","Transfer_date",1,"form-control","form-control-sm",3,"ngModel"],[1,"col-sm-2"],["type","text","readonly","","formControlName","txtTransfeNo","id","txtTransfeNo",1,"form-control","form-control-sm"],[1,"col-sm-6"],["formControlName","cbToCustomerID","id","cbToCustomerID",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtOrderGivenBy","id","txtOrderGivenBy",1,"form-control","form-control-sm",3,"ngClass"],["type","text","formControlName","txtRemarks","id","txtRemarks",1,"form-control","form-control-sm"],[1,"col-sm-12"],[1,"font-weight-bold"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","rowSelection","rowDoubleClicked"],["label","Transfer Product Details"],[1,"col-sm-9"],[1,"row"],["type","text","formControlName","txtLotNo","id","txtLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbproduct_id","id","cbproduct_id",1,"form-control","form-control-sm"],["disabled","",3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","txtBalanceQty","id","txtBalanceQty","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtBrand","id","txtBrand","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","text","formControlName","txtTransferQty","id","txtTransferQty","autocomplete","off","placeholder","",1,"form-control","form-control-sm",3,"keyup"],["txtTransferQty",""],["type","text","formControlName","txtCount","id","txtCount","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbStorageAreaType","id","cbStorageAreaType","readonly","",1,"form-control","form-control-sm"],["disabled","",3,"ngValue"],["type","text","formControlName","txtBillingCycle","id","txtBillingCycle","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["type","checkbox","formControlName","ckCustomerarea","id","ckCustomerarea",1,"form-control",3,"change"],["type","text","formControlName","txtNewLotNo","id","txtNewLotNo","autocomplete","off","placeholder","","readonly","",1,"form-control","form-control-sm"],["formControlName","cbLocation","id","cbLocation",1,"form-control","form-control-sm"],["formControlName","cbLabourContractor","id","cbLabourContractor",1,"form-control","form-control-sm"],["formControlName","cbRemarks","id","cbRemarks",1,"form-control","form-control-sm"],[1,"card"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs"],["type","button",1,"btn","btn-primary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],["label","Product Detail List"],[1,"col-12"],[2,"height","400px",3,"data","columns","loading","columnResizable","multiSelectable","rowSelectable","hideRowSelectionCheckbox","rowHover","rowStriped","showToolbar","toolbarTitle","columnHideable","columnMovable","expandable","pageOnFront","showPaginator","pageSizeOptions","pageIndex","dblclick"],["gridTransferDetailList",""],["type","submit",1,"btn","btn-primary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"hidden","value"],["label","Transfer List"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],["disabled","",3,"value"]],template:function(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"mat-card"),d.TgZ(3,"mat-tab-group",2),d.NdJ("selectedIndexChange",function(e){return t.tabchange(e)})("selectedIndexChange",function(e){return t.tab=e}),d.TgZ(4,"mat-tab",3),d.TgZ(5,"form",4),d.NdJ("ngSubmit",function(){return t.OnSaveTransfer(t.form)}),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"div",7),d.TgZ(9,"div",8),d.TgZ(10,"label"),d._uU(11,"Customer Name"),d.qZA(),d.TgZ(12,"select",9),d.NdJ("change",function(e){return t.GetCustomerID(e)}),d.TgZ(13,"option",10),d._uU(14,"Select "),d.qZA(),d.YNc(15,be,2,2,"option",11),d.qZA(),d.YNc(16,Ne,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(17,"div",13),d.TgZ(18,"div",8),d.TgZ(19,"label",14),d._uU(20,"Transfer Date"),d.qZA(),d._UZ(21,"input",15),d.ALo(22,"date"),d.YNc(23,Ae,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(24,"div",16),d.TgZ(25,"div",8),d.TgZ(26,"label",14),d._uU(27,"Transfer No"),d.qZA(),d._UZ(28,"input",17),d.YNc(29,Le,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(30,"div",18),d.TgZ(31,"div",8),d.TgZ(32,"label"),d._uU(33,"To Customer"),d.qZA(),d.TgZ(34,"select",19),d.TgZ(35,"option",10),d._uU(36,"Select "),d.qZA(),d.YNc(37,xe,2,2,"option",11),d.qZA(),d.YNc(38,_e,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(39,"div",13),d.TgZ(40,"div",8),d.TgZ(41,"label",14),d._uU(42,"Order Given By"),d.qZA(),d._UZ(43,"input",20),d.YNc(44,Oe,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(45,"div",13),d.TgZ(46,"div",8),d.TgZ(47,"label",14),d._uU(48,"Remarks"),d.qZA(),d._UZ(49,"input",21),d.YNc(50,Ue,2,1,"div",12),d.qZA(),d.qZA(),d.TgZ(51,"div",22),d._UZ(52,"hr"),d.TgZ(53,"p",23),d._uU(54,"Product List"),d.qZA(),d.TgZ(55,"div",24),d.TgZ(56,"ag-grid-angular",25),d.NdJ("rowDoubleClicked",function(e){return t.onProductListRowClicked(e)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(57,"div",22),d._UZ(58,"hr"),d.TgZ(59,"mat-card"),d.TgZ(60,"mat-tab-group",2),d.NdJ("selectedIndexChange",function(e){return t.TransferDetailtab=e}),d.TgZ(61,"mat-tab",26),d.TgZ(62,"div",6),d.TgZ(63,"div",27),d.TgZ(64,"div",28),d.TgZ(65,"div",18),d.TgZ(66,"div",8),d.TgZ(67,"label"),d._uU(68,"Lot No"),d.qZA(),d._UZ(69,"input",29),d.qZA(),d.qZA(),d.TgZ(70,"div",18),d.TgZ(71,"div",8),d.TgZ(72,"label"),d._uU(73,"Product Name"),d.qZA(),d.TgZ(74,"select",30),d.TgZ(75,"option",10),d._uU(76,"Select "),d.qZA(),d.YNc(77,Pe,2,2,"option",31),d.qZA(),d.qZA(),d.qZA(),d.TgZ(78,"div",18),d.TgZ(79,"div",8),d.TgZ(80,"label"),d._uU(81,"Balance Qty"),d.qZA(),d._UZ(82,"input",32),d.qZA(),d.qZA(),d.TgZ(83,"div",18),d.TgZ(84,"div",8),d.TgZ(85,"label"),d._uU(86,"Brand"),d.qZA(),d._UZ(87,"input",33),d.qZA(),d.qZA(),d.TgZ(88,"div",18),d.TgZ(89,"div",8),d.TgZ(90,"label"),d._uU(91,"Transfer Qty"),d.qZA(),d.TgZ(92,"input",34,35),d.NdJ("keyup",function(){d.CHM(e);const r=d.MAs(93);return t.onKeyTransferQty(r.value)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(94,"div",18),d.TgZ(95,"div",8),d.TgZ(96,"label"),d._uU(97,"Count"),d.qZA(),d._UZ(98,"input",36),d.qZA(),d.qZA(),d.TgZ(99,"div",18),d.TgZ(100,"div",8),d.TgZ(101,"label"),d._uU(102,"Storage Type"),d.qZA(),d.TgZ(103,"select",37),d._UZ(104,"option",38),d.YNc(105,Be,2,2,"option",31),d.qZA(),d.qZA(),d.qZA(),d.TgZ(106,"div",18),d.TgZ(107,"div",8),d.TgZ(108,"label"),d._uU(109,"Billing Cycle"),d.qZA(),d._UZ(110,"input",39),d.qZA(),d.qZA(),d.TgZ(111,"div",18),d.TgZ(112,"div",8),d.TgZ(113,"label"),d._uU(114,"Use To Customer Area"),d.qZA(),d.TgZ(115,"input",40),d.NdJ("change",function(e){return t.OnCustomerarea(e)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(116,"div",18),d.TgZ(117,"div",8),d.TgZ(118,"label"),d._uU(119,"New Lot No"),d.qZA(),d._UZ(120,"input",41),d.qZA(),d.qZA(),d.TgZ(121,"div",18),d.TgZ(122,"div",8),d.TgZ(123,"label"),d._uU(124,"Location"),d.qZA(),d.TgZ(125,"select",42),d._UZ(126,"option",38),d.YNc(127,Qe,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(128,"div",18),d.TgZ(129,"div",8),d.TgZ(130,"label"),d._uU(131,"Labour Contractor"),d.qZA(),d.TgZ(132,"select",43),d._UZ(133,"option",38),d.YNc(134,Re,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.TgZ(135,"div",22),d.TgZ(136,"div",8),d.TgZ(137,"label"),d._uU(138,"Remarks"),d.qZA(),d.TgZ(139,"select",44),d._UZ(140,"option",38),d.YNc(141,Je,2,2,"option",11),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(142,"div",13),d.TgZ(143,"div",45),d._UZ(144,"ag-grid-angular",46),d.qZA(),d.qZA(),d.TgZ(145,"div",27),d.TgZ(146,"div",8),d.TgZ(147,"button",47),d.NdJ("click",function(){return t.OnAddClick()}),d._uU(148,"Add"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(149,"mat-tab",48),d.TgZ(150,"div",49),d._UZ(151,"hr"),d.TgZ(152,"mtx-grid",50,51),d.NdJ("dblclick",function(r){d.CHM(e);const i=d.MAs(153);return t.onRowDblclickedTransfer(i,r)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(154,"div",27),d.TgZ(155,"div",8),d.TgZ(156,"button",52),d._uU(157," Save "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(158,"mat-tab",53),d.TgZ(159,"div",24),d._UZ(160,"ag-grid-angular",54),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(3),d.Q6J("selectedIndex",t.tab),d.xp6(2),d.Q6J("formGroup",t.form),d.xp6(7),d.Q6J("ngClass",d.VKq(55,Me,t.submitted&&t.f.cbCustomerID.invalid)),d.xp6(3),d.Q6J("ngForOf",t.customerList),d.xp6(1),d.Q6J("ngIf",t.submitted&&t.f.cbCustomerID.invalid),d.xp6(5),d.Q6J("ngModel",d.xi3(22,52,t.todayDate,"yyyy-MM-dd hh:mm:ss")),d.xp6(2),d.Q6J("ngIf",t.submitted&&t.f.Transfer_date.invalid),d.xp6(6),d.Q6J("ngIf",t.submitted&&t.f.txtTransfeNo.invalid),d.xp6(5),d.Q6J("ngClass",d.VKq(57,Me,t.submitted&&t.f.cbToCustomerID.invalid)),d.xp6(3),d.Q6J("ngForOf",t.customerList),d.xp6(1),d.Q6J("ngIf",t.submitted&&t.f.cbToCustomerID.invalid),d.xp6(5),d.Q6J("ngClass",d.VKq(59,Me,t.submitted&&t.form.controls.txtOrderGivenBy.errors)),d.xp6(1),d.Q6J("ngIf",t.submitted&&t.f.txtOrderGivenBy.invalid),d.xp6(6),d.Q6J("ngIf",t.submitted&&t.f.txtRemarks.invalid),d.xp6(6),d.Q6J("rowData",t.ProductList)("columnDefs",t.ShiftingProductListCol)("rowSelection","single"),d.xp6(4),d.Q6J("selectedIndex",t.TransferDetailtab),d.xp6(17),d.Q6J("ngForOf",t.ProductNameList),d.xp6(27),d.Q6J("ngValue",null),d.xp6(1),d.Q6J("ngForOf",t.StorageAreaTypeList),d.xp6(21),d.Q6J("ngValue",null),d.xp6(1),d.Q6J("ngForOf",t.LocationList),d.xp6(6),d.Q6J("ngValue",null),d.xp6(1),d.Q6J("ngForOf",t.labourContractorList),d.xp6(6),d.Q6J("ngValue",null),d.xp6(1),d.Q6J("ngForOf",t.remarkList),d.xp6(3),d.Q6J("rowData",t.TransferServiceList)("columnDefs",t.serviceColumns),d.xp6(8),d.Q6J("data",t.TransferDetailsList)("columns",t.TransferDetailColumns)("loading",!1)("columnResizable",!1)("multiSelectable",!1)("rowSelectable",!1)("hideRowSelectionCheckbox",!1)("rowHover",!0)("rowStriped",!1)("showToolbar",!1)("toolbarTitle","Detail List")("columnHideable",!1)("columnMovable",!0)("expandable",!1)("pageOnFront",!0)("showPaginator",!1)("pageSizeOptions",d.DdM(61,Ye))("pageIndex",0),d.xp6(4),d.Q6J("hidden",!t.HideSaveButton)("value",t.submitted),d.xp6(4),d.Q6J("rowData",t.TransferList)("columnDefs",t.TransferListColumnDefs)("frameworkComponents",t.frameworkComponents))},directives:[m.xw,m.yH,f.a8,g.SP,g.uX,n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,s.mk,p.oO,n.YN,n.Kr,s.sg,s.O5,n.Fj,I.N8,n.Wl,v.CM],pipes:[s.uU],styles:[""]}),e})()}];let Ge=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[o.Bz.forChild(Ee)],o.Bz]}),e})(),We=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[i.m,ne.Is,Ge,I.sF.withComponents([])]]}),e})()}}]);