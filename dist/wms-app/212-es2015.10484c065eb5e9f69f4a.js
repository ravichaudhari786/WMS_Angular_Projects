"use strict";(self.webpackChunkwms_app=self.webpackChunkwms_app||[]).push([[212],{5212:function(e,t,o){o.r(t),o.d(t,{UserManagementModule:function(){return K}});var s=o(38583),i=o(66269),r=o(63423),a=o(64762),n=o(3679),l=o(1527),m=(o(52107),o(48923)),u=o(37716),d=o(99603),c=o(35618),h=o(93738),p=o(65939),f=o(88030),g=o(25239);function C(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Enter User Name"),u.qZA())}function y(e,t){if(1&e&&(u.TgZ(0,"div",29),u.YNc(1,C,2,0,"div",30),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.txtUserName.errors?null:e.f.txtUserName.errors.required)}}function Z(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Enter User Name"),u.qZA())}function U(e,t){if(1&e&&(u.TgZ(0,"div",29),u.YNc(1,Z,2,0,"div",30),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.txtUserDeatail.errors?null:e.f.txtUserDeatail.errors.required)}}function b(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Enter User Name"),u.qZA())}function v(e,t){if(1&e&&(u.TgZ(0,"div",29),u.YNc(1,b,2,0,"div",30),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.txtPassword.errors?null:e.f.txtPassword.errors.required)}}function D(e,t){if(1&e&&(u.TgZ(0,"option",31),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.UserTypeID),u.xp6(1),u.hij(" ",e.UserType1," ")}}function I(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Enter User Name"),u.qZA())}function x(e,t){if(1&e&&(u.TgZ(0,"div",29),u.YNc(1,I,2,0,"div",30),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.txtUserType.errors?null:e.f.txtUserType.errors.required)}}function N(e,t){if(1&e&&(u.TgZ(0,"option",31),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.RoleID),u.xp6(1),u.hij("",e.RoleName," ")}}function T(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Enter User Name"),u.qZA())}function q(e,t){if(1&e&&(u.TgZ(0,"div",29),u.YNc(1,T,2,0,"div",30),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.cbRole.errors?null:e.f.cbRole.errors.required)}}function A(e,t){if(1&e&&(u.TgZ(0,"option",31),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.CompanyID),u.xp6(1),u.hij(" ",e.CompanyName," ")}}function W(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Select Company Name"),u.qZA())}function L(e,t){if(1&e&&(u.TgZ(0,"div",29),u.YNc(1,W,2,0,"div",30),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.cbCompany.errors?null:e.f.cbCompany.errors.required)}}function w(e,t){if(1&e&&(u.TgZ(0,"option",31),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.WareHouseID),u.xp6(1),u.hij(" ",e.WareHouseName," ")}}function R(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Select Warehouse"),u.qZA())}function _(e,t){if(1&e&&(u.TgZ(0,"div",29),u.YNc(1,R,2,0,"div",30),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.cbWarehouse.errors?null:e.f.cbWarehouse.errors.required)}}const J=function(e){return{"is-invalid":e}};function k(e,t){if(1&e&&(u.TgZ(0,"option",25),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.UserID),u.xp6(1),u.hij(" ",e.UserName," ")}}function S(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Select User Name"),u.qZA())}function F(e,t){if(1&e&&(u.TgZ(0,"div",26),u.YNc(1,S,2,0,"div",27),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.UserName.errors?null:e.f.UserName.errors.required)}}function G(e,t){if(1&e&&(u.TgZ(0,"option",25),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.CompanyID),u.xp6(1),u.hij(" ",e.CompanyName," ")}}function Q(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Select WareHouse Name"),u.qZA())}function E(e,t){if(1&e&&(u.TgZ(0,"div",26),u.YNc(1,Q,2,0,"div",27),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.CompanyName.errors?null:e.f.CompanyName.errors.required)}}const Y=function(e){return{"is-invalid":e}};function B(e,t){if(1&e&&(u.TgZ(0,"option",15),u._uU(1),u.qZA()),2&e){const e=t.$implicit;u.s9C("value",e.RoleID),u.xp6(1),u.hij(" ",e.RoleName," ")}}function O(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Select User Name"),u.qZA())}function H(e,t){if(1&e&&(u.TgZ(0,"div",16),u.YNc(1,O,2,0,"div",17),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",null==e.f.RoleNames.errors?null:e.f.RoleNames.errors.required)}}const M=function(e){return{"is-invalid":e}},P=[{path:"Users",component:(()=>{class e{constructor(e,t,o){this.fb=e,this.api=t,this.dialog=o,this.submitted=!1,this.UserTypeList=[],this.RoleList=[],this.WarehouseList=[],this.CompanyMasterList=[],this.UsersList=[],this.tab=0,this.UserIDs=0,this.CompanyWarehouseGridList=[],this.FinalCompanyWarehouseList=[],this.CompanyWarehouseList=[],this.GetUserDetailList=[],this.CompanyWarehouseListID=0,this.CompanyWareEditID=0,this.UserListcolumns=[{headerName:"Action",floatingFilter:!1,maxWidth:150,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnUsersActions.bind(this)}},{field:"UserID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{field:"UserName",filter:"agTextColumnFilter",floatingFilter:!0},{field:"UserDetail",filter:"agTextColumnFilter",floatingFilter:!0},{field:"Password",filter:"agTextColumnFilter",floatingFilter:!0},{field:"RoleName",filter:"agTextColumnFilter",floatingFilter:!0},{field:"UserType",filter:"agTextColumnFilter",floatingFilter:!0}],this.CompanyWarehouseGrid=[{field:"CompanyWarehouseListID",hide:!0},{field:"CompanyName",width:220},{field:"WareHouseName",width:220},{field:"CompanyID",hide:!0},{field:"WareHouseID",hide:!0}],this.dattyy=[{$id:"2",route:"Accounts",name:"Accounts",type:"sub",icon:"settings",badge:null,children:[{$id:"3",route:"AdditionalServices",name:"AdditionalServices",type:"link"},{$id:"4",route:"BillProcess",name:"BillProcess",type:"link"},{$id:"5",route:"Receipt",name:"Receipt",type:"link"}],permissions:null,label:null},{$id:"33",route:"Reports",name:"Reports",type:"sub",icon:"build",badge:null,children:[{$id:"34",route:"Bill Estimate",name:"Bill Estimate",type:"link"},{$id:"35",route:"EmailSchedule",name:"EmailSchedule",type:"link"},{$id:"36",route:"lotsearch",name:"lotsearch",type:"link"},{$id:"37",route:"Report",name:"Report",type:"link"}],permissions:null,label:null},{$id:"43",route:"Rate Management",name:"Rate Management",type:"sub",icon:"settings",badge:null,children:[{$id:"44",route:"RateList",name:"RateList",type:"link"},{$id:"45",route:"SpecialRates",name:"SpecialRates",type:"link"}],permissions:null,label:null}],this.frameworkComponents={buttonRenderer:m.J}}ngOnInit(){this.MyMenus=this.api.getCurrentMenusForButton("UserCompany"),this.currentUser=this.api.getCurrentUser(),this.form=this.fb.group({txtUserName:["",n.kI.required],txtUserDeatail:["",n.kI.required],txtUserType:[null,n.kI.required],txtPassword:["",n.kI.required],cbRole:[null,n.kI.required],cbCompany:[null],cbWarehouse:[null]}),this.BindDropdown(),this.UserSelectList()}UserSelectList(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/Users/Users_Select").subscribe(e=>{this.UsersList=e},e=>{console.error(e)})})}get f(){return this.form.controls}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/Users/UserType_List").subscribe(e=>{this.UserTypeList=e},e=>{console.error(e)}),this.api.get("/Users/Role_List").subscribe(e=>{this.RoleList=e},e=>{console.error(e)}),this.api.get("/Users/Warehouse_List").subscribe(e=>{this.WarehouseList=e},e=>{console.error(e)}),this.api.get("/Users/CompanyMaster_List").subscribe(e=>{this.CompanyMasterList=e},e=>{console.error(e)})})}onSubmit(e){var t;this.submitted=!0,this.form.invalid||(0==this.CompanyWarehouseGridList.length?(null===(t=null==document?void 0:document.getElementById("cbCompany"))||void 0===t||t.focus(),this.dialog.alert("Please Add Company and Warehouse......!!!")):(this.FinalCompanyWarehouseList=[],this.CompanyWarehouseGridList.forEach(e=>{this.FinalCompanyWarehouseList.push({CompanyID:e.CompanyID,WarehouseID:e.WareHouseID})}),this.api.post("/Users/Users_Insert",{UserID:this.UserIDs,UserName:this.form.controls.txtUserName.value,UserDetail:this.form.controls.txtUserDeatail.value,Password:this.form.controls.txtPassword.value,RoleID:this.form.controls.cbRole.value,UserTypeID:this.form.controls.txtUserType.value,CreatedBy:this.currentUser.userId,Lcls_TD_Users:this.FinalCompanyWarehouseList}).subscribe(e=>{this.dialog.alert(e.Table[0].message),this.OnResetActions()},e=>{console.error(e)})))}tabCustomerchange(e){this.tab=e,1==e&&this.UserSelectList()}OnAdd(){var e,t;if(null==this.form.controls.cbCompany.value)null===(e=null==document?void 0:document.getElementById("cbCompany"))||void 0===e||e.focus(),this.dialog.alert("Select Company Name...!!!");else if(null==this.form.controls.cbWarehouse.value)null===(t=null==document?void 0:document.getElementById("cbWarehouse"))||void 0===t||t.focus(),this.dialog.alert("Select Warehouse Name...!!!");else{this.CompanyWarehouseGridList=[];const e=this.CompanyWarehouseList.filter(e=>e.CompanyWarehouseListID!=this.CompanyWareEditID);this.CompanyWarehouseList=[],this.CompanyWarehouseList=e;const t=this.CompanyMasterList.filter(e=>e.CompanyID==Number(this.form.controls.cbCompany.value)),o=this.WarehouseList.filter(e=>e.WareHouseID==Number(this.form.controls.cbWarehouse.value));this.CompanyWarehouseListID=this.CompanyWarehouseListID+1,this.CompanyWarehouseList.push({CompanyWarehouseListID:this.CompanyWarehouseListID,CompanyName:t[0].CompanyName,WareHouseName:o[0].WareHouseName,CompanyID:t[0].CompanyID,WareHouseID:o[0].WareHouseID}),this.form.controls.cbCompany.reset(),this.form.controls.cbWarehouse.reset(),this.CompanyWarehouseGridList=this.CompanyWarehouseList.slice()}}OnResetActions(){window.location.reload()}OnUsersActions(e){console.log("OnUsersActions",e.rowData),"Delete"==String(e.actions)||"Edit"==String(e.actions)&&this.api.get("/Users/Get_UserDetail?UserID="+String(e.rowData.UserID)).subscribe(t=>{this.GetUserDetailList=t,this.CompanyWarehouseListID=1;const o=this.RoleList.filter(t=>t.RoleName==e.rowData.RoleName);this.UserIDs=e.rowData.UserID,this.CompanyWarehouseList=[],this.CompanyWarehouseGridList=[];const s=this.UserTypeList.filter(t=>t.UserType1==e.rowData.UserType);this.GetUserDetailList.forEach(e=>{const t=this.CompanyMasterList.filter(t=>t.CompanyName==e.CompanyName),o=this.WarehouseList.filter(t=>t.WareHouseName==e.WareHouseName);this.CompanyWarehouseListID=this.CompanyWarehouseListID+1,this.CompanyWarehouseList.push({CompanyWarehouseListID:this.CompanyWarehouseListID,CompanyName:t[0].CompanyName,WareHouseName:o[0].WareHouseName,CompanyID:t[0].CompanyID,WareHouseID:o[0].WareHouseID})}),this.form.setValue({txtUserName:e.rowData.UserName,txtUserDeatail:e.rowData.UserDetail,txtUserType:s[0].UserTypeID,txtPassword:e.rowData.Password,cbRole:o[0].RoleID,cbCompany:0,cbWarehouse:0}),this.CompanyWarehouseGridList=this.CompanyWarehouseList.slice(),console.log("CompanyWarehouseGridList",this.CompanyWarehouseGridList),this.tab=0},e=>{console.error(e)})}concatedString(e,t){return String(e)+"/"+String(t)}CompanyDoubleclick(e){console.log("CompanyDoubleclick",e.data),this.CompanyWareEditID=e.data.CompanyWarehouseListID,this.form.controls.cbCompany.setValue(e.data.CompanyID),this.form.controls.cbWarehouse.setValue(e.data.WareHouseID)}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.qu),u.Y36(l.sM),u.Y36(d.cP))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-users"]],decls:79,vars:39,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",3,"selectedIndex","selectedIndexChange"],["label","Users Details"],[3,"formGroup","ngSubmit"],[1,"row","pt-2"],[1,"col-sm-7","col-md-7"],[1,"row"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["type","text","formControlName","txtUserName","id","txtUserName","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","txtUserDeatail","id","txtUserDeatail","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-sm-4","col-md-4"],["type","text","formControlName","txtPassword","id","txtPassword","autocomplete","off",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","txtUserType","id","txtUserType",1,"form-control","form-control-sm",3,"ngClass"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","cbRole","id","cbRole",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","cbCompany","id","cbCompany",1,"form-control","form-control-sm",3,"ngClass"],["formControlName","cbWarehouse","id","cbWarehouse",1,"form-control","form-control-sm",3,"ngClass"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],[1,"col-sm-5","col-md-5"],[1,"ag-theme-alpine",2,"height","250px",3,"rowData","columnDefs","rowDoubleClicked"],["type","submit",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important"],["label","Users List"],[1,"container-fluid"],[2,"height","100%","box-sizing","border-box"],[1,"ag-theme-alpine",2,"height","450px",3,"rowData","columnDefs","frameworkComponents"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"mat-card"),u.TgZ(3,"mat-tab-group",2),u.NdJ("selectedIndexChange",function(e){return t.tabCustomerchange(e)})("selectedIndexChange",function(e){return t.tab=e}),u.TgZ(4,"mat-tab",3),u.TgZ(5,"form",4),u.NdJ("ngSubmit",function(){return t.onSubmit(t.form)}),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u.TgZ(8,"div",7),u.TgZ(9,"div",8),u.TgZ(10,"div",9),u.TgZ(11,"label"),u._uU(12,"User Name"),u.qZA(),u._UZ(13,"input",10),u.YNc(14,y,2,1,"div",11),u.qZA(),u.qZA(),u.TgZ(15,"div",8),u.TgZ(16,"div",9),u.TgZ(17,"label"),u._uU(18,"User Details"),u.qZA(),u._UZ(19,"input",12),u.YNc(20,U,2,1,"div",11),u.qZA(),u.qZA(),u.TgZ(21,"div",13),u.TgZ(22,"div",9),u.TgZ(23,"label"),u._uU(24,"Password"),u.qZA(),u._UZ(25,"input",14),u.YNc(26,v,2,1,"div",11),u.qZA(),u.qZA(),u.TgZ(27,"div",13),u.TgZ(28,"div",9),u.TgZ(29,"label"),u._uU(30,"User Type"),u.qZA(),u.TgZ(31,"select",15),u.TgZ(32,"option",16),u._uU(33,"Select "),u.qZA(),u.YNc(34,D,2,2,"option",17),u.qZA(),u.YNc(35,x,2,1,"div",11),u.qZA(),u.qZA(),u.TgZ(36,"div",13),u.TgZ(37,"div",9),u.TgZ(38,"label"),u._uU(39,"Role"),u.qZA(),u.TgZ(40,"select",18),u.TgZ(41,"option",16),u._uU(42,"Select "),u.qZA(),u.YNc(43,N,2,2,"option",17),u.qZA(),u.YNc(44,q,2,1,"div",11),u.qZA(),u.qZA(),u.TgZ(45,"div",13),u.TgZ(46,"div",9),u.TgZ(47,"label"),u._uU(48,"Company"),u.qZA(),u.TgZ(49,"select",19),u.TgZ(50,"option",16),u._uU(51,"Select "),u.qZA(),u.YNc(52,A,2,2,"option",17),u.qZA(),u.YNc(53,L,2,1,"div",11),u.qZA(),u.qZA(),u.TgZ(54,"div",13),u.TgZ(55,"div",9),u.TgZ(56,"label"),u._uU(57,"Warehouse"),u.qZA(),u.TgZ(58,"select",20),u.TgZ(59,"option",16),u._uU(60,"Select "),u.qZA(),u.YNc(61,w,2,2,"option",17),u.qZA(),u.YNc(62,_,2,1,"div",11),u.qZA(),u.qZA(),u.TgZ(63,"div",13),u.TgZ(64,"div",9),u.TgZ(65,"button",21),u.NdJ("click",function(){return t.OnAdd()}),u._uU(66,"Add"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(67,"div",22),u.TgZ(68,"ag-grid-angular",23),u.NdJ("rowDoubleClicked",function(e){return t.CompanyDoubleclick(e)}),u.qZA(),u.qZA(),u.qZA(),u.TgZ(69,"div",7),u.TgZ(70,"div",13),u.TgZ(71,"div",9),u.TgZ(72,"button",24),u._uU(73," Save "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(74,"mat-tab",25),u.TgZ(75,"div",5),u.TgZ(76,"div",26),u.TgZ(77,"div",27),u._UZ(78,"ag-grid-angular",28),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Q6J("selectedIndex",t.tab),u.xp6(2),u.Q6J("formGroup",t.form),u.xp6(8),u.Q6J("ngClass",u.VKq(25,J,t.submitted&&t.f.txtUserName.invalid)),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.txtUserName.invalid),u.xp6(5),u.Q6J("ngClass",u.VKq(27,J,t.submitted&&t.f.txtUserDeatail.invalid)),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.txtUserDeatail.invalid),u.xp6(5),u.Q6J("ngClass",u.VKq(29,J,t.submitted&&t.f.txtPassword.invalid)),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.txtPassword.invalid),u.xp6(5),u.Q6J("ngClass",u.VKq(31,J,t.submitted&&t.f.txtUserType.invalid)),u.xp6(3),u.Q6J("ngForOf",t.UserTypeList),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.txtUserType.invalid),u.xp6(5),u.Q6J("ngClass",u.VKq(33,J,t.submitted&&t.f.cbRole.invalid)),u.xp6(3),u.Q6J("ngForOf",t.RoleList),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.cbRole.invalid),u.xp6(5),u.Q6J("ngClass",u.VKq(35,J,t.submitted&&t.f.cbCompany.invalid)),u.xp6(3),u.Q6J("ngForOf",t.CompanyMasterList),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.cbCompany.invalid),u.xp6(5),u.Q6J("ngClass",u.VKq(37,J,t.submitted&&t.f.cbWarehouse.invalid)),u.xp6(3),u.Q6J("ngForOf",t.WarehouseList),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.cbWarehouse.invalid),u.xp6(6),u.Q6J("rowData",t.CompanyWarehouseGridList)("columnDefs",t.CompanyWarehouseGrid),u.xp6(10),u.Q6J("rowData",t.UsersList)("columnDefs",t.UserListcolumns)("frameworkComponents",t.frameworkComponents))},directives:[c.xw,c.yH,h.a8,p.SP,p.uX,n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,s.mk,f.oO,s.O5,n.EJ,n.YN,n.Kr,s.sg,g.N8],styles:[""]}),e})()},{path:"UserCompany",component:(()=>{class e{constructor(e,t,o){this.fb=e,this.api=t,this.dialog=o,this.tab=0,this.submitted=!1,this.UsersList=[],this.WarehouseList=[],this.CompanyMasterList=[],this.CompanyWarehouseGridList=[],this.FinalCompanyWarehouseGridList=[],this.CompanyWarehouseList=[],this.UserCompanyData=[],this.UserCompanyIDs=0,this.CompanyWarehouseGrid=[{field:"UserID",hide:!0},{field:"UserName",width:220},{field:"CompanyID",hide:!0},{field:"ComapanyName",hide:!1},{field:"WarehouseID",hide:!0},{field:"WarehouseName",hide:!1}],this.UserCompanyGrid=[{headerName:"Action",floatingFilter:!1,maxWidth:200,cellRenderer:"buttonRenderer",cellRendererParams:{onClick:this.OnUserCompanyActions.bind(this)}},{field:"UserCompanyID",hide:!0},{field:"UserID",hide:!0},{field:"UserName",hide:!1},{field:"CompanyID",hide:!0},{field:"CompanyName",hide:!1},{field:"WareHouseID",hide:!0},{field:"WareHouseName",hide:!1},{field:"CreatedDate",hide:!1}],this.WarehouseListColumns=[{field:"IsSelected",headerName:"Add",width:100,type:"checkbox",cellRenderer:e=>this.checkBoxCellEditRenderer(e)},{field:"WareHouseID",width:100,hide:!0},{field:"WareHouseName",width:220}],this.frameworkComponents={buttonRenderer:m.J}}ngOnInit(){this.currentUser=this.api.getCurrentUser(),this.MyMenus=this.api.getCurrentMenusForButton("Users"),this.form=this.fb.group({UserName:[0,n.kI.required],CompanyName:[0,n.kI.required]}),this.BindDropdown()}get f(){return this.form.controls}BindWarehouseGrid(e,t){return(0,a.mG)(this,void 0,void 0,function*(){this.api.post("/UserCompany/UserCompanyWareHouseList_select",{UserID:e,CompanyID:t}).subscribe(e=>{this.WarehouseList=[],this.WarehouseList=e},e=>{console.error(e)})})}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/Users/Users_Select").subscribe(e=>{this.UsersList=[],this.UsersList=e},e=>{console.error(e)}),this.api.get("/Users/CompanyMaster_List").subscribe(e=>{this.CompanyMasterList=[],this.CompanyMasterList=e},e=>{console.error(e)}),this.api.get("/UserCompany/UserCompanyList_select").subscribe(e=>{this.UserCompanyData=[],this.UserCompanyData=e},e=>{console.error(e)}),this.BindWarehouseGrid(0,0)})}onSubmit(e){this.submitted=!0,this.FinalCompanyWarehouseGridList=[],this.CompanyWarehouseGridList.forEach(e=>{this.FinalCompanyWarehouseGridList.push({UserID:e.UserID,CompanyID:e.CompanyID,WarehouseID:e.WarehouseID})});const t={UserCompanyID:this.UserCompanyIDs,LTD_UserCompany:this.FinalCompanyWarehouseGridList,CreatedBy:this.currentUser.userId};console.log("onSubmit",t),this.api.post("/UserCompany/UserCompany_Insert",t).subscribe(e=>{this.dialog.alert(e.Table[0].message),this.OnResetActions()},e=>{console.error(e)})}OnResetActions(){this.CompanyWarehouseList=[],this.FinalCompanyWarehouseGridList=[],this.CompanyWarehouseGridList=[],this.UserCompanyIDs=0,this.submitted=!1,this.tab=0,this.BindDropdown(),this.form.setValue({UserName:0,CompanyName:0})}checkBoxCellEditRenderer(e){const t=document.createElement("input");return t.type="checkbox",t.value="false",t.checked=e.value,t.addEventListener("click",t=>{if(e.setValue(1!=e.value),this.CompanyWarehouseGridList=[],this.form.invalid){const e=this.WarehouseList;this.WarehouseList=[],this.dialog.alert("Please Select User Name and Company name....!!!"),e.forEach(e=>{e.IsSelected=!1}),setTimeout(()=>(0,a.mG)(this,void 0,void 0,function*(){var t,o;this.WarehouseList=e,console.log("this.form.controls",this.form.controls),"INVALID"==this.form.controls.UserName.status?null===(t=null==document?void 0:document.getElementById("UserName"))||void 0===t||t.focus():"INVALID"==this.form.controls.CompanyName.status&&(null===(o=null==document?void 0:document.getElementById("CompanyName"))||void 0===o||o.focus())}),1e3)}else this.WarehouseList.forEach(e=>{if(1==e.IsSelected){const t=this.UsersList.filter(e=>e.UserID==Number(this.form.controls.UserName.value)),o=this.CompanyMasterList.filter(e=>e.CompanyID==Number(this.form.controls.CompanyName.value));this.CompanyWarehouseGridList.push({UserID:t[0].UserID,UserName:t[0].UserName,CompanyID:o[0].CompanyID,ComapanyName:o[0].CompanyName,WarehouseID:e.WareHouseID,WarehouseName:e.WareHouseName}),console.log("CompanyWarehouseGridList",this.CompanyWarehouseGridList)}})}),t}OnUserCompanyActions(e){if("Edit"==String(e.actions)){this.CompanyWarehouseGridList=[],this.UserCompanyIDs=e.rowData.UserCompanyID,this.form.setValue({UserName:e.rowData.UserID,CompanyName:e.rowData.CompanyID}),this.BindWarehouseGrid(e.rowData.UserID,e.rowData.CompanyID);const t={UserID:e.rowData.UserID,UserName:e.rowData.UserName,CompanyID:e.rowData.CompanyID,ComapanyName:e.rowData.CompanyName,WarehouseID:e.rowData.WareHouseID,WarehouseName:e.rowData.WareHouseName};this.tab=0,this.CompanyWarehouseGridList.push(t)}}tabchange(e){this.tab=e}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.qu),u.Y36(l.sM),u.Y36(d.cP))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-usercomapny"]],decls:42,vars:19,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",2,"overflow","hidden!important",3,"selectedIndex","selectedIndexChange"],["label","Users Comapny"],[3,"formGroup","ngSubmit"],[1,"row","pt-2"],[1,"col-sm-5","col-md-5"],[1,"row"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["formControlName","UserName","id","UserName",1,"form-control","form-control-sm",3,"ngClass"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","CompanyName","id","CompanyName",1,"form-control","form-control-sm",3,"ngClass"],[1,"col-sm-12","col-md-12"],[1,"ag-theme-alpine",2,"height","200px",3,"rowData","columnDefs"],[1,"col-sm-7","col-md-7"],[1,"ag-theme-alpine",2,"height","100%",3,"rowData","columnDefs"],[1,"col-sm-3","col-md-3"],["type","submit",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important"],[1,"col-sm-4","col-md-4"],["type","button",1,"btn","btn-secondary","btn-sm",2,"width","85px !important","margin-top","20px !important",3,"click"],["label","List"],[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","frameworkComponents"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"mat-card"),u.TgZ(3,"mat-tab-group",2),u.NdJ("selectedIndexChange",function(e){return t.tabchange(e)})("selectedIndexChange",function(e){return t.tab=e}),u.TgZ(4,"mat-tab",3),u.TgZ(5,"form",4),u.NdJ("ngSubmit",function(){return t.onSubmit(t.form)}),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u.TgZ(8,"div",7),u.TgZ(9,"div",8),u.TgZ(10,"div",9),u.TgZ(11,"label"),u._uU(12,"User Name"),u.qZA(),u.TgZ(13,"select",10),u.TgZ(14,"option",11),u._uU(15,"Select "),u.qZA(),u.YNc(16,k,2,2,"option",12),u.qZA(),u.YNc(17,F,2,1,"div",13),u.qZA(),u.qZA(),u.TgZ(18,"div",8),u.TgZ(19,"div",9),u.TgZ(20,"label"),u._uU(21,"Company Name"),u.qZA(),u.TgZ(22,"select",14),u.TgZ(23,"option",11),u._uU(24,"Select "),u.qZA(),u.YNc(25,G,2,2,"option",12),u.qZA(),u.YNc(26,E,2,1,"div",13),u.qZA(),u.qZA(),u.TgZ(27,"div",15),u._UZ(28,"ag-grid-angular",16),u.qZA(),u.qZA(),u.qZA(),u.TgZ(29,"div",17),u._UZ(30,"ag-grid-angular",18),u.qZA(),u.qZA(),u.TgZ(31,"div",5),u.TgZ(32,"div",19),u.TgZ(33,"button",20),u._uU(34," Save "),u.qZA(),u.qZA(),u.TgZ(35,"div",21),u.TgZ(36,"button",22),u.NdJ("click",function(){return t.OnResetActions()}),u._uU(37," Reset "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(38,"mat-tab",23),u.TgZ(39,"div",5),u.TgZ(40,"div",15),u._UZ(41,"ag-grid-angular",24),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Q6J("selectedIndex",t.tab),u.xp6(2),u.Q6J("formGroup",t.form),u.xp6(8),u.Q6J("ngClass",u.VKq(15,Y,t.submitted&&t.f.UserName.invalid)),u.xp6(3),u.Q6J("ngForOf",t.UsersList),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.UserName.invalid),u.xp6(5),u.Q6J("ngClass",u.VKq(17,Y,t.submitted&&t.f.CompanyName.invalid)),u.xp6(3),u.Q6J("ngForOf",t.CompanyMasterList),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.CompanyName.invalid),u.xp6(2),u.Q6J("rowData",t.WarehouseList)("columnDefs",t.WarehouseListColumns),u.xp6(2),u.Q6J("rowData",t.CompanyWarehouseGridList)("columnDefs",t.CompanyWarehouseGrid),u.xp6(11),u.Q6J("rowData",t.UserCompanyData)("columnDefs",t.UserCompanyGrid)("frameworkComponents",t.frameworkComponents))},directives:[c.xw,c.yH,h.a8,p.SP,p.uX,n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,s.mk,f.oO,n.YN,n.Kr,s.sg,s.O5,g.N8],styles:[""]}),e})()},{path:"RoleUI",component:(()=>{class e{constructor(e,t,o){this.fb=e,this.api=t,this.dialog=o,this.tab=0,this.RoleList=[],this.submitted=!1,this.RoleUISelect=[],this.ReportUISelect=[],this.LTD_RolesUI={RoleUIID:0,RoleID:0,UIMasterID:0,New_flg:!0,List_flg:!0,Edit_flg:!0,Delete_flg:!0,Print_flg:!0,Export_flg:!0},this.LTD_RoleReport={ReportID:0,isAssigned:!0},this.RoleUISelectGridColumn=[{field:"RoleID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{field:"UIMasterID",hide:!0,filter:"agTextColumnFilter",floatingFilter:!0},{field:"GroupName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{field:"DisplayName",hide:!1,filter:"agTextColumnFilter",floatingFilter:!0},{field:"New",hide:!1,width:80,type:"checkbox",cellRenderer:e=>this.checkBoxCellEditRenderer(e),filter:"agTextColumnFilter",floatingFilter:!0},{field:"List",hide:!1,width:80,type:"checkbox",cellRenderer:e=>this.checkBoxCellEditRenderer(e),filter:"agTextColumnFilter",floatingFilter:!0},{field:"Edit",hide:!1,width:80,type:"checkbox",cellRenderer:e=>this.checkBoxCellEditRenderer(e),filter:"agTextColumnFilter",floatingFilter:!0},{field:"Delete",hide:!1,width:80,type:"checkbox",cellRenderer:e=>this.checkBoxCellEditRenderer(e),filter:"agTextColumnFilter",floatingFilter:!0},{field:"Print",hide:!1,width:80,type:"checkbox",cellRenderer:e=>this.checkBoxCellEditRenderer(e),filter:"agTextColumnFilter",floatingFilter:!0},{field:"Export",hide:!1,width:80,type:"checkbox",cellRenderer:e=>this.checkBoxCellEditRenderer(e),filter:"agTextColumnFilter",floatingFilter:!0},{field:"RoleUIID",hide:!0}]}ngOnInit(){this.currentUser=this.api.getCurrentUser(),this.BindDropdown(),this.form=this.fb.group({RoleNames:[0,n.kI.required]})}get f(){return this.form.controls}tabchange(e){this.tab=e}BindDropdown(){return(0,a.mG)(this,void 0,void 0,function*(){this.api.get("/RoleUI/RolesList").subscribe(e=>{this.RoleList=[],this.RoleList=e},e=>{console.error(e)})})}onSubmit(e){this.submitted=!0}GetRoleDetails(e){const t={RoleID:Number(e.target.value),WarehouseID:this.currentUser.userId};this.api.post("/RoleUI/RoleUI_Select",t).subscribe(e=>{this.RoleUISelect=[],this.RoleUISelect=e.Table,this.ReportUISelect=[],this.ReportUISelect=e.Table1,console.log(e)},e=>{console.error(e)})}checkBoxCellEditRenderer(e){const t=document.createElement("input");return t.type="checkbox",t.value="false",t.checked=e.value,t.addEventListener("click",t=>{e.setValue(1!=e.value)}),t}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(n.qu),u.Y36(l.sM),u.Y36(d.cP))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-role-ui"]],decls:19,vars:9,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex","100",1,"matero-col"],["animationDuration","1ms",2,"overflow","hidden!important",3,"selectedIndex","selectedIndexChange"],["label","Role UI"],[3,"formGroup","ngSubmit"],[1,"row","pt-2"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["formControlName","RoleNames","id","RoleNames",1,"form-control","form-control-sm",3,"ngClass","change"],["value","null","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"col-sm-12","col-md-12"],[1,"ag-theme-alpine",2,"height","400px",3,"rowData","columnDefs"],["label","Report UI"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"mat-card"),u.TgZ(3,"mat-tab-group",2),u.NdJ("selectedIndexChange",function(e){return t.tabchange(e)})("selectedIndexChange",function(e){return t.tab=e}),u.TgZ(4,"mat-tab",3),u.TgZ(5,"form",4),u.NdJ("ngSubmit",function(){return t.onSubmit(t.form)}),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u.TgZ(8,"div",7),u.TgZ(9,"label"),u._uU(10,"User Name"),u.qZA(),u.TgZ(11,"select",8),u.NdJ("change",function(e){return t.GetRoleDetails(e)}),u.TgZ(12,"option",9),u._uU(13,"Select "),u.qZA(),u.YNc(14,B,2,2,"option",10),u.qZA(),u.YNc(15,H,2,1,"div",11),u.qZA(),u.qZA(),u.TgZ(16,"div",12),u._UZ(17,"ag-grid-angular",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(18,"mat-tab",14),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Q6J("selectedIndex",t.tab),u.xp6(2),u.Q6J("formGroup",t.form),u.xp6(6),u.Q6J("ngClass",u.VKq(7,M,t.submitted&&t.f.RoleNames.invalid)),u.xp6(3),u.Q6J("ngForOf",t.RoleList),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.RoleNames.invalid),u.xp6(2),u.Q6J("rowData",t.RoleUISelect)("columnDefs",t.RoleUISelectGridColumn))},directives:[c.xw,c.yH,h.a8,p.SP,p.uX,n._Y,n.JL,n.sg,n.EJ,n.JJ,n.u,s.mk,f.oO,n.YN,n.Kr,s.sg,s.O5,g.N8],styles:[""]}),e})()}];let V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.Bz.forChild(P)],r.Bz]}),e})();var $=o(22238);let K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.m,s.ez,V,$.Is,g.sF.withComponents([])]]}),e})()}}]);